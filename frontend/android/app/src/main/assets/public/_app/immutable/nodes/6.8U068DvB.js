import{s as Zt,e as k,a as P,c as y,b as _,g as z,f as d,l as o,i as E,h as u,v as Ht,D as Kt,k as Jt,o as Qt,B as D,t as M,C as L,d as A,p as me,j as we,m as nt,F as ie,n as ot,G as ze}from"../chunks/C6oXrJZt.js";import{S as Gt,i as er,c as te,a as re,m as le,t as X,b as Z,d as se,g as tr,e as rr,f as Ce}from"../chunks/Zi_cIJN_.js";import{C as lr}from"../chunks/CP0-fytT.js";import{C as sr}from"../chunks/DxZvhrWi.js";import{C as ar}from"../chunks/o6IJ7tp9.js";import{C as ir}from"../chunks/CsWsoBlu.js";import{C as or}from"../chunks/gU--zBIq.js";import{B as Tt}from"../chunks/C7UUfNEJ.js";import{O as nr,Q as dr,M as ur}from"../chunks/BQtyXYhr.js";import{g as it}from"../chunks/DVB1K4X6.js";import{a as fr}from"../chunks/CpPhVZOh.js";import{T as Ot}from"../chunks/CqnpH9aS.js";import{M as cr}from"../chunks/y53lLsyc.js";import{g as Ye}from"../chunks/RSIJn0f_.js";import{p as pr}from"../chunks/BxIVeE_E.js";import{f as mr}from"../chunks/CMfn5VrM.js";function hr({params:r}){return{id:r.id}}const Wr=Object.freeze(Object.defineProperty({__proto__:null,load:hr},Symbol.toStringTag,{value:"Module"}));function Vt(r){let t,e,l,s,a,c,v,b='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',n,f;return{c(){t=k("div"),e=D("svg"),l=D("path"),s=P(),a=M(r[12]),c=P(),v=k("button"),v.innerHTML=b,this.h()},l(m){t=y(m,"DIV",{class:!0});var h=_(t);e=L(h,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var x=_(e);l=L(x,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(l).forEach(d),x.forEach(d),s=z(h),a=A(h,r[12]),c=z(h),v=y(h,"BUTTON",{class:!0,"data-svelte-h":!0}),me(v)!=="svelte-1ri10av"&&(v.innerHTML=b),h.forEach(d),this.h()},h(){o(l,"fill-rule","evenodd"),o(l,"d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"),o(l,"clip-rule","evenodd"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class","h-5 w-5 mr-2"),o(e,"viewBox","0 0 20 20"),o(e,"fill","currentColor"),o(v,"class","ml-3 text-red-800 dark:text-red-300 hover:text-red-900 dark:hover:text-red-200"),o(t,"class","fixed top-5 right-5 z-50 bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800/50 text-red-800 dark:text-red-300 px-4 py-3 rounded-lg shadow-lg flex items-center animate-slide-in svelte-k08umy")},m(m,h){E(m,t,h),u(t,e),u(e,l),u(t,s),u(t,a),u(t,c),u(t,v),n||(f=Ht(v,"click",r[25]),n=!0)},p(m,h){h[0]&4096&&we(a,m[12])},d(m){m&&d(t),n=!1,f()}}}function br(r){let t;return{c(){t=M("Edit your post")},l(e){t=A(e,"Edit your post")},m(e,l){E(e,t,l)},d(e){e&&d(t)}}}function gr(r){let t;return{c(){t=M("Update the details about your mystery object")},l(e){t=A(e,"Update the details about your mystery object")},m(e,l){E(e,t,l)},d(e){e&&d(t)}}}function vr(r){let t,e,l,s;return t=new or({props:{class:"text-xl font-semibold text-neutral-900 dark:text-white",$$slots:{default:[br]},$$scope:{ctx:r}}}),l=new ar({props:{class:"text-sm mt-1 text-neutral-600 dark:text-neutral-400",$$slots:{default:[gr]},$$scope:{ctx:r}}}),{c(){te(t.$$.fragment),e=P(),te(l.$$.fragment)},l(a){re(t.$$.fragment,a),e=z(a),re(l.$$.fragment,a)},m(a,c){le(t,a,c),E(a,e,c),le(l,a,c),s=!0},p(a,c){const v={};c[1]&2048&&(v.$$scope={dirty:c,ctx:a}),t.$set(v);const b={};c[1]&2048&&(b.$$scope={dirty:c,ctx:a}),l.$set(b)},i(a){s||(X(t.$$.fragment,a),X(l.$$.fragment,a),s=!0)},o(a){Z(t.$$.fragment,a),Z(l.$$.fragment,a),s=!1},d(a){a&&d(e),se(t,a),se(l,a)}}}function _r(r){let t,e,l,s,a,c,v;return t=new sr({props:{class:"p-4 sm:p-6",$$slots:{default:[kr]},$$scope:{ctx:r}}}),s=new Tt({props:{variant:"default",disabled:r[9],class:"text-sm py-1 px-4 bg-teal-600 hover:bg-teal-700 text-white rounded-full",$$slots:{default:[Er]},$$scope:{ctx:r}}}),s.$on("click",r[22]),c=new Tt({props:{variant:"outline",class:"text-sm py-1 px-3 border-neutral-300 dark:border-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-full",$$slots:{default:[$r]},$$scope:{ctx:r}}}),c.$on("click",r[38]),{c(){te(t.$$.fragment),e=P(),l=k("div"),te(s.$$.fragment),a=P(),te(c.$$.fragment),this.h()},l(b){re(t.$$.fragment,b),e=z(b),l=y(b,"DIV",{class:!0});var n=_(l);re(s.$$.fragment,n),a=z(n),re(c.$$.fragment,n),n.forEach(d),this.h()},h(){o(l,"class","flex justify-start gap-3 border-t border-neutral-100 dark:border-neutral-800 p-4 sm:p-6 pt-4")},m(b,n){le(t,b,n),E(b,e,n),E(b,l,n),le(s,l,null),u(l,a),le(c,l,null),v=!0},p(b,n){const f={};n[0]&255103|n[1]&2048&&(f.$$scope={dirty:n,ctx:b}),t.$set(f);const m={};n[0]&512&&(m.disabled=b[9]),n[0]&512|n[1]&2048&&(m.$$scope={dirty:n,ctx:b}),s.$set(m);const h={};n[1]&2048&&(h.$$scope={dirty:n,ctx:b}),c.$set(h)},i(b){v||(X(t.$$.fragment,b),X(s.$$.fragment,b),X(c.$$.fragment,b),v=!0)},o(b){Z(t.$$.fragment,b),Z(s.$$.fragment,b),Z(c.$$.fragment,b),v=!1},d(b){b&&(d(e),d(l)),se(t,b),se(s),se(c)}}}function wr(r){let t,e='<div class="inline-block h-10 w-10 border-4 border-neutral-200 dark:border-neutral-800 border-t-teal-600 dark:border-t-teal-500 rounded-full animate-spin"></div>';return{c(){t=k("div"),t.innerHTML=e,this.h()},l(l){t=y(l,"DIV",{class:!0,"data-svelte-h":!0}),me(t)!=="svelte-dgksk"&&(t.innerHTML=e),this.h()},h(){o(t,"class","flex justify-center items-center py-16")},m(l,s){E(l,t,s)},p:ot,i:ot,o:ot,d(l){l&&d(t)}}}function jt(r){let t,e,l,s,a,c=r[10].auth+"",v,b,n,f="If you think this is a mistake, try logging out and logging back in.";return{c(){t=k("div"),e=k("div"),l=D("svg"),s=D("path"),a=P(),v=M(c),b=P(),n=k("p"),n.textContent=f,this.h()},l(m){t=y(m,"DIV",{class:!0});var h=_(t);e=y(h,"DIV",{class:!0});var x=_(e);l=L(x,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var V=_(l);s=L(V,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(s).forEach(d),V.forEach(d),a=z(x),v=A(x,c),x.forEach(d),b=z(h),n=y(h,"P",{class:!0,"data-svelte-h":!0}),me(n)!=="svelte-1a1n26r"&&(n.textContent=f),h.forEach(d),this.h()},h(){o(s,"fill-rule","evenodd"),o(s,"d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"),o(s,"clip-rule","evenodd"),o(l,"xmlns","http://www.w3.org/2000/svg"),o(l,"class","h-5 w-5 mr-2 flex-shrink-0"),o(l,"viewBox","0 0 20 20"),o(l,"fill","currentColor"),o(e,"class","flex items-center"),o(n,"class","text-xs text-red-700 dark:text-red-400 mt-2 ml-7"),o(t,"class","bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 p-3 rounded-md mb-4 border border-red-200 dark:border-red-800/50")},m(m,h){E(m,t,h),u(t,e),u(e,l),u(l,s),u(e,a),u(e,v),u(t,b),u(t,n)},p(m,h){h[0]&1024&&c!==(c=m[10].auth+"")&&we(v,c)},d(m){m&&d(t)}}}function Mt(r){let t,e,l,s,a,c=r[10].api+"",v,b,n,f="You might want to check your internet connection or try again in a few minutes.";return{c(){t=k("div"),e=k("div"),l=D("svg"),s=D("path"),a=P(),v=M(c),b=P(),n=k("p"),n.textContent=f,this.h()},l(m){t=y(m,"DIV",{class:!0});var h=_(t);e=y(h,"DIV",{class:!0});var x=_(e);l=L(x,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var V=_(l);s=L(V,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(s).forEach(d),V.forEach(d),a=z(x),v=A(x,c),x.forEach(d),b=z(h),n=y(h,"P",{class:!0,"data-svelte-h":!0}),me(n)!=="svelte-19p8qbg"&&(n.textContent=f),h.forEach(d),this.h()},h(){o(s,"fill-rule","evenodd"),o(s,"d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"),o(s,"clip-rule","evenodd"),o(l,"xmlns","http://www.w3.org/2000/svg"),o(l,"class","h-5 w-5 mr-2 flex-shrink-0"),o(l,"viewBox","0 0 20 20"),o(l,"fill","currentColor"),o(e,"class","flex items-center"),o(n,"class","text-xs text-red-700 dark:text-red-400 mt-2 ml-7"),o(t,"class","bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 p-3 rounded-md mb-4 border border-red-200 dark:border-red-800/50")},m(m,h){E(m,t,h),u(t,e),u(e,l),u(l,s),u(e,a),u(e,v),u(t,b),u(t,n)},p(m,h){h[0]&1024&&c!==(c=m[10].api+"")&&we(v,c)},d(m){m&&d(t)}}}function At(r){let t,e,l,s,a,c=r[10].mediaUpload+"",v,b,n,f="The rest of your changes have been saved. You can try uploading the media files again later.";return{c(){t=k("div"),e=k("div"),l=D("svg"),s=D("path"),a=P(),v=M(c),b=P(),n=k("p"),n.textContent=f,this.h()},l(m){t=y(m,"DIV",{class:!0});var h=_(t);e=y(h,"DIV",{class:!0});var x=_(e);l=L(x,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var V=_(l);s=L(V,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(s).forEach(d),V.forEach(d),a=z(x),v=A(x,c),x.forEach(d),b=z(h),n=y(h,"P",{class:!0,"data-svelte-h":!0}),me(n)!=="svelte-lmx5h1"&&(n.textContent=f),h.forEach(d),this.h()},h(){o(s,"fill-rule","evenodd"),o(s,"d","M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"),o(s,"clip-rule","evenodd"),o(l,"xmlns","http://www.w3.org/2000/svg"),o(l,"class","h-5 w-5 mr-2 flex-shrink-0"),o(l,"viewBox","0 0 20 20"),o(l,"fill","currentColor"),o(e,"class","flex items-center"),o(n,"class","text-xs text-yellow-700 dark:text-yellow-400 mt-1 ml-7"),o(t,"class","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 p-3 rounded-md mb-4 border border-yellow-200 dark:border-yellow-800/50")},m(m,h){E(m,t,h),u(t,e),u(e,l),u(l,s),u(e,a),u(e,v),u(t,b),u(t,n)},p(m,h){h[0]&1024&&c!==(c=m[10].mediaUpload+"")&&we(v,c)},d(m){m&&d(t)}}}function It(r){let t,e,l,s,a,c=r[10].subparts+"",v,b,n,f="Your post has been updated with the main changes. Try simplifying the object parts if they have too many details.";return{c(){t=k("div"),e=k("div"),l=D("svg"),s=D("path"),a=P(),v=M(c),b=P(),n=k("p"),n.textContent=f,this.h()},l(m){t=y(m,"DIV",{class:!0});var h=_(t);e=y(h,"DIV",{class:!0});var x=_(e);l=L(x,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var V=_(l);s=L(V,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(s).forEach(d),V.forEach(d),a=z(x),v=A(x,c),x.forEach(d),b=z(h),n=y(h,"P",{class:!0,"data-svelte-h":!0}),me(n)!=="svelte-1xg25jo"&&(n.textContent=f),h.forEach(d),this.h()},h(){o(s,"fill-rule","evenodd"),o(s,"d","M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"),o(s,"clip-rule","evenodd"),o(l,"xmlns","http://www.w3.org/2000/svg"),o(l,"class","h-5 w-5 mr-2 flex-shrink-0"),o(l,"viewBox","0 0 20 20"),o(l,"fill","currentColor"),o(e,"class","flex items-center"),o(n,"class","text-xs text-yellow-700 dark:text-yellow-400 mt-1 ml-7"),o(t,"class","bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 p-3 rounded-md mb-4 border border-yellow-200 dark:border-yellow-800/50")},m(m,h){E(m,t,h),u(t,e),u(e,l),u(l,s),u(e,a),u(e,v),u(t,b),u(t,n)},p(m,h){h[0]&1024&&c!==(c=m[10].subparts+"")&&we(v,c)},d(m){m&&d(t)}}}function Dt(r){let t,e=r[10].title+"",l;return{c(){t=k("p"),l=M(e),this.h()},l(s){t=y(s,"P",{class:!0});var a=_(t);l=A(a,e),a.forEach(d),this.h()},h(){o(t,"class","text-red-500 text-sm mt-1")},m(s,a){E(s,t,a),u(t,l)},p(s,a){a[0]&1024&&e!==(e=s[10].title+"")&&we(l,e)},d(s){s&&d(t)}}}function Lt(r){let t,e=r[10].description+"",l;return{c(){t=k("p"),l=M(e),this.h()},l(s){t=y(s,"P",{class:!0});var a=_(t);l=A(a,e),a.forEach(d),this.h()},h(){o(t,"class","text-red-500 text-sm mt-1")},m(s,a){E(s,t,a),u(t,l)},p(s,a){a[0]&1024&&e!==(e=s[10].description+"")&&we(l,e)},d(s){s&&d(t)}}}function Ft(r){let t,e=r[10].media+"",l;return{c(){t=k("p"),l=M(e),this.h()},l(s){t=y(s,"P",{class:!0});var a=_(t);l=A(a,e),a.forEach(d),this.h()},h(){o(t,"class","text-red-500 text-sm mt-2")},m(s,a){E(s,t,a),u(t,l)},p(s,a){a[0]&1024&&e!==(e=s[10].media+"")&&we(l,e)},d(s){s&&d(t)}}}function kr(r){let t,e,l,s,a,c,v=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path></svg>
                                Title*`,b,n,f,m,h,x,V,ae,$=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 2a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7zm0 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path></svg>
                                Description*`,F,H,I,ke,Ne,Se,oe,he,K,R,G,We,ye,Le=r[14].length+"",Be,Re,Xe,Te,J,Ze,Ke,Je,be,ge,ne,xe,Qe,g,j=r[2].length+"",p,de,Q,ue,fe,Oe,Ee,O,C,T,ee=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5" viewBox="0 0 20 20" fill="currentColor"><path d="M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"></path></svg>
                                Object Parts`,$e,ve,dt="You can add parts to your mystery object if it consists of multiple components.",Ge,Ue,_e,ut,et,Pe,Fe,wt=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path></svg>
                                Media Files*`,ft,ce,pe,ct,pt,mt,tt,He,S=r[10].auth&&jt(r),B=r[10].api&&Mt(r),U=r[10].mediaUpload&&At(r),q=r[10].subparts&&It(r);function St(i){r[26](i)}let kt={id:"title",class:"w-full p-3 border rounded-md text-sm bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-700 focus:ring-2 focus:ring-teal-500/30 focus:border-teal-500 "+(r[10].title?"border-red-500 dark:border-red-800":""),placeholder:"This is what people will see on their homepage so try to make it interesting"};r[1]!==void 0&&(kt.value=r[1]),f=new Ot({props:kt}),ie.push(()=>Ce(f,"value",St));let Y=r[10].title&&Dt(r);function Bt(i){r[28](i)}let yt={id:"description",class:"w-full p-3 border rounded-md text-sm bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-700 focus:ring-2 focus:ring-teal-500/30 focus:border-teal-500 min-h-[120px] "+(r[10].description?"border-red-500 dark:border-red-800":""),placeholder:"You can add any additional context about your object or how you came into possession of it."};r[4]!==void 0&&(yt.value=r[4]),I=new Ot({props:yt}),ie.push(()=>Ce(I,"value",Bt));let N=r[10].description&&Lt(r);function Ut(i){r[30](i)}function qt(i){r[31](i)}let ht={};r[13]!==void 0&&(ht.attributeValues=r[13]),r[14]!==void 0&&(ht.activeAttributes=r[14]),J=new nr({props:ht}),ie.push(()=>Ce(J,"attributeValues",Ut)),ie.push(()=>Ce(J,"activeAttributes",qt)),J.$on("update",r[19]),J.$on("valuechange",r[20]);function Yt(i){r[32](i)}function Nt(i){r[33](i)}let bt={};r[2]!==void 0&&(bt.tags=r[2]),r[3]!==void 0&&(bt.labels=r[3]),fe=new dr({props:bt}),ie.push(()=>Ce(fe,"tags",Yt)),ie.push(()=>Ce(fe,"labels",Nt));function Wt(i){r[34](i)}let xt={mysteryObjectId:r[6]};r[5]!==void 0&&(xt.subParts=r[5]),_e=new ur({props:xt}),ie.push(()=>Ce(_e,"subParts",Wt)),_e.$on("update",r[21]);function Rt(i){r[35](i)}function Xt(i){r[36](i)}let gt={};r[0]!==void 0&&(gt.mediaFiles=r[0]),r[10]!==void 0&&(gt.errors=r[10]),pe=new cr({props:gt}),ie.push(()=>Ce(pe,"mediaFiles",Rt)),ie.push(()=>Ce(pe,"errors",Xt)),pe.$on("update",r[18]);let W=r[10].media&&Ft(r);return{c(){S&&S.c(),t=P(),B&&B.c(),e=P(),U&&U.c(),l=P(),q&&q.c(),s=P(),a=k("div"),c=k("label"),c.innerHTML=v,b=P(),n=k("div"),te(f.$$.fragment),h=P(),Y&&Y.c(),x=P(),V=k("div"),ae=k("label"),ae.innerHTML=$,F=P(),H=k("div"),te(I.$$.fragment),Ne=P(),N&&N.c(),Se=P(),oe=k("div"),he=k("div"),K=k("div"),R=D("svg"),G=D("path"),We=M(`\r
                                    Object Attributes\r
                                    `),ye=k("span"),Be=M(Le),Re=M(" added"),Xe=P(),Te=k("div"),te(J.$$.fragment),Je=P(),be=k("div"),ge=k("div"),ne=D("svg"),xe=D("path"),Qe=M(`\r
                                    Tags\r
                                    `),g=k("span"),p=M(j),de=M(" added"),Q=P(),ue=k("div"),te(fe.$$.fragment),O=P(),C=k("div"),T=k("h3"),T.innerHTML=ee,$e=P(),ve=k("p"),ve.textContent=dt,Ge=P(),Ue=k("div"),te(_e.$$.fragment),et=P(),Pe=k("div"),Fe=k("h3"),Fe.innerHTML=wt,ft=P(),ce=k("div"),te(pe.$$.fragment),mt=P(),W&&W.c(),this.h()},l(i){S&&S.l(i),t=z(i),B&&B.l(i),e=z(i),U&&U.l(i),l=z(i),q&&q.l(i),s=z(i),a=y(i,"DIV",{class:!0});var w=_(a);c=y(w,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),me(c)!=="svelte-1xn0k1q"&&(c.innerHTML=v),b=z(w),n=y(w,"DIV",{});var Ve=_(n);re(f.$$.fragment,Ve),h=z(Ve),Y&&Y.l(Ve),Ve.forEach(d),w.forEach(d),x=z(i),V=y(i,"DIV",{class:!0});var je=_(V);ae=y(je,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),me(ae)!=="svelte-1bt27o3"&&(ae.innerHTML=$),F=z(je),H=y(je,"DIV",{});var Me=_(H);re(I.$$.fragment,Me),Ne=z(Me),N&&N.l(Me),Me.forEach(d),je.forEach(d),Se=z(i),oe=y(i,"DIV",{class:!0});var Ae=_(oe);he=y(Ae,"DIV",{class:!0});var Ie=_(he);K=y(Ie,"DIV",{class:!0});var De=_(K);R=L(De,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var Et=_(R);G=L(Et,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(G).forEach(d),Et.forEach(d),We=A(De,`\r
                                    Object Attributes\r
                                    `),ye=y(De,"SPAN",{class:!0});var vt=_(ye);Be=A(vt,Le),Re=A(vt," added"),vt.forEach(d),De.forEach(d),Xe=z(Ie),Te=y(Ie,"DIV",{class:!0});var $t=_(Te);re(J.$$.fragment,$t),$t.forEach(d),Ie.forEach(d),Je=z(Ae),be=y(Ae,"DIV",{class:!0});var rt=_(be);ge=y(rt,"DIV",{class:!0});var lt=_(ge);ne=L(lt,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var Pt=_(ne);xe=L(Pt,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(xe).forEach(d),Pt.forEach(d),Qe=A(lt,`\r
                                    Tags\r
                                    `),g=y(lt,"SPAN",{class:!0});var _t=_(g);p=A(_t,j),de=A(_t," added"),_t.forEach(d),lt.forEach(d),Q=z(rt),ue=y(rt,"DIV",{class:!0});var zt=_(ue);re(fe.$$.fragment,zt),zt.forEach(d),rt.forEach(d),Ae.forEach(d),O=z(i),C=y(i,"DIV",{class:!0});var qe=_(C);T=y(qe,"H3",{class:!0,"data-svelte-h":!0}),me(T)!=="svelte-177lb81"&&(T.innerHTML=ee),$e=z(qe),ve=y(qe,"P",{class:!0,"data-svelte-h":!0}),me(ve)!=="svelte-ga1ny"&&(ve.textContent=dt),Ge=z(qe),Ue=y(qe,"DIV",{class:!0});var Ct=_(Ue);re(_e.$$.fragment,Ct),Ct.forEach(d),qe.forEach(d),et=z(i),Pe=y(i,"DIV",{class:!0});var st=_(Pe);Fe=y(st,"H3",{class:!0,"data-svelte-h":!0}),me(Fe)!=="svelte-16qwq31"&&(Fe.innerHTML=wt),ft=z(st),ce=y(st,"DIV",{class:!0});var at=_(ce);re(pe.$$.fragment,at),mt=z(at),W&&W.l(at),at.forEach(d),st.forEach(d),this.h()},h(){o(c,"for","title"),o(c,"class","block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300 flex items-center"),o(a,"class","mb-4"),o(ae,"for","description"),o(ae,"class","block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300 flex items-center"),o(V,"class","mb-5"),o(G,"fill-rule","evenodd"),o(G,"d","M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z"),o(G,"clip-rule","evenodd"),o(R,"xmlns","http://www.w3.org/2000/svg"),o(R,"class","h-4 w-4 mr-1.5"),o(R,"viewBox","0 0 20 20"),o(R,"fill","currentColor"),o(ye,"class","ml-2 px-2 py-0.5 bg-neutral-100 dark:bg-neutral-800 text-xs rounded-full text-neutral-700 dark:text-neutral-300"),o(K,"class","mb-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 flex items-center"),o(Te,"class","bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 rounded-md shadow-sm p-3"),o(he,"class","w-full lg:w-1/2 mb-6 lg:mb-0"),o(xe,"fill-rule","evenodd"),o(xe,"d","M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z"),o(xe,"clip-rule","evenodd"),o(ne,"xmlns","http://www.w3.org/2000/svg"),o(ne,"class","h-4 w-4 mr-1.5"),o(ne,"viewBox","0 0 20 20"),o(ne,"fill","currentColor"),o(g,"class","ml-2 px-2 py-0.5 bg-neutral-100 dark:bg-neutral-800 text-xs rounded-full text-neutral-700 dark:text-neutral-300"),o(ge,"class","mb-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 flex items-center"),o(ue,"class","bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 rounded-md shadow-sm p-3"),o(be,"class","w-full lg:w-1/2"),o(oe,"class","flex flex-col lg:flex-row lg:gap-6 mb-6"),o(T,"class","block text-sm font-medium mb-2 text-neutral-700 dark:text-neutral-300 flex items-center"),o(ve,"class","text-sm text-neutral-500 dark:text-neutral-400 mb-3"),o(Ue,"class","bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 rounded-md shadow-sm p-3"),o(C,"class","mb-6"),o(Fe,"class","block text-sm font-medium mb-2 text-neutral-700 dark:text-neutral-300 flex items-center"),o(ce,"class",tt="bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 rounded-md shadow-sm p-3 "+(r[10].media?"border-red-500 dark:border-red-800":"")),o(Pe,"class","mb-6")},m(i,w){S&&S.m(i,w),E(i,t,w),B&&B.m(i,w),E(i,e,w),U&&U.m(i,w),E(i,l,w),q&&q.m(i,w),E(i,s,w),E(i,a,w),u(a,c),u(a,b),u(a,n),le(f,n,null),u(n,h),Y&&Y.m(n,null),r[27](n),E(i,x,w),E(i,V,w),u(V,ae),u(V,F),u(V,H),le(I,H,null),u(H,Ne),N&&N.m(H,null),r[29](H),E(i,Se,w),E(i,oe,w),u(oe,he),u(he,K),u(K,R),u(R,G),u(K,We),u(K,ye),u(ye,Be),u(ye,Re),u(he,Xe),u(he,Te),le(J,Te,null),u(oe,Je),u(oe,be),u(be,ge),u(ge,ne),u(ne,xe),u(ge,Qe),u(ge,g),u(g,p),u(g,de),u(be,Q),u(be,ue),le(fe,ue,null),E(i,O,w),E(i,C,w),u(C,T),u(C,$e),u(C,ve),u(C,Ge),u(C,Ue),le(_e,Ue,null),E(i,et,w),E(i,Pe,w),u(Pe,Fe),u(Pe,ft),u(Pe,ce),le(pe,ce,null),u(ce,mt),W&&W.m(ce,null),r[37](ce),He=!0},p(i,w){i[10].auth?S?S.p(i,w):(S=jt(i),S.c(),S.m(t.parentNode,t)):S&&(S.d(1),S=null),i[10].api?B?B.p(i,w):(B=Mt(i),B.c(),B.m(e.parentNode,e)):B&&(B.d(1),B=null),i[10].mediaUpload?U?U.p(i,w):(U=At(i),U.c(),U.m(l.parentNode,l)):U&&(U.d(1),U=null),i[10].subparts?q?q.p(i,w):(q=It(i),q.c(),q.m(s.parentNode,s)):q&&(q.d(1),q=null);const Ve={};w[0]&1024&&(Ve.class="w-full p-3 border rounded-md text-sm bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-700 focus:ring-2 focus:ring-teal-500/30 focus:border-teal-500 "+(i[10].title?"border-red-500 dark:border-red-800":"")),!m&&w[0]&2&&(m=!0,Ve.value=i[1],ze(()=>m=!1)),f.$set(Ve),i[10].title?Y?Y.p(i,w):(Y=Dt(i),Y.c(),Y.m(n,null)):Y&&(Y.d(1),Y=null);const je={};w[0]&1024&&(je.class="w-full p-3 border rounded-md text-sm bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-700 focus:ring-2 focus:ring-teal-500/30 focus:border-teal-500 min-h-[120px] "+(i[10].description?"border-red-500 dark:border-red-800":"")),!ke&&w[0]&16&&(ke=!0,je.value=i[4],ze(()=>ke=!1)),I.$set(je),i[10].description?N?N.p(i,w):(N=Lt(i),N.c(),N.m(H,null)):N&&(N.d(1),N=null),(!He||w[0]&16384)&&Le!==(Le=i[14].length+"")&&we(Be,Le);const Me={};!Ze&&w[0]&8192&&(Ze=!0,Me.attributeValues=i[13],ze(()=>Ze=!1)),!Ke&&w[0]&16384&&(Ke=!0,Me.activeAttributes=i[14],ze(()=>Ke=!1)),J.$set(Me),(!He||w[0]&4)&&j!==(j=i[2].length+"")&&we(p,j);const Ae={};!Oe&&w[0]&4&&(Oe=!0,Ae.tags=i[2],ze(()=>Oe=!1)),!Ee&&w[0]&8&&(Ee=!0,Ae.labels=i[3],ze(()=>Ee=!1)),fe.$set(Ae);const Ie={};w[0]&64&&(Ie.mysteryObjectId=i[6]),!ut&&w[0]&32&&(ut=!0,Ie.subParts=i[5],ze(()=>ut=!1)),_e.$set(Ie);const De={};!ct&&w[0]&1&&(ct=!0,De.mediaFiles=i[0],ze(()=>ct=!1)),!pt&&w[0]&1024&&(pt=!0,De.errors=i[10],ze(()=>pt=!1)),pe.$set(De),i[10].media?W?W.p(i,w):(W=Ft(i),W.c(),W.m(ce,null)):W&&(W.d(1),W=null),(!He||w[0]&1024&&tt!==(tt="bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 rounded-md shadow-sm p-3 "+(i[10].media?"border-red-500 dark:border-red-800":"")))&&o(ce,"class",tt)},i(i){He||(X(f.$$.fragment,i),X(I.$$.fragment,i),X(J.$$.fragment,i),X(fe.$$.fragment,i),X(_e.$$.fragment,i),X(pe.$$.fragment,i),He=!0)},o(i){Z(f.$$.fragment,i),Z(I.$$.fragment,i),Z(J.$$.fragment,i),Z(fe.$$.fragment,i),Z(_e.$$.fragment,i),Z(pe.$$.fragment,i),He=!1},d(i){i&&(d(t),d(e),d(l),d(s),d(a),d(x),d(V),d(Se),d(oe),d(O),d(C),d(et),d(Pe)),S&&S.d(i),B&&B.d(i),U&&U.d(i),q&&q.d(i),se(f),Y&&Y.d(),r[27](null),se(I),N&&N.d(),r[29](null),se(J),se(fe),se(_e),se(pe),W&&W.d(),r[37](null)}}}function yr(r){let t,e,l;return{c(){t=D("svg"),e=D("path"),l=M(`\r
                                Save Changes`),this.h()},l(s){t=L(s,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var a=_(t);e=L(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(e).forEach(d),a.forEach(d),l=A(s,`\r
                                Save Changes`),this.h()},h(){o(e,"fill-rule","evenodd"),o(e,"d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"),o(e,"clip-rule","evenodd"),o(t,"xmlns","http://www.w3.org/2000/svg"),o(t,"class","h-3.5 w-3.5 mr-1.5"),o(t,"viewBox","0 0 20 20"),o(t,"fill","currentColor")},m(s,a){E(s,t,a),u(t,e),E(s,l,a)},d(s){s&&(d(t),d(l))}}}function xr(r){let t,e;return{c(){t=k("div"),e=M(`\r
                                Saving...`),this.h()},l(l){t=y(l,"DIV",{class:!0}),_(t).forEach(d),e=A(l,`\r
                                Saving...`),this.h()},h(){o(t,"class","inline-block h-3.5 w-3.5 mr-1.5 border-2 border-white border-t-transparent rounded-full animate-spin")},m(l,s){E(l,t,s),E(l,e,s)},d(l){l&&(d(t),d(e))}}}function Er(r){let t;function e(a,c){return a[9]?xr:yr}let l=e(r),s=l(r);return{c(){s.c(),t=nt()},l(a){s.l(a),t=nt()},m(a,c){s.m(a,c),E(a,t,c)},p(a,c){l!==(l=e(a))&&(s.d(1),s=l(a),s&&(s.c(),s.m(t.parentNode,t)))},d(a){a&&d(t),s.d(a)}}}function $r(r){let t,e,l;return{c(){t=D("svg"),e=D("path"),l=M(`\r
                            Cancel`),this.h()},l(s){t=L(s,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var a=_(t);e=L(a,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),_(e).forEach(d),a.forEach(d),l=A(s,`\r
                            Cancel`),this.h()},h(){o(e,"fill-rule","evenodd"),o(e,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z"),o(e,"clip-rule","evenodd"),o(t,"xmlns","http://www.w3.org/2000/svg"),o(t,"class","h-3.5 w-3.5 mr-1.5"),o(t,"viewBox","0 0 20 20"),o(t,"fill","currentColor")},m(s,a){E(s,t,a),u(t,e),E(s,l,a)},p:ot,d(s){s&&(d(t),d(l))}}}function Pr(r){let t,e,l,s,a,c;t=new ir({props:{class:"p-4 border-b border-neutral-100 dark:border-neutral-800",$$slots:{default:[vr]},$$scope:{ctx:r}}});const v=[wr,_r],b=[];function n(f,m){return f[8]?0:1}return l=n(r),s=b[l]=v[l](r),{c(){te(t.$$.fragment),e=P(),s.c(),a=nt()},l(f){re(t.$$.fragment,f),e=z(f),s.l(f),a=nt()},m(f,m){le(t,f,m),E(f,e,m),b[l].m(f,m),E(f,a,m),c=!0},p(f,m){const h={};m[1]&2048&&(h.$$scope={dirty:m,ctx:f}),t.$set(h);let x=l;l=n(f),l===x?b[l].p(f,m):(tr(),Z(b[x],1,1,()=>{b[x]=null}),rr(),s=b[l],s?s.p(f,m):(s=b[l]=v[l](f),s.c()),X(s,1),s.m(a.parentNode,a))},i(f){c||(X(t.$$.fragment,f),X(s),c=!0)},o(f){Z(t.$$.fragment,f),Z(s),c=!1},d(f){f&&(d(e),d(a)),se(t,f),b[l].d(f)}}}function zr(r){let t,e,l,s,a,c,v,b,n=r[11]&&Vt(r);return a=new lr({props:{class:"bg-white dark:bg-neutral-950 shadow-md rounded-md border border-neutral-200 dark:border-neutral-800 overflow-hidden",$$slots:{default:[Pr]},$$scope:{ctx:r}}}),{c(){t=k("div"),e=k("div"),n&&n.c(),l=P(),s=k("form"),te(a.$$.fragment),this.h()},l(f){t=y(f,"DIV",{class:!0});var m=_(t);e=y(m,"DIV",{class:!0});var h=_(e);n&&n.l(h),l=z(h),s=y(h,"FORM",{class:!0});var x=_(s);re(a.$$.fragment,x),x.forEach(d),h.forEach(d),m.forEach(d),this.h()},h(){o(s,"class","w-full svelte-k08umy"),o(e,"class","w-full max-w-7xl mx-auto"),o(t,"class","flex flex-col items-center bg-change dark:bg-dark shifting p-3 py-5")},m(f,m){E(f,t,m),u(t,e),n&&n.m(e,null),u(e,l),u(e,s),le(a,s,null),c=!0,v||(b=Ht(s,"submit",Kt(r[22])),v=!0)},p(f,m){f[11]?n?n.p(f,m):(n=Vt(f),n.c(),n.m(e,l)):n&&(n.d(1),n=null);const h={};m[0]&255999|m[1]&2048&&(h.$$scope={dirty:m,ctx:f}),a.$set(h)},i(f){c||(X(a.$$.fragment,f),c=!0)},o(f){Z(a.$$.fragment,f),c=!1},d(f){f&&d(t),n&&n.d(),se(a),v=!1,b()}}}function Cr(r){return{id:r.id,description:r.description||"",material:r.material||null,color:r.color||null,shape:r.shape||null,location:r.location||null,smell:r.smell||null,taste:r.taste||null,texture:r.texture||null,functionality:r.functionality||null,markings:r.markings||null,handmade:r.handmade||!1,oneOfAKind:r.oneOfAKind||!1,weight:r.weight?parseFloat(r.weight):null,timePeriod:r.timePeriod||null,writtenText:r.writtenText||null,descriptionOfParts:r.descriptionOfParts||null,hardness:r.hardness||null,value:r.value?parseFloat(r.value):null,originOfAcquisition:r.originOfAcquisition||null,pattern:r.pattern||null,brand:r.brand||null,print:r.print||null,imageLicenses:r.imageLicenses||null,sizeX:r.sizeX?parseFloat(r.sizeX):null,sizeY:r.sizeY?parseFloat(r.sizeY):null,sizeZ:r.sizeZ?parseFloat(r.sizeZ):null,item_condition:r.item_condition||null}}function Tr(r,t,e){let l;Jt(r,fr,g=>e(24,l=g));let{data:s}=t,a=[],c="",v=[],b=[],n="",f=[],m=null,h=null,x=null,V=!0,ae=!1,$={title:"",media:"",description:"",auth:"",api:"",mediaUpload:"",subparts:""},F=!1,H="",I={material:"",shape:"",color:"",texture:"",weight:"",smell:"",taste:"",marking:"",functionality:"",period:"",location:"",writtenText:"",descriptionOfParts:"",hardness:"",value:"",originOfAcquisition:"",pattern:"",brand:"",print:"",imageLicenses:"",sizeX:"",sizeY:"",sizeZ:"",itemCondition:"",handmade:!1,oneOfAKind:!1},ke=[];Qt(async()=>{try{e(8,V=!0),e(7,x=s.id);const g=await fetch(`https://backend-310608491068.europe-west1.run.app/api/posts/getForPostDetails/${x}`,{headers:Ye()});if(!g.ok){const p=await g.text(),de=g.status;let Q;throw de===404?Q="We couldn't find this post. It may have been removed or you don't have permission to view it.":de===401||de===403?Q="You don't have permission to edit this post. Please check if you're logged in correctly.":Q="We couldn't load this post. Please try again later.",new Error(Q)}const j=await g.json();if(m=j,j.author!==l){e(10,$.auth="You don't have permission to edit this post. Only the original author can make changes.",$),it(`/thread/${x}`);return}if(e(1,c=j.title||""),e(4,n=j.description||""),Array.isArray(j.tags)&&j.tags.length>0?e(2,v=await mr(j.tags)):e(2,v=[]),j.mysteryObject){e(0,a=pr(j)),e(6,h=j.mysteryObject.id);const p=j.mysteryObject;e(13,I={material:p.material||"",shape:p.shape||"",color:p.color||"",colorHex:p.color&&p.color.startsWith("#")?p.color:"",texture:p.texture||"",weight:p.weight?p.weight.toString():"",smell:p.smell||"",taste:p.taste||"",marking:p.markings||"",functionality:p.functionality||"",period:p.timePeriod||"",location:p.location||"",writtenText:p.writtenText||"",descriptionOfParts:p.descriptionOfParts||"",hardness:p.hardness||"",value:p.value?p.value.toString():"",originOfAcquisition:p.originOfAcquisition||"",pattern:p.pattern||"",brand:p.brand||"",print:p.print||"",imageLicenses:p.imageLicenses||"",sizeX:p.sizeX?p.sizeX.toString():"",sizeY:p.sizeY?p.sizeY.toString():"",sizeZ:p.sizeZ?p.sizeZ.toString():"",itemCondition:p.item_condition||"",handmade:p.handmade||!1,oneOfAKind:p.oneOfAKind||!1}),e(14,ke=Object.keys(I).filter(de=>{const Q=I[de];return Q!==""&&Q!==null&&Q!==void 0})),p.subParts&&Array.isArray(p.subParts)&&e(5,f=p.subParts)}}catch(g){console.error("Error loading post for editing:",g),e(10,$.auth=g.message||"We couldn't load your post. Please refresh the page or try again later.",$),e(12,H=g.message||"Failed to load post data. Please try refreshing the page."),e(11,F=!0),setTimeout(()=>{e(11,F=!1)},5e3)}finally{e(8,V=!1)}});function Ne(g){e(0,a=g.detail.mediaFiles)}function Se(g){e(14,ke=g.detail.activeAttributes)}function oe(g){e(13,I=g.detail.attributeValues)}function he(g){e(5,f=g.detail.subParts)}let K,R,G;function We(){if($.title&&K){K.scrollIntoView({behavior:"smooth",block:"center"});return}if($.description&&R){R.scrollIntoView({behavior:"smooth",block:"center"});return}if($.media&&G){G.scrollIntoView({behavior:"smooth",block:"center"});return}if($.api||$.auth||$.mediaUpload||$.subparts){window.scrollTo({top:0,behavior:"smooth"});return}}async function ye(){var j;e(10,$={title:"",media:"",description:"",auth:"",api:"",mediaUpload:"",subparts:""});let g=!1;if(c.trim()||(e(10,$.title="Title is required",$),g=!0),a.length===0&&(e(10,$.media="At least one media file is required",$),g=!0),n.trim()||(e(10,$.description="Description is required",$),g=!0),g){setTimeout(We,100);return}e(9,ae=!0);try{const p=JSON.parse(JSON.stringify(I)),de={id:h,description:n,material:p.material||null,color:p.colorHex||p.color||null,shape:p.shape||null,location:p.location||null,smell:p.smell||null,taste:p.taste||p.smell||null,texture:p.texture||null,functionality:p.functionality||null,markings:p.marking||null,handmade:p.handmade||!1,oneOfAKind:p.oneOfAKind||!1,weight:parseFloat(p.weight)||null,timePeriod:p.period||null,writtenText:p.writtenText||null,descriptionOfParts:p.descriptionOfParts||null,hardness:p.hardness||null,value:parseFloat(p.value)||null,originOfAcquisition:p.originOfAcquisition||null,pattern:p.pattern||null,brand:p.brand||null,print:p.print||null,imageLicenses:p.imageLicenses||null,sizeX:parseFloat(p.sizeX)||null,sizeY:parseFloat(p.sizeY)||null,sizeZ:parseFloat(p.sizeZ)||null,item_condition:p.itemCondition||null},Q={id:x,title:c,content:n,tags:v.map(O=>O.id),mysteryObject:de},ue=await fetch("https://backend-310608491068.europe-west1.run.app/api/posts/update",{method:"PUT",headers:{"Content-Type":"application/json",...Ye()},body:JSON.stringify(Q)});if(!ue.ok){const O=await ue.text(),C=ue.status;throw C===401||C===403?new Error("Your session may have expired. Please try logging in again."):C===413?new Error("Your post couldn't be updated because it contains files that are too large."):C===400?new Error("Some information in your post isn't valid. Please check all fields and try again."):new Error("Your changes couldn't be saved at this time. Please try again later.")}const fe=await ue.json();if(a.length>0&&a[0].file)try{const O=new FormData;O.append("file",a[0].file);const C=await fetch(`https://backend-310608491068.europe-west1.run.app/api/posts/${x}/mysteryObjects/${h}/set-image`,{method:"POST",headers:Ye(),body:O});if(!C.ok){const T=await C.text();throw new Error("We couldn't update the main image, but other changes were saved.")}}catch(O){console.error("Error uploading main image:",O),e(10,$.mediaUpload="The main image couldn't be updated, but your other changes were saved successfully.",$),e(12,H="Post updated but we couldn't change the main image. You can try again."),e(11,F=!0),setTimeout(()=>{e(11,F=!1)},5e3)}let Oe=[];for(let O=0;O<a.length;O++){const C=a[O];if(C.file)try{const T=new FormData;T.append("file",C.file),T.append("type",C.type||"image");const ee=await fetch(`https://backend-310608491068.europe-west1.run.app/api/mysteryObjects/${h}/upload-media`,{method:"POST",headers:Ye(),body:T});if(!ee.ok){const $e=await ee.text();throw new Error("We couldn't upload this media file. It may be too large or in an unsupported format.")}}catch(T){console.error(`Error uploading media file ${O+1}:`,T),Oe.push(`Media file ${O+1}: Couldn't be added to your post`)}}Oe.length>0&&(e(10,$.mediaUpload=`We saved your post but couldn't add ${Oe.length} new media file${Oe.length===1?"":"s"}.`,$),e(12,H="Post updated but some media files weren't added. You can try adding them again."),e(11,F=!0),setTimeout(()=>{e(11,F=!1)},5e3));let Ee=[];if(f.length>0){for(let O=0;O<f.length;O++)try{const C=f[O],T=Cr(C),ee=C.id?`https://backend-310608491068.europe-west1.run.app/api/mysteryObjects/${h}/subParts/${C.id}`:`https://backend-310608491068.europe-west1.run.app/api/mysteryObjects/${h}/subParts`,$e=C.id?"PUT":"POST",ve=await fetch(ee,{method:$e,headers:{"Content-Type":"application/json",...Ye()},body:JSON.stringify(T)});if(!ve.ok){const dt=await ve.text(),Ge=$e==="POST"?"add":"update";throw new Error(`We couldn't ${Ge} this part. Please check the information you provided.`)}}catch(C){console.error(`Error handling sub-part ${O+1}:`,C);const T=f[O].description||`Part ${O+1}`;Ee.push(`"${T}": Couldn't be saved`)}if((j=m==null?void 0:m.mysteryObject)!=null&&j.subParts){const O=new Set(m.mysteryObject.subParts.map(T=>T.id)),C=new Set(f.filter(T=>T.id).map(T=>T.id));for(const T of O)if(!C.has(T))try{const ee=await fetch(`https://backend-310608491068.europe-west1.run.app/api/mysteryObjects/${h}/subParts/${T}`,{method:"DELETE",headers:Ye()});if(!ee.ok){const $e=await ee.text();throw new Error(`Failed to delete sub-part: ${$e}`)}}catch(ee){console.error(`Error deleting sub-part ${T}:`,ee),Ee.push(`Delete sub-part: ${ee.message}`)}}}Ee.length>0&&(e(10,$.subparts=`We saved your post but ${Ee.length} object part${Ee.length===1?"":"s"} couldn't be updated.`,$),e(12,H="Post updated but some object parts weren't saved. You can try updating them again."),e(11,F=!0),setTimeout(()=>{e(11,F=!1)},5e3)),$.mediaUpload||$.subparts?setTimeout(()=>it(`/thread/${x}`),3e3):it(`/thread/${x}`)}catch(p){console.error("Error updating post:",p),e(10,$.api=p.message||"We couldn't update your post at this time. Please try again later.",$),e(12,H=p.message||"Failed to update post"),e(11,F=!0),setTimeout(()=>{e(11,F=!1)},5e3)}finally{e(9,ae=!1)}}const Le=()=>e(11,F=!1);function Be(g){c=g,e(1,c)}function Re(g){ie[g?"unshift":"push"](()=>{K=g,e(15,K)})}function Xe(g){n=g,e(4,n)}function Te(g){ie[g?"unshift":"push"](()=>{R=g,e(16,R)})}function J(g){I=g,e(13,I)}function Ze(g){ke=g,e(14,ke)}function Ke(g){v=g,e(2,v)}function Je(g){b=g,e(3,b)}function be(g){f=g,e(5,f)}function ge(g){a=g,e(0,a)}function ne(g){$=g,e(10,$)}function xe(g){ie[g?"unshift":"push"](()=>{G=g,e(17,G)})}const Qe=()=>it(`/thread/${x}`);return r.$$set=g=>{"data"in g&&e(23,s=g.data)},r.$$.update=()=>{r.$$.dirty[0]&16777216},[a,c,v,b,n,f,h,x,V,ae,$,F,H,I,ke,K,R,G,Ne,Se,oe,he,ye,s,l,Le,Be,Re,Xe,Te,J,Ze,Ke,Je,be,ge,ne,xe,Qe]}class Rr extends Gt{constructor(t){super(),er(this,t,Tr,zr,Zt,{data:23},null,[-1,-1])}}export{Rr as component,Wr as universal};
