import{w as n}from"./C34h2UdL.js";const a=n([]),o=n(!1),u=n(0),d=n(!0),l=20;async function b(){o.set(!0);try{await f(0)}catch(e){console.error("Thread store initialization error:",e)}finally{o.set(!1)}}async function f(e=0){try{o.set(!0);const t=await fetch(`https://backend-310608491068.europe-west1.run.app/api/posts/getForPostList?page=${e}&size=${l}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json(),r=s.content||[];d.set(!s.last),e===0?a.set(r):a.update(c=>[...c,...r]);let i;return a.subscribe(c=>{i=c})(),u.set(e),r}catch(t){throw console.error("Error fetching threads:",t),t}finally{o.set(!1)}}function w(e){a.update(t=>{const s=t.findIndex(i=>i.id===e.id);let r;return s!==-1?(r=[...t],r[s]={...r[s],...e}):r=[...t,e],r})}export{o as a,b as i,a as t,w as u};
