import{s as ne,e as m,c as v,b as C,f,l as p,i as I,h as g,m as ie,a as j,g as x,o as oe,t as Q,d as G,p as V,n as B,q as Y,r as re,H as J,u as K,j as ce}from"../chunks/BgXtprSQ.js";import{S as fe,i as he,c as q,a as A,m as N,t as R,b as U,d as F,e as ue}from"../chunks/1qaseQuG.js";import{C as de,a as pe,P as _e,e as z}from"../chunks/Cw2352T2.js";import{I as ge}from"../chunks/BxqIKKDF.js";import{S as me}from"../chunks/DQRmeOpa.js";function Z(n,t,l){const e=n.slice();return e[9]=t[l],e}function ee(n,t,l){const e=n.slice();return e[12]=t[l],e}function ve(n){let t,l,e="Enter keywords to find what you're looking for";return{c(){t=Q(`Search Posts\r
                `),l=m("small"),l.textContent=e,this.h()},l(s){t=G(s,`Search Posts\r
                `),l=v(s,"SMALL",{class:!0,"data-svelte-h":!0}),V(l)!=="svelte-1459tqq"&&(l.textContent=e),this.h()},h(){p(l,"class","block text-sm mt-2 font-normal opacity-75")},m(s,r){I(s,t,r),I(s,l,r)},p:B,d(s){s&&(f(t),f(l))}}}function be(n){let t,l=z(n[1]),e=[];for(let s=0;s<l.length;s+=1)e[s]=ae(Z(n,l,s));return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=Y()},l(s){for(let r=0;r<e.length;r+=1)e[r].l(s);t=Y()},m(s,r){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(s,r);I(s,t,r)},p(s,r){if(r&19){l=z(s[1]);let a;for(a=0;a<l.length;a+=1){const h=Z(s,l,a);e[a]?e[a].p(h,r):(e[a]=ae(h),e[a].c(),e[a].m(t.parentNode,t))}for(;a<e.length;a+=1)e[a].d(1);e.length=l.length}},d(s){s&&f(t),re(e,s)}}}function $e(n){let t,l='<p class="text-gray-500">Type at least 3 characters to search</p>';return{c(){t=m("div"),t.innerHTML=l,this.h()},l(e){t=v(e,"DIV",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-123cmei"&&(t.innerHTML=l),this.h()},h(){p(t,"class","text-center p-4")},m(e,s){I(e,t,s)},p:B,d(e){e&&f(t)}}}function we(n){let t,l='<p class="text-gray-500">No results found</p>';return{c(){t=m("div"),t.innerHTML=l,this.h()},l(e){t=v(e,"DIV",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-1x211b9"&&(t.innerHTML=l),this.h()},h(){p(t,"class","text-center p-4")},m(e,s){I(e,t,s)},p:B,d(e){e&&f(t)}}}function ke(n){let t,l="<p>Searching...</p>";return{c(){t=m("div"),t.innerHTML=l,this.h()},l(e){t=v(e,"DIV",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-ooe03s"&&(t.innerHTML=l),this.h()},h(){p(t,"class","text-center p-4")},m(e,s){I(e,t,s)},p:B,d(e){e&&f(t)}}}function te(n){let t,l="Solved";return{c(){t=m("span"),t.textContent=l,this.h()},l(e){t=v(e,"SPAN",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-qjjcg8"&&(t.textContent=l),this.h()},h(){p(t,"class","bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100 text-xs px-2 py-1 rounded-full font-medium")},m(e,s){I(e,t,s)},d(e){e&&f(t)}}}function se(n){let t,l=z(n[9].tags),e=[];for(let s=0;s<l.length;s+=1)e[s]=le(ee(n,l,s));return{c(){t=m("div");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=v(s,"DIV",{class:!0});var r=C(t);for(let a=0;a<e.length;a+=1)e[a].l(r);r.forEach(f),this.h()},h(){p(t,"class","flex gap-1 flex-wrap")},m(s,r){I(s,t,r);for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(t,null)},p(s,r){if(r&19){l=z(s[9].tags);let a;for(a=0;a<l.length;a+=1){const h=ee(s,l,a);e[a]?e[a].p(h,r):(e[a]=le(h),e[a].c(),e[a].m(t,null))}for(;a<e.length;a+=1)e[a].d(1);e.length=l.length}},d(s){s&&f(t),re(e,s)}}}function le(n){let t,l,e=D(n[4](n[12]),n[0])+"",s;return{c(){t=m("span"),l=new J(!1),s=j(),this.h()},l(r){t=v(r,"SPAN",{class:!0});var a=C(t);l=K(a,!1),s=x(a),a.forEach(f),this.h()},h(){l.a=s,p(t,"class","bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded")},m(r,a){I(r,t,a),l.m(e,t),g(t,s)},p(r,a){a&3&&e!==(e=D(r[4](r[12]),r[0])+"")&&l.p(e)},d(r){r&&f(t)}}}function ae(n){let t,l,e,s,r=D(n[9].title,n[0])+"",a,h,b,P,y=D(n[9].description||"",n[0])+"",T,c,_,S,$=n[9].author+"",E,L,w,i,o=n[9].isSolved&&te(),d=n[9].tags&&n[9].tags.length>0&&se(n);return{c(){t=m("a"),l=m("div"),e=m("h2"),s=new J(!1),a=j(),o&&o.c(),h=j(),b=m("p"),P=new J(!1),T=j(),c=m("div"),_=m("p"),S=Q("Posted by: "),E=Q($),L=j(),d&&d.c(),w=j(),this.h()},l(u){t=v(u,"A",{href:!0,class:!0});var k=C(t);l=v(k,"DIV",{class:!0});var H=C(l);e=v(H,"H2",{class:!0});var W=C(e);s=K(W,!1),W.forEach(f),a=x(H),o&&o.l(H),H.forEach(f),h=x(k),b=v(k,"P",{class:!0});var X=C(b);P=K(X,!1),X.forEach(f),T=x(k),c=v(k,"DIV",{class:!0});var M=C(c);_=v(M,"P",{class:!0});var O=C(_);S=G(O,"Posted by: "),E=G(O,$),O.forEach(f),L=x(M),d&&d.l(M),M.forEach(f),w=x(k),k.forEach(f),this.h()},h(){s.a=null,p(e,"class","text-xl font-semibold mb-2"),p(l,"class","flex justify-between items-start"),P.a=null,p(b,"class","text-sm text-gray-600 dark:text-gray-300 mb-2"),p(_,"class","text-gray-500"),p(c,"class","flex justify-between items-center mt-2 text-xs"),p(t,"href",i=`/thread/${n[9].id}`),p(t,"class","block p-4 border rounded-lg hover:border-rose-900 transition-colors duration-200")},m(u,k){I(u,t,k),g(t,l),g(l,e),s.m(r,e),g(l,a),o&&o.m(l,null),g(t,h),g(t,b),P.m(y,b),g(t,T),g(t,c),g(c,_),g(_,S),g(_,E),g(c,L),d&&d.m(c,null),g(t,w)},p(u,k){k&3&&r!==(r=D(u[9].title,u[0])+"")&&s.p(r),u[9].isSolved?o||(o=te(),o.c(),o.m(l,null)):o&&(o.d(1),o=null),k&3&&y!==(y=D(u[9].description||"",u[0])+"")&&P.p(y),k&2&&$!==($=u[9].author+"")&&ce(E,$),u[9].tags&&u[9].tags.length>0?d?d.p(u,k):(d=se(u),d.c(),d.m(c,null)):d&&(d.d(1),d=null),k&2&&i!==(i=`/thread/${u[9].id}`)&&p(t,"href",i)},d(u){u&&f(t),o&&o.d(),d&&d.d()}}}function ye(n){let t,l,e,s,r,a,h,b,P,y,T,c,_;t=new pe({props:{class:"p-4 text-2xl mt-6 text-center",$$slots:{default:[ve]},$$scope:{ctx:n}}});function S(i){n[5](i)}let $={type:"search",placeholder:"Enter search terms...",class:"w-full"};n[0]!==void 0&&($.value=n[0]),r=new ge({props:$}),ie.push(()=>ue(r,"value",S)),r.$on("input",n[3]),b=new me({props:{class:"my-6"}});function E(i,o){return o&3&&(T=null),o&1&&(c=null),i[2]?ke:(T==null&&(T=i[1].length===0&&i[0].trim().length>=3),T?we:(c==null&&(c=i[0].trim().length<3),c?$e:be))}let L=E(n,-1),w=L(n);return{c(){q(t.$$.fragment),l=j(),e=m("div"),s=m("div"),q(r.$$.fragment),h=j(),q(b.$$.fragment),P=j(),y=m("div"),w.c(),this.h()},l(i){A(t.$$.fragment,i),l=x(i),e=v(i,"DIV",{class:!0});var o=C(e);s=v(o,"DIV",{class:!0});var d=C(s);A(r.$$.fragment,d),d.forEach(f),h=x(o),A(b.$$.fragment,o),P=x(o),y=v(o,"DIV",{class:!0});var u=C(y);w.l(u),u.forEach(f),o.forEach(f),this.h()},h(){p(s,"class","mb-6"),p(y,"class","space-y-4"),p(e,"class","bg-opacity-95 rounded-lg shadow-lg p-6")},m(i,o){N(t,i,o),I(i,l,o),I(i,e,o),g(e,s),N(r,s,null),g(e,h),N(b,e,null),g(e,P),g(e,y),w.m(y,null),_=!0},p(i,o){const d={};o&32768&&(d.$$scope={dirty:o,ctx:i}),t.$set(d);const u={};!a&&o&1&&(a=!0,u.value=i[0],oe(()=>a=!1)),r.$set(u),L===(L=E(i,o))&&w?w.p(i,o):(w.d(1),w=L(i),w&&(w.c(),w.m(y,null)))},i(i){_||(R(t.$$.fragment,i),R(r.$$.fragment,i),R(b.$$.fragment,i),_=!0)},o(i){U(t.$$.fragment,i),U(r.$$.fragment,i),U(b.$$.fragment,i),_=!1},d(i){i&&(f(l),f(e)),F(t,i),F(r),F(b),w.d()}}}function Ee(n){let t,l,e,s;return e=new de({props:{class:"bg-opacity-90",$$slots:{default:[ye]},$$scope:{ctx:n}}}),{c(){t=m("div"),l=m("div"),q(e.$$.fragment),this.h()},l(r){t=v(r,"DIV",{class:!0});var a=C(t);l=v(a,"DIV",{class:!0});var h=C(l);A(e.$$.fragment,h),h.forEach(f),a.forEach(f),this.h()},h(){p(l,"class","w-full lg:w-2/3"),p(t,"class","flex justify-center p-6 lg:py-10 bg-change dark:bg-dark shifting")},m(r,a){I(r,t,a),g(t,l),N(e,l,null),s=!0},p(r,[a]){const h={};a&32775&&(h.$$scope={dirty:a,ctx:r}),e.$set(h)},i(r){s||(R(e.$$.fragment,r),s=!0)},o(r){U(e.$$.fragment,r),s=!1},d(r){r&&f(t),F(e)}}}function D(n,t){if(!n||!t)return n||"";const l=t.trim().toLowerCase().split(/\s+/);return n.replace(new RegExp(`(${l.join("|")})`,"gi"),"<mark>$1</mark>")}function Ce(n,t,l){let e="",s=[],r=!1,a,h={};async function b(){clearTimeout(a),a=setTimeout(async()=>{if(!e||e.trim().length<3){l(1,s=[]);return}l(2,r=!0);try{const c=await fetch(`${_e}/api/posts/searchForPosts?q=${encodeURIComponent(e.trim())}`);if(!c.ok)throw new Error("Search request failed");const _=await c.json();l(1,s=_.content||[]);const S=new Set;s.forEach($=>{$.tags&&$.tags.length>0&&$.tags.forEach(E=>S.add(E))}),S.size>0&&await P(Array.from(S))}catch(c){console.error("Error searching posts:",c),l(1,s=[])}finally{l(2,r=!1)}},300)}async function P(c){try{const _=c.join("|"),S=await fetch(`https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${_}&props=labels&languages=en&format=json&origin=*`);if(!S.ok)throw new Error("Failed to fetch tag labels");const $=await S.json();$.entities&&Object.keys($.entities).forEach(E=>{const L=$.entities[E];L.labels&&L.labels.en?h[E]=L.labels.en.value:h[E]=E})}catch(_){console.error("Error fetching tag labels:",_)}}function y(c){return h[c]||c}function T(c){e=c,l(0,e)}return[e,s,r,b,y,T]}class je extends fe{constructor(t){super(),he(this,t,Ce,Ee,ne,{})}}export{je as component};
