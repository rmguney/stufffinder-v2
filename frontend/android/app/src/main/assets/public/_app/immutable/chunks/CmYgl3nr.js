import{w as n}from"./3WS7gtyC.js";import{P as u}from"./pqZsTTMp.js";const a=n([]),o=n(!1),d=n(0),f=n(!0),l=20;async function w(){o.set(!0);try{await h(0)}catch(e){console.error("Thread store initialization error:",e)}finally{o.set(!1)}}async function h(e=0){try{o.set(!0);const t=await fetch(`${u}/api/posts/getForPostList?page=${e}&size=${l}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json(),r=s.content||[];f.set(!s.last),e===0?a.set(r):a.update(c=>[...c,...r]);let i;return a.subscribe(c=>{i=c})(),d.set(e),r}catch(t){throw console.error("Error fetching threads:",t),t}finally{o.set(!1)}}function T(e){a.update(t=>{const s=t.findIndex(i=>i.id===e.id);let r;return s!==-1?(r=[...t],r[s]={...r[s],...e}):r=[...t,e],r})}export{o as a,w as i,a as t,T as u};
