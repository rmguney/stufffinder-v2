import{w as i}from"./Crv6Zvwd.js";const o=i([]),a=i(!1),u=i(0),l=i(!0),d=20;async function w(){a.set(!0);try{await f(0)}catch(s){console.error("Thread store initialization error:",s)}finally{a.set(!1)}}async function f(s=0){try{a.set(!0);const e=await fetch(`https://backend-310608491068.europe-west1.run.app/api/posts/getForPostList?page=${s}&size=${d}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const r=await e.json(),t=r.content||[];l.set(!r.last),s===0?o.set(t):o.update(c=>[...c,...t]);let n;return o.subscribe(c=>{n=c})(),u.set(s),t}catch(e){throw console.error("Error fetching threads:",e),e}finally{a.set(!1)}}function b(s){o.update(e=>{const r=e.findIndex(n=>n.id==s.id);let t;if(r!==-1){t=[...e];const n=t[r].comments||[];t[r]={...t[r],...s,comments:n},t[r].updatedAt=new Date().toISOString()}else t=[...e,s];return t})}export{a,w as i,o as t,b as u};
