import{s as at,e as A,c as V,b as $,f as c,l as u,i as y,D as it,a as z,g as S,h as m,t as H,F as X,d as L,r as me,G as Q,m as fe,j as le,z as ut,q as Ee,u as De,E as _e,$ as Ve,H as ct,n as ie,X as de,k as Ue,o as vt}from"../chunks/DhMr5c2G.js";import{S as ft,i as dt,c as q,a as G,m as J,t as O,b as B,d as K,g as ne,f as se,e as je}from"../chunks/D_SvASXj.js";import{C as Me,e as ge,u as ht,o as mt,a as pt}from"../chunks/DtBTuCuf.js";import{T as Fe,M as wt}from"../chunks/C0vSs4Ow.js";import{a as bt}from"../chunks/BOKDYHDN.js";import{C as Oe}from"../chunks/CdcGS3Pb.js";import{P as kt}from"../chunks/DqBsMnqT.js";import{a as _t}from"../chunks/OLZfEaQC.js";import{S as $t}from"../chunks/Crn81i3j.js";import{g as $e}from"../chunks/RSIJn0f_.js";import{B as ve}from"../chunks/BNST9Elv.js";import{t as ze,u as Et}from"../chunks/DmlDi6gt.js";import{a as yt,p as Ct}from"../chunks/BxIVeE_E.js";import{g as It}from"../chunks/F-ohFSWW.js";function Dt({params:n}){return{id:n.id}}const Ur=Object.freeze(Object.defineProperty({__proto__:null,load:Dt},Symbol.toStringTag,{value:"Module"}));function Se(n,e,t){const r=n.slice();return r[39]=e[t],r}function Ne(n,e,t){const r=n.slice();return r[42]=e[t],r[44]=t,r}function Ae(n){const e=n.slice(),t=e[12][e[21]];return e[42]=t,e}function Pe(n){let e,t="•",r,l,o=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
              Best Answer`;return{c(){e=A("span"),e.textContent=t,r=z(),l=A("span"),l.innerHTML=o,this.h()},l(s){e=V(s,"SPAN",{"data-svelte-h":!0}),me(e)!=="svelte-7hh8jk"&&(e.textContent=t),r=S(s),l=V(s,"SPAN",{class:!0,"data-svelte-h":!0}),me(l)!=="svelte-zlbtxx"&&(l.innerHTML=o),this.h()},h(){u(l,"class","text-teal-800 dark:text-teal-600 font-medium flex items-center gap-1")},m(s,a){y(s,e,a),y(s,r,a),y(s,l,a)},d(s){s&&(c(e),c(r),c(l))}}}function jt(n){let e,t=(n[0]||"No content")+"",r;return{c(){e=A("div"),r=H(t),this.h()},l(l){e=V(l,"DIV",{class:!0});var o=$(e);r=L(o,t),o.forEach(c),this.h()},h(){u(e,"class","text-neutral-900 dark:text-neutral-100")},m(l,o){y(l,e,o),m(e,r)},p(l,o){o[0]&1&&t!==(t=(l[0]||"No content")+"")&&le(r,t)},i:ie,o:ie,d(l){l&&c(e)}}}function Mt(n){let e,t,r;function l(s){n[30](s)}let o={class:"w-full p-2 border rounded-lg text-sm bg-white dark:bg-neutral-800 border-neutral-200 dark:border-neutral-700",placeholder:"Edit your comment..."};return n[20]!==void 0&&(o.value=n[20]),e=new Fe({props:o}),Ee.push(()=>je(e,"value",l)),{c(){q(e.$$.fragment)},l(s){G(e.$$.fragment,s)},m(s,a){J(e,s,a),r=!0},p(s,a){const i={};!t&&a[0]&1048576&&(t=!0,i.value=s[20],De(()=>t=!1)),e.$set(i)},i(s){r||(O(e.$$.fragment,s),r=!0)},o(s){B(e.$$.fragment,s),r=!1},d(s){K(e,s)}}}function He(n){let e,t,r,l,o,s=n[12].length>1&&Le(n),a=n[12][n[21]]&&Re(Ae(n)),i=n[12].length>1&&We(n);return{c(){e=A("div"),t=A("div"),s&&s.c(),r=z(),l=A("div"),a&&a.c(),o=z(),i&&i.c(),this.h()},l(f){e=V(f,"DIV",{class:!0});var p=$(e);t=V(p,"DIV",{class:!0});var w=$(t);s&&s.l(w),r=S(w),l=V(w,"DIV",{class:!0});var F=$(l);a&&a.l(F),F.forEach(c),w.forEach(c),o=S(p),i&&i.l(p),p.forEach(c),this.h()},h(){u(l,"class","w-full"),u(t,"class","relative"),u(e,"class","mt-4 bg-neutral-100 dark:bg-neutral-900 rounded-lg overflow-hidden")},m(f,p){y(f,e,p),m(e,t),s&&s.m(t,null),m(t,r),m(t,l),a&&a.m(l,null),m(e,o),i&&i.m(e,null)},p(f,p){f[12].length>1?s?s.p(f,p):(s=Le(f),s.c(),s.m(t,r)):s&&(s.d(1),s=null),f[12][f[21]]?a?a.p(Ae(f),p):(a=Re(Ae(f)),a.c(),a.m(l,null)):a&&(a.d(1),a=null),f[12].length>1?i?i.p(f,p):(i=We(f),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(f){f&&c(e),s&&s.d(),a&&a.d(),i&&i.d()}}}function Le(n){let e,t,r='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>',l,o,s,a='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>',i,f,p,w=n[21]+1+"",F,T,D=n[12].length+"",d,_,C;return{c(){e=A("div"),t=A("button"),t.innerHTML=r,l=z(),o=A("div"),s=A("button"),s.innerHTML=a,i=z(),f=A("div"),p=A("div"),F=H(w),T=H(" / "),d=H(D),this.h()},l(b){e=V(b,"DIV",{class:!0});var g=$(e);t=V(g,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),me(t)!=="svelte-1g17f84"&&(t.innerHTML=r),g.forEach(c),l=S(b),o=V(b,"DIV",{class:!0});var v=$(o);s=V(v,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),me(s)!=="svelte-fkqpxm"&&(s.innerHTML=a),v.forEach(c),i=S(b),f=V(b,"DIV",{class:!0});var E=$(f);p=V(E,"DIV",{class:!0});var N=$(p);F=L(N,w),T=L(N," / "),d=L(N,D),N.forEach(c),E.forEach(c),this.h()},h(){u(t,"class","bg-black bg-opacity-40 hover:bg-opacity-60 text-white p-1 rounded-r-lg ml-1 focus:outline-none transform transition hover:scale-110"),u(t,"aria-label","Previous media"),u(e,"class","absolute top-0 bottom-0 left-0 flex items-center z-10"),u(s,"class","bg-black bg-opacity-40 hover:bg-opacity-60 text-white p-1 rounded-l-lg mr-1 focus:outline-none transform transition hover:scale-110"),u(s,"aria-label","Next media"),u(o,"class","absolute top-0 bottom-0 right-0 flex items-center z-10"),u(p,"class","bg-black bg-opacity-60 text-white px-2 py-0.5 rounded-full text-xs"),u(f,"class","absolute bottom-2 left-0 right-0 flex justify-center z-10")},m(b,g){y(b,e,g),m(e,t),y(b,l,g),y(b,o,g),m(o,s),y(b,i,g),y(b,f,g),m(f,p),m(p,F),m(p,T),m(p,d),_||(C=[fe(t,"click",Ve(n[29])),fe(s,"click",Ve(n[28]))],_=!0)},p(b,g){g[0]&2097152&&w!==(w=b[21]+1+"")&&le(F,w),g[0]&4096&&D!==(D=b[12].length+"")&&le(d,D)},d(b){b&&(c(e),c(l),c(o),c(i),c(f)),_=!1,ut(C)}}}function Re(n){let e;function t(o,s){return o[42].type==="image"?Ot:o[42].type==="video"?Ft:o[42].type==="audio"?Vt:At}let r=t(n),l=r(n);return{c(){l.c(),e=_e()},l(o){l.l(o),e=_e()},m(o,s){l.m(o,s),y(o,e,s)},p(o,s){r===(r=t(o))&&l?l.p(o,s):(l.d(1),l=r(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&c(e),l.d(o)}}}function At(n){let e,t,r,l,o,s=(n[42].name||"Attachment")+"",a;return{c(){e=A("div"),t=X("svg"),r=X("path"),l=z(),o=A("p"),a=H(s),this.h()},l(i){e=V(i,"DIV",{class:!0});var f=$(e);t=Q(f,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var p=$(t);r=Q(p,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),$(r).forEach(c),p.forEach(c),l=S(f),o=V(f,"P",{class:!0});var w=$(o);a=L(w,s),w.forEach(c),f.forEach(c),this.h()},h(){u(r,"stroke-linecap","round"),u(r,"stroke-linejoin","round"),u(r,"stroke-width","1.5"),u(r,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"class","h-12 w-12 mx-auto text-neutral-500 mb-2"),u(t,"fill","none"),u(t,"viewBox","0 0 24 24"),u(t,"stroke","currentColor"),u(o,"class","text-sm text-gray-700 dark:text-gray-300"),u(e,"class","p-4 bg-neutral-200 dark:bg-neutral-800 text-center")},m(i,f){y(i,e,f),m(e,t),m(t,r),m(e,l),m(e,o),m(o,a)},p(i,f){f[0]&2101248&&s!==(s=(i[42].name||"Attachment")+"")&&le(a,s)},d(i){i&&c(e)}}}function Vt(n){let e,t,r,l,o,s,a,i,f,p=(n[42].name||"Audio file")+"",w,F,T;return{c(){e=A("div"),t=X("svg"),r=X("path"),l=z(),o=A("audio"),s=H("Your browser does not support the audio tag."),i=z(),f=A("p"),w=H(p),this.h()},l(D){e=V(D,"DIV",{class:!0});var d=$(e);t=Q(d,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var _=$(t);r=Q(_,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),$(r).forEach(c),_.forEach(c),l=S(d),o=V(d,"AUDIO",{src:!0,class:!0});var C=$(o);s=L(C,"Your browser does not support the audio tag."),C.forEach(c),i=S(d),f=V(d,"P",{class:!0});var b=$(f);w=L(b,p),b.forEach(c),d.forEach(c),this.h()},h(){u(r,"stroke-linecap","round"),u(r,"stroke-linejoin","round"),u(r,"stroke-width","1.5"),u(r,"d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"class","h-12 w-12 text-neutral-500 mb-2"),u(t,"fill","none"),u(t,"viewBox","0 0 24 24"),u(t,"stroke","currentColor"),de(o.src,a=n[42].url)||u(o,"src",a),o.controls=!0,u(o,"class","w-full max-w-md"),u(f,"class","mt-2 text-sm text-gray-700 dark:text-gray-300"),u(e,"class","flex flex-col items-center justify-center p-4 bg-neutral-200 dark:bg-neutral-800")},m(D,d){y(D,e,d),m(e,t),m(t,r),m(e,l),m(e,o),m(o,s),m(e,i),m(e,f),m(f,w),F||(T=fe(o,"error",Te),F=!0)},p(D,d){d[0]&2101248&&!de(o.src,a=D[42].url)&&u(o,"src",a),d[0]&2101248&&p!==(p=(D[42].name||"Audio file")+"")&&le(w,p)},d(D){D&&c(e),F=!1,T()}}}function Ft(n){let e,t,r,l,o;return{c(){e=A("video"),t=H("Your browser does not support the video tag."),this.h()},l(s){e=V(s,"VIDEO",{src:!0,class:!0});var a=$(e);t=L(a,"Your browser does not support the video tag."),a.forEach(c),this.h()},h(){de(e.src,r=n[42].url)||u(e,"src",r),e.controls=!0,u(e,"class","max-h-96 w-full object-contain")},m(s,a){y(s,e,a),m(e,t),l||(o=fe(e,"error",Te),l=!0)},p(s,a){a[0]&2101248&&!de(e.src,r=s[42].url)&&u(e,"src",r)},d(s){s&&c(e),l=!1,o()}}}function Ot(n){let e,t,r,l,o;return{c(){e=A("img"),this.h()},l(s){e=V(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){de(e.src,t=n[42].url)||u(e,"src",t),u(e,"alt",r=n[42].name||"Comment attachment"),u(e,"class","max-h-96 w-full object-contain")},m(s,a){y(s,e,a),l||(o=fe(e,"error",Te),l=!0)},p(s,a){a[0]&2101248&&!de(e.src,t=s[42].url)&&u(e,"src",t),a[0]&2101248&&r!==(r=s[42].name||"Comment attachment")&&u(e,"alt",r)},d(s){s&&c(e),l=!1,o()}}}function We(n){let e,t=ge(n[12]),r=[];for(let l=0;l<t.length;l+=1)r[l]=Ye(Ne(n,t,l));return{c(){e=A("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=V(l,"DIV",{class:!0});var o=$(e);for(let s=0;s<r.length;s+=1)r[s].l(o);o.forEach(c),this.h()},h(){u(e,"class","flex overflow-x-auto gap-1 p-1 bg-neutral-200 dark:bg-neutral-800")},m(l,o){y(l,e,o);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null)},p(l,o){if(o[0]&2101248){t=ge(l[12]);let s;for(s=0;s<t.length;s+=1){const a=Ne(l,t,s);r[s]?r[s].p(a,o):(r[s]=Ye(a),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=t.length}},d(l){l&&c(e),ct(r,l)}}}function Tt(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-neutral-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>';return{c(){e=A("div"),e.innerHTML=t,this.h()},l(r){e=V(r,"DIV",{class:!0,"data-svelte-h":!0}),me(e)!=="svelte-1rycusf"&&(e.innerHTML=t),this.h()},h(){u(e,"class","w-full h-full bg-neutral-300 dark:bg-neutral-700 flex items-center justify-center")},m(r,l){y(r,e,l)},p:ie,d(r){r&&c(e)}}}function Bt(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-neutral-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path></svg>';return{c(){e=A("div"),e.innerHTML=t,this.h()},l(r){e=V(r,"DIV",{class:!0,"data-svelte-h":!0}),me(e)!=="svelte-414caj"&&(e.innerHTML=t),this.h()},h(){u(e,"class","w-full h-full bg-neutral-300 dark:bg-neutral-700 flex items-center justify-center")},m(r,l){y(r,e,l)},p:ie,d(r){r&&c(e)}}}function Ut(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-neutral-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>';return{c(){e=A("div"),e.innerHTML=t,this.h()},l(r){e=V(r,"DIV",{class:!0,"data-svelte-h":!0}),me(e)!=="svelte-1yxcl89"&&(e.innerHTML=t),this.h()},h(){u(e,"class","w-full h-full bg-neutral-300 dark:bg-neutral-700 flex items-center justify-center")},m(r,l){y(r,e,l)},p:ie,d(r){r&&c(e)}}}function zt(n){let e,t;return{c(){e=A("img"),this.h()},l(r){e=V(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){de(e.src,t=n[42].url)||u(e,"src",t),u(e,"alt","thumbnail"),u(e,"class","w-full h-full object-cover")},m(r,l){y(r,e,l)},p(r,l){l[0]&4096&&!de(e.src,t=r[42].url)&&u(e,"src",t)},d(r){r&&c(e)}}}function Ye(n){let e,t,r,l,o;function s(p,w){return p[42].type==="image"?zt:p[42].type==="video"?Ut:p[42].type==="audio"?Bt:Tt}let a=s(n),i=a(n);function f(){return n[31](n[44])}return{c(){e=A("button"),i.c(),t=z(),this.h()},l(p){e=V(p,"BUTTON",{class:!0});var w=$(e);i.l(w),t=S(w),w.forEach(c),this.h()},h(){u(e,"class",r="flex-shrink-0 w-12 h-12 rounded overflow-hidden focus:outline-none transition-all "+(n[44]===n[21]?"ring-2 ring-neutral-500 transform scale-105":"opacity-60 hover:opacity-100"))},m(p,w){y(p,e,w),i.m(e,null),m(e,t),l||(o=fe(e,"click",Ve(f)),l=!0)},p(p,w){n=p,a===(a=s(n))&&i?i.p(n,w):(i.d(1),i=a(n),i&&(i.c(),i.m(e,t))),w[0]&2097152&&r!==(r="flex-shrink-0 w-12 h-12 rounded overflow-hidden focus:outline-none transition-all "+(n[44]===n[21]?"ring-2 ring-neutral-500 transform scale-105":"opacity-60 hover:opacity-100"))&&u(e,"class",r)},d(p){p&&c(e),i.d(),l=!1,o()}}}function St(n){let e,t,r=(n[7]||"Anonymous")+"",l,o,s,a,i="•",f,p,w=n[26](n[8])+"",F,T,D,d,_,C,b,g,v,E,N,k,j,M,R=n[2]-n[3]+"",W,I,P,Y,x,he,te,pe,ye,re=n[1]&&Pe();const Ce=[Mt,jt],ue=[];function Ie(h,U){return h[15]?0:1}d=Ie(n),_=ue[d]=Ce[d](n);let ee=n[12]&&n[12].length>0&&He(n);return{c(){e=A("div"),t=A("a"),l=H(r),s=z(),a=A("span"),a.textContent=i,f=z(),p=A("span"),F=H(w),T=z(),re&&re.c(),D=z(),_.c(),C=z(),ee&&ee.c(),b=z(),g=A("div"),v=A("button"),E=X("svg"),N=X("path"),j=z(),M=A("span"),W=H(R),I=z(),P=A("button"),Y=X("svg"),x=X("path"),this.h()},l(h){e=V(h,"DIV",{class:!0});var U=$(e);t=V(U,"A",{href:!0,class:!0});var Z=$(t);l=L(Z,r),Z.forEach(c),s=S(U),a=V(U,"SPAN",{"data-svelte-h":!0}),me(a)!=="svelte-7hh8jk"&&(a.textContent=i),f=S(U),p=V(U,"SPAN",{});var ae=$(p);F=L(ae,w),ae.forEach(c),T=S(U),re&&re.l(U),U.forEach(c),D=S(h),_.l(h),C=S(h),ee&&ee.l(h),b=S(h),g=V(h,"DIV",{class:!0});var ce=$(g);v=V(ce,"BUTTON",{class:!0});var oe=$(v);E=Q(oe,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var we=$(E);N=Q(we,"path",{d:!0}),$(N).forEach(c),we.forEach(c),oe.forEach(c),j=S(ce),M=V(ce,"SPAN",{class:!0});var be=$(M);W=L(be,R),be.forEach(c),I=S(ce),P=V(ce,"BUTTON",{class:!0});var ke=$(P);Y=Q(ke,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var Be=$(Y);x=Q(Be,"path",{d:!0}),$(x).forEach(c),Be.forEach(c),ke.forEach(c),ce.forEach(c),this.h()},h(){u(t,"href",o=`/user/${n[7]}`),u(t,"class","font-medium hover:text-rose-900 hover:underline"),u(e,"class","flex flex-wrap items-center gap-2 text-sm text-gray-600 mb-2"),u(N,"d","M5 14l5-5 5 5H5z"),u(E,"xmlns","http://www.w3.org/2000/svg"),u(E,"class","h-5 w-5"),u(E,"viewBox","0 0 20 20"),u(E,"fill","currentColor"),u(v,"class",k="flex items-center justify-center hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-full w-8 h-8 transition-colors "+(n[4]?"text-teal-600":"text-gray-600")),u(M,"class","text-sm font-medium"),u(x,"d","M5 6l5 5 5-5H5z"),u(Y,"xmlns","http://www.w3.org/2000/svg"),u(Y,"class","h-5 w-5"),u(Y,"viewBox","0 0 20 20"),u(Y,"fill","currentColor"),u(P,"class",he="flex items-center justify-center hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-full w-8 h-8 transition-colors "+(n[5]?"text-rose-600":"text-gray-500")),u(g,"class","flex items-center gap-2 mt-3")},m(h,U){y(h,e,U),m(e,t),m(t,l),m(e,s),m(e,a),m(e,f),m(e,p),m(p,F),m(e,T),re&&re.m(e,null),y(h,D,U),ue[d].m(h,U),y(h,C,U),ee&&ee.m(h,U),y(h,b,U),y(h,g,U),m(g,v),m(v,E),m(E,N),m(g,j),m(g,M),m(M,W),m(g,I),m(g,P),m(P,Y),m(Y,x),te=!0,pe||(ye=[fe(v,"click",n[32]),fe(P,"click",n[33])],pe=!0)},p(h,U){(!te||U[0]&128)&&r!==(r=(h[7]||"Anonymous")+"")&&le(l,r),(!te||U[0]&128&&o!==(o=`/user/${h[7]}`))&&u(t,"href",o),(!te||U[0]&256)&&w!==(w=h[26](h[8])+"")&&le(F,w),h[1]?re||(re=Pe(),re.c(),re.m(e,null)):re&&(re.d(1),re=null);let Z=d;d=Ie(h),d===Z?ue[d].p(h,U):(ne(),B(ue[Z],1,1,()=>{ue[Z]=null}),se(),_=ue[d],_?_.p(h,U):(_=ue[d]=Ce[d](h),_.c()),O(_,1),_.m(C.parentNode,C)),h[12]&&h[12].length>0?ee?ee.p(h,U):(ee=He(h),ee.c(),ee.m(b.parentNode,b)):ee&&(ee.d(1),ee=null),(!te||U[0]&16&&k!==(k="flex items-center justify-center hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-full w-8 h-8 transition-colors "+(h[4]?"text-teal-600":"text-gray-600")))&&u(v,"class",k),(!te||U[0]&12)&&R!==(R=h[2]-h[3]+"")&&le(W,R),(!te||U[0]&32&&he!==(he="flex items-center justify-center hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-full w-8 h-8 transition-colors "+(h[5]?"text-rose-600":"text-gray-500")))&&u(P,"class",he)},i(h){te||(O(_),te=!0)},o(h){B(_),te=!1},d(h){h&&(c(e),c(D),c(C),c(b),c(g)),re&&re.d(),ue[d].d(h),ee&&ee.d(h),pe=!1,ut(ye)}}}function qe(n){let e,t;return e=new ve({props:{variant:"outline",class:"text-xs py-1 px-3 hover:bg-neutral-100 dark:hover:bg-neutral-800",$$slots:{default:[Nt]},$$scope:{ctx:n}}}),e.$on("click",n[27]),{c(){q(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,l){J(e,r,l),t=!0},p(r,l){const o={};l[1]&16384&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function Nt(n){let e;return{c(){e=H("Mark as Best Answer")},l(t){e=L(t,"Mark as Best Answer")},m(t,r){y(t,e,r)},d(t){t&&c(e)}}}function Ge(n){let e,t;return e=new ve({props:{variant:"outline",class:"text-xs py-1 px-3 hover:bg-neutral-100 dark:hover:bg-neutral-800",$$slots:{default:[Pt]},$$scope:{ctx:n}}}),e.$on("click",n[34]),{c(){q(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,l){J(e,r,l),t=!0},p(r,l){const o={};l[0]&32768|l[1]&16384&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function Pt(n){let e=n[15]?"Cancel Edit":"Edit",t;return{c(){t=H(e)},l(r){t=L(r,e)},m(r,l){y(r,t,l)},p(r,l){l[0]&32768&&e!==(e=r[15]?"Cancel Edit":"Edit")&&le(t,e)},d(r){r&&c(t)}}}function Ht(n){let e=n[14]?"Cancel":"Reply",t;return{c(){t=H(e)},l(r){t=L(r,e)},m(r,l){y(r,t,l)},p(r,l){l[0]&16384&&e!==(e=r[14]?"Cancel":"Reply")&&le(t,e)},d(r){r&&c(t)}}}function Je(n){let e,t;return e=new ve({props:{variant:"outline",class:"text-xs py-1 px-3 hover:bg-rose-900 hover:text-white transition-colors",$$slots:{default:[Lt]},$$scope:{ctx:n}}}),e.$on("click",n[35]),{c(){q(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,l){J(e,r,l),t=!0},p(r,l){const o={};l[1]&16384&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function Lt(n){let e;return{c(){e=H("Save Edit")},l(t){e=L(t,"Save Edit")},m(t,r){y(t,e,r)},d(t){t&&c(e)}}}function Ke(n){let e,t,r,l,o,s,a,i,f,p;function w(d){n[36](d)}let F={class:"w-full p-2 border rounded-lg text-sm bg-white dark:bg-neutral-800 border-neutral-200 dark:border-neutral-700",placeholder:"Write your reply..."};n[16]!==void 0&&(F.value=n[16]),t=new Fe({props:F}),Ee.push(()=>je(t,"value",w));function T(d){n[37](d)}let D={};return n[17]!==void 0&&(D.mediaFiles=n[17]),s=new wt({props:D}),Ee.push(()=>je(s,"mediaFiles",T)),s.$on("update",n[23]),f=new ve({props:{variant:"outline",class:"mt-2 text-xs py-1 px-3 hover:bg-rose-900 hover:text-white transition-colors",disabled:n[18],$$slots:{default:[Yt]},$$scope:{ctx:n}}}),f.$on("click",n[24]),{c(){e=A("div"),q(t.$$.fragment),l=z(),o=A("div"),q(s.$$.fragment),i=z(),q(f.$$.fragment),this.h()},l(d){e=V(d,"DIV",{class:!0});var _=$(e);G(t.$$.fragment,_),l=S(_),o=V(_,"DIV",{class:!0});var C=$(o);G(s.$$.fragment,C),C.forEach(c),i=S(_),G(f.$$.fragment,_),_.forEach(c),this.h()},h(){u(o,"class","my-3"),u(e,"class","p-4 pt-0")},m(d,_){y(d,e,_),J(t,e,null),m(e,l),m(e,o),J(s,o,null),m(e,i),J(f,e,null),p=!0},p(d,_){const C={};!r&&_[0]&65536&&(r=!0,C.value=d[16],De(()=>r=!1)),t.$set(C);const b={};!a&&_[0]&131072&&(a=!0,b.mediaFiles=d[17],De(()=>a=!1)),s.$set(b);const g={};_[0]&262144&&(g.disabled=d[18]),_[0]&262144|_[1]&16384&&(g.$$scope={dirty:_,ctx:d}),f.$set(g)},i(d){p||(O(t.$$.fragment,d),O(s.$$.fragment,d),O(f.$$.fragment,d),p=!0)},o(d){B(t.$$.fragment,d),B(s.$$.fragment,d),B(f.$$.fragment,d),p=!1},d(d){d&&c(e),K(t),K(s),K(f)}}}function Rt(n){let e;return{c(){e=H("Submit Reply")},l(t){e=L(t,"Submit Reply")},m(t,r){y(t,e,r)},d(t){t&&c(e)}}}function Wt(n){let e,t;return{c(){e=A("span"),t=H(`\r
              Uploading...`),this.h()},l(r){e=V(r,"SPAN",{class:!0}),$(e).forEach(c),t=L(r,`\r
              Uploading...`),this.h()},h(){u(e,"class","inline-block h-4 w-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2")},m(r,l){y(r,e,l),y(r,t,l)},d(r){r&&(c(e),c(t))}}}function Yt(n){let e;function t(o,s){return o[18]?Wt:Rt}let r=t(n),l=r(n);return{c(){l.c(),e=_e()},l(o){l.l(o),e=_e()},m(o,s){l.m(o,s),y(o,e,s)},p(o,s){r!==(r=t(o))&&(l.d(1),l=r(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&c(e),l.d(o)}}}function Xe(n){let e,t=[],r=new Map,l,o=ge(n[10]);const s=a=>a[39].id;for(let a=0;a<o.length;a+=1){let i=Se(n,o,a),f=s(i);r.set(f,t[a]=Qe(f,i))}return{c(){e=A("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=V(a,"DIV",{class:!0});var i=$(e);for(let f=0;f<t.length;f+=1)t[f].l(i);i.forEach(c),this.h()},h(){u(e,"class","pl-4 border-l-2 border-neutral-200 dark:border-neutral-700 ml-4 mb-4")},m(a,i){y(a,e,i);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);l=!0},p(a,i){i[0]&3648&&(o=ge(a[10]),ne(),t=ht(t,i,s,1,a,o,r,e,mt,Qe,null,Se),se())},i(a){if(!l){for(let i=0;i<o.length;i+=1)O(t[i]);l=!0}},o(a){for(let i=0;i<t.length;i+=1)B(t[i]);l=!1},d(a){a&&c(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function Qe(n,e){let t,r,l,o;return r=new gt({props:{threadId:e[11],commentId:e[39].id,comment:e[39].content,commentator:e[39].author,postedDateComment:e[39].createdAt,selected:e[39].bestAnswer||!1,threadOwner:e[9],replies:e[39].replies||[],upvotes:e[39].upvotes,downvotes:e[39].downvotes,userUpvoted:e[39].userUpvoted,userDownvoted:e[39].userDownvoted,parentCommentId:e[6],mediaFiles:e[39].mediaFiles||[]}}),{key:n,first:null,c(){t=A("div"),q(r.$$.fragment),l=z(),this.h()},l(s){t=V(s,"DIV",{class:!0});var a=$(t);G(r.$$.fragment,a),l=S(a),a.forEach(c),this.h()},h(){u(t,"class","mt-2"),this.first=t},m(s,a){y(s,t,a),J(r,t,null),m(t,l),o=!0},p(s,a){e=s;const i={};a[0]&2048&&(i.threadId=e[11]),a[0]&1024&&(i.commentId=e[39].id),a[0]&1024&&(i.comment=e[39].content),a[0]&1024&&(i.commentator=e[39].author),a[0]&1024&&(i.postedDateComment=e[39].createdAt),a[0]&1024&&(i.selected=e[39].bestAnswer||!1),a[0]&512&&(i.threadOwner=e[9]),a[0]&1024&&(i.replies=e[39].replies||[]),a[0]&1024&&(i.upvotes=e[39].upvotes),a[0]&1024&&(i.downvotes=e[39].downvotes),a[0]&1024&&(i.userUpvoted=e[39].userUpvoted),a[0]&1024&&(i.userDownvoted=e[39].userDownvoted),a[0]&64&&(i.parentCommentId=e[6]),a[0]&1024&&(i.mediaFiles=e[39].mediaFiles||[]),r.$set(i)},i(s){o||(O(r.$$.fragment,s),o=!0)},o(s){B(r.$$.fragment,s),o=!1},d(s){s&&c(t),K(r)}}}function qt(n){let e,t,r,l,o,s,a,i,f,p,w,F,T;t=new Oe({props:{class:"p-4",$$slots:{default:[St]},$$scope:{ctx:n}}}),l=new $t({});let D=n[19]&&!n[1]&&qe(n),d=n[13]===n[7]&&Ge(n);f=new ve({props:{variant:"outline",class:"text-xs py-1 px-3 hover:bg-neutral-100 dark:hover:bg-neutral-800",$$slots:{default:[Ht]},$$scope:{ctx:n}}}),f.$on("click",n[22]);let _=n[15]&&Je(n),C=n[14]&&Ke(n),b=n[10]&&n[10].length>0&&Xe(n);return{c(){e=A("div"),q(t.$$.fragment),r=z(),q(l.$$.fragment),o=z(),s=A("div"),D&&D.c(),a=z(),d&&d.c(),i=z(),q(f.$$.fragment),p=z(),_&&_.c(),w=z(),C&&C.c(),F=z(),b&&b.c(),this.h()},l(g){e=V(g,"DIV",{class:!0});var v=$(e);G(t.$$.fragment,v),r=S(v),G(l.$$.fragment,v),o=S(v),s=V(v,"DIV",{class:!0});var E=$(s);D&&D.l(E),a=S(E),d&&d.l(E),i=S(E),G(f.$$.fragment,E),p=S(E),_&&_.l(E),E.forEach(c),w=S(v),C&&C.l(v),F=S(v),b&&b.l(v),v.forEach(c),this.h()},h(){u(s,"class","p-4 flex flex-wrap gap-2"),u(e,"class","flex flex-col w-full")},m(g,v){y(g,e,v),J(t,e,null),m(e,r),J(l,e,null),m(e,o),m(e,s),D&&D.m(s,null),m(s,a),d&&d.m(s,null),m(s,i),J(f,s,null),m(s,p),_&&_.m(s,null),m(e,w),C&&C.m(e,null),m(e,F),b&&b.m(e,null),T=!0},p(g,v){const E={};v[0]&3183039|v[1]&16384&&(E.$$scope={dirty:v,ctx:g}),t.$set(E),g[19]&&!g[1]?D?(D.p(g,v),v[0]&524290&&O(D,1)):(D=qe(g),D.c(),O(D,1),D.m(s,a)):D&&(ne(),B(D,1,1,()=>{D=null}),se()),g[13]===g[7]?d?(d.p(g,v),v[0]&8320&&O(d,1)):(d=Ge(g),d.c(),O(d,1),d.m(s,i)):d&&(ne(),B(d,1,1,()=>{d=null}),se());const N={};v[0]&16384|v[1]&16384&&(N.$$scope={dirty:v,ctx:g}),f.$set(N),g[15]?_?(_.p(g,v),v[0]&32768&&O(_,1)):(_=Je(g),_.c(),O(_,1),_.m(s,null)):_&&(ne(),B(_,1,1,()=>{_=null}),se()),g[14]?C?(C.p(g,v),v[0]&16384&&O(C,1)):(C=Ke(g),C.c(),O(C,1),C.m(e,F)):C&&(ne(),B(C,1,1,()=>{C=null}),se()),g[10]&&g[10].length>0?b?(b.p(g,v),v[0]&1024&&O(b,1)):(b=Xe(g),b.c(),O(b,1),b.m(e,null)):b&&(ne(),B(b,1,1,()=>{b=null}),se())},i(g){T||(O(t.$$.fragment,g),O(l.$$.fragment,g),O(D),O(d),O(f.$$.fragment,g),O(_),O(C),O(b),T=!0)},o(g){B(t.$$.fragment,g),B(l.$$.fragment,g),B(D),B(d),B(f.$$.fragment,g),B(_),B(C),B(b),T=!1},d(g){g&&c(e),K(t),K(l),D&&D.d(),d&&d.d(),K(f),_&&_.d(),C&&C.d(),b&&b.d()}}}function Gt(n){let e,t,r;return t=new Me({props:{class:`w-full bg-opacity-90 hover:bg-opacity-100 relative ${n[1]?"border-2 border-teal-600 dark:border-teal-800":""}`,$$slots:{default:[qt]},$$scope:{ctx:n}}}),{c(){e=A("div"),q(t.$$.fragment),this.h()},l(l){e=V(l,"DIV",{class:!0});var o=$(e);G(t.$$.fragment,o),o.forEach(c),this.h()},h(){u(e,"class","flex w-full py-1")},m(l,o){y(l,e,o),J(t,e,null),r=!0},p(l,o){const s={};o[0]&2&&(s.class=`w-full bg-opacity-90 hover:bg-opacity-100 relative ${l[1]?"border-2 border-teal-600 dark:border-teal-800":""}`),o[0]&4194303|o[1]&16384&&(s.$$scope={dirty:o,ctx:l}),t.$set(s)},i(l){r||(O(t.$$.fragment,l),r=!0)},o(l){B(t.$$.fragment,l),r=!1},d(l){l&&c(e),K(t)}}}function Jt(n){const t=`; ${document.cookie}`.split(`; ${n}=`);return t.length===2?t.pop().split(";").shift():null}function Te(n){console.error("Media failed to load:",n)}function Kt(n,e,t){let{commentId:r}=e,{comment:l}=e,{commentator:o}=e,{postedDateComment:s}=e,{selected:a=!1}=e,{threadOwner:i}=e,{replies:f=[]}=e,{threadId:p}=e,{upvotes:w=0}=e,{downvotes:F=0}=e,{userUpvoted:T=!1}=e,{userDownvoted:D=!1}=e,{mediaFiles:d=[]}=e,_=null,C=!1,b=!1,g="",v=[],E=!1,N=!1,k=l,j=0;it(()=>{typeof l=="object"&&l!==null&&(t(2,w=l.upvotes||0),t(3,F=l.downvotes||0),t(4,T=l.userUpvoted||!1),t(5,D=l.userDownvoted||!1))});const M=()=>{t(14,C=!C),C||t(17,v=[])};function R(h){t(17,v=h.detail.mediaFiles)}const W=async()=>{if(!(!g.trim()&&v.length===0))try{const h=$e();if(!h.Authorization){console.error("Please log in to reply");return}const U={content:g,postId:p,parentCommentId:r},Z=await fetch("https://backend-310608491068.europe-west1.run.app/api/comments/create",{method:"POST",headers:{"Content-Type":"application/json",...h},body:JSON.stringify(U)});if(!Z.ok){const oe=await Z.text();throw new Error(`Failed to add reply: ${oe}`)}const ce=(await Z.json()).commentId;if(v.length>0){t(18,E=!0);for(let oe=0;oe<v.length;oe++){const we=v[oe],be=new FormData;be.append("file",we.file),be.append("type",we.type||"image");try{(await fetch(`https://backend-310608491068.europe-west1.run.app/api/comments/${ce}/upload-media`,{method:"POST",headers:{...h},body:be})).ok||console.error(`Failed to upload media file ${oe+1} for reply`)}catch(ke){console.error(`Error uploading media file ${oe+1} for reply:`,ke)}}t(18,E=!1)}t(16,g=""),t(17,v=[]),t(14,C=!1),document.dispatchEvent(new CustomEvent("refreshComments",{bubbles:!0,detail:{threadId:p}}))}catch(h){console.error("Error adding reply:",h)}},I=async h=>{try{const U=$e();if(!U.Authorization){console.error("Please log in to vote");return}const Z=await fetch(`https://backend-310608491068.europe-west1.run.app/api/comments/${h?"upvote":"downvote"}/${r}`,{method:"POST",headers:{"Content-Type":"application/json",...U}});if(!Z.ok)throw new Error(`Vote failed: ${Z.status}`);const ae=await Z.json();ae&&(t(2,w=ae.upvotes||w),t(3,F=ae.downvotes||F),t(4,T=h),t(5,D=!h))}catch(U){console.error("Error voting:",U)}},P=h=>{if(!h)return"";const U=new Date(h),Z={hour:"numeric",minute:"numeric",hour12:!1},ae=new Intl.DateTimeFormat("en-US",Z).format(U),ce=U.getDate(),oe=U.toLocaleString("en-US",{month:"short"}),we=U.getFullYear();return`${ae}, ${ce} ${oe} ${we}`},Y=async()=>{try{if(!N){console.error("Only the thread owner can mark best answers");return}const h=Jt("tokenKey");if(!h){console.error("No auth token found");return}const U=await fetch(`https://backend-310608491068.europe-west1.run.app/api/posts/${p}/markBestAnswer/${r}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`}});if(U.status===403){console.error("You don't have permission to mark best answers");return}if(!U.ok)throw new Error(`Failed to mark best answer: ${U.status}`);t(1,a=!a),document.dispatchEvent(new CustomEvent("refreshComments",{bubbles:!0,detail:{threadId:p}}))}catch(h){console.error("Error toggling best answer status:",h)}},x=()=>{d.length>1&&t(21,j=(j+1)%d.length)},he=()=>{d.length>1&&t(21,j=(j-1+d.length)%d.length)};function te(h){k=h,t(20,k)}const pe=h=>t(21,j=h),ye=()=>I(!0),re=()=>I(!1),Ce=()=>{t(15,b=!b),t(20,k=l)},ue=async()=>{try{const h=$e();if(!h.Authorization){console.error("Please log in to edit");return}const U={content:k,postId:p},Z=await fetch(`https://backend-310608491068.europe-west1.run.app/api/comments/edit/${r}`,{method:"PUT",headers:{"Content-Type":"application/json",...h},body:JSON.stringify(U)});if(!Z.ok){const ae=await Z.text();throw new Error(`Failed to edit comment: ${ae}`)}t(15,b=!1),t(0,l=k),document.dispatchEvent(new CustomEvent("refreshComments",{bubbles:!0,detail:{threadId:p}}))}catch(h){console.error("Error editing comment:",h)}};function Ie(h){g=h,t(16,g)}function ee(h){v=h,t(17,v)}return n.$$set=h=>{"commentId"in h&&t(6,r=h.commentId),"comment"in h&&t(0,l=h.comment),"commentator"in h&&t(7,o=h.commentator),"postedDateComment"in h&&t(8,s=h.postedDateComment),"selected"in h&&t(1,a=h.selected),"threadOwner"in h&&t(9,i=h.threadOwner),"replies"in h&&t(10,f=h.replies),"threadId"in h&&t(11,p=h.threadId),"upvotes"in h&&t(2,w=h.upvotes),"downvotes"in h&&t(3,F=h.downvotes),"userUpvoted"in h&&t(4,T=h.userUpvoted),"userDownvoted"in h&&t(5,D=h.userDownvoted),"mediaFiles"in h&&t(12,d=h.mediaFiles)},n.$$.update=()=>{n.$$.dirty[0]&8704&&_t.subscribe(h=>{t(13,_=h),t(19,N=_===i)})},[l,a,w,F,T,D,r,o,s,i,f,p,d,_,C,b,g,v,E,N,k,j,M,R,W,I,P,Y,x,he,te,pe,ye,re,Ce,ue,Ie,ee]}class gt extends ft{constructor(e){super(),dt(this,e,Kt,Gt,at,{commentId:6,comment:0,commentator:7,postedDateComment:8,selected:1,threadOwner:9,replies:10,threadId:11,upvotes:2,downvotes:3,userUpvoted:4,userDownvoted:5,mediaFiles:12},null,[-1,-1])}}function Ze(n,e,t){const r=n.slice();return r[21]=e[t],r}function xe(n,e,t){const r=n.slice();return r[24]=e[t],r[26]=t,r}function et(n){let e,t;return e=new kt({props:{id:n[0].id,title:n[1].title,description:n[1].description,tags:n[1].tags,mysteryObject:n[1].mysteryObject,imageSrc:n[1].mysteryObjectImage?`data:image/png;base64,${n[1].mysteryObjectImage}`:"",mediaFiles:n[1].mediaFiles||[],postedBy:n[1].author,postedDate:n[1].createdAt,upvotes:n[1].upvotes,downvotes:n[1].downvotes,userUpvoted:n[1].userUpvoted,userDownvoted:n[1].userDownvoted,createdAt:n[1].createdAt,updatedAt:n[1].updatedAt,solved:n[1].solved,variant:"thread"}}),{c(){q(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,l){J(e,r,l),t=!0},p(r,l){const o={};l&1&&(o.id=r[0].id),l&2&&(o.title=r[1].title),l&2&&(o.description=r[1].description),l&2&&(o.tags=r[1].tags),l&2&&(o.mysteryObject=r[1].mysteryObject),l&2&&(o.imageSrc=r[1].mysteryObjectImage?`data:image/png;base64,${r[1].mysteryObjectImage}`:""),l&2&&(o.mediaFiles=r[1].mediaFiles||[]),l&2&&(o.postedBy=r[1].author),l&2&&(o.postedDate=r[1].createdAt),l&2&&(o.upvotes=r[1].upvotes),l&2&&(o.downvotes=r[1].downvotes),l&2&&(o.userUpvoted=r[1].userUpvoted),l&2&&(o.userDownvoted=r[1].userDownvoted),l&2&&(o.createdAt=r[1].createdAt),l&2&&(o.updatedAt=r[1].updatedAt),l&2&&(o.solved=r[1].solved),e.$set(o)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function tt(n){let e,t,r;return t=new ve({props:{variant:"outline",class:"text-xs py-1 px-3 hover:bg-rose-900 hover:text-white transition-colors",$$slots:{default:[Xt]},$$scope:{ctx:n}}}),t.$on("click",n[12]),{c(){e=A("div"),q(t.$$.fragment),this.h()},l(l){e=V(l,"DIV",{class:!0});var o=$(e);G(t.$$.fragment,o),o.forEach(c),this.h()},h(){u(e,"class","mt-4 flex justify-end")},m(l,o){y(l,e,o),J(t,e,null),r=!0},p(l,o){const s={};o&134217728&&(s.$$scope={dirty:o,ctx:l}),t.$set(s)},i(l){r||(O(t.$$.fragment,l),r=!0)},o(l){B(t.$$.fragment,l),r=!1},d(l){l&&c(e),K(t)}}}function Xt(n){let e,t,r;return{c(){e=X("svg"),t=X("path"),r=H(`\r
          Edit Post`),this.h()},l(l){e=Q(l,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var o=$(e);t=Q(o,"path",{d:!0}),$(t).forEach(c),o.forEach(c),r=L(l,`\r
          Edit Post`),this.h()},h(){u(t,"d","M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"class","h-4 w-4 mr-1"),u(e,"viewBox","0 0 20 20"),u(e,"fill","currentColor")},m(l,o){y(l,e,o),m(e,t),y(l,r,o)},p:ie,d(l){l&&(c(e),c(r))}}}function Qt(n){let e,t;return e=new Me({props:{class:"bg-opacity-90 hover:bg-opacity-100 mt-4",$$slots:{default:[tr]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,l){J(e,r,l),t=!0},p(r,l){const o={};l&134217728&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function Zt(n){let e,t;return e=new Me({props:{class:"bg-opacity-90 hover:bg-opacity-100 p-4 mt-4 flex flex-col justify-center items-center",$$slots:{default:[cr]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,l){J(e,r,l),t=!0},p(r,l){const o={};l&134218168&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function xt(n){let e;return{c(){e=H("Sign in to comment")},l(t){e=L(t,"Sign in to comment")},m(t,r){y(t,e,r)},d(t){t&&c(e)}}}function er(n){let e,t;return e=new pt({props:{class:"text-lg text-center pb-6",$$slots:{default:[xt]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,l){J(e,r,l),t=!0},p(r,l){const o={};l&134217728&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function tr(n){let e,t;return e=new Oe({props:{$$slots:{default:[er]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,l){J(e,r,l),t=!0},p(r,l){const o={};l&134217728&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function rr(n){let e,t,r;return{c(){e=X("svg"),t=X("path"),r=H(`\r
                Add Media`),this.h()},l(l){e=Q(l,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var o=$(e);t=Q(o,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),$(t).forEach(c),o.forEach(c),r=L(l,`\r
                Add Media`),this.h()},h(){u(t,"fill-rule","evenodd"),u(t,"d","M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"),u(t,"clip-rule","evenodd"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"class","h-4 w-4 mr-1"),u(e,"viewBox","0 0 20 20"),u(e,"fill","currentColor")},m(l,o){y(l,e,o),m(e,t),y(l,r,o)},p:ie,d(l){l&&(c(e),c(r))}}}function rt(n){let e,t=n[7].length+"",r,l,o=n[7].length!==1?"s":"",s,a;return{c(){e=A("span"),r=H(t),l=H(" file"),s=H(o),a=H(" selected"),this.h()},l(i){e=V(i,"SPAN",{class:!0});var f=$(e);r=L(f,t),l=L(f," file"),s=L(f,o),a=L(f," selected"),f.forEach(c),this.h()},h(){u(e,"class","text-xs text-neutral-500")},m(i,f){y(i,e,f),m(e,r),m(e,l),m(e,s),m(e,a)},p(i,f){f&128&&t!==(t=i[7].length+"")&&le(r,t),f&128&&o!==(o=i[7].length!==1?"s":"")&&le(s,o)},d(i){i&&c(e)}}}function lr(n){let e,t,r;return{c(){e=X("svg"),t=X("path"),r=H(`\r
                Post Comment`),this.h()},l(l){e=Q(l,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var o=$(e);t=Q(o,"path",{d:!0}),$(t).forEach(c),o.forEach(c),r=L(l,`\r
                Post Comment`),this.h()},h(){u(t,"d","M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"class","h-4 w-4 mr-1"),u(e,"viewBox","0 0 20 20"),u(e,"fill","currentColor")},m(l,o){y(l,e,o),m(e,t),y(l,r,o)},p:ie,d(l){l&&(c(e),c(r))}}}function or(n){let e,t,r=n[7].length>0?"Uploading...":"Sending...",l;return{c(){e=A("span"),t=z(),l=H(r),this.h()},l(o){e=V(o,"SPAN",{class:!0}),$(e).forEach(c),t=S(o),l=L(o,r),this.h()},h(){u(e,"class","inline-block h-4 w-4 border-2 border-current/30 border-t-current rounded-full animate-spin mr-2")},m(o,s){y(o,e,s),y(o,t,s),y(o,l,s)},p(o,s){s&128&&r!==(r=o[7].length>0?"Uploading...":"Sending...")&&le(l,r)},d(o){o&&(c(e),c(t),c(l))}}}function nr(n){let e;function t(o,s){return o[4]?or:lr}let r=t(n),l=r(n);return{c(){l.c(),e=_e()},l(o){l.l(o),e=_e()},m(o,s){l.m(o,s),y(o,e,s)},p(o,s){r===(r=t(o))&&l?l.p(o,s):(l.d(1),l=r(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&c(e),l.d(o)}}}function lt(n){let e,t=ge(n[7]),r=[];for(let l=0;l<t.length;l+=1)r[l]=ot(xe(n,t,l));return{c(){e=A("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=V(l,"DIV",{class:!0});var o=$(e);for(let s=0;s<r.length;s+=1)r[s].l(o);o.forEach(c),this.h()},h(){u(e,"class","mt-2 flex flex-wrap gap-2")},m(l,o){y(l,e,o);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null)},p(l,o){if(o&128){t=ge(l[7]);let s;for(s=0;s<t.length;s+=1){const a=xe(l,t,s);r[s]?r[s].p(a,o):(r[s]=ot(a),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=t.length}},d(l){l&&c(e),ct(r,l)}}}function sr(n){let e,t;return{c(){e=X("svg"),t=X("path"),this.h()},l(r){e=Q(r,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var l=$(e);t=Q(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),$(t).forEach(c),l.forEach(c),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"stroke-width","2"),u(t,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"class","h-8 w-8 text-neutral-500"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke","currentColor")},m(r,l){y(r,e,l),m(e,t)},p:ie,d(r){r&&c(e)}}}function ar(n){let e,t;return{c(){e=X("svg"),t=X("path"),this.h()},l(r){e=Q(r,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var l=$(e);t=Q(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),$(t).forEach(c),l.forEach(c),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"stroke-width","2"),u(t,"d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"class","h-8 w-8 text-neutral-500"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke","currentColor")},m(r,l){y(r,e,l),m(e,t)},p:ie,d(r){r&&c(e)}}}function ir(n){let e,t,r;return{c(){e=X("svg"),t=X("path"),r=X("path"),this.h()},l(l){e=Q(l,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var o=$(e);t=Q(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),$(t).forEach(c),r=Q(o,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),$(r).forEach(c),o.forEach(c),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"stroke-width","2"),u(t,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),u(r,"stroke-linecap","round"),u(r,"stroke-linejoin","round"),u(r,"stroke-width","2"),u(r,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"class","h-8 w-8 text-neutral-500"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke","currentColor")},m(l,o){y(l,e,o),m(e,t),m(e,r)},p:ie,d(l){l&&c(e)}}}function ur(n){let e,t,r;return{c(){e=A("img"),this.h()},l(l){e=V(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){de(e.src,t=URL.createObjectURL(n[24]))||u(e,"src",t),u(e,"alt",r=n[24].name),u(e,"class","max-w-full max-h-full object-contain")},m(l,o){y(l,e,o)},p(l,o){o&128&&!de(e.src,t=URL.createObjectURL(l[24]))&&u(e,"src",t),o&128&&r!==(r=l[24].name)&&u(e,"alt",r)},d(l){l&&c(e)}}}function ot(n){let e,t,r,l,o,s,a="×",i,f,p;function w(d,_){return _&128&&(t=null),_&128&&(r=null),_&128&&(l=null),t==null&&(t=!!d[24].type.startsWith("image/")),t?ur:(r==null&&(r=!!d[24].type.startsWith("video/")),r?ir:(l==null&&(l=!!d[24].type.startsWith("audio/")),l?ar:sr))}let F=w(n,-1),T=F(n);function D(){return n[16](n[26])}return{c(){e=A("div"),T.c(),o=z(),s=A("button"),s.textContent=a,i=z(),this.h()},l(d){e=V(d,"DIV",{class:!0});var _=$(e);T.l(_),o=S(_),s=V(_,"BUTTON",{class:!0,"data-svelte-h":!0}),me(s)!=="svelte-hc61wy"&&(s.textContent=a),i=S(_),_.forEach(c),this.h()},h(){u(s,"class","absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-xs"),u(e,"class","relative bg-neutral-100 dark:bg-neutral-800 rounded p-1 w-16 h-16 flex items-center justify-center")},m(d,_){y(d,e,_),T.m(e,null),m(e,o),m(e,s),m(e,i),f||(p=fe(s,"click",D),f=!0)},p(d,_){n=d,F===(F=w(n,_))&&T?T.p(n,_):(T.d(1),T=F(n),T&&(T.c(),T.m(e,o)))},d(d){d&&c(e),T.d(),f=!1,p()}}}function nt(n){let e,t;return{c(){e=A("p"),t=H(n[5]),this.h()},l(r){e=V(r,"P",{class:!0});var l=$(e);t=L(l,n[5]),l.forEach(c),this.h()},h(){u(e,"class","text-red-500 text-sm")},m(r,l){y(r,e,l),m(e,t)},p(r,l){l&32&&le(t,r[5])},d(r){r&&c(e)}}}function cr(n){let e,t,r,l,o,s,a,i,f,p,w,F,T,D,d,_,C,b;function g(j){n[13](j)}let v={class:"w-full resize-none p-2",placeholder:"Write your comment..."};n[3]!==void 0&&(v.value=n[3]),t=new Fe({props:v}),Ee.push(()=>je(t,"value",g)),p=new ve({props:{variant:"outline",size:"sm",class:"text-xs hover:bg-neutral-100 dark:hover:bg-neutral-800",$$slots:{default:[rr]},$$scope:{ctx:n}}}),p.$on("click",n[15]);let E=n[7].length>0&&rt(n);T=new ve({props:{variant:"outline",size:"sm",class:"text-xs hover:bg-neutral-100 dark:hover:bg-neutral-800",disabled:n[4],$$slots:{default:[nr]},$$scope:{ctx:n}}}),T.$on("click",n[10]);let N=n[7].length>0&&lt(n),k=n[5]&&nt(n);return{c(){e=A("div"),q(t.$$.fragment),l=z(),o=A("div"),s=A("div"),a=A("div"),i=A("input"),f=z(),q(p.$$.fragment),w=z(),E&&E.c(),F=z(),q(T.$$.fragment),D=z(),N&&N.c(),d=z(),k&&k.c(),this.h()},l(j){e=V(j,"DIV",{class:!0});var M=$(e);G(t.$$.fragment,M),l=S(M),o=V(M,"DIV",{class:!0});var R=$(o);s=V(R,"DIV",{class:!0});var W=$(s);a=V(W,"DIV",{class:!0});var I=$(a);i=V(I,"INPUT",{type:!0,id:!0,accept:!0,class:!0}),f=S(I),G(p.$$.fragment,I),w=S(I),E&&E.l(I),I.forEach(c),F=S(W),G(T.$$.fragment,W),W.forEach(c),D=S(R),N&&N.l(R),R.forEach(c),d=S(M),k&&k.l(M),M.forEach(c),this.h()},h(){u(i,"type","file"),u(i,"id","media-upload"),u(i,"accept","image/*,video/*,audio/*"),u(i,"class","hidden"),i.multiple=!0,u(a,"class","flex items-center space-x-2"),u(s,"class","flex items-center justify-center gap-2"),u(o,"class","w-full"),u(e,"class","w-full space-y-4")},m(j,M){y(j,e,M),J(t,e,null),m(e,l),m(e,o),m(o,s),m(s,a),m(a,i),n[14](i),m(a,f),J(p,a,null),m(a,w),E&&E.m(a,null),m(s,F),J(T,s,null),m(o,D),N&&N.m(o,null),m(e,d),k&&k.m(e,null),_=!0,C||(b=fe(i,"change",n[9]),C=!0)},p(j,M){const R={};!r&&M&8&&(r=!0,R.value=j[3],De(()=>r=!1)),t.$set(R);const W={};M&134217728&&(W.$$scope={dirty:M,ctx:j}),p.$set(W),j[7].length>0?E?E.p(j,M):(E=rt(j),E.c(),E.m(a,null)):E&&(E.d(1),E=null);const I={};M&16&&(I.disabled=j[4]),M&134217872&&(I.$$scope={dirty:M,ctx:j}),T.$set(I),j[7].length>0?N?N.p(j,M):(N=lt(j),N.c(),N.m(o,null)):N&&(N.d(1),N=null),j[5]?k?k.p(j,M):(k=nt(j),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},i(j){_||(O(t.$$.fragment,j),O(p.$$.fragment,j),O(T.$$.fragment,j),_=!0)},o(j){B(t.$$.fragment,j),B(p.$$.fragment,j),B(T.$$.fragment,j),_=!1},d(j){j&&c(e),K(t),n[14](null),K(p),E&&E.d(),K(T),N&&N.d(),k&&k.d(),C=!1,b()}}}function fr(n){let e,t;return e=new Me({props:{class:"bg-opacity-90 hover:bg-opacity-100",$$slots:{default:[_r]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,l){J(e,r,l),t=!0},p(r,l){const o={};l&134217728&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function dr(n){let e=[],t=new Map,r,l,o=ge(n[6]);const s=a=>a[21].id;for(let a=0;a<o.length;a+=1){let i=Ze(n,o,a),f=s(i);t.set(f,e[a]=st(f,i))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();r=_e()},l(a){for(let i=0;i<e.length;i+=1)e[i].l(a);r=_e()},m(a,i){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,i);y(a,r,i),l=!0},p(a,i){i&67&&(o=ge(a[6]),ne(),e=ht(e,i,s,1,a,o,t,r.parentNode,mt,st,r,Ze),se())},i(a){if(!l){for(let i=0;i<o.length;i+=1)O(e[i]);l=!0}},o(a){for(let i=0;i<e.length;i+=1)B(e[i]);l=!1},d(a){a&&c(r);for(let i=0;i<e.length;i+=1)e[i].d(a)}}}function hr(n){let e;return{c(){e=H("There are no comments yet")},l(t){e=L(t,"There are no comments yet")},m(t,r){y(t,e,r)},d(t){t&&c(e)}}}function mr(n){let e,t;return e=new pt({props:{class:"pb-2 text-lg text-center",$$slots:{default:[hr]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,l){J(e,r,l),t=!0},p(r,l){const o={};l&134217728&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){B(e.$$.fragment,r),t=!1},d(r){K(e,r)}}}function pr(n){let e;return{c(){e=H("Be the first to comment!")},l(t){e=L(t,"Be the first to comment!")},m(t,r){y(t,e,r)},d(t){t&&c(e)}}}function _r(n){let e,t,r,l;return e=new Oe({props:{$$slots:{default:[mr]},$$scope:{ctx:n}}}),r=new bt({props:{class:"p-4 text-center",$$slots:{default:[pr]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment),t=z(),q(r.$$.fragment)},l(o){G(e.$$.fragment,o),t=S(o),G(r.$$.fragment,o)},m(o,s){J(e,o,s),y(o,t,s),J(r,o,s),l=!0},p(o,s){const a={};s&134217728&&(a.$$scope={dirty:s,ctx:o}),e.$set(a);const i={};s&134217728&&(i.$$scope={dirty:s,ctx:o}),r.$set(i)},i(o){l||(O(e.$$.fragment,o),O(r.$$.fragment,o),l=!0)},o(o){B(e.$$.fragment,o),B(r.$$.fragment,o),l=!1},d(o){o&&c(t),K(e,o),K(r,o)}}}function st(n,e){var s;let t,r,l,o;return r=new gt({props:{threadId:e[0].id,commentId:e[21].id,comment:e[21].content,commentator:e[21].author,postedDateComment:e[21].createdAt,selected:e[21].bestAnswer||!1,threadOwner:(s=e[1])==null?void 0:s.author,replies:e[21].replies||[],upvotes:e[21].upvotes,downvotes:e[21].downvotes,userUpvoted:e[21].userUpvoted,userDownvoted:e[21].userDownvoted,mediaFiles:e[21].mediaFiles||[]}}),{key:n,first:null,c(){t=A("div"),q(r.$$.fragment),l=z(),this.h()},l(a){t=V(a,"DIV",{class:!0});var i=$(t);G(r.$$.fragment,i),l=S(i),i.forEach(c),this.h()},h(){u(t,"class","mb-2"),this.first=t},m(a,i){y(a,t,i),J(r,t,null),m(t,l),o=!0},p(a,i){var p;e=a;const f={};i&1&&(f.threadId=e[0].id),i&64&&(f.commentId=e[21].id),i&64&&(f.comment=e[21].content),i&64&&(f.commentator=e[21].author),i&64&&(f.postedDateComment=e[21].createdAt),i&64&&(f.selected=e[21].bestAnswer||!1),i&2&&(f.threadOwner=(p=e[1])==null?void 0:p.author),i&64&&(f.replies=e[21].replies||[]),i&64&&(f.upvotes=e[21].upvotes),i&64&&(f.downvotes=e[21].downvotes),i&64&&(f.userUpvoted=e[21].userUpvoted),i&64&&(f.userDownvoted=e[21].userDownvoted),i&64&&(f.mediaFiles=e[21].mediaFiles||[]),r.$set(f)},i(a){o||(O(r.$$.fragment,a),o=!0)},o(a){B(r.$$.fragment,a),o=!1},d(a){a&&c(t),K(r)}}}function gr(n){let e,t,r,l,o,s,a,i,f,p,w,F,T,D=n[6].length+"",d,_,C,b,g,v=n[1]&&et(n),E=n[1]&&n[2]===n[1].author&&tt(n);const N=[Zt,Qt],k=[];function j(I,P){return I[2]?0:1}o=j(n),s=k[o]=N[o](n);const M=[dr,fr],R=[];function W(I,P){return I[6].length>0?0:1}return C=W(n),b=R[C]=M[C](n),{c(){e=A("div"),t=A("div"),v&&v.c(),r=z(),E&&E.c(),l=z(),s.c(),a=z(),i=A("div"),f=A("div"),p=A("div"),w=X("svg"),F=X("path"),T=H(`\r
          Comments: `),d=H(D),_=z(),b.c(),this.h()},l(I){e=V(I,"DIV",{class:!0});var P=$(e);t=V(P,"DIV",{class:!0});var Y=$(t);v&&v.l(Y),r=S(Y),E&&E.l(Y),l=S(Y),s.l(Y),a=S(Y),i=V(Y,"DIV",{class:!0});var x=$(i);f=V(x,"DIV",{class:!0});var he=$(f);p=V(he,"DIV",{class:!0});var te=$(p);w=Q(te,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var pe=$(w);F=Q(pe,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),$(F).forEach(c),pe.forEach(c),T=L(te,`\r
          Comments: `),d=L(te,D),te.forEach(c),he.forEach(c),_=S(x),b.l(x),x.forEach(c),Y.forEach(c),P.forEach(c),this.h()},h(){u(F,"fill-rule","evenodd"),u(F,"d","M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z"),u(F,"clip-rule","evenodd"),u(w,"xmlns","http://www.w3.org/2000/svg"),u(w,"class","h-3.5 w-3.5 mr-1"),u(w,"viewBox","0 0 20 20"),u(w,"fill","currentColor"),u(p,"class","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-neutral-50 dark:bg-neutral-950 text-neutral-800 dark:text-neutral-200 border border-neutral-200 dark:border-neutral-700"),u(f,"class","flex items-center mb-1"),u(i,"class","flex flex-col justify-center pt-2"),u(t,"class","w-full lg:w-2/3"),u(e,"class","flex flex-col items-center bg-change dark:bg-dark shifting p-4 lg:p-8")},m(I,P){y(I,e,P),m(e,t),v&&v.m(t,null),m(t,r),E&&E.m(t,null),m(t,l),k[o].m(t,null),m(t,a),m(t,i),m(i,f),m(f,p),m(p,w),m(w,F),m(p,T),m(p,d),m(i,_),R[C].m(i,null),g=!0},p(I,[P]){I[1]?v?(v.p(I,P),P&2&&O(v,1)):(v=et(I),v.c(),O(v,1),v.m(t,r)):v&&(ne(),B(v,1,1,()=>{v=null}),se()),I[1]&&I[2]===I[1].author?E?(E.p(I,P),P&6&&O(E,1)):(E=tt(I),E.c(),O(E,1),E.m(t,l)):E&&(ne(),B(E,1,1,()=>{E=null}),se());let Y=o;o=j(I),o===Y?k[o].p(I,P):(ne(),B(k[Y],1,1,()=>{k[Y]=null}),se(),s=k[o],s?s.p(I,P):(s=k[o]=N[o](I),s.c()),O(s,1),s.m(t,a)),(!g||P&64)&&D!==(D=I[6].length+"")&&le(d,D);let x=C;C=W(I),C===x?R[C].p(I,P):(ne(),B(R[x],1,1,()=>{R[x]=null}),se(),b=R[C],b?b.p(I,P):(b=R[C]=M[C](I),b.c()),O(b,1),b.m(i,null))},i(I){g||(O(v),O(E),O(s),O(b),g=!0)},o(I){B(v),B(E),B(s),B(b),g=!1},d(I){I&&c(e),v&&v.d(),E&&E.d(),k[o].d(),R[C].d()}}}function vr(n){return!n||!Array.isArray(n)?[]:n.map(t=>{var r;return{...t,replies:((r=t.replies)==null?void 0:r.map(l=>({...l,parentCommentId:t.id})))||[]}})}function wr(n){return!n||typeof n!="string"?!1:/^#([0-9A-Fa-f]{3}){1,2}$/.test(n)}async function br(n){try{const e=n.replace("#",""),t=await fetch(`https://www.thecolorapi.com/id?hex=${e}`);return t.ok?(await t.json()).name.value:null}catch(e){return console.error("Error fetching color name:",e),null}}function kr(n,e,t){let r,l;Ue(n,ze,k=>t(11,r=k)),Ue(n,_t,k=>t(2,l=k));let{data:o}=e,s="",a,i=!1,f=null,p=[],w=[],F,T;function D(k){const j=Array.from(k.target.files);j.length>0&&t(7,w=j)}async function d(k){try{const j=await fetch(`https://backend-310608491068.europe-west1.run.app/api/posts/getForPostDetails/${k}`);if(!j.ok)throw new Error("Failed to fetch post details");const M=await j.json(),R=Ct(M);if(M.mysteryObject&&M.mysteryObject.color){const W=M.mysteryObject.color;if(wr(W)&&!M.mysteryObject._colorName)try{const I=await br(W);I&&(M.mysteryObject._colorName=I)}catch(I){console.error("Error fetching color name:",I)}}return Et({id:M.id,...M,mediaFiles:R,mysteryObject:M.mysteryObject?{...M.mysteryObject,_colorName:M.mysteryObject._colorName}:null,title:M.title,description:M.description,tags:M.tags||[],author:M.author,createdAt:M.createdAt,updatedAt:M.updatedAt,upvotes:M.upvotes,downvotes:M.downvotes,userUpvoted:M.userUpvoted,userDownvoted:M.userDownvoted,solved:M.solved,comments:[]}),M}catch(j){throw console.error("Error fetching post with media:",j),j}}it(async()=>{try{await d(o.id),await _(),T=async k=>{var j;((j=k.detail)==null?void 0:j.threadId)===o.id&&await _()},document.addEventListener("refreshComments",T)}catch(k){console.error("Error fetching thread data:",k)}}),vt(()=>{T&&document.removeEventListener("refreshComments",T)});async function _(){try{const k=await fetch(`https://backend-310608491068.europe-west1.run.app/api/comments/get/${o.id}`,{headers:{...$e()}});if(!k.ok)throw new Error("Failed to fetch comments");const j=await k.json(),M=I=>{const P=yt(I),Y=I.replies?I.replies.map(x=>M(x)):[];return{...I,mediaFiles:P,replies:Y}},R=j.map(I=>M(I)),W=vr(R);ze.update(I=>I.map(P=>P.id==o.id?{...P,comments:W}:P))}catch(k){console.error("Error refreshing comments:",k)}}let C=async()=>{if(!s.trim()&&w.length===0){t(5,f="Please enter a comment or attach media");return}t(4,i=!0),t(5,f=null);try{const k={content:s,postId:o.id,parentCommentId:null},j=await fetch("https://backend-310608491068.europe-west1.run.app/api/comments/create",{method:"POST",headers:{"Content-Type":"application/json",...$e()},body:JSON.stringify(k)});if(!j.ok){const W=await j.text();throw new Error(`Failed to add comment: ${W}`)}const R=(await j.json()).commentId;if(w.length>0)for(let W=0;W<w.length;W++){const I=w[W],P=new FormData;P.append("file",I);try{(await fetch(`https://backend-310608491068.europe-west1.run.app/api/comments/${R}/upload-media`,{method:"POST",body:P})).ok||console.error(`Failed to upload file ${W+1} for comment`)}catch(Y){console.error(`Error uploading file ${W+1} for comment:`,Y)}}t(3,s=""),t(7,w=[]),F&&t(8,F.value="",F),await _()}catch(k){console.error("Error submitting comment:",k),t(5,f=k.message||"Failed to submit comment")}finally{t(4,i=!1)}};const b=()=>It(`/edit/${a.id}`);function g(k){s=k,t(3,s)}function v(k){Ee[k?"unshift":"push"](()=>{F=k,t(8,F)})}const E=()=>F==null?void 0:F.click(),N=k=>{t(7,w=w.filter((j,M)=>M!==k))};return n.$$set=k=>{"data"in k&&t(0,o=k.data)},n.$$.update=()=>{n.$$.dirty&4,n.$$.dirty&2049&&t(1,a=r.find(k=>k.id==o.id)),n.$$.dirty&2&&(a!=null&&a.comments?t(6,p=a.comments):t(6,p=[]))},[o,a,l,s,i,f,p,w,F,D,C,r,b,g,v,E,N]}class zr extends ft{constructor(e){super(),dt(this,e,kr,gr,at,{data:0})}}export{zr as component,Ur as universal};
