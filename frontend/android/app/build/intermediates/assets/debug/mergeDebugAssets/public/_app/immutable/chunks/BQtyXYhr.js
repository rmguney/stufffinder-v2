import{s as ye,e as w,a as z,t as M,c as E,b as C,g as L,f as _,d as q,l as d,a3 as Ie,i as V,h as v,v as ie,j as Y,n as X,w as Te,R as De,F as oe,G as ce,k as me,o as vt,p as Z,y as ke,B as ae,C as se,x as kt,Y as bt,Z as gt,r as wt,u as Oe,q as Ne,m as Be}from"./C6oXrJZt.js";import{S as Ce,i as xe,f as fe,c as ee,a as te,m as le,t as P,b as B,d as re,g as de,e as he}from"./Zi_cIJN_.js";import{e as ne,u as Et,o as yt}from"./CP0-fytT.js";import{B as ge}from"./C7UUfNEJ.js";import{T as Ct}from"./CqnpH9aS.js";import{I as we}from"./DculZwEQ.js";import{w as ve}from"./CTHOJFrz.js";function xt(a){let e,t,l,r,s,n,o,i=(a[2]?"Loading...":a[0]||"Select a color")+"",c,p,u,f,h,g,m,b;return{c(){e=w("div"),t=w("input"),l=z(),r=w("div"),s=w("div"),n=z(),o=w("span"),c=M(i),p=z(),u=w("span"),f=M("("),h=M(a[1]),g=M(")"),this.h()},l(k){e=E(k,"DIV",{class:!0});var A=C(e);t=E(A,"INPUT",{type:!0,id:!0,class:!0,"aria-label":!0}),l=L(A),r=E(A,"DIV",{class:!0,tabindex:!0,role:!0,"aria-label":!0});var N=C(r);s=E(N,"DIV",{class:!0,style:!0}),C(s).forEach(_),n=L(N),o=E(N,"SPAN",{class:!0});var H=C(o);c=q(H,i),p=L(H),u=E(H,"SPAN",{class:!0});var O=C(u);f=q(O,"("),h=q(O,a[1]),g=q(O,")"),O.forEach(_),H.forEach(_),N.forEach(_),A.forEach(_),this.h()},h(){d(t,"type","color"),d(t,"id","color-picker"),t.value=a[1],d(t,"class","sr-only"),d(t,"aria-label","Select color"),d(s,"class","w-6 h-6 rounded-full border"),Ie(s,"background-color",a[1]),d(u,"class","text-xs opacity-75 ml-1"),d(o,"class","text-sm truncate"),d(r,"class","flex items-center gap-2 flex-1 border rounded-full p-2 bg-white dark:bg-neutral-800 cursor-pointer hover:bg-gray-50 dark:hover:bg-neutral-700"),d(r,"tabindex","0"),d(r,"role","button"),d(r,"aria-label","Open color picker"),d(e,"class","flex items-center gap-3")},m(k,A){V(k,e,A),v(e,t),a[7](t),v(e,l),v(e,r),v(r,s),v(r,n),v(r,o),v(o,c),v(o,p),v(o,u),v(u,f),v(u,h),v(u,g),m||(b=[ie(t,"change",a[4]),ie(r,"click",a[5]),ie(r,"keydown",a[8])],m=!0)},p(k,[A]){A&2&&(t.value=k[1]),A&2&&Ie(s,"background-color",k[1]),A&5&&i!==(i=(k[2]?"Loading...":k[0]||"Select a color")+"")&&Y(c,i),A&2&&Y(h,k[1])},i:X,o:X,d(k){k&&_(e),a[7](null),m=!1,Te(b)}}}function He(a){return a?(a.startsWith("#")||(a="#"+a),/^#([0-9A-Fa-f]{3}){1,2}$/.test(a)?a:(console.warn("Invalid hex color, using default:",a),"#ffffff")):"#ffffff"}function Vt(a,e,t){let{value:l=""}=e,{hexValue:r="#ffffff"}=e,s=r||"#ffffff",n=!1,o;const i=De();async function c(g){t(2,n=!0),g=He(g);const m=g.replace("#","");try{const b=await fetch(`https://www.thecolorapi.com/id?hex=${m}`);if(!b.ok)throw new Error("Failed to fetch color name");const k=await b.json();t(0,l=k.name.value||"Unknown color"),t(6,r=g),i("colorchange",{color:l,hex:g})}catch(b){console.error("Error fetching color name:",b),t(0,l="Unknown color"),t(6,r=g),i("colorchange",{color:l,hex:g})}finally{t(2,n=!1)}}function p(g){t(1,s=He(g.target.value)),c(s)}function u(){o&&o.click()}function f(g){oe[g?"unshift":"push"](()=>{o=g,t(3,o)})}const h=g=>g.key==="Enter"&&u();return a.$$set=g=>{"value"in g&&t(0,l=g.value),"hexValue"in g&&t(6,r=g.hexValue)},[l,s,n,o,p,u,r,f,h]}class At extends Ce{constructor(e){super(),xe(this,e,Vt,xt,ye,{value:0,hexValue:6})}}function Me(a,e,t){const l=a.slice();return l[26]=e[t],l}function qe(a,e,t){const l=a.slice();return l[23]=e[t],l}function Fe(a){let e;function t(s,n){return s[4]?St:s[5]?jt:s[6].length===0&&s[1].length>=2?Lt:s[1].length>=2&&s[6].length>0?zt:s[3].length>0?Dt:It}let l=t(a),r=l(a);return{c(){e=w("div"),r.c(),this.h()},l(s){e=E(s,"DIV",{class:!0});var n=C(e);r.l(n),n.forEach(_),this.h()},h(){d(e,"class","absolute z-20 mt-1 w-full max-h-60 overflow-y-auto bg-white dark:bg-neutral-900 shadow-lg border rounded-xl")},m(s,n){V(s,e,n),r.m(e,null)},p(s,n){l===(l=t(s))&&r?r.p(s,n):(r.d(1),r=l(s),r&&(r.c(),r.m(e,null)))},d(s){s&&_(e),r.d()}}}function It(a){let e,t="Type at least 2 characters to search for materials";return{c(){e=w("div"),e.textContent=t,this.h()},l(l){e=E(l,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1jix9gm"&&(e.textContent=t),this.h()},h(){d(e,"class","p-3 text-sm text-neutral-500")},m(l,r){V(l,e,r)},p:X,d(l){l&&_(e)}}}function Dt(a){let e,t,l="Common Material Categories",r,s,n,o="Type to search for specific materials",i=ne(a[3]),c=[];for(let p=0;p<i.length;p+=1)c[p]=Ue(Me(a,i,p));return{c(){e=w("div"),t=w("div"),t.textContent=l,r=z();for(let p=0;p<c.length;p+=1)c[p].c();s=z(),n=w("div"),n.textContent=o,this.h()},l(p){e=E(p,"DIV",{class:!0});var u=C(e);t=E(u,"DIV",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-12lgugo"&&(t.textContent=l),r=L(u);for(let f=0;f<c.length;f+=1)c[f].l(u);s=L(u),n=E(u,"DIV",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-10ux7g2"&&(n.textContent=o),u.forEach(_),this.h()},h(){d(t,"class","text-xs font-semibold mb-1 px-2 text-neutral-500"),d(n,"class","text-xs text-center mt-2 text-neutral-500"),d(e,"class","p-2")},m(p,u){V(p,e,u),v(e,t),v(e,r);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(e,null);v(e,s),v(e,n)},p(p,u){if(u&8200){i=ne(p[3]);let f;for(f=0;f<i.length;f+=1){const h=Me(p,i,f);c[f]?c[f].p(h,u):(c[f]=Ue(h),c[f].c(),c[f].m(e,s))}for(;f<c.length;f+=1)c[f].d(1);c.length=i.length}},d(p){p&&_(e),ke(c,p)}}}function zt(a){let e,t,l="Material Suggestions",r,s=ne(a[6]),n=[];for(let o=0;o<s.length;o+=1)n[o]=Ye(qe(a,s,o));return{c(){e=w("div"),t=w("div"),t.textContent=l,r=z();for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=E(o,"DIV",{class:!0});var i=C(e);t=E(i,"DIV",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-1j1gyua"&&(t.textContent=l),r=L(i);for(let c=0;c<n.length;c+=1)n[c].l(i);i.forEach(_),this.h()},h(){d(t,"class","text-xs font-semibold mb-1 px-2 text-neutral-500"),d(e,"class","p-2")},m(o,i){V(o,e,i),v(e,t),v(e,r);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null)},p(o,i){if(i&4160){s=ne(o[6]);let c;for(c=0;c<s.length;c+=1){const p=qe(o,s,c);n[c]?n[c].p(p,i):(n[c]=Ye(p),n[c].c(),n[c].m(e,null))}for(;c<n.length;c+=1)n[c].d(1);n.length=s.length}},d(o){o&&_(e),ke(n,o)}}}function Lt(a){let e,t="No matching materials found. You can use your own term.";return{c(){e=w("div"),e.textContent=t,this.h()},l(l){e=E(l,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-na2bw9"&&(e.textContent=t),this.h()},h(){d(e,"class","p-3 text-sm text-neutral-500")},m(l,r){V(l,e,r)},p:X,d(l){l&&_(e)}}}function jt(a){let e,t;return{c(){e=w("div"),t=M(a[5]),this.h()},l(l){e=E(l,"DIV",{class:!0});var r=C(e);t=q(r,a[5]),r.forEach(_),this.h()},h(){d(e,"class","p-3 text-sm text-red-500")},m(l,r){V(l,e,r),v(e,t)},p(l,r){r&32&&Y(t,l[5])},d(l){l&&_(e)}}}function St(a){let e,t='<div class="animate-spin h-4 w-4 border-2 border-neutral-300 rounded-full border-t-neutral-600 mr-2"></div> <span class="text-sm">Loading materials...</span>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(l){e=E(l,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-xwku09"&&(e.innerHTML=t),this.h()},h(){d(e,"class","p-3 flex items-center justify-center")},m(l,r){V(l,e,r)},p:X,d(l){l&&_(e)}}}function Ue(a){let e,t,l=a[26].label+"",r,s,n,o="Select as material",i,c;function p(){return a[18](a[26])}return{c(){e=w("button"),t=w("div"),r=M(l),s=z(),n=w("div"),n.textContent=o,this.h()},l(u){e=E(u,"BUTTON",{class:!0});var f=C(e);t=E(f,"DIV",{class:!0});var h=C(t);r=q(h,l),h.forEach(_),s=L(f),n=E(f,"DIV",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-1arhll8"&&(n.textContent=o),f.forEach(_),this.h()},h(){d(t,"class","text-sm font-medium"),d(n,"class","text-xs text-neutral-500"),d(e,"class","block w-full text-left px-3 py-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-full transition-colors")},m(u,f){V(u,e,f),v(e,t),v(t,r),v(e,s),v(e,n),i||(c=ie(e,"click",p),i=!0)},p(u,f){a=u,f&8&&l!==(l=a[26].label+"")&&Y(r,l)},d(u){u&&_(e),i=!1,c()}}}function Re(a){let e,t=a[23].description+"",l;return{c(){e=w("div"),l=M(t),this.h()},l(r){e=E(r,"DIV",{class:!0});var s=C(e);l=q(s,t),s.forEach(_),this.h()},h(){d(e,"class","text-xs text-neutral-500 line-clamp-1")},m(r,s){V(r,e,s),v(e,l)},p(r,s){s&64&&t!==(t=r[23].description+"")&&Y(l,t)},d(r){r&&_(e)}}}function Ye(a){let e,t,l=a[23].label+"",r,s,n,o,i,c=a[23].description&&Re(a);function p(){return a[17](a[23])}return{c(){e=w("button"),t=w("div"),r=M(l),s=z(),c&&c.c(),n=z(),this.h()},l(u){e=E(u,"BUTTON",{class:!0});var f=C(e);t=E(f,"DIV",{class:!0});var h=C(t);r=q(h,l),h.forEach(_),s=L(f),c&&c.l(f),n=L(f),f.forEach(_),this.h()},h(){d(t,"class","text-sm font-medium"),d(e,"class","block w-full text-left px-3 py-2 text-sm hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-full transition-colors")},m(u,f){V(u,e,f),v(e,t),v(t,r),v(e,s),c&&c.m(e,null),v(e,n),o||(i=ie(e,"click",p),o=!0)},p(u,f){a=u,f&64&&l!==(l=a[23].label+"")&&Y(r,l),a[23].description?c?c.p(a,f):(c=Re(a),c.c(),c.m(e,n)):c&&(c.d(1),c=null)},d(u){u&&_(e),c&&c.d(),o=!1,i()}}}function Tt(a){let e,t,l,r,s;function n(c){a[16](c)}let o={type:"text",placeholder:a[0],class:"w-full rounded-full"};a[1]!==void 0&&(o.value=a[1]),t=new we({props:o}),oe.push(()=>fe(t,"value",n)),t.$on("input",a[11]),t.$on("focus",a[14]);let i=a[2]&&Fe(a);return{c(){e=w("div"),ee(t.$$.fragment),r=z(),i&&i.c(),this.h()},l(c){e=E(c,"DIV",{class:!0});var p=C(e);te(t.$$.fragment,p),r=L(p),i&&i.l(p),p.forEach(_),this.h()},h(){d(e,"class","material-selector relative")},m(c,p){V(c,e,p),le(t,e,null),v(e,r),i&&i.m(e,null),s=!0},p(c,[p]){const u={};p&1&&(u.placeholder=c[0]),!l&&p&2&&(l=!0,u.value=c[1],ce(()=>l=!1)),t.$set(u),c[2]?i?i.p(c,p):(i=Fe(c),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},i(c){s||(P(t.$$.fragment,c),s=!0)},o(c){B(t.$$.fragment,c),s=!1},d(c){c&&_(e),re(t),i&&i.d()}}}function Se(a){return a?a.charAt(0).toUpperCase()+a.slice(1):""}function $t(a,e,t){let l,r,s,n,{value:o=""}=e,{placeholder:i="Select or type a material"}=e;const c=De();let p=o||"",u=!1,f=ve(!1);me(a,f,x=>t(4,r=x));let h=ve([]);me(a,h,x=>t(6,n=x));let g=ve([]);me(a,g,x=>t(3,l=x));let m=ve(null);me(a,m,x=>t(5,s=x));async function b(x){if(!x||x.length<2){h.set([]);return}f.set(!0),m.set(null);try{const T=`https://www.wikidata.org/w/api.php?action=wbsearchentities&search=${encodeURIComponent(x)}&language=en&format=json&origin=*&limit=8&type=item`,Q=await fetch(T);if(!Q.ok)throw new Error("Failed to fetch from Wikidata");const U=(await Q.json()).search.filter(J=>{var W,ue;const $=((W=J.label)==null?void 0:W.toLowerCase())||"",R=((ue=J.description)==null?void 0:ue.toLowerCase())||"";return["material","substance","metal","alloy","polymer","ceramic","wood","plastic","fabric","textile","compound","element","mineral"].some(ze=>R.includes(ze))}).map(J=>({id:J.id,label:J.label,description:J.description||"No description available"}));h.set(U)}catch(T){console.error("Error fetching materials:",T),m.set("Failed to fetch materials. Please try again."),h.set([])}finally{f.set(!1)}}async function k(){f.set(!0),m.set(null);try{const T=`https://query.wikidata.org/sparql?query=${encodeURIComponent(`
        SELECT ?category ?categoryLabel WHERE {
          ?category wdt:P279 wd:Q214609. # subclass of material
          SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
        }
        LIMIT 15
      `)}&format=json`,Q=await fetch(T);if(!Q.ok)throw new Error("Failed to fetch material categories");const U=(await Q.json()).results.bindings.map(J=>({id:J.category.value.split("/").pop(),label:J.categoryLabel.value}));g.set(U)}catch(x){console.error("Error fetching material categories:",x),m.set("Failed to load material categories."),g.set([])}finally{f.set(!1)}}let A;function N(){p&&t(1,p=Se(p)),t(15,o=p),c("change",{value:p}),clearTimeout(A),A=setTimeout(()=>{p.length>=2?b(p):h.set([])},300)}function H(x){const T=Se(x.label);t(1,p=T),t(15,o=T),c("change",{value:T,id:x.id,description:x.description}),t(2,u=!1)}function O(x){const T=Se(x.label);t(1,p=T),t(15,o=T),c("change",{value:T,id:x.id}),t(2,u=!1)}function I(){t(2,u=!0),p.length<2&&l.length===0?k():p.length>=2&&b(p)}vt(()=>{function x(T){T.target.closest(".material-selector")||t(2,u=!1)}return document.addEventListener("click",x),()=>{document.removeEventListener("click",x)}});function j(x){p=x,t(1,p)}const S=x=>H(x),y=x=>O(x);return a.$$set=x=>{"value"in x&&t(15,o=x.value),"placeholder"in x&&t(0,i=x.placeholder)},[i,p,u,l,r,s,n,f,h,g,m,N,H,O,I,o,j,S,y]}class Pt extends Ce{constructor(e){super(),xe(this,e,$t,Tt,ye,{value:15,placeholder:0})}}function Ze(a,e,t){const l=a.slice();l[31]=e[t],l[33]=e,l[34]=t;const r=l[5].find(function(...n){return a[29](l[31],...n)});return l[32]=r,l}function We(a,e,t){const l=a.slice();return l[35]=e[t],l}function Xe(a,e,t){const l=a.slice();return l[38]=e[t],l}function Ot(a){let e,t,l,r,s,n="Add Attribute";return{c(){e=ae("svg"),t=ae("line"),l=ae("line"),r=z(),s=w("span"),s.textContent=n,this.h()},l(o){e=se(o,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var i=C(e);t=se(i,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),C(t).forEach(_),l=se(i,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),C(l).forEach(_),i.forEach(_),r=L(o),s=E(o,"SPAN",{class:!0,"data-svelte-h":!0}),Z(s)!=="svelte-surwue"&&(s.textContent=n),this.h()},h(){d(t,"x1","12"),d(t,"y1","5"),d(t,"x2","12"),d(t,"y2","19"),d(l,"x1","5"),d(l,"y1","12"),d(l,"x2","19"),d(l,"y2","12"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","16"),d(e,"height","16"),d(e,"viewBox","0 0 24 24"),d(e,"fill","none"),d(e,"stroke","currentColor"),d(e,"stroke-width","2"),d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"class","feather feather-plus"),d(s,"class","text-sm")},m(o,i){V(o,e,i),v(e,t),v(e,l),V(o,r,i),V(o,s,i)},p:X,d(o){o&&(_(e),_(r),_(s))}}}function Ke(a){let e,t,l,r="Select Attribute",s,n,o="âœ•",i,c,p,u,f=ne(a[3]),h=[];for(let m=0;m<f.length;m+=1)h[m]=Qe(Xe(a,f,m));let g=a[3].length===0&&Ge();return{c(){e=w("div"),t=w("div"),l=w("span"),l.textContent=r,s=z(),n=w("button"),n.textContent=o,i=z();for(let m=0;m<h.length;m+=1)h[m].c();c=z(),g&&g.c(),this.h()},l(m){e=E(m,"DIV",{class:!0});var b=C(e);t=E(b,"DIV",{class:!0});var k=C(t);l=E(k,"SPAN",{class:!0,"data-svelte-h":!0}),Z(l)!=="svelte-4alrd8"&&(l.textContent=r),s=L(k),n=E(k,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),Z(n)!=="svelte-1jyjt8z"&&(n.textContent=o),k.forEach(_),i=L(b);for(let A=0;A<h.length;A+=1)h[A].l(b);c=L(b),g&&g.l(b),b.forEach(_),this.h()},h(){d(l,"class","text-sm font-medium"),d(n,"class","text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"),d(n,"aria-label","Close selector"),d(t,"class","sticky top-0 bg-white dark:bg-neutral-800 p-2 border-b mb-1 flex items-center justify-between"),d(e,"class","mt-2 p-2 border rounded-lg bg-white dark:bg-neutral-950 shadow-lg max-h-60 overflow-y-auto mb-4 z-10 relative")},m(m,b){V(m,e,b),v(e,t),v(t,l),v(t,s),v(t,n),v(e,i);for(let k=0;k<h.length;k+=1)h[k]&&h[k].m(e,null);v(e,c),g&&g.m(e,null),p||(u=ie(n,"click",a[11]),p=!0)},p(m,b){if(b[0]&72){f=ne(m[3]);let k;for(k=0;k<f.length;k+=1){const A=Xe(m,f,k);h[k]?h[k].p(A,b):(h[k]=Qe(A),h[k].c(),h[k].m(e,c))}for(;k<h.length;k+=1)h[k].d(1);h.length=f.length}m[3].length===0?g||(g=Ge(),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},d(m){m&&_(e),ke(h,m),g&&g.d(),p=!1,u()}}}function Qe(a){let e,t=a[38].label+"",l,r,s;function n(){return a[12](a[38])}return{c(){e=w("button"),l=M(t),this.h()},l(o){e=E(o,"BUTTON",{class:!0});var i=C(e);l=q(i,t),i.forEach(_),this.h()},h(){d(e,"class","block w-full text-left p-2.5 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded-full transition-colors text-sm")},m(o,i){V(o,e,i),v(e,l),r||(s=ie(e,"click",n),r=!0)},p(o,i){a=o,i[0]&8&&t!==(t=a[38].label+"")&&Y(l,t)},d(o){o&&_(e),r=!1,s()}}}function Ge(a){let e,t="All attributes have been added";return{c(){e=w("p"),e.textContent=t,this.h()},l(l){e=E(l,"P",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-10tjwa0"&&(e.textContent=t),this.h()},h(){d(e,"class","p-2 text-sm text-neutral-500 text-center")},m(l,r){V(l,e,r)},d(l){l&&_(e)}}}function Nt(a){let e,t="No attributes added yet. Click 'Add Attribute' to start.";return{c(){e=w("p"),e.textContent=t,this.h()},l(l){e=E(l,"P",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1n4tbie"&&(e.textContent=t),this.h()},h(){d(e,"class","text-sm text-neutral-500 dark:text-neutral-400 mt-2")},m(l,r){V(l,e,r)},p:X,i:X,o:X,d(l){l&&_(e)}}}function Bt(a){let e,t,l=ne(a[0]),r=[];for(let n=0;n<l.length;n+=1)r[n]=tt(Ze(a,l,n));const s=n=>B(r[n],1,1,()=>{r[n]=null});return{c(){e=w("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=E(n,"DIV",{class:!0});var o=C(e);for(let i=0;i<r.length;i+=1)r[i].l(o);o.forEach(_),this.h()},h(){d(e,"class","grid grid-cols-1 sm:grid-cols-2 gap-4 mb-2")},m(n,o){V(n,e,o);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(n,o){if(o[0]&947){l=ne(n[0]);let i;for(i=0;i<l.length;i+=1){const c=Ze(n,l,i);r[i]?(r[i].p(c,o),P(r[i],1)):(r[i]=tt(c),r[i].c(),P(r[i],1),r[i].m(e,null))}for(de(),i=l.length;i<r.length;i+=1)s(i);he()}},i(n){if(!t){for(let o=0;o<l.length;o+=1)P(r[o]);t=!0}},o(n){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)B(r[o]);t=!1},d(n){n&&_(e),ke(r,n)}}}function Je(a){let e,t,l,r=Zt()+"",s,n,o,i,c,p,u;function f(){return a[13](a[31])}const h=[Rt,Ut,Ft,qt,Mt,Ht],g=[];function m(b,k){return b[32].type==="select"?0:b[32].type==="dimensions"?1:b[32].type==="checkbox"?2:b[31]==="color"?3:b[31]==="material"?4:5}return n=m(a),o=g[n]=h[n](a),{c(){e=w("div"),t=w("button"),l=new bt(!1),s=z(),o.c(),this.h()},l(b){e=E(b,"DIV",{class:!0});var k=C(e);t=E(k,"BUTTON",{type:!0,class:!0,title:!0});var A=C(t);l=gt(A,!1),A.forEach(_),s=L(k),o.l(k),k.forEach(_),this.h()},h(){l.a=null,d(t,"type","button"),d(t,"class","absolute top-2 right-2 h-6 w-6 rounded-full flex items-center justify-center bg-neutral-100 text-neutral-500 hover:bg-red-50 hover:text-red-500 dark:bg-neutral-800 dark:hover:bg-neutral-700 transition-colors"),d(t,"title","Remove attribute"),d(e,"class",i="relative p-3 rounded-xl border bg-neutral-50 dark:bg-neutral-900 dark:border-neutral-700 transition-all hover:shadow-sm "+(a[32].type==="dimensions"?"col-span-1 sm:col-span-2":""))},m(b,k){V(b,e,k),v(e,t),l.m(r,t),v(e,s),g[n].m(e,null),c=!0,p||(u=ie(t,"click",f),p=!0)},p(b,k){a=b;let A=n;n=m(a),n===A?g[n].p(a,k):(de(),B(g[A],1,1,()=>{g[A]=null}),he(),o=g[n],o?o.p(a,k):(o=g[n]=h[n](a),o.c()),P(o,1),o.m(e,null)),(!c||k[0]&33&&i!==(i="relative p-3 rounded-xl border bg-neutral-50 dark:bg-neutral-900 dark:border-neutral-700 transition-all hover:shadow-sm "+(a[32].type==="dimensions"?"col-span-1 sm:col-span-2":"")))&&d(e,"class",i)},i(b){c||(P(o),c=!0)},o(b){B(o),c=!1},d(b){b&&_(e),g[n].d(),p=!1,u()}}}function Ht(a){let e,t=a[32].label+"",l,r,s,n,o,i;function c(u){a[27](u,a[31])}let p={type:a[32].type||"text",id:a[31],class:"w-full p-2 border rounded-full dark:border-neutral-600",placeholder:a[32].placeholder||""};return a[1][a[31]]!==void 0&&(p.value=a[1][a[31]]),n=new we({props:p}),oe.push(()=>fe(n,"value",c)),n.$on("input",a[28]),{c(){e=w("label"),l=M(t),s=z(),ee(n.$$.fragment),this.h()},l(u){e=E(u,"LABEL",{for:!0,class:!0});var f=C(e);l=q(f,t),f.forEach(_),s=L(u),te(n.$$.fragment,u),this.h()},h(){d(e,"for",r=a[31]),d(e,"class","block text-sm font-medium mb-2")},m(u,f){V(u,e,f),v(e,l),V(u,s,f),le(n,u,f),i=!0},p(u,f){a=u,(!i||f[0]&1)&&t!==(t=a[32].label+"")&&Y(l,t),(!i||f[0]&33&&r!==(r=a[31]))&&d(e,"for",r);const h={};f[0]&1&&(h.type=a[32].type||"text"),f[0]&1&&(h.id=a[31]),f[0]&1&&(h.placeholder=a[32].placeholder||""),!o&&f[0]&3&&(o=!0,h.value=a[1][a[31]],ce(()=>o=!1)),n.$set(h)},i(u){i||(P(n.$$.fragment,u),i=!0)},o(u){B(n.$$.fragment,u),i=!1},d(u){u&&(_(e),_(s)),re(n,u)}}}function Mt(a){let e,t=a[32].label+"",l,r,s,n,o,i;function c(u){a[26](u)}let p={placeholder:a[32].placeholder};return a[1].material!==void 0&&(p.value=a[1].material),n=new Pt({props:p}),oe.push(()=>fe(n,"value",c)),n.$on("change",a[9]),{c(){e=w("label"),l=M(t),s=z(),ee(n.$$.fragment),this.h()},l(u){e=E(u,"LABEL",{for:!0,class:!0});var f=C(e);l=q(f,t),f.forEach(_),s=L(u),te(n.$$.fragment,u),this.h()},h(){d(e,"for",r=a[31]),d(e,"class","block text-sm font-medium mb-2")},m(u,f){V(u,e,f),v(e,l),V(u,s,f),le(n,u,f),i=!0},p(u,f){(!i||f[0]&1)&&t!==(t=u[32].label+"")&&Y(l,t),(!i||f[0]&33&&r!==(r=u[31]))&&d(e,"for",r);const h={};f[0]&1&&(h.placeholder=u[32].placeholder),!o&&f[0]&2&&(o=!0,h.value=u[1].material,ce(()=>o=!1)),n.$set(h)},i(u){i||(P(n.$$.fragment,u),i=!0)},o(u){B(n.$$.fragment,u),i=!1},d(u){u&&(_(e),_(s)),re(n,u)}}}function qt(a){let e,t=a[32].label+"",l,r,s,n,o,i,c;function p(h){a[24](h)}function u(h){a[25](h)}let f={};return a[1].color!==void 0&&(f.value=a[1].color),a[1].colorHex!==void 0&&(f.hexValue=a[1].colorHex),n=new At({props:f}),oe.push(()=>fe(n,"value",p)),oe.push(()=>fe(n,"hexValue",u)),n.$on("colorchange",a[8]),{c(){e=w("label"),l=M(t),s=z(),ee(n.$$.fragment),this.h()},l(h){e=E(h,"LABEL",{for:!0,class:!0});var g=C(e);l=q(g,t),g.forEach(_),s=L(h),te(n.$$.fragment,h),this.h()},h(){d(e,"for",r=a[31]),d(e,"class","block text-sm font-medium mb-2")},m(h,g){V(h,e,g),v(e,l),V(h,s,g),le(n,h,g),c=!0},p(h,g){(!c||g[0]&1)&&t!==(t=h[32].label+"")&&Y(l,t),(!c||g[0]&33&&r!==(r=h[31]))&&d(e,"for",r);const m={};!o&&g[0]&2&&(o=!0,m.value=h[1].color,ce(()=>o=!1)),!i&&g[0]&2&&(i=!0,m.hexValue=h[1].colorHex,ce(()=>i=!1)),n.$set(m)},i(h){c||(P(n.$$.fragment,h),c=!0)},o(h){B(n.$$.fragment,h),c=!1},d(h){h&&(_(e),_(s)),re(n,h)}}}function Ft(a){let e,t,l,r,s,n,o=a[32].label+"",i,c,p,u;function f(){a[22].call(l,a[31])}return{c(){e=w("div"),t=w("div"),l=w("input"),s=z(),n=w("label"),i=M(o),this.h()},l(h){e=E(h,"DIV",{class:!0});var g=C(e);t=E(g,"DIV",{class:!0});var m=C(t);l=E(m,"INPUT",{type:!0,id:!0,class:!0}),s=L(m),n=E(m,"LABEL",{for:!0,class:!0});var b=C(n);i=q(b,o),b.forEach(_),m.forEach(_),g.forEach(_),this.h()},h(){d(l,"type","checkbox"),d(l,"id",r=`${a[31]}-checkbox`),d(l,"class","w-4 h-4 mr-3 rounded-full"),d(n,"for",c=`${a[31]}-checkbox`),d(n,"class","text-sm font-medium"),d(t,"class","flex items-center"),d(e,"class","pt-2")},m(h,g){V(h,e,g),v(e,t),v(t,l),l.checked=a[1][a[31]],v(t,s),v(t,n),v(n,i),p||(u=[ie(l,"change",f),ie(l,"change",a[23])],p=!0)},p(h,g){a=h,g[0]&33&&r!==(r=`${a[31]}-checkbox`)&&d(l,"id",r),g[0]&35&&(l.checked=a[1][a[31]]),g[0]&1&&o!==(o=a[32].label+"")&&Y(i,o),g[0]&33&&c!==(c=`${a[31]}-checkbox`)&&d(n,"for",c)},i:X,o:X,d(h){h&&_(e),p=!1,Te(u)}}}function Ut(a){let e,t="Dimensions (cm)",l,r,s,n,o="Length",i,c,p,u,f,h,g="Width",m,b,k,A,N,H,O="Height",I,j,S,y;function x($){a[16]($)}let T={type:"number",id:"sizeX",class:"w-full p-2 border rounded-full dark:border-neutral-600",placeholder:"Length (cm)"};a[1].sizeX!==void 0&&(T.value=a[1].sizeX),c=new we({props:T}),oe.push(()=>fe(c,"value",x)),c.$on("input",a[17]);function Q($){a[18]($)}let K={type:"number",id:"sizeY",class:"w-full p-2 border rounded-full dark:border-neutral-600",placeholder:"Width (cm)"};a[1].sizeY!==void 0&&(K.value=a[1].sizeY),b=new we({props:K}),oe.push(()=>fe(b,"value",Q)),b.$on("input",a[19]);function U($){a[20]($)}let J={type:"number",id:"sizeZ",class:"w-full p-2 border rounded-full dark:border-neutral-600",placeholder:"Height (cm)"};return a[1].sizeZ!==void 0&&(J.value=a[1].sizeZ),j=new we({props:J}),oe.push(()=>fe(j,"value",U)),j.$on("input",a[21]),{c(){e=w("div"),e.textContent=t,l=z(),r=w("div"),s=w("div"),n=w("label"),n.textContent=o,i=z(),ee(c.$$.fragment),u=z(),f=w("div"),h=w("label"),h.textContent=g,m=z(),ee(b.$$.fragment),A=z(),N=w("div"),H=w("label"),H.textContent=O,I=z(),ee(j.$$.fragment),this.h()},l($){e=E($,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1nva788"&&(e.textContent=t),l=L($),r=E($,"DIV",{class:!0,role:!0,"aria-labelledby":!0});var R=C(r);s=E(R,"DIV",{});var D=C(s);n=E(D,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-14ubxu4"&&(n.textContent=o),i=L(D),te(c.$$.fragment,D),D.forEach(_),u=L(R),f=E(R,"DIV",{});var W=C(f);h=E(W,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Z(h)!=="svelte-1mon701"&&(h.textContent=g),m=L(W),te(b.$$.fragment,W),W.forEach(_),A=L(R),N=E(R,"DIV",{});var ue=C(N);H=E(ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Z(H)!=="svelte-1w92f5h"&&(H.textContent=O),I=L(ue),te(j.$$.fragment,ue),ue.forEach(_),R.forEach(_),this.h()},h(){d(e,"id","dimensions-label"),d(e,"class","block text-sm font-medium mb-3"),d(n,"for","sizeX"),d(n,"class","block text-xs font-medium mb-1"),d(h,"for","sizeY"),d(h,"class","block text-xs font-medium mb-1"),d(H,"for","sizeZ"),d(H,"class","block text-xs font-medium mb-1"),d(r,"class","grid grid-cols-3 gap-3"),d(r,"role","group"),d(r,"aria-labelledby","dimensions-label")},m($,R){V($,e,R),V($,l,R),V($,r,R),v(r,s),v(s,n),v(s,i),le(c,s,null),v(r,u),v(r,f),v(f,h),v(f,m),le(b,f,null),v(r,A),v(r,N),v(N,H),v(N,I),le(j,N,null),y=!0},p($,R){const D={};!p&&R[0]&2&&(p=!0,D.value=$[1].sizeX,ce(()=>p=!1)),c.$set(D);const W={};!k&&R[0]&2&&(k=!0,W.value=$[1].sizeY,ce(()=>k=!1)),b.$set(W);const ue={};!S&&R[0]&2&&(S=!0,ue.value=$[1].sizeZ,ce(()=>S=!1)),j.$set(ue)},i($){y||(P(c.$$.fragment,$),P(b.$$.fragment,$),P(j.$$.fragment,$),y=!0)},o($){B(c.$$.fragment,$),B(b.$$.fragment,$),B(j.$$.fragment,$),y=!1},d($){$&&(_(e),_(l),_(r)),re(c),re(b),re(j)}}}function Rt(a){let e,t=a[32].label+"",l,r,s,n,o,i,c,p=ne(a[32].options),u=[];for(let h=0;h<p.length;h+=1)u[h]=et(We(a,p,h));function f(){a[14].call(n,a[31])}return{c(){e=w("label"),l=M(t),s=z(),n=w("select");for(let h=0;h<u.length;h+=1)u[h].c();this.h()},l(h){e=E(h,"LABEL",{for:!0,class:!0});var g=C(e);l=q(g,t),g.forEach(_),s=L(h),n=E(h,"SELECT",{id:!0,class:!0});var m=C(n);for(let b=0;b<u.length;b+=1)u[b].l(m);m.forEach(_),this.h()},h(){d(e,"for",r=a[31]),d(e,"class","block text-sm font-medium mb-2"),d(n,"id",o=a[31]),d(n,"class","w-full p-2 rounded-full border dark:border-neutral-600 dark:bg-neutral-950 text-sm"),a[1][a[31]]===void 0&&wt(f)},m(h,g){V(h,e,g),v(e,l),V(h,s,g),V(h,n,g);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(n,null);Oe(n,a[1][a[31]],!0),i||(c=[ie(n,"change",f),ie(n,"change",a[15])],i=!0)},p(h,g){if(a=h,g[0]&1&&t!==(t=a[32].label+"")&&Y(l,t),g[0]&33&&r!==(r=a[31])&&d(e,"for",r),g[0]&33){p=ne(a[32].options);let m;for(m=0;m<p.length;m+=1){const b=We(a,p,m);u[m]?u[m].p(b,g):(u[m]=et(b),u[m].c(),u[m].m(n,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=p.length}g[0]&33&&o!==(o=a[31])&&d(n,"id",o),g[0]&35&&Oe(n,a[1][a[31]])},i:X,o:X,d(h){h&&(_(e),_(s),_(n)),ke(u,h),i=!1,Te(c)}}}function et(a){let e,t=a[35].label+"",l,r;return{c(){e=w("option"),l=M(t),this.h()},l(s){e=E(s,"OPTION",{});var n=C(e);l=q(n,t),n.forEach(_),this.h()},h(){e.__value=r=a[35].value,Ne(e,e.__value)},m(s,n){V(s,e,n),v(e,l)},p(s,n){n[0]&1&&t!==(t=s[35].label+"")&&Y(l,t),n[0]&33&&r!==(r=s[35].value)&&(e.__value=r,Ne(e,e.__value))},d(s){s&&_(e)}}}function tt(a){let e,t,l=a[32]&&Je(a);return{c(){l&&l.c(),e=z()},l(r){l&&l.l(r),e=L(r)},m(r,s){l&&l.m(r,s),V(r,e,s),t=!0},p(r,s){r[32]?l?(l.p(r,s),s[0]&1&&P(l,1)):(l=Je(r),l.c(),P(l,1),l.m(e.parentNode,e)):l&&(de(),B(l,1,1,()=>{l=null}),he())},i(r){t||(P(l),t=!0)},o(r){B(l),t=!1},d(r){r&&_(e),l&&l.d(r)}}}function Yt(a){let e,t,l,r,s,n,o;t=new ge({props:{variant:"outline",class:"w-full p-2 border dark:border-neutral-600 rounded-full mb-4 transition-all hover:bg-neutral-50 dark:hover:bg-neutral-800 flex justify-center items-center gap-2 "+(a[2]?"ring-2 dark:ring-neutral-50 ring-neutral-800":""),$$slots:{default:[Ot]},$$scope:{ctx:a}}}),t.$on("click",a[10]);let i=a[2]&&Ke(a);const c=[Bt,Nt],p=[];function u(f,h){return f[0].length>0?0:1}return s=u(a),n=p[s]=c[s](a),{c(){e=w("div"),ee(t.$$.fragment),l=z(),i&&i.c(),r=z(),n.c()},l(f){e=E(f,"DIV",{});var h=C(e);te(t.$$.fragment,h),l=L(h),i&&i.l(h),r=L(h),n.l(h),h.forEach(_)},m(f,h){V(f,e,h),le(t,e,null),v(e,l),i&&i.m(e,null),v(e,r),p[s].m(e,null),o=!0},p(f,h){const g={};h[0]&4&&(g.class="w-full p-2 border dark:border-neutral-600 rounded-full mb-4 transition-all hover:bg-neutral-50 dark:hover:bg-neutral-800 flex justify-center items-center gap-2 "+(f[2]?"ring-2 dark:ring-neutral-50 ring-neutral-800":"")),h[1]&1024&&(g.$$scope={dirty:h,ctx:f}),t.$set(g),f[2]?i?i.p(f,h):(i=Ke(f),i.c(),i.m(e,r)):i&&(i.d(1),i=null);let m=s;s=u(f),s===m?p[s].p(f,h):(de(),B(p[m],1,1,()=>{p[m]=null}),he(),n=p[s],n?n.p(f,h):(n=p[s]=c[s](f),n.c()),P(n,1),n.m(e,null))},i(f){o||(P(t.$$.fragment,f),P(n),o=!0)},o(f){B(t.$$.fragment,f),B(n),o=!1},d(f){f&&_(e),re(t),i&&i.d(),p[s].d()}}}function Zt(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>'}function Wt(a,e,t){let l;const r=De();let{attributeValues:s={}}=e,{activeAttributes:n=[]}=e,o=!1;const i=[{id:"material",label:"Material",placeholder:"E.g., wood, metal, plastic, fabric"},{id:"shape",label:"Shape",placeholder:"E.g., round, square or something more elaborate"},{id:"color",label:"Color",placeholder:"E.g., red, blue, yellow, transparent"},{id:"texture",label:"Texture",placeholder:"E.g., smooth, rough, bumpy"},{id:"marking",label:"Markings",placeholder:"Does it have logo, text, engravings etc?"},{id:"smell",label:"Smell",placeholder:"E.g., sweet, odorless, pungent"},{id:"functionality",label:"Functionality",placeholder:"E.g., cutting, writing, art"},{id:"period",label:"Time Period",placeholder:"E.g., 1800s, 1900s, 2000s"},{id:"location",label:"Location",placeholder:"Where is it typically found? E.g., Europe, Asia"},{id:"writtenText",label:"Written Text",placeholder:"Any writing on the object"},{id:"hardness",label:"Hardness",placeholder:"E.g., soft, hard, flexible"},{id:"value",label:"Price ($)",placeholder:"Estimated value in dollars",type:"number"},{id:"originOfAcquisition",label:"Origin of Acquisition",placeholder:"Where/how you got it"},{id:"pattern",label:"Pattern",placeholder:"E.g., striped, checkered, floral"},{id:"print",label:"Print",placeholder:"Any printed design or imagery"},{id:"dimensions",label:"Dimensions",placeholder:"Size measurements",type:"dimensions"},{id:"weight",label:"Weight (grams)",placeholder:"Weight in grams",type:"number"},{id:"handmade",label:"Handmade",placeholder:"",type:"checkbox"},{id:"oneOfAKind",label:"One of a Kind",placeholder:"",type:"checkbox"}];function c(D){n.includes(D)||(t(0,n=[...n,D]),r("update",{activeAttributes:n})),t(2,o=!1)}function p(D){t(0,n=n.filter(W=>W!==D)),r("update",{activeAttributes:n})}function u(D,W){t(1,s[D]=W,s),r("valuechange",{attributeValues:s})}function f(D){t(1,s.color=D.detail.color,s),t(1,s.colorHex=D.detail.hex,s),r("valuechange",{attributeValues:s})}function h(D){u("material",D.detail.value)}const g=()=>t(2,o=!o),m=()=>t(2,o=!1),b=D=>c(D.id),k=D=>p(D);function A(D){s[D]=kt(this),t(1,s),t(5,i),t(0,n)}const N=()=>r("valuechange",{attributeValues:s});function H(D){a.$$.not_equal(s.sizeX,D)&&(s.sizeX=D,t(1,s))}const O=()=>r("valuechange",{attributeValues:s});function I(D){a.$$.not_equal(s.sizeY,D)&&(s.sizeY=D,t(1,s))}const j=()=>r("valuechange",{attributeValues:s});function S(D){a.$$.not_equal(s.sizeZ,D)&&(s.sizeZ=D,t(1,s))}const y=()=>r("valuechange",{attributeValues:s});function x(D){s[D]=this.checked,t(1,s),t(5,i),t(0,n)}const T=()=>r("valuechange",{attributeValues:s});function Q(D){a.$$.not_equal(s.color,D)&&(s.color=D,t(1,s))}function K(D){a.$$.not_equal(s.colorHex,D)&&(s.colorHex=D,t(1,s))}function U(D){a.$$.not_equal(s.material,D)&&(s.material=D,t(1,s))}function J(D,W){a.$$.not_equal(s[W],D)&&(s[W]=D,t(1,s))}const $=()=>r("valuechange",{attributeValues:s}),R=(D,W)=>W.id===D;return a.$$set=D=>{"attributeValues"in D&&t(1,s=D.attributeValues),"activeAttributes"in D&&t(0,n=D.activeAttributes)},a.$$.update=()=>{a.$$.dirty[0]&1&&t(3,l=i.filter(D=>!n.includes(D.id)))},[n,s,o,l,r,i,c,p,f,h,g,m,b,k,A,N,H,O,I,j,S,y,x,T,Q,K,U,J,$,R]}class Xt extends Ce{constructor(e){super(),xe(this,e,Wt,Yt,ye,{attributeValues:1,activeAttributes:0},null,[-1,-1])}}async function Kt(a,e){const t=await fetch(`/api/mysteryObjects/${a}/subParts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to add sub-part: ${t.statusText}`);return await t.json()}async function Qt(a,e,t){const l=await fetch(`/api/mysteryObjects/${a}/subParts/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!l.ok)throw new Error(`Failed to update sub-part: ${l.statusText}`);return await l.json()}async function Gt(a,e){const t=await fetch(`/api/mysteryObjects/${a}/subParts/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to remove sub-part: ${t.statusText}`);return!0}function lt(a,e,t){const l=a.slice();return l[22]=e[t],l}function Jt(a){let e,t,l;return{c(){e=ae("svg"),t=ae("path"),l=M(`\r
            Add Part`),this.h()},l(r){e=se(r,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var s=C(e);t=se(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),C(t).forEach(_),s.forEach(_),l=q(r,`\r
            Add Part`),this.h()},h(){d(t,"fill-rule","evenodd"),d(t,"d","M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"),d(t,"clip-rule","evenodd"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"class","h-3.5 w-3.5 mr-1.5"),d(e,"viewBox","0 0 20 20"),d(e,"fill","currentColor")},m(r,s){V(r,e,s),v(e,t),V(r,l,s)},p:X,d(r){r&&(_(e),_(l))}}}function rt(a){let e,t;return{c(){e=w("div"),t=M(a[4]),this.h()},l(l){e=E(l,"DIV",{class:!0});var r=C(e);t=q(r,a[4]),r.forEach(_),this.h()},h(){d(e,"class","bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 p-3 rounded-md mb-4")},m(l,r){V(l,e,r),v(e,t)},p(l,r){r&16&&Y(t,l[4])},d(l){l&&_(e)}}}function nt(a){let e,t,l=a[2]?"Edit Part":"Add New Part",r,s,n,o,i,c=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 2a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7zm0 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path></svg>
                        Description*`,p,u,f,h,g,m,b,k,A,N,H=a[7].length+"",O,I,j,S,y,x,T,Q,K,U,J,$,R;function D(F){a[16](F)}let W={id:"description",class:"w-full p-3 border rounded-md text-sm bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-700 focus:ring-2 focus:ring-teal-500/30 focus:border-teal-500 min-h-[100px]",placeholder:"Describe this part of the object",rows:"3"};a[5]!==void 0&&(W.value=a[5]),u=new Ct({props:W}),oe.push(()=>fe(u,"value",D));function ue(F){a[17](F)}function ze(F){a[18](F)}let Le={};return a[6]!==void 0&&(Le.attributeValues=a[6]),a[7]!==void 0&&(Le.activeAttributes=a[7]),y=new Xt({props:Le}),oe.push(()=>fe(y,"attributeValues",ue)),oe.push(()=>fe(y,"activeAttributes",ze)),y.$on("update",a[9]),y.$on("valuechange",a[10]),U=new ge({props:{variant:"default",size:"sm",class:"text-sm py-1 px-4 bg-teal-600 hover:bg-teal-700 text-white rounded-full",disabled:a[3],$$slots:{default:[ll]},$$scope:{ctx:a}}}),U.$on("click",a[12]),$=new ge({props:{variant:"outline",size:"sm",class:"text-sm py-1 px-3 rounded-full border-neutral-300 dark:border-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-800",$$slots:{default:[rl]},$$scope:{ctx:a}}}),$.$on("click",a[8]),{c(){e=w("div"),t=w("h4"),r=M(l),s=z(),n=w("div"),o=w("div"),i=w("label"),i.innerHTML=c,p=z(),ee(u.$$.fragment),h=z(),g=w("div"),m=w("div"),b=ae("svg"),k=ae("path"),A=M(`\r
                        Part Attributes\r
                        `),N=w("span"),O=M(H),I=M(" added"),j=z(),S=w("div"),ee(y.$$.fragment),Q=z(),K=w("div"),ee(U.$$.fragment),J=z(),ee($.$$.fragment),this.h()},l(F){e=E(F,"DIV",{class:!0});var G=C(e);t=E(G,"H4",{class:!0});var Ee=C(t);r=q(Ee,l),Ee.forEach(_),s=L(G),n=E(G,"DIV",{class:!0});var pe=C(n);o=E(pe,"DIV",{class:!0});var _e=C(o);i=E(_e,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Z(i)!=="svelte-15a3vir"&&(i.innerHTML=c),p=L(_e),te(u.$$.fragment,_e),_e.forEach(_),h=L(pe),g=E(pe,"DIV",{class:!0});var be=C(g);m=E(be,"DIV",{class:!0});var Ve=C(m);b=se(Ve,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var $e=C(b);k=se($e,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),C(k).forEach(_),$e.forEach(_),A=q(Ve,`\r
                        Part Attributes\r
                        `),N=E(Ve,"SPAN",{class:!0});var je=C(N);O=q(je,H),I=q(je," added"),je.forEach(_),Ve.forEach(_),j=L(be),S=E(be,"DIV",{class:!0});var Pe=C(S);te(y.$$.fragment,Pe),Pe.forEach(_),be.forEach(_),pe.forEach(_),Q=L(G),K=E(G,"DIV",{class:!0});var Ae=C(K);te(U.$$.fragment,Ae),J=L(Ae),te($.$$.fragment,Ae),Ae.forEach(_),G.forEach(_),this.h()},h(){d(t,"class","text-sm font-medium mb-3 text-neutral-700 dark:text-neutral-300"),d(i,"for","description"),d(i,"class","block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300 flex items-center"),d(o,"class","w-full lg:w-1/2 mb-4 lg:mb-0"),d(k,"fill-rule","evenodd"),d(k,"d","M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z"),d(k,"clip-rule","evenodd"),d(b,"xmlns","http://www.w3.org/2000/svg"),d(b,"class","h-4 w-4 mr-1.5"),d(b,"viewBox","0 0 20 20"),d(b,"fill","currentColor"),d(N,"class","ml-2 px-2 py-0.5 bg-neutral-100 dark:bg-neutral-800 text-xs rounded-full text-neutral-700 dark:text-neutral-300"),d(m,"class","mb-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 flex items-center"),d(S,"class","bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 rounded-md shadow-sm p-3"),d(g,"class","w-full lg:w-1/2"),d(n,"class","flex flex-col lg:flex-row lg:gap-6"),d(K,"class","flex justify-start mt-4 gap-2"),d(e,"class","bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 rounded-md p-4 mb-4")},m(F,G){V(F,e,G),v(e,t),v(t,r),v(e,s),v(e,n),v(n,o),v(o,i),v(o,p),le(u,o,null),v(n,h),v(n,g),v(g,m),v(m,b),v(b,k),v(m,A),v(m,N),v(N,O),v(N,I),v(g,j),v(g,S),le(y,S,null),v(e,Q),v(e,K),le(U,K,null),v(K,J),le($,K,null),R=!0},p(F,G){(!R||G&4)&&l!==(l=F[2]?"Edit Part":"Add New Part")&&Y(r,l);const Ee={};!f&&G&32&&(f=!0,Ee.value=F[5],ce(()=>f=!1)),u.$set(Ee),(!R||G&128)&&H!==(H=F[7].length+"")&&Y(O,H);const pe={};!x&&G&64&&(x=!0,pe.attributeValues=F[6],ce(()=>x=!1)),!T&&G&128&&(T=!0,pe.activeAttributes=F[7],ce(()=>T=!1)),y.$set(pe);const _e={};G&8&&(_e.disabled=F[3]),G&33554440&&(_e.$$scope={dirty:G,ctx:F}),U.$set(_e);const be={};G&33554432&&(be.$$scope={dirty:G,ctx:F}),$.$set(be)},i(F){R||(P(u.$$.fragment,F),P(y.$$.fragment,F),P(U.$$.fragment,F),P($.$$.fragment,F),R=!0)},o(F){B(u.$$.fragment,F),B(y.$$.fragment,F),B(U.$$.fragment,F),B($.$$.fragment,F),R=!1},d(F){F&&_(e),re(u),re(y),re(U),re($)}}}function el(a){let e,t,l;return{c(){e=ae("svg"),t=ae("path"),l=M(`\r
                    Save Part`),this.h()},l(r){e=se(r,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var s=C(e);t=se(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),C(t).forEach(_),s.forEach(_),l=q(r,`\r
                    Save Part`),this.h()},h(){d(t,"fill-rule","evenodd"),d(t,"d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"),d(t,"clip-rule","evenodd"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"class","h-3.5 w-3.5 mr-1.5"),d(e,"viewBox","0 0 20 20"),d(e,"fill","currentColor")},m(r,s){V(r,e,s),v(e,t),V(r,l,s)},d(r){r&&(_(e),_(l))}}}function tl(a){let e,t;return{c(){e=w("span"),t=M(`\r
                    Saving...`),this.h()},l(l){e=E(l,"SPAN",{class:!0}),C(e).forEach(_),t=q(l,`\r
                    Saving...`),this.h()},h(){d(e,"class","inline-block h-3.5 w-3.5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-1.5")},m(l,r){V(l,e,r),V(l,t,r)},d(l){l&&(_(e),_(t))}}}function ll(a){let e;function t(s,n){return s[3]?tl:el}let l=t(a),r=l(a);return{c(){r.c(),e=Be()},l(s){r.l(s),e=Be()},m(s,n){r.m(s,n),V(s,e,n)},p(s,n){l!==(l=t(s))&&(r.d(1),r=l(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&_(e),r.d(s)}}}function rl(a){let e,t,l;return{c(){e=ae("svg"),t=ae("path"),l=M(`\r
                    Cancel`),this.h()},l(r){e=se(r,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var s=C(e);t=se(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),C(t).forEach(_),s.forEach(_),l=q(r,`\r
                    Cancel`),this.h()},h(){d(t,"fill-rule","evenodd"),d(t,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z"),d(t,"clip-rule","evenodd"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"class","h-3.5 w-3.5 mr-1.5"),d(e,"viewBox","0 0 20 20"),d(e,"fill","currentColor")},m(r,s){V(r,e,s),v(e,t),V(r,l,s)},p:X,d(r){r&&(_(e),_(l))}}}function nl(a){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 mx-auto mb-2 text-neutral-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5 4a3 3 0 00-3 3v6a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm-1 9v-1h5v2H5a1 1 0 01-1-1zm7 1h4a1 1 0 001-1v-1h-5v2zm0-4h5V8h-5v2zM9 8H4v2h5V8z" clip-rule="evenodd"></path></svg> <p>No parts added yet. Click &quot;Add Part&quot; to create object sub-parts.</p>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(l){e=E(l,"DIV",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-1qu6o8b"&&(e.innerHTML=t),this.h()},h(){d(e,"class","bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 rounded-md p-4 text-center text-sm text-neutral-500")},m(l,r){V(l,e,r)},p:X,i:X,o:X,d(l){l&&_(e)}}}function al(a){let e,t=[],l=new Map,r,s=ne(a[0]);const n=o=>o[22].id;for(let o=0;o<s.length;o+=1){let i=lt(a,s,o),c=n(i);l.set(c,t[o]=ut(c,i))}return{c(){e=w("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=E(o,"DIV",{class:!0});var i=C(e);for(let c=0;c<t.length;c+=1)t[c].l(i);i.forEach(_),this.h()},h(){d(e,"class","space-y-3")},m(o,i){V(o,e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);r=!0},p(o,i){i&10241&&(s=ne(o[0]),de(),t=Et(t,i,n,1,o,s,l,e,yt,ut,null,lt),he())},i(o){if(!r){for(let i=0;i<s.length;i+=1)P(t[i]);r=!0}},o(o){for(let i=0;i<t.length;i+=1)B(t[i]);r=!1},d(o){o&&_(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function sl(a){let e,t;return{c(){e=ae("svg"),t=ae("path"),this.h()},l(l){e=se(l,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var r=C(e);t=se(r,"path",{d:!0}),C(t).forEach(_),r.forEach(_),this.h()},h(){d(t,"d","M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"class","h-3.5 w-3.5"),d(e,"viewBox","0 0 20 20"),d(e,"fill","currentColor")},m(l,r){V(l,e,r),v(e,t)},p:X,d(l){l&&_(e)}}}function il(a){let e,t;return{c(){e=ae("svg"),t=ae("path"),this.h()},l(l){e=se(l,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var r=C(e);t=se(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),C(t).forEach(_),r.forEach(_),this.h()},h(){d(t,"fill-rule","evenodd"),d(t,"d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"),d(t,"clip-rule","evenodd"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"class","h-3.5 w-3.5"),d(e,"viewBox","0 0 20 20"),d(e,"fill","currentColor")},m(l,r){V(l,e,r),v(e,t)},p:X,d(l){l&&_(e)}}}function at(a){let e,t,l="Material:",r,s,n=a[22].material+"",o;return{c(){e=w("div"),t=w("span"),t.textContent=l,r=z(),s=w("span"),o=M(n),this.h()},l(i){e=E(i,"DIV",{class:!0});var c=C(e);t=E(c,"SPAN",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-uyrk2x"&&(t.textContent=l),r=L(c),s=E(c,"SPAN",{});var p=C(s);o=q(p,n),p.forEach(_),c.forEach(_),this.h()},h(){d(t,"class","text-neutral-500"),d(e,"class","flex justify-between")},m(i,c){V(i,e,c),v(e,t),v(e,r),v(e,s),v(s,o)},p(i,c){c&1&&n!==(n=i[22].material+"")&&Y(o,n)},d(i){i&&_(e)}}}function st(a){let e,t,l="Color:",r,s,n,o,i,c=a[22].color+"",p;return{c(){e=w("div"),t=w("span"),t.textContent=l,r=z(),s=w("span"),n=w("span"),o=z(),i=w("span"),p=M(c),this.h()},l(u){e=E(u,"DIV",{class:!0});var f=C(e);t=E(f,"SPAN",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-1lnhfzp"&&(t.textContent=l),r=L(f),s=E(f,"SPAN",{class:!0});var h=C(s);n=E(h,"SPAN",{class:!0,style:!0}),C(n).forEach(_),o=L(h),i=E(h,"SPAN",{});var g=C(i);p=q(g,c),g.forEach(_),h.forEach(_),f.forEach(_),this.h()},h(){d(t,"class","text-neutral-500"),d(n,"class","w-3 h-3 inline-block rounded-full border mr-1"),Ie(n,"background-color",a[22].color),d(s,"class","flex items-center"),d(e,"class","flex justify-between items-center")},m(u,f){V(u,e,f),v(e,t),v(e,r),v(e,s),v(s,n),v(s,o),v(s,i),v(i,p)},p(u,f){f&1&&Ie(n,"background-color",u[22].color),f&1&&c!==(c=u[22].color+"")&&Y(p,c)},d(u){u&&_(e)}}}function it(a){let e,t,l="Shape:",r,s,n=a[22].shape+"",o;return{c(){e=w("div"),t=w("span"),t.textContent=l,r=z(),s=w("span"),o=M(n),this.h()},l(i){e=E(i,"DIV",{class:!0});var c=C(e);t=E(c,"SPAN",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-de34jr"&&(t.textContent=l),r=L(c),s=E(c,"SPAN",{});var p=C(s);o=q(p,n),p.forEach(_),c.forEach(_),this.h()},h(){d(t,"class","text-neutral-500"),d(e,"class","flex justify-between")},m(i,c){V(i,e,c),v(e,t),v(e,r),v(e,s),v(s,o)},p(i,c){c&1&&n!==(n=i[22].shape+"")&&Y(o,n)},d(i){i&&_(e)}}}function ot(a){let e,t,l="Texture:",r,s,n=a[22].texture+"",o;return{c(){e=w("div"),t=w("span"),t.textContent=l,r=z(),s=w("span"),o=M(n),this.h()},l(i){e=E(i,"DIV",{class:!0});var c=C(e);t=E(c,"SPAN",{class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-12pdhd5"&&(t.textContent=l),r=L(c),s=E(c,"SPAN",{});var p=C(s);o=q(p,n),p.forEach(_),c.forEach(_),this.h()},h(){d(t,"class","text-neutral-500"),d(e,"class","flex justify-between")},m(i,c){V(i,e,c),v(e,t),v(e,r),v(e,s),v(s,o)},p(i,c){c&1&&n!==(n=i[22].texture+"")&&Y(o,n)},d(i){i&&_(e)}}}function ut(a,e){let t,l,r,s=(e[22].description||"Unnamed Part")+"",n,o,i,c,p,u,f,h,g,m,b,k,A;function N(){return e[19](e[22])}c=new ge({props:{variant:"ghost",size:"xs",class:"h-6 w-6 p-0 rounded-full flex items-center justify-center",$$slots:{default:[sl]},$$scope:{ctx:e}}}),c.$on("click",N);function H(){return e[20](e[22])}u=new ge({props:{variant:"ghost",size:"xs",class:"h-6 w-6 p-0 rounded-full flex items-center justify-center text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/30",$$slots:{default:[il]},$$scope:{ctx:e}}}),u.$on("click",H);let O=e[22].material&&at(e),I=e[22].color&&st(e),j=e[22].shape&&it(e),S=e[22].texture&&ot(e);return{key:a,first:null,c(){t=w("div"),l=w("div"),r=w("h5"),n=M(s),o=z(),i=w("div"),ee(c.$$.fragment),p=z(),ee(u.$$.fragment),f=z(),h=w("div"),O&&O.c(),g=z(),I&&I.c(),m=z(),j&&j.c(),b=z(),S&&S.c(),k=z(),this.h()},l(y){t=E(y,"DIV",{class:!0});var x=C(t);l=E(x,"DIV",{class:!0});var T=C(l);r=E(T,"H5",{class:!0});var Q=C(r);n=q(Q,s),Q.forEach(_),o=L(T),i=E(T,"DIV",{class:!0});var K=C(i);te(c.$$.fragment,K),p=L(K),te(u.$$.fragment,K),K.forEach(_),T.forEach(_),f=L(x),h=E(x,"DIV",{class:!0});var U=C(h);O&&O.l(U),g=L(U),I&&I.l(U),m=L(U),j&&j.l(U),b=L(U),S&&S.l(U),U.forEach(_),k=L(x),x.forEach(_),this.h()},h(){d(r,"class","font-medium text-sm"),d(i,"class","flex gap-1"),d(l,"class","flex justify-between items-start mb-2"),d(h,"class","grid grid-cols-2 gap-x-4 gap-y-1 text-xs mt-2"),d(t,"class","bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 rounded-md p-3"),this.first=t},m(y,x){V(y,t,x),v(t,l),v(l,r),v(r,n),v(l,o),v(l,i),le(c,i,null),v(i,p),le(u,i,null),v(t,f),v(t,h),O&&O.m(h,null),v(h,g),I&&I.m(h,null),v(h,m),j&&j.m(h,null),v(h,b),S&&S.m(h,null),v(t,k),A=!0},p(y,x){e=y,(!A||x&1)&&s!==(s=(e[22].description||"Unnamed Part")+"")&&Y(n,s);const T={};x&33554432&&(T.$$scope={dirty:x,ctx:e}),c.$set(T);const Q={};x&33554432&&(Q.$$scope={dirty:x,ctx:e}),u.$set(Q),e[22].material?O?O.p(e,x):(O=at(e),O.c(),O.m(h,g)):O&&(O.d(1),O=null),e[22].color?I?I.p(e,x):(I=st(e),I.c(),I.m(h,m)):I&&(I.d(1),I=null),e[22].shape?j?j.p(e,x):(j=it(e),j.c(),j.m(h,b)):j&&(j.d(1),j=null),e[22].texture?S?S.p(e,x):(S=ot(e),S.c(),S.m(h,null)):S&&(S.d(1),S=null)},i(y){A||(P(c.$$.fragment,y),P(u.$$.fragment,y),A=!0)},o(y){B(c.$$.fragment,y),B(u.$$.fragment,y),A=!1},d(y){y&&_(t),re(c),re(u),O&&O.d(),I&&I.d(),j&&j.d(),S&&S.d()}}}function ol(a){let e,t,l,r,s,n,o,i,c;l=new ge({props:{variant:"outline",size:"sm",class:"text-xs rounded-full px-3 py-1 border-neutral-300 dark:border-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-800",$$slots:{default:[Jt]},$$scope:{ctx:a}}}),l.$on("click",a[15]);let p=a[4]&&rt(a),u=a[1]&&nt(a);const f=[al,nl],h=[];function g(m,b){return m[0].length>0?0:1}return o=g(a),i=h[o]=f[o](a),{c(){e=w("div"),t=w("div"),ee(l.$$.fragment),r=z(),p&&p.c(),s=z(),u&&u.c(),n=z(),i.c(),this.h()},l(m){e=E(m,"DIV",{class:!0});var b=C(e);t=E(b,"DIV",{class:!0});var k=C(t);te(l.$$.fragment,k),k.forEach(_),r=L(b),p&&p.l(b),s=L(b),u&&u.l(b),n=L(b),i.l(b),b.forEach(_),this.h()},h(){d(t,"class","flex items-center justify-start mb-4"),d(e,"class","mb-6")},m(m,b){V(m,e,b),v(e,t),le(l,t,null),v(e,r),p&&p.m(e,null),v(e,s),u&&u.m(e,null),v(e,n),h[o].m(e,null),c=!0},p(m,[b]){const k={};b&33554432&&(k.$$scope={dirty:b,ctx:m}),l.$set(k),m[4]?p?p.p(m,b):(p=rt(m),p.c(),p.m(e,s)):p&&(p.d(1),p=null),m[1]?u?(u.p(m,b),b&2&&P(u,1)):(u=nt(m),u.c(),P(u,1),u.m(e,n)):u&&(de(),B(u,1,1,()=>{u=null}),he());let A=o;o=g(m),o===A?h[o].p(m,b):(de(),B(h[A],1,1,()=>{h[A]=null}),he(),i=h[o],i?i.p(m,b):(i=h[o]=f[o](m),i.c()),P(i,1),i.m(e,null))},i(m){c||(P(l.$$.fragment,m),P(u),P(i),c=!0)},o(m){B(l.$$.fragment,m),B(u),B(i),c=!1},d(m){m&&_(e),re(l),p&&p.d(),u&&u.d(),h[o].d()}}}function ul(a,e,t){const l=De();let{mysteryObjectId:r=null}=e,{subParts:s=[]}=e,n=!1,o=null,i=!1,c=null,p="",u={},f=[];function h(){t(5,p=""),t(6,u={}),t(7,f=[]),t(2,o=null),t(1,n=!1)}function g(y){t(7,f=y.detail.activeAttributes)}function m(y){t(6,u=y.detail.attributeValues)}function b(y){t(2,o=y.id),t(5,p=y.description||""),t(6,u={material:y.material||"",shape:y.shape||"",color:y.colorHex||"",texture:y.texture||"",writtenText:y.writtenText||"",descriptionOfParts:y.descriptionOfParts||"",location:y.location||"",hardness:y.hardness||"",timePeriod:y.timePeriod||"",smell:y.smell||"",taste:y.taste||"",functionality:y.functionality||"",markings:y.markings||"",pattern:y.pattern||"",brand:y.brand||"",print:y.print||"",imageLicenses:y.imageLicenses||"",value:y.value||"",originOfAcquisition:y.originOfAcquisition||"",weight:y.weight||"",handmade:y.handmade||!1,oneOfAKind:y.oneOfAKind||!1,sizeX:y.sizeX||"",sizeY:y.sizeY||"",sizeZ:y.sizeZ||""}),t(7,f=Object.keys(u).filter(x=>{const T=u[x];return T!==""&&T!==null&&T!==void 0})),t(1,n=!0)}async function k(){if(!p.trim()){t(4,c="Description is required");return}t(3,i=!0),t(4,c=null);try{const y={description:p,material:u.material,color:u.colorHex,shape:u.shape,location:u.location,smell:u.smell,taste:u.taste,texture:u.texture,functionality:u.functionality,markings:u.markings,handmade:u.handmade||!1,oneOfAKind:u.oneOfAKind||!1,weight:parseFloat(u.weight)||null,timePeriod:u.timePeriod,writtenText:u.writtenText,descriptionOfParts:u.descriptionOfParts,hardness:u.hardness,value:parseFloat(u.value)||null,originOfAcquisition:u.originOfAcquisition,pattern:u.pattern,brand:u.brand,print:u.print,imageLicenses:u.imageLicenses,sizeX:parseFloat(u.sizeX)||null,sizeY:parseFloat(u.sizeY)||null,sizeZ:parseFloat(u.sizeZ)||null,item_condition:u.itemCondition||null};let x;if(r===null){const T=Date.now();x={...y,id:T},t(0,s=[...s,x])}else o?(x=await Qt(r,o,y),t(0,s=s.map(T=>T.id===o?x:T))):(x=await Kt(r,y),t(0,s=[...s,x]));l("update",{subParts:s}),h()}catch(y){console.error("Error saving sub-part:",y),t(4,c=y.message||"Failed to save sub-part")}finally{t(3,i=!1)}}async function A(y){if(confirm("Are you sure you want to delete this part?")){t(3,i=!0),t(4,c=null);try{r===null?t(0,s=s.filter(x=>x.id!==y)):(await Gt(r,y),t(0,s=s.filter(x=>x.id!==y))),l("update",{subParts:s})}catch(x){console.error("Error deleting sub-part:",x),t(4,c=x.message||"Failed to delete sub-part")}finally{t(3,i=!1)}}}const N=()=>{h(),t(1,n=!n)};function H(y){p=y,t(5,p)}function O(y){u=y,t(6,u)}function I(y){f=y,t(7,f)}const j=y=>b(y),S=y=>A(y.id);return a.$$set=y=>{"mysteryObjectId"in y&&t(14,r=y.mysteryObjectId),"subParts"in y&&t(0,s=y.subParts)},[s,n,o,i,c,p,u,f,h,g,m,b,k,A,r,N,H,O,I,j,S]}class yl extends Ce{constructor(e){super(),xe(this,e,ul,ol,ye,{mysteryObjectId:14,subParts:0})}}function ct(a,e,t){const l=a.slice();return l[19]=e[t],l}function ft(a,e,t){const l=a.slice();return l[22]=e[t],l}function dt(a){let e,t="Loading...";return{c(){e=w("p"),e.textContent=t,this.h()},l(l){e=E(l,"P",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-17rvozf"&&(e.textContent=t),this.h()},h(){d(e,"class","mt-2 text-sm")},m(l,r){V(l,e,r)},d(l){l&&_(e)}}}function ht(a){let e,t,l=ne(a[4]),r=[];for(let n=0;n<l.length;n+=1)r[n]=pt(ft(a,l,n));const s=n=>B(r[n],1,1,()=>{r[n]=null});return{c(){e=w("ul");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=E(n,"UL",{class:!0});var o=C(e);for(let i=0;i<r.length;i+=1)r[i].l(o);o.forEach(_),this.h()},h(){d(e,"class","list-none p-0 mt-2 border bg-white dark:bg-neutral-950 rounded-md absolute w-full max-h-60 overflow-y-auto shadow-lg z-10")},m(n,o){V(n,e,o);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(n,o){if(o&1040){l=ne(n[4]);let i;for(i=0;i<l.length;i+=1){const c=ft(n,l,i);r[i]?(r[i].p(c,o),P(r[i],1)):(r[i]=pt(c),r[i].c(),P(r[i],1),r[i].m(e,null))}for(de(),i=l.length;i<r.length;i+=1)s(i);he()}},i(n){if(!t){for(let o=0;o<l.length;o+=1)P(r[o]);t=!0}},o(n){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)B(r[o]);t=!1},d(n){n&&_(e),ke(r,n)}}}function cl(a){let e,t,l=a[22].label+"",r,s,n,o=a[22].description+"",i;return{c(){e=w("div"),t=w("div"),r=M(l),s=z(),n=w("div"),i=M(o),this.h()},l(c){e=E(c,"DIV",{});var p=C(e);t=E(p,"DIV",{class:!0});var u=C(t);r=q(u,l),u.forEach(_),s=L(p),n=E(p,"DIV",{class:!0});var f=C(n);i=q(f,o),f.forEach(_),p.forEach(_),this.h()},h(){d(t,"class","font-medium"),d(n,"class","text-xs text-neutral-500 dark:text-neutral-400")},m(c,p){V(c,e,p),v(e,t),v(t,r),v(e,s),v(e,n),v(n,i)},p(c,p){p&16&&l!==(l=c[22].label+"")&&Y(r,l),p&16&&o!==(o=c[22].description+"")&&Y(i,o)},d(c){c&&_(e)}}}function pt(a){let e,t,l,r;function s(){return a[17](a[22])}return t=new ge({props:{variant:"ghost",class:"w-full text-left p-2 justify-start h-auto",$$slots:{default:[cl]},$$scope:{ctx:a}}}),t.$on("click",s),{c(){e=w("li"),ee(t.$$.fragment),l=z()},l(n){e=E(n,"LI",{});var o=C(e);te(t.$$.fragment,o),l=L(o),o.forEach(_)},m(n,o){V(n,e,o),le(t,e,null),v(e,l),r=!0},p(n,o){a=n;const i={};o&33554448&&(i.$$scope={dirty:o,ctx:a}),t.$set(i)},i(n){r||(P(t.$$.fragment,n),r=!0)},o(n){B(t.$$.fragment,n),r=!1},d(n){n&&_(e),re(t)}}}function fl(a){let e,t="No tags added yet. Search for relevant terms above.";return{c(){e=w("p"),e.textContent=t,this.h()},l(l){e=E(l,"P",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-16ch4i2"&&(e.textContent=t),this.h()},h(){d(e,"class","text-sm text-neutral-500 dark:text-neutral-400 mt-2")},m(l,r){V(l,e,r)},p:X,d(l){l&&_(e)}}}function dl(a){let e,t=ne(a[0]),l=[];for(let r=0;r<t.length;r+=1)l[r]=mt(ct(a,t,r));return{c(){e=w("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=E(r,"DIV",{class:!0});var s=C(e);for(let n=0;n<l.length;n+=1)l[n].l(s);s.forEach(_),this.h()},h(){d(e,"class","grid grid-cols-1 gap-2 sm:grid-cols-2")},m(r,s){V(r,e,s);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,null)},p(r,s){if(s&2049){t=ne(r[0]);let n;for(n=0;n<t.length;n+=1){const o=ct(r,t,n);l[n]?l[n].p(o,s):(l[n]=mt(o),l[n].c(),l[n].m(e,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=t.length}},d(r){r&&_(e),ke(l,r)}}}function _t(a){let e,t=a[19].description+"",l;return{c(){e=w("p"),l=M(t),this.h()},l(r){e=E(r,"P",{class:!0});var s=C(e);l=q(s,t),s.forEach(_),this.h()},h(){d(e,"class","text-xs mt-1 line-clamp-2 text-neutral-600 dark:text-neutral-400")},m(r,s){V(r,e,s),v(e,l)},p(r,s){s&1&&t!==(t=r[19].description+"")&&Y(l,t)},d(r){r&&_(e)}}}function mt(a){let e,t,l,r=pl()+"",s,n,o,i=a[19].label+"",c,p,u,f,h;function g(){return a[18](a[19])}let m=a[19].description&&_t(a);return{c(){e=w("div"),t=w("button"),l=new bt(!1),s=z(),n=w("div"),o=w("div"),c=M(i),p=z(),m&&m.c(),u=z(),this.h()},l(b){e=E(b,"DIV",{class:!0});var k=C(e);t=E(k,"BUTTON",{type:!0,class:!0,title:!0});var A=C(t);l=gt(A,!1),A.forEach(_),s=L(k),n=E(k,"DIV",{class:!0});var N=C(n);o=E(N,"DIV",{class:!0});var H=C(o);c=q(H,i),H.forEach(_),p=L(N),m&&m.l(N),N.forEach(_),u=L(k),k.forEach(_),this.h()},h(){l.a=null,d(t,"type","button"),d(t,"class","absolute top-2 right-2 h-6 w-6 rounded-full flex items-center justify-center bg-neutral-100 text-neutral-500 hover:bg-red-50 hover:text-red-500 dark:bg-neutral-800 dark:hover:bg-neutral-700 transition-colors"),d(t,"title","Remove tag"),d(o,"class","font-medium text-sm mb-1"),d(n,"class","pr-6"),d(e,"class","relative p-3 rounded-md border bg-neutral-50 dark:bg-neutral-900 dark:border-neutral-700 transition-all hover:shadow-sm")},m(b,k){V(b,e,k),v(e,t),l.m(r,t),v(e,s),v(e,n),v(n,o),v(o,c),v(n,p),m&&m.m(n,null),v(e,u),f||(h=ie(t,"click",g),f=!0)},p(b,k){a=b,k&1&&i!==(i=a[19].label+"")&&Y(c,i),a[19].description?m?m.p(a,k):(m=_t(a),m.c(),m.m(n,null)):m&&(m.d(1),m=null)},d(b){b&&_(e),m&&m.d(),f=!1,h()}}}function hl(a){let e,t,l,r,s,n,o,i;function c(b){a[16](b)}let p={type:"text",placeholder:"Add relevant tags",class:"w-full p-2 border rounded-full dark:border-neutral-600"};a[1]!==void 0&&(p.value=a[1]),t=new we({props:p}),oe.push(()=>fe(t,"value",c)),t.$on("input",a[9]);let u=a[2]&&dt(),f=a[3]&&a[4].length>0&&ht(a);function h(b,k){return b[0].length>0?dl:fl}let g=h(a),m=g(a);return{c(){e=w("div"),ee(t.$$.fragment),r=z(),u&&u.c(),s=z(),f&&f.c(),n=z(),o=w("div"),m.c(),this.h()},l(b){e=E(b,"DIV",{class:!0});var k=C(e);te(t.$$.fragment,k),r=L(k),u&&u.l(k),s=L(k),f&&f.l(k),n=L(k),o=E(k,"DIV",{class:!0});var A=C(o);m.l(A),A.forEach(_),k.forEach(_),this.h()},h(){d(o,"class","selected-items mt-4"),d(e,"class","w-full mx-auto relative search-container text-sm")},m(b,k){V(b,e,k),le(t,e,null),v(e,r),u&&u.m(e,null),v(e,s),f&&f.m(e,null),v(e,n),v(e,o),m.m(o,null),i=!0},p(b,[k]){const A={};!l&&k&2&&(l=!0,A.value=b[1],ce(()=>l=!1)),t.$set(A),b[2]?u||(u=dt(),u.c(),u.m(e,s)):u&&(u.d(1),u=null),b[3]&&b[4].length>0?f?(f.p(b,k),k&24&&P(f,1)):(f=ht(b),f.c(),P(f,1),f.m(e,n)):f&&(de(),B(f,1,1,()=>{f=null}),he()),g===(g=h(b))&&m?m.p(b,k):(m.d(1),m=g(b),m&&(m.c(),m.m(o,null)))},i(b){i||(P(t.$$.fragment,b),P(f),i=!0)},o(b){B(t.$$.fragment,b),B(f),i=!1},d(b){b&&_(e),re(t),u&&u.d(),f&&f.d(),m.d()}}}function pl(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>'}function _l(a,e,t){let l,r,s,n,o="",i=ve([]);me(a,i,I=>t(4,n=I));let c=ve([]);me(a,c,I=>t(0,l=I));let p=ve(!1);me(a,p,I=>t(2,r=I));let u=ve(!1);me(a,u,I=>t(3,s=I));const f=async()=>{if(!o){i.set([]),u.set(!1);return}p.set(!0),u.set(!0);try{const S=(await(await fetch(`https://www.wikidata.org/w/api.php?action=wbsearchentities&search=${encodeURIComponent(o)}&language=en&format=json&origin=*`)).json()).search.map(y=>({id:y.id,label:y.label,description:y.description||"No description available"}));i.set(S)}catch(I){console.error("Search failed",I),i.set([])}finally{p.set(!1)}},h=I=>{c.update(j=>j.find(S=>S.id===I.id)?j:[...j,I]),u.set(!1)},g=I=>{c.update(j=>j.filter(S=>S.id!==I))};vt(()=>{const I=j=>{document.querySelector(".search-container").contains(j.target)||u.set(!1)};return document.addEventListener("click",I),()=>document.removeEventListener("click",I)});let{tags:m}=e,{labels:b}=e,{selectedCount:k=0}=e,A=!1;function N(I){o=I,t(1,o)}const H=I=>h(I),O=I=>g(I.id);return a.$$set=I=>{"tags"in I&&t(12,m=I.tags),"labels"in I&&t(13,b=I.labels),"selectedCount"in I&&t(14,k=I.selectedCount)},a.$$.update=()=>{if(a.$$.dirty&1&&t(12,m=l),a.$$.dirty&1&&t(13,b=l),a.$$.dirty&1&&t(14,k=l.length),a.$$.dirty&36865&&typeof window<"u"&&Array.isArray(m)){let I=l.map(S=>S.id).sort().join(","),j=m.map(S=>S.id).sort().join(",");(!A||I!==j)&&(c.set(m),m.length>0&&t(15,A=!0))}},[l,o,r,s,n,i,c,p,u,f,h,g,m,b,k,A,N,H,O]}class Cl extends Ce{constructor(e){super(),xe(this,e,_l,hl,ye,{tags:12,labels:13,selectedCount:14})}}export{yl as M,Xt as O,Cl as Q};
