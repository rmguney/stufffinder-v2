import{aa as It,ab as Pt,s as Pe,m as J,i as N,f as _,N as ke,k as Ae,I as ie,O as Fe,F as Ne,H as Le,e as E,c as S,b as P,J as Ie,a7 as Nt,v as We,K as je,L as Me,M as De,w as Lt,G as St,B as ve,C as we,l as p,h as v,n as z,o as jt,E as Mt,a as R,g as H,p as Q,t as Y,d as $,j as Ce,y as Ee,Y as Oe,Z as Be,ac as F}from"../chunks/C6oXrJZt.js";import{S as Ve,i as Re,g as de,b as V,e as he,t as M,f as Tt,c as se,a as ne,m as ae,d as oe}from"../chunks/Zi_cIJN_.js";import{g as Dt}from"../chunks/D0QH3NT1.js";import{g as Je,c as ze,b as Ot,C as Bt,e as Z,u as Vt,o as Rt}from"../chunks/CP0-fytT.js";import{I as Ht}from"../chunks/DculZwEQ.js";import{o as qt,m as Ge,d as Qe,e as Ut,a as Ke,k as Qt,s as Wt,B as zt}from"../chunks/C7UUfNEJ.js";import{C as Ft}from"../chunks/gU--zBIq.js";import{S as Jt}from"../chunks/DSIILFjS.js";import{o as Zt,c as Gt}from"../chunks/2sgcGCbN.js";import{d as Xe,w as Kt}from"../chunks/CTHOJFrz.js";import{t as Xt,c as Yt,r as $t,g as er}from"../chunks/B0F49Mog.js";const tr={disabled:!1,required:!1,name:void 0,value:"on",defaultChecked:!1};function rr(s){const e={...tr,...s},r=Xt(qt(e,"checked","defaultChecked")),{disabled:t,name:l,required:a,value:n}=r,o=e.checked??Kt(e.defaultChecked),i=Zt(o,e==null?void 0:e.onCheckedChange),h=Ge("checkbox",{stores:[i,t,a],returned:([d,f,u])=>({"data-disabled":Qe(f),disabled:Qe(f),"data-state":d==="indeterminate"?"indeterminate":d?"checked":"unchecked",type:"button",role:"checkbox","aria-checked":d==="indeterminate"?"mixed":d,"aria-required":u}),action:d=>({destroy:Ut(Ke(d,"keydown",u=>{u.key===Qt.ENTER&&u.preventDefault()}),Ke(d,"click",()=>{t.get()||i.update(u=>u==="indeterminate"?!0:!u)}))})}),m=Ge("checkbox-input",{stores:[i,l,n,a,t],returned:([d,f,u,c,g])=>({type:"checkbox","aria-hidden":!0,hidden:!0,tabindex:-1,name:f,value:u,checked:d==="indeterminate"?!1:d,required:c,disabled:Qe(g),style:Wt({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"})})}),C=Xe(i,d=>d==="indeterminate"),w=Xe(i,d=>d===!0);return{elements:{root:h,input:m},states:{checked:i},helpers:{isIndeterminate:C,isChecked:w},options:r}}function xt(){return{NAME:"checkbox",PARTS:["root","input","indicator"]}}function lr(s){const{NAME:e,PARTS:r}=xt(),t=Yt(e,r),l={...rr($t(s)),getAttrs:t};return It(e,l),{...l,updateOption:er(l.options)}}function sr(){const{NAME:s}=xt();return Pt(s)}const nr=s=>({builder:s&4}),Ye=s=>({builder:s[2]}),ar=s=>({builder:s&4}),$e=s=>({builder:s[2]});function or(s){let e,r,t,l;const a=s[15].default,n=Le(a,s,s[14],Ye);let o=[s[2],{type:"button"},s[5]],i={};for(let h=0;h<o.length;h+=1)i=ie(i,o[h]);return{c(){e=E("button"),n&&n.c(),this.h()},l(h){e=S(h,"BUTTON",{type:!0});var m=P(e);n&&n.l(m),m.forEach(_),this.h()},h(){Ie(e,i)},m(h,m){N(h,e,m),n&&n.m(e,null),e.autofocus&&e.focus(),s[16](e),r=!0,t||(l=[Nt(s[2].action(e)),We(e,"m-click",s[4]),We(e,"m-keydown",s[4])],t=!0)},p(h,m){n&&n.p&&(!r||m&16388)&&je(n,a,h,h[14],r?De(a,h[14],m,nr):Me(h[14]),Ye),Ie(e,i=Je(o,[m&4&&h[2],{type:"button"},m&32&&h[5]]))},i(h){r||(M(n,h),r=!0)},o(h){V(n,h),r=!1},d(h){h&&_(e),n&&n.d(h),s[16](null),t=!1,Lt(l)}}}function ir(s){let e;const r=s[15].default,t=Le(r,s,s[14],$e);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&16388)&&je(t,r,l,l[14],e?De(r,l[14],a,ar):Me(l[14]),$e)},i(l){e||(M(t,l),e=!0)},o(l){V(t,l),e=!1},d(l){t&&t.d(l)}}}function cr(s){let e,r,t,l;const a=[ir,or],n=[];function o(i,h){return i[1]?0:1}return e=o(s),r=n[e]=a[e](s),{c(){r.c(),t=J()},l(i){r.l(i),t=J()},m(i,h){n[e].m(i,h),N(i,t,h),l=!0},p(i,[h]){let m=e;e=o(i),e===m?n[e].p(i,h):(de(),V(n[m],1,1,()=>{n[m]=null}),he(),r=n[e],r?r.p(i,h):(r=n[e]=a[e](i),r.c()),M(r,1),r.m(t.parentNode,t))},i(i){l||(M(r),l=!0)},o(i){V(r),l=!1},d(i){i&&_(t),n[e].d(i)}}}function ur(s,e,r){let t,l;const a=["checked","disabled","name","required","value","onCheckedChange","asChild","el"];let n=ke(e,a),o,{$$slots:i={},$$scope:h}=e,{checked:m=!1}=e,{disabled:C=void 0}=e,{name:w=void 0}=e,{required:d=void 0}=e,{value:f=void 0}=e,{onCheckedChange:u=void 0}=e,{asChild:c=!1}=e,{el:g=void 0}=e;const{elements:{root:k},states:{checked:T},updateOption:A,getAttrs:j}=lr({defaultChecked:m,disabled:C,name:w,required:d,value:f,onCheckedChange:({next:y})=>(m!==y&&(u==null||u(y),r(6,m=y)),y)});Ae(s,k,y=>r(13,o=y));const O=Gt();function L(y){Ne[y?"unshift":"push"](()=>{g=y,r(0,g)})}return s.$$set=y=>{e=ie(ie({},e),Fe(y)),r(5,n=ke(e,a)),"checked"in y&&r(6,m=y.checked),"disabled"in y&&r(7,C=y.disabled),"name"in y&&r(8,w=y.name),"required"in y&&r(9,d=y.required),"value"in y&&r(10,f=y.value),"onCheckedChange"in y&&r(11,u=y.onCheckedChange),"asChild"in y&&r(1,c=y.asChild),"el"in y&&r(0,g=y.el),"$$scope"in y&&r(14,h=y.$$scope)},s.$$.update=()=>{s.$$.dirty&128&&r(12,t={...j("root"),disabled:C?!0:void 0}),s.$$.dirty&64&&m!==void 0&&T.set(m),s.$$.dirty&128&&A("disabled",C),s.$$.dirty&256&&A("name",w),s.$$.dirty&512&&A("required",d),s.$$.dirty&1024&&A("value",f),s.$$.dirty&8192&&r(2,l=o),s.$$.dirty&4100&&Object.assign(l,t)},[g,c,l,k,O,n,m,C,w,d,f,u,t,o,h,i,L]}let fr=class extends Ve{constructor(e){super(),Re(this,e,ur,cr,Pe,{checked:6,disabled:7,name:8,required:9,value:10,onCheckedChange:11,asChild:1,el:0})}};const dr=s=>({attrs:s&4,isChecked:s&8,isIndeterminate:s&16}),et=s=>({attrs:s[2],isChecked:s[3],isIndeterminate:s[4]}),hr=s=>({attrs:s&4,isChecked:s&8,isIndeterminate:s&16}),tt=s=>({attrs:s[2],isChecked:s[3],isIndeterminate:s[4]});function mr(s){let e,r;const t=s[11].default,l=Le(t,s,s[10],et);let a=[s[8],s[2]],n={};for(let o=0;o<a.length;o+=1)n=ie(n,a[o]);return{c(){e=E("div"),l&&l.c(),this.h()},l(o){e=S(o,"DIV",{});var i=P(e);l&&l.l(i),i.forEach(_),this.h()},h(){Ie(e,n)},m(o,i){N(o,e,i),l&&l.m(e,null),s[12](e),r=!0},p(o,i){l&&l.p&&(!r||i&1052)&&je(l,t,o,o[10],r?De(t,o[10],i,dr):Me(o[10]),et),Ie(e,n=Je(a,[i&256&&o[8],i&4&&o[2]]))},i(o){r||(M(l,o),r=!0)},o(o){V(l,o),r=!1},d(o){o&&_(e),l&&l.d(o),s[12](null)}}}function _r(s){let e;const r=s[11].default,t=Le(r,s,s[10],tt);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,a){t&&t.m(l,a),e=!0},p(l,a){t&&t.p&&(!e||a&1052)&&je(t,r,l,l[10],e?De(r,l[10],a,hr):Me(l[10]),tt)},i(l){e||(M(t,l),e=!0)},o(l){V(t,l),e=!1},d(l){t&&t.d(l)}}}function pr(s){let e,r,t,l;const a=[_r,mr],n=[];function o(i,h){return i[1]?0:1}return e=o(s),r=n[e]=a[e](s),{c(){r.c(),t=J()},l(i){r.l(i),t=J()},m(i,h){n[e].m(i,h),N(i,t,h),l=!0},p(i,[h]){let m=e;e=o(i),e===m?n[e].p(i,h):(de(),V(n[m],1,1,()=>{n[m]=null}),he(),r=n[e],r?r.p(i,h):(r=n[e]=a[e](i),r.c()),M(r,1),r.m(t.parentNode,t))},i(i){l||(M(r),l=!0)},o(i){V(r),l=!1},d(i){i&&_(t),n[e].d(i)}}}function br(s){return s==="indeterminate"?"indeterminate":s?"checked":"unchecked"}function gr(s,e,r){let t;const l=["asChild","el"];let a=ke(e,l),n,o,i,{$$slots:h={},$$scope:m}=e,{asChild:C=!1}=e,{el:w=void 0}=e;const{helpers:{isChecked:d,isIndeterminate:f},states:{checked:u},getAttrs:c}=sr();Ae(s,d,k=>r(3,o=k)),Ae(s,f,k=>r(4,i=k)),Ae(s,u,k=>r(9,n=k));function g(k){Ne[k?"unshift":"push"](()=>{w=k,r(0,w)})}return s.$$set=k=>{e=ie(ie({},e),Fe(k)),r(8,a=ke(e,l)),"asChild"in k&&r(1,C=k.asChild),"el"in k&&r(0,w=k.el),"$$scope"in k&&r(10,m=k.$$scope)},s.$$.update=()=>{s.$$.dirty&512&&r(2,t={...c("indicator"),"data-state":br(n)})},[w,C,t,o,i,d,f,u,a,n,m,h,g]}class kr extends Ve{constructor(e){super(),Re(this,e,gr,pr,Pe,{asChild:1,el:0})}}function rt(s){let e,r;return e=new kr({props:{class:ze("flex items-center justify-center text-current pointer-events-none"),$$slots:{default:[vr]},$$scope:{ctx:s}}}),{c(){se(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,l){ae(e,t,l),r=!0},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){oe(e,t)}}}function vr(s){let e,r;return{c(){e=ve("svg"),r=ve("polyline"),this.h()},l(t){e=we(t,"svg",{xmlns:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var l=P(e);r=we(l,"polyline",{points:!0}),P(r).forEach(_),l.forEach(_),this.h()},h(){p(r,"points","20 6 9 17 4 12"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"viewBox","0 0 24 24"),p(e,"fill","none"),p(e,"stroke","currentColor"),p(e,"stroke-width","2"),p(e,"stroke-linecap","round"),p(e,"stroke-linejoin","round"),p(e,"class","h-4 w-4 pointer-events-none")},m(t,l){N(t,e,l),v(e,r)},p:z,d(t){t&&_(e)}}}function wr(s){let e,r,t=s[0]&&rt(s);return{c(){t&&t.c(),e=J()},l(l){t&&t.l(l),e=J()},m(l,a){t&&t.m(l,a),N(l,e,a),r=!0},p(l,a){l[0]?t?a&1&&M(t,1):(t=rt(l),t.c(),M(t,1),t.m(e.parentNode,e)):t&&(de(),V(t,1,1,()=>{t=null}),he())},i(l){r||(M(t),r=!0)},o(l){V(t),r=!1},d(l){l&&_(e),t&&t.d(l)}}}function yr(s){let e,r,t;const l=[{class:ze("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s[1])},s[2]];function a(o){s[3](o)}let n={$$slots:{default:[wr]},$$scope:{ctx:s}};for(let o=0;o<l.length;o+=1)n=ie(n,l[o]);return s[0]!==void 0&&(n.checked=s[0]),e=new fr({props:n}),Ne.push(()=>Tt(e,"checked",a)),{c(){se(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,i){ae(e,o,i),t=!0},p(o,[i]){const h=i&6?Je(l,[i&2&&{class:ze("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",o[1])},i&4&&Ot(o[2])]):{};i&17&&(h.$$scope={dirty:i,ctx:o}),!r&&i&1&&(r=!0,h.checked=o[0],St(()=>r=!1)),e.$set(h)},i(o){t||(M(e.$$.fragment,o),t=!0)},o(o){V(e.$$.fragment,o),t=!1},d(o){oe(e,o)}}}function Cr(s,e,r){const t=["class","checked"];let l=ke(e,t),{class:a=void 0}=e,{checked:n=!1}=e;function o(i){n=i,r(0,n)}return s.$$set=i=>{e=ie(ie({},e),Fe(i)),r(2,l=ke(e,t)),"class"in i&&r(1,a=i.class),"checked"in i&&r(0,n=i.checked)},[n,a,l,o]}class Er extends Ve{constructor(e){super(),Re(this,e,Cr,yr,Pe,{class:1,checked:0})}}const{Map:Sr}=Dt;function lt(s,e,r){const t=s.slice();return t[37]=e[r],t}function st(s,e,r){const t=s.slice();return t[40]=e[r],t}function nt(s,e,r){const t=s.slice();return t[43]=e[r],t}function at(s,e,r){const t=s.slice();return t[46]=e[r],t}function ot(s,e,r){const t=s.slice();return t[50]=e[r],t}function it(s,e,r){const t=s.slice();return t[53]=e[r],t}function Tr(s){const e=s.slice(),r=[...new Set(e[6].filter(t=>!t.label.match(/^Q\d+$/)).map(t=>t.relation))];return e[49]=r,e}function xr(s){let e,r,t="Discover objects while leveraging semantic search with Wikidata";return{c(){e=Y(`Enhanced Semantic Search\r
        `),r=E("small"),r.textContent=t,this.h()},l(l){e=$(l,`Enhanced Semantic Search\r
        `),r=S(l,"SMALL",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-129uzee"&&(r.textContent=t),this.h()},h(){p(r,"class","block text-sm mt-2 font-normal text-neutral-500 dark:text-neutral-400")},m(l,a){N(l,e,a),N(l,r,a)},p:z,d(l){l&&(_(e),_(r))}}}function Ar(s){let e,r,t=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 text-teal-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
              Related Terms from Wikidata:`,l,a,n,o,i;const h=[Nr,Pr],m=[];function C(f,u){return f[6].length>0?0:1}function w(f,u){return u===0?Tr(f):f}a=C(s),n=m[a]=h[a](w(s,a));let d=s[2].length>0&&ht(s);return{c(){e=E("div"),r=E("h3"),r.innerHTML=t,l=R(),n.c(),o=R(),d&&d.c(),this.h()},l(f){e=S(f,"DIV",{class:!0});var u=P(e);r=S(u,"H3",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-1fjfk7l"&&(r.innerHTML=t),l=H(u),n.l(u),o=H(u),d&&d.l(u),u.forEach(_),this.h()},h(){p(r,"class","text-sm font-semibold mb-3 text-neutral-700 dark:text-neutral-200 flex items-center"),p(e,"class","mb-6 bg-neutral-50 dark:bg-neutral-900/50 p-4 rounded-lg border border-neutral-200 dark:border-neutral-800 shadow-sm")},m(f,u){N(f,e,u),v(e,r),v(e,l),m[a].m(e,null),v(e,o),d&&d.m(e,null),i=!0},p(f,u){let c=a;a=C(f),a===c?m[a].p(w(f,a),u):(de(),V(m[c],1,1,()=>{m[c]=null}),he(),n=m[a],n?n.p(w(f,a),u):(n=m[a]=h[a](w(f,a)),n.c()),M(n,1),n.m(e,o)),f[2].length>0?d?(d.p(f,u),u[0]&4&&M(d,1)):(d=ht(f),d.c(),M(d,1),d.m(e,null)):d&&(de(),V(d,1,1,()=>{d=null}),he())},i(f){i||(M(n),M(d),i=!0)},o(f){V(n),V(d),i=!1},d(f){f&&_(e),m[a].d(),d&&d.d()}}}function Ir(s){let e,r='<div class="w-6 h-6 border-2 border-teal-600 border-t-transparent rounded-full animate-spin" aria-label="Loading related terms"></div> <span class="ml-3 text-neutral-600 dark:text-neutral-300">Finding related terms...</span>';return{c(){e=E("div"),e.innerHTML=r,this.h()},l(t){e=S(t,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-h08kea"&&(e.innerHTML=r),this.h()},h(){p(e,"class","flex justify-center my-6 py-4")},m(t,l){N(t,e,l)},p:z,i:z,o:z,d(t){t&&_(e)}}}function Pr(s){let e,r="No related terms found.";return{c(){e=E("p"),e.textContent=r,this.h()},l(t){e=S(t,"P",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-zouqnl"&&(e.textContent=r),this.h()},h(){p(e,"class","text-sm text-neutral-500 dark:text-neutral-400 italic")},m(t,l){N(t,e,l)},p:z,i:z,o:z,d(t){t&&_(e)}}}function Nr(s){let e,r,t=Z(s[49]),l=[];for(let n=0;n<t.length;n+=1)l[n]=dt(ot(s,t,n));const a=n=>V(l[n],1,1,()=>{l[n]=null});return{c(){e=E("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=S(n,"DIV",{class:!0});var o=P(e);for(let i=0;i<l.length;i+=1)l[i].l(o);o.forEach(_),this.h()},h(){p(e,"class","space-y-4")},m(n,o){N(n,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);r=!0},p(n,o){if(o[0]&3136){t=Z(n[49]);let i;for(i=0;i<t.length;i+=1){const h=ot(n,t,i);l[i]?(l[i].p(h,o),M(l[i],1)):(l[i]=dt(h),l[i].c(),M(l[i],1),l[i].m(e,null))}for(de(),i=t.length;i<l.length;i+=1)a(i);he()}},i(n){if(!r){for(let o=0;o<t.length;o+=1)M(l[o]);r=!0}},o(n){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)V(l[o]);r=!1},d(n){n&&_(e),Ee(l,n)}}}function Lr(s){let e,r;return{c(){e=ve("svg"),r=ve("path"),this.h()},l(t){e=we(t,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var l=P(e);r=we(l,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),P(r).forEach(_),l.forEach(_),this.h()},h(){p(r,"d","M13.3334 4L6.00002 11.3333L2.66669 8"),p(r,"stroke","white"),p(r,"stroke-width","2.5"),p(r,"stroke-linecap","round"),p(r,"stroke-linejoin","round"),p(e,"width","12"),p(e,"height","12"),p(e,"viewBox","0 0 16 16"),p(e,"fill","none"),p(e,"xmlns","http://www.w3.org/2000/svg")},m(t,l){N(t,e,l),v(e,r)},p:z,d(t){t&&_(e)}}}function jr(s){let e,r;return e=new(void 0)({props:{$$slots:{default:[Lr]},$$scope:{ctx:s}}}),{c(){se(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,l){ae(e,t,l),r=!0},p(t,l){const a={};l[1]&33554432&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){r||(M(e.$$.fragment,t),r=!0)},o(t){V(e.$$.fragment,t),r=!1},d(t){oe(e,t)}}}function ct(s){let e,r="★";return{c(){e=E("span"),e.textContent=r,this.h()},l(t){e=S(t,"SPAN",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-imprub"&&(e.textContent=r),this.h()},h(){p(e,"class","ml-1 text-teal-600 dark:text-teal-400")},m(t,l){N(t,e,l)},d(t){t&&_(e)}}}function ut(s){let e,r="(previous)";return{c(){e=E("span"),e.textContent=r,this.h()},l(t){e=S(t,"SPAN",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1r8k3pl"&&(e.textContent=r),this.h()},h(){p(e,"class","ml-1 text-teal-600 dark:text-teal-400 text-xs italic")},m(t,l){N(t,e,l)},d(t){t&&_(e)}}}function ft(s,e){let r,t,l,a,n,o,i=e[53].label+"",h,m,C,w,d,f;function u(){return e[24](e[53])}l=new Er({props:{checked:e[11](e[53]),onCheckedChange:u,class:"data-[state=checked]:bg-teal-600 border-2 border-neutral-300 dark:border-neutral-600 data-[state=checked]:border-teal-600 size-4",$$slots:{default:[jr]},$$scope:{ctx:e}}});let c=e[53].score>70&&ct(),g=e[53].fromPreviousSearch&&ut();return{key:s,first:null,c(){r=E("div"),t=E("label"),se(l.$$.fragment),a=R(),n=E("span"),o=E("span"),h=Y(i),m=R(),c&&c.c(),C=R(),g&&g.c(),d=R(),this.h()},l(k){r=S(k,"DIV",{class:!0});var T=P(r);t=S(T,"LABEL",{class:!0,title:!0});var A=P(t);ne(l.$$.fragment,A),a=H(A),n=S(A,"SPAN",{class:!0});var j=P(n);o=S(j,"SPAN",{});var O=P(o);h=$(O,i),O.forEach(_),m=H(j),c&&c.l(j),C=H(j),g&&g.l(j),j.forEach(_),A.forEach(_),d=H(T),T.forEach(_),this.h()},h(){p(n,"class","text-xs font-medium flex items-center"),p(t,"class","flex items-center space-x-2 px-2.5 py-1.5 bg-white dark:bg-neutral-800 rounded-full border border-neutral-200 dark:border-neutral-700 cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-700 transition-colors duration-200 shadow-sm"),p(t,"title",w=`Relevance: ${e[53].score>80?"High":e[53].score>50?"Medium":"Low"}`),F(t,"border-teal-500",e[53].fromPreviousSearch||e[11](e[53])),F(t,"bg-teal-50",e[11](e[53])),F(t,"shadow-md",e[11](e[53])),F(t,"bg-opacity-30",e[53].fromPreviousSearch),F(t,"border-l-4",e[53].score>70),F(t,"border-l-teal-600",e[53].score>70),p(r,"class","flex items-center"),this.first=r},m(k,T){N(k,r,T),v(r,t),ae(l,t,null),v(t,a),v(t,n),v(n,o),v(o,h),v(n,m),c&&c.m(n,null),v(n,C),g&&g.m(n,null),v(r,d),f=!0},p(k,T){e=k;const A={};T[0]&64&&(A.checked=e[11](e[53])),T[0]&64&&(A.onCheckedChange=u),T[1]&33554432&&(A.$$scope={dirty:T,ctx:e}),l.$set(A),(!f||T[0]&64)&&i!==(i=e[53].label+"")&&Ce(h,i),e[53].score>70?c||(c=ct(),c.c(),c.m(n,C)):c&&(c.d(1),c=null),e[53].fromPreviousSearch?g||(g=ut(),g.c(),g.m(n,null)):g&&(g.d(1),g=null),(!f||T[0]&64&&w!==(w=`Relevance: ${e[53].score>80?"High":e[53].score>50?"Medium":"Low"}`))&&p(t,"title",w),(!f||T[0]&2112)&&F(t,"border-teal-500",e[53].fromPreviousSearch||e[11](e[53])),(!f||T[0]&2112)&&F(t,"bg-teal-50",e[11](e[53])),(!f||T[0]&2112)&&F(t,"shadow-md",e[11](e[53])),(!f||T[0]&64)&&F(t,"bg-opacity-30",e[53].fromPreviousSearch),(!f||T[0]&64)&&F(t,"border-l-4",e[53].score>70),(!f||T[0]&64)&&F(t,"border-l-teal-600",e[53].score>70)},i(k){f||(M(l.$$.fragment,k),f=!0)},o(k){V(l.$$.fragment,k),f=!1},d(k){k&&_(r),oe(l),c&&c.d(),g&&g.d()}}}function dt(s){let e,r,t=s[50]+"",l,a,n,o,i=[],h=new Sr,m,C;function w(...u){return s[23](s[50],...u)}let d=Z(s[6].filter(w));const f=u=>u[53].id;for(let u=0;u<d.length;u+=1){let c=it(s,d,u),g=f(c);h.set(g,i[u]=ft(g,c))}return{c(){e=E("div"),r=E("h4"),l=Y(t),a=Y(":"),n=R(),o=E("div");for(let u=0;u<i.length;u+=1)i[u].c();m=R(),this.h()},l(u){e=S(u,"DIV",{});var c=P(e);r=S(c,"H4",{class:!0});var g=P(r);l=$(g,t),a=$(g,":"),g.forEach(_),n=H(c),o=S(c,"DIV",{class:!0});var k=P(o);for(let T=0;T<i.length;T+=1)i[T].l(k);k.forEach(_),m=H(c),c.forEach(_),this.h()},h(){p(r,"class","text-xs uppercase tracking-wider font-medium mb-2 text-teal-700 dark:text-teal-400 border-l-2 border-teal-500 pl-2"),p(o,"class","flex flex-wrap gap-2")},m(u,c){N(u,e,c),v(e,r),v(r,l),v(r,a),v(e,n),v(e,o);for(let g=0;g<i.length;g+=1)i[g]&&i[g].m(o,null);v(e,m),C=!0},p(u,c){s=u,(!C||c[0]&64)&&t!==(t=s[50]+"")&&Ce(l,t),c[0]&3136&&(d=Z(s[6].filter(w)),de(),i=Vt(i,c,f,1,s,d,h,o,Rt,ft,null,it),he())},i(u){if(!C){for(let c=0;c<d.length;c+=1)M(i[c]);C=!0}},o(u){for(let c=0;c<i.length;c+=1)V(i[c]);C=!1},d(u){u&&_(e);for(let c=0;c<i.length;c+=1)i[c].d()}}}function ht(s){let e,r,t,l="Searching for:",a,n,o,i,h,m,C,w=Z(s[2]),d=[];for(let f=0;f<w.length;f+=1)d[f]=mt(at(s,w,f));return m=new zt({props:{variant:"outline",size:"sm",class:"text-xs border-neutral-800 hover:bg-neutral-900/50 hover:text-white transition-colors rounded-full",$$slots:{default:[Mr]},$$scope:{ctx:s}}}),m.$on("click",s[25]),{c(){e=E("div"),r=E("p"),t=E("span"),t.textContent=l,a=R(),n=E("span"),o=Y(s[0]),i=R();for(let f=0;f<d.length;f+=1)d[f].c();h=R(),se(m.$$.fragment),this.h()},l(f){e=S(f,"DIV",{class:!0});var u=P(e);r=S(u,"P",{class:!0});var c=P(r);t=S(c,"SPAN",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-kxmjhp"&&(t.textContent=l),a=H(c),n=S(c,"SPAN",{class:!0});var g=P(n);o=$(g,s[0]),g.forEach(_),i=H(c);for(let k=0;k<d.length;k+=1)d[k].l(c);c.forEach(_),h=H(u),ne(m.$$.fragment,u),u.forEach(_),this.h()},h(){p(t,"class","font-medium"),p(n,"class","font-semibold text-teal-700 dark:text-teal-400"),p(r,"class","text-xs text-neutral-600 dark:text-neutral-300"),p(e,"class","mt-4 pt-3 border-t border-neutral-200 dark:border-neutral-700 flex items-center justify-between")},m(f,u){N(f,e,u),v(e,r),v(r,t),v(r,a),v(r,n),v(n,o),v(r,i);for(let c=0;c<d.length;c+=1)d[c]&&d[c].m(r,null);v(e,h),ae(m,e,null),C=!0},p(f,u){if((!C||u[0]&1)&&Ce(o,f[0]),u[0]&4){w=Z(f[2]);let g;for(g=0;g<w.length;g+=1){const k=at(f,w,g);d[g]?d[g].p(k,u):(d[g]=mt(k),d[g].c(),d[g].m(r,null))}for(;g<d.length;g+=1)d[g].d(1);d.length=w.length}const c={};u[1]&33554432&&(c.$$scope={dirty:u,ctx:f}),m.$set(c)},i(f){C||(M(m.$$.fragment,f),C=!0)},o(f){V(m.$$.fragment,f),C=!1},d(f){f&&_(e),Ee(d,f),oe(m)}}}function mt(s){let e,r="OR",t,l,a=s[46].label+"",n;return{c(){e=E("span"),e.textContent=r,t=R(),l=E("span"),n=Y(a),this.h()},l(o){e=S(o,"SPAN",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-73sqxc"&&(e.textContent=r),t=H(o),l=S(o,"SPAN",{class:!0});var i=P(l);n=$(i,a),i.forEach(_),this.h()},h(){p(e,"class","mx-1 text-neutral-400 dark:text-neutral-500"),p(l,"class","font-semibold text-teal-700 dark:text-teal-400")},m(o,i){N(o,e,i),N(o,t,i),N(o,l,i),v(l,n)},p(o,i){i[0]&4&&a!==(a=o[46].label+"")&&Ce(n,a)},d(o){o&&(_(e),_(t),_(l))}}}function Mr(s){let e,r,t;return{c(){e=ve("svg"),r=ve("path"),t=Y(`\r
                  Clear All`),this.h()},l(l){e=we(l,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var a=P(e);r=we(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),P(r).forEach(_),a.forEach(_),t=$(l,`\r
                  Clear All`),this.h()},h(){p(r,"stroke-linecap","round"),p(r,"stroke-linejoin","round"),p(r,"stroke-width","2"),p(r,"d","M6 18L18 6M6 6l12 12"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"class","h-3 w-3 mr-1"),p(e,"fill","none"),p(e,"viewBox","0 0 24 24"),p(e,"stroke","currentColor")},m(l,a){N(l,e,a),v(e,r),N(l,t,a)},p:z,d(l){l&&(_(e),_(t))}}}function Dr(s){let e,r=Z(s[3]),t=[];for(let l=0;l<r.length;l+=1)t[l]=Ct(lt(s,r,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=J()},l(l){for(let a=0;a<t.length;a+=1)t[a].l(l);e=J()},m(l,a){for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(l,a);N(l,e,a)},p(l,a){if(a[0]&12680){r=Z(l[3]);let n;for(n=0;n<r.length;n+=1){const o=lt(l,r,n);t[n]?t[n].p(o,a):(t[n]=Ct(o),t[n].c(),t[n].m(e.parentNode,e))}for(;n<t.length;n+=1)t[n].d(1);t.length=r.length}},d(l){l&&_(e),Ee(t,l)}}}function Or(s){let e,r='<svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-neutral-300 dark:text-neutral-600 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <p class="text-neutral-500 dark:text-neutral-400">Type at least 3 characters to search</p>';return{c(){e=E("div"),e.innerHTML=r,this.h()},l(t){e=S(t,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1vw0sn3"&&(e.innerHTML=r),this.h()},h(){p(e,"class","text-center py-12")},m(t,l){N(t,e,l)},p:z,d(t){t&&_(e)}}}function Br(s){let e,r='<svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-neutral-300 dark:text-neutral-600 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p class="text-neutral-500 dark:text-neutral-400">No results found</p>';return{c(){e=E("div"),e.innerHTML=r,this.h()},l(t){e=S(t,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1832ho3"&&(e.innerHTML=r),this.h()},h(){p(e,"class","text-center py-12")},m(t,l){N(t,e,l)},p:z,d(t){t&&_(e)}}}function Vr(s){let e,r='<div class="w-10 h-10 border-3 border-teal-600 border-t-transparent rounded-full animate-spin mx-auto mb-4" aria-hidden="true"></div> <p class="text-neutral-500 dark:text-neutral-400">Searching...</p>';return{c(){e=E("div"),e.innerHTML=r,this.h()},l(t){e=S(t,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1hva1sd"&&(e.innerHTML=r),this.h()},h(){p(e,"class","text-center py-8")},m(t,l){N(t,e,l)},p:z,d(t){t&&_(e)}}}function _t(s){let e,r=`<svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 inline-block mr-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                      Solved`;return{c(){e=E("span"),e.innerHTML=r,this.h()},l(t){e=S(t,"SPAN",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1fejby2"&&(e.innerHTML=r),this.h()},h(){p(e,"class","bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100 text-xs px-2.5 py-1 rounded-full font-medium ml-2 flex-shrink-0")},m(t,l){N(t,e,l)},d(t){t&&_(e)}}}function pt(s){let e,r,t=s[12](s[37].description)+"";return{c(){e=E("p"),r=new Oe(!1),this.h()},l(l){e=S(l,"P",{class:!0});var a=P(e);r=Be(a,!1),a.forEach(_),this.h()},h(){r.a=null,p(e,"class","text-sm text-neutral-600 dark:text-neutral-300 mb-3 line-clamp-2")},m(l,a){N(l,e,a),r.m(t,e)},p(l,a){a[0]&8&&t!==(t=l[12](l[37].description)+"")&&r.p(t)},d(l){l&&_(e)}}}function bt(s){let e,r,t=Z(s[7]),l=[];for(let a=0;a<t.length;a+=1)l[a]=kt(nt(s,t,a));return{c(){e=E("div"),r=E("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=S(a,"DIV",{class:!0});var n=P(e);r=S(n,"DIV",{class:!0});var o=P(r);for(let i=0;i<l.length;i+=1)l[i].l(o);o.forEach(_),n.forEach(_),this.h()},h(){p(r,"class","space-y-1.5"),p(e,"class","mt-3")},m(a,n){N(a,e,n),v(e,r);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(r,null)},p(a,n){if(n[0]&4488){t=Z(a[7]);let o;for(o=0;o<t.length;o+=1){const i=nt(a,t,o);l[o]?l[o].p(i,n):(l[o]=kt(i),l[o].c(),l[o].m(r,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}},d(a){a&&_(e),Ee(l,a)}}}function gt(s){let e,r,t=s[43].label+"",l,a,n,o,i,h=s[12](s[37].mysteryObject[s[43].key])+"",m;return{c(){e=E("div"),r=E("span"),l=Y(t),a=Y(":"),n=R(),o=E("span"),i=new Oe(!1),m=R(),this.h()},l(C){e=S(C,"DIV",{class:!0});var w=P(e);r=S(w,"SPAN",{class:!0});var d=P(r);l=$(d,t),a=$(d,":"),d.forEach(_),n=H(w),o=S(w,"SPAN",{class:!0});var f=P(o);i=Be(f,!1),f.forEach(_),m=H(w),w.forEach(_),this.h()},h(){p(r,"class","font-medium text-neutral-700 dark:text-neutral-300"),i.a=null,p(o,"class","text-neutral-800 dark:text-neutral-200"),p(e,"class","bg-neutral-50 dark:bg-neutral-900 p-2 rounded")},m(C,w){N(C,e,w),v(e,r),v(r,l),v(r,a),v(e,n),v(e,o),i.m(h,o),v(e,m)},p(C,w){w[0]&8&&h!==(h=C[12](C[37].mysteryObject[C[43].key])+"")&&i.p(h)},d(C){C&&_(e)}}}function kt(s){let e=s[37].mysteryObject[s[43].key]&&s[8](s[37].mysteryObject[s[43].key]),r,t=e&&gt(s);return{c(){t&&t.c(),r=J()},l(l){t&&t.l(l),r=J()},m(l,a){t&&t.m(l,a),N(l,r,a)},p(l,a){a[0]&8&&(e=l[37].mysteryObject[l[43].key]&&l[8](l[37].mysteryObject[l[43].key])),e?t?t.p(l,a):(t=gt(l),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null)},d(l){l&&_(r),t&&t.d(l)}}}function vt(s){let e,r=Z(s[37].tags),t=[];for(let l=0;l<r.length;l+=1)t[l]=yt(st(s,r,l));return{c(){e=E("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=S(l,"DIV",{class:!0});var a=P(e);for(let n=0;n<t.length;n+=1)t[n].l(a);a.forEach(_),this.h()},h(){p(e,"class","flex gap-1 flex-wrap")},m(l,a){N(l,e,a);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(l,a){if(a[0]&12296){r=Z(l[37].tags);let n;for(n=0;n<r.length;n+=1){const o=st(l,r,n);t[n]?t[n].p(o,a):(t[n]=yt(o),t[n].c(),t[n].m(e,null))}for(;n<t.length;n+=1)t[n].d(1);t.length=r.length}},d(l){l&&_(e),Ee(t,l)}}}function wt(s){let e,r,t=s[12](s[13](s[40]))+"",l;return{c(){e=E("span"),r=new Oe(!1),l=R(),this.h()},l(a){e=S(a,"SPAN",{class:!0});var n=P(e);r=Be(n,!1),l=H(n),n.forEach(_),this.h()},h(){r.a=l,p(e,"class","bg-neutral-100 dark:bg-neutral-800 px-2 py-1 rounded-full text-neutral-700 dark:text-neutral-300")},m(a,n){N(a,e,n),r.m(t,e),v(e,l)},p(a,n){n[0]&8&&t!==(t=a[12](a[13](a[40]))+"")&&r.p(t)},d(a){a&&_(e)}}}function yt(s){let e,r=s[40]&&wt(s);return{c(){r&&r.c(),e=J()},l(t){r&&r.l(t),e=J()},m(t,l){r&&r.m(t,l),N(t,e,l)},p(t,l){t[40]?r?r.p(t,l):(r=wt(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(t){t&&_(e),r&&r.d(t)}}}function Ct(s){let e,r,t,l,a=s[12](s[37].title||"")+"",n,o,i,h,m,C,w,d=(s[37].author||"Anonymous")+"",f,u,c=s[37].tags&&Array.isArray(s[37].tags)&&s[37].tags.length>0,g,k,T=s[37].isSolved&&_t(),A=s[37].description&&pt(s),j=s[37].mysteryObject&&bt(s),O=c&&vt(s);return{c(){e=E("a"),r=E("div"),t=E("h2"),l=new Oe(!1),n=R(),T&&T.c(),o=R(),A&&A.c(),i=R(),j&&j.c(),h=R(),m=E("div"),C=E("p"),w=Y("Posted by: "),f=Y(d),u=R(),O&&O.c(),g=R(),this.h()},l(L){e=S(L,"A",{href:!0,class:!0});var y=P(e);r=S(y,"DIV",{class:!0});var ee=P(r);t=S(ee,"H2",{class:!0});var ce=P(t);l=Be(ce,!1),ce.forEach(_),n=H(ee),T&&T.l(ee),ee.forEach(_),o=H(y),A&&A.l(y),i=H(y),j&&j.l(y),h=H(y),m=S(y,"DIV",{class:!0});var re=P(m);C=S(re,"P",{class:!0});var ue=P(C);w=$(ue,"Posted by: "),f=$(ue,d),ue.forEach(_),u=H(re),O&&O.l(re),re.forEach(_),g=H(y),y.forEach(_),this.h()},h(){l.a=null,p(t,"class","text-lg sm:text-xl font-semibold mb-2 text-neutral-800 dark:text-neutral-100"),p(r,"class","flex justify-between items-start"),p(C,"class","text-neutral-500 dark:text-neutral-400"),p(m,"class","flex justify-between items-center mt-3 text-xs"),p(e,"href",k=`/thread/${s[37].id}`),p(e,"class","block p-4 sm:p-5 border border-neutral-200 dark:border-neutral-700 rounded-lg hover:border-teal-500 dark:hover:border-teal-500 transition-colors duration-200 bg-white dark:bg-neutral-950 shadow-sm hover:shadow-md")},m(L,y){N(L,e,y),v(e,r),v(r,t),l.m(a,t),v(r,n),T&&T.m(r,null),v(e,o),A&&A.m(e,null),v(e,i),j&&j.m(e,null),v(e,h),v(e,m),v(m,C),v(C,w),v(C,f),v(m,u),O&&O.m(m,null),v(e,g)},p(L,y){y[0]&8&&a!==(a=L[12](L[37].title||"")+"")&&l.p(a),L[37].isSolved?T||(T=_t(),T.c(),T.m(r,null)):T&&(T.d(1),T=null),L[37].description?A?A.p(L,y):(A=pt(L),A.c(),A.m(e,i)):A&&(A.d(1),A=null),L[37].mysteryObject?j?j.p(L,y):(j=bt(L),j.c(),j.m(e,h)):j&&(j.d(1),j=null),y[0]&8&&d!==(d=(L[37].author||"Anonymous")+"")&&Ce(f,d),y[0]&8&&(c=L[37].tags&&Array.isArray(L[37].tags)&&L[37].tags.length>0),c?O?O.p(L,y):(O=vt(L),O.c(),O.m(m,null)):O&&(O.d(1),O=null),y[0]&8&&k!==(k=`/thread/${L[37].id}`)&&p(e,"href",k)},d(L){L&&_(e),T&&T.d(),A&&A.d(),j&&j.d(),O&&O.d()}}}function Rr(s){let e,r,t,l,a,n,o,i,h,m='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-neutral-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>',C,w,d="Search",f,u,c,g,k,T,A,j,O,L,y,ee;e=new Ft({props:{class:"p-6 text-2xl font-semibold text-center",$$slots:{default:[xr]},$$scope:{ctx:s}}});function ce(I){s[22](I)}let re={type:"search",placeholder:"Enter search terms...",class:"w-full pl-10 py-3 text-base border-neutral-300 dark:border-neutral-700 rounded-full focus:ring-teal-500 focus:border-teal-500","aria-label":"Search terms"};s[0]!==void 0&&(re.value=s[0]),n=new Ht({props:re}),Ne.push(()=>Tt(n,"value",ce));const ue=[Ir,Ar],U=[];function Se(I,B){return I[1]?0:I[5]?1:-1}~(u=Se(s))&&(c=U[u]=ue[u](s)),k=new Jt({props:{class:"my-6 bg-neutral-200 dark:bg-neutral-700"}});function Te(I,B){return B[0]&9&&(j=null),B[0]&1&&(O=null),I[4]?Vr:(j==null&&(j=I[3].length===0&&I[0].trim().length>=3),j?Br:(O==null&&(O=I[0].trim().length<3),O?Or:Dr))}let be=Te(s,[-1,-1]),W=be(s);return{c(){se(e.$$.fragment),r=R(),t=E("div"),l=E("form"),a=E("div"),se(n.$$.fragment),i=R(),h=E("div"),h.innerHTML=m,C=R(),w=E("button"),w.textContent=d,f=R(),c&&c.c(),g=R(),se(k.$$.fragment),T=R(),A=E("div"),W.c(),this.h()},l(I){ne(e.$$.fragment,I),r=H(I),t=S(I,"DIV",{class:!0});var B=P(t);l=S(B,"FORM",{class:!0});var me=P(l);a=S(me,"DIV",{class:!0});var G=P(a);ne(n.$$.fragment,G),i=H(G),h=S(G,"DIV",{class:!0,"data-svelte-h":!0}),Q(h)!=="svelte-1m3uc6k"&&(h.innerHTML=m),C=H(G),w=S(G,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Q(w)!=="svelte-efa4nu"&&(w.textContent=d),G.forEach(_),me.forEach(_),f=H(B),c&&c.l(B),g=H(B),ne(k.$$.fragment,B),T=H(B),A=S(B,"DIV",{class:!0,"aria-live":!0});var fe=P(A);W.l(fe),fe.forEach(_),B.forEach(_),this.h()},h(){p(h,"class","absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"),p(w,"type","submit"),p(w,"class","sr-only"),p(a,"class","relative"),p(l,"class","mb-6"),p(A,"class","space-y-4"),p(A,"aria-live","polite"),p(t,"class","px-4 sm:px-6 pb-6")},m(I,B){ae(e,I,B),N(I,r,B),N(I,t,B),v(t,l),v(l,a),ae(n,a,null),v(a,i),v(a,h),v(a,C),v(a,w),v(t,f),~u&&U[u].m(t,null),v(t,g),ae(k,t,null),v(t,T),v(t,A),W.m(A,null),L=!0,y||(ee=We(l,"submit",s[14]),y=!0)},p(I,B){const me={};B[1]&33554432&&(me.$$scope={dirty:B,ctx:I}),e.$set(me);const G={};!o&&B[0]&1&&(o=!0,G.value=I[0],St(()=>o=!1)),n.$set(G);let fe=u;u=Se(I),u===fe?~u&&U[u].p(I,B):(c&&(de(),V(U[fe],1,1,()=>{U[fe]=null}),he()),~u?(c=U[u],c?c.p(I,B):(c=U[u]=ue[u](I),c.c()),M(c,1),c.m(t,g)):c=null),be===(be=Te(I,B))&&W?W.p(I,B):(W.d(1),W=be(I),W&&(W.c(),W.m(A,null)))},i(I){L||(M(e.$$.fragment,I),M(n.$$.fragment,I),M(c),M(k.$$.fragment,I),L=!0)},o(I){V(e.$$.fragment,I),V(n.$$.fragment,I),V(c),V(k.$$.fragment,I),L=!1},d(I){I&&(_(r),_(t)),oe(e,I),oe(n),~u&&U[u].d(),oe(k),W.d(),y=!1,ee()}}}function Hr(s){let e,r,t,l;return t=new Bt({props:{class:"bg-white dark:bg-neutral-950 shadow-md rounded-md border border-neutral-200 dark:border-neutral-800 overflow-hidden",$$slots:{default:[Rr]},$$scope:{ctx:s}}}),{c(){e=E("div"),r=E("div"),se(t.$$.fragment),this.h()},l(a){e=S(a,"DIV",{class:!0});var n=P(e);r=S(n,"DIV",{class:!0});var o=P(r);ne(t.$$.fragment,o),o.forEach(_),n.forEach(_),this.h()},h(){p(r,"class","w-full max-w-7xl"),p(e,"class","flex flex-col items-center h-full min-h-screen text-text bg-change dark:bg-dark shifting p-3 py-5")},m(a,n){N(a,e,n),v(e,r),ae(t,r,null),l=!0},p(a,n){const o={};n[0]&127|n[1]&33554432&&(o.$$scope={dirty:n,ctx:a}),t.$set(o)},i(a){l||(M(t.$$.fragment,a),l=!0)},o(a){V(t.$$.fragment,a),l=!1},d(a){a&&_(e),oe(t)}}}function Et(s,e){if(!s||!e)return!1;const r=e.trim().toLowerCase();return s.toLowerCase().includes(r)}function qr(s,e,r){let t=0;if(s.toLowerCase()===e.toLowerCase())t+=100;else if(s.toLowerCase().includes(e.toLowerCase()))t+=70;else{const l=e.toLowerCase().split(/\s+/),a=s.toLowerCase().split(/\s+/);for(const n of l)if(!(n.length<3)){for(const o of a)if(o.includes(n)||n.includes(o)){t+=20;break}}}switch(r){case"subclass":t+=15;break;case"parent class":t+=10;break;case"made of":case"color":case"has part":t+=25;break;case"used for":t+=20;break;case"also known as":t+=30;break;default:t+=5}return s.length<15&&(t+=10),t}function Ur(s,e,r){let t="",l=[],a=!1,n=!1,o,i,h,m={},C=new Set,w=!1,d=!0,f=!1,u=[],c=[],g=!1,k=[];const T=[{key:"material",label:"Material"},{key:"writtenText",label:"Written Text"},{key:"color",label:"Color"},{key:"shape",label:"Shape"},{key:"location",label:"Location"},{key:"hardness",label:"Hardness"},{key:"timePeriod",label:"Time Period"},{key:"smell",label:"Smell"},{key:"texture",label:"Texture"},{key:"originOfAcquisition",label:"Origin"},{key:"pattern",label:"Pattern"},{key:"print",label:"Print"},{key:"functionality",label:"Functionality"},{key:"brand",label:"Brand"},{key:"markings",label:"Markings"}];jt(()=>{r(17,w=!0);const x=new URLSearchParams(window.location.search).get("q");x&&x.trim().length>=3?(r(0,t=x),r(4,a=!0),setTimeout(()=>{r(18,d=!1)},0)):r(18,d=!1)}),Mt(()=>{o&&clearTimeout(o),i&&clearTimeout(i),h&&clearTimeout(h)});function A(b){if(!b)return!1;if(Et(b,t))return!0;for(const x of c)if(Et(b,x.label))return!0;return!1}async function j(b){if(!b||b.length<3)return[];try{r(1,n=!0);const x=await fetch(`https://www.wikidata.org/w/api.php?action=wbsearchentities&search=${encodeURIComponent(b)}&language=en&format=json&origin=*&limit=3`);if(!x.ok)throw new Error(`Wikidata search failed: ${x.status}`);const D=await x.json();if(!D.search||!D.search.length)return[];const xe=D.search.slice(0,3),K=new Map;return await Promise.all(xe.map(async q=>{const ye=`
                    SELECT DISTINCT ?item ?itemLabel ?relation WHERE {
                    {
                        # Parent classes (instance of)
                        wd:${q.id} wdt:P31 ?item .
                        BIND("parent class" AS ?relation)
                    } UNION {
                        # Subclasses
                        ?item wdt:P31 wd:${q.id} .
                        BIND("subclass" AS ?relation)
                    } UNION {
                        # Related concepts through subclass hierarchy
                        wd:${q.id} wdt:P279 ?item .
                        BIND("broader concept" AS ?relation)
                    } UNION {
                        # Parts and components
                        wd:${q.id} wdt:P527 ?item .
                        BIND("has part" AS ?relation)
                    } UNION {
                        # What it's part of
                        wd:${q.id} wdt:P361 ?item .
                        BIND("part of" AS ?relation)
                    } UNION {
                        # Material composition
                        wd:${q.id} wdt:P186 ?item .
                        BIND("made of" AS ?relation)
                    } UNION {
                        # Object's color
                        wd:${q.id} wdt:P462 ?item .
                        BIND("color" AS ?relation)
                    } UNION {
                        # Used for
                        wd:${q.id} wdt:P366 ?item .
                        BIND("used for" AS ?relation)
                    }
                    SERVICE wikibase:label { bd:serviceParam wikibase:language "en". }
                    }
                    LIMIT 12
                `,X=`https://query.wikidata.org/sparql?query=${encodeURIComponent(ye)}&format=json`,te=new AbortController,ge=setTimeout(()=>te.abort(),5e3);try{const le=await fetch(X,{signal:te.signal});if(clearTimeout(ge),!le.ok)throw new Error(`SPARQL query failed: ${le.status}`);const He=await le.json();if(!He.results||!He.results.bindings)return;He.results.bindings.filter(pe=>pe.item&&pe.itemLabel&&pe.relation).forEach(pe=>{const qe=pe.item.value.split("/").pop(),Ue=pe.itemLabel.value,Ze=pe.relation.value;Ue.length>50||K.has(qe)||K.set(qe,{id:qe,label:Ue,relation:Ze,score:qr(Ue,b,Ze),sourceEntity:q.id})})}catch(le){le.name==="AbortError"&&console.error("SPARQL query timed out")}})),Array.from(K.values()).sort((q,ye)=>ye.score-q.score).slice(0,10)}catch(x){return console.error("Error expanding search terms:",x),[]}finally{r(1,n=!1)}}function O(){if(c.length===0)return t.trim();const b=c.map(x=>x.label);return`${t.trim()},${b.join(",")}`}async function L(){if(!f){o&&clearTimeout(o),r(19,f=!0);try{if(!t||t.trim().length<3){r(3,l=[]),r(4,a=!1);return}r(4,a=!0);const b=t.trim(),x=O();try{const D=await fetch(`https://backend-310608491068.europe-west1.run.app/api/posts/searchForPosts?q=${encodeURIComponent(x)}`);if(!D.ok)throw new Error(`Search request failed: ${D.status}`);if(b===t.trim()){const xe=await D.json();r(3,l=xe.content||[]);const K=new Set;l.forEach(_e=>{_e.tags&&Array.isArray(_e.tags)&&_e.tags.length>0&&_e.tags.forEach(q=>{q&&!C.has(q)&&K.add(q)})}),K.size>0&&await ue(Array.from(K))}}catch(D){console.error("Error searching posts:",D),r(3,l=[])}}finally{r(4,a=!1),r(19,f=!1)}}}async function y(){if(n)return;i&&clearTimeout(i);const b=t.trim();r(1,n=!0),i=setTimeout(async()=>{try{if(!b||b.length<3||b!==t.trim()){u=[],ce(),r(5,g=k.length>0);return}const x=await j(b);b===t.trim()&&(u=x,ce(),r(5,g=k.length>0))}catch(x){console.error("Error in semantic search:",x)}finally{r(1,n=!1)}},500)}function ee(b){c.findIndex(D=>D.id===b.id)!==-1?r(2,c=c.filter(D=>D.id!==b.id)):r(2,c=[...c,b]),ce(),setTimeout(()=>{L()},0)}function ce(){const b=[...u].filter(x=>!x.label.match(/^Q\d+$/));c.forEach(x=>{!b.some(D=>D.id===x.id)&&!x.label.match(/^Q\d+$/)&&b.push({...x,fromPreviousSearch:!0})}),JSON.stringify(k)!==JSON.stringify(b)&&r(6,k=b)}function re(b){return c.some(x=>x.id===b.id)}async function ue(b){if(!(!b||!b.length))try{b.forEach(D=>C.add(D));const x=20;for(let D=0;D<b.length;D+=x){const K=b.slice(D,D+x).filter(X=>X&&typeof X=="string");if(K.length===0)continue;const _e=K.join("|"),q=new AbortController,ye=setTimeout(()=>q.abort(),5e3);try{const X=await fetch(`https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${_e}&props=labels&languages=en&format=json&origin=*`,{signal:q.signal});if(clearTimeout(ye),!X.ok)throw new Error(`Failed to fetch tag labels: ${X.status}`);const te=await X.json();te.entities&&Object.keys(te.entities).forEach(ge=>{const le=te.entities[ge];le.labels&&le.labels.en?m[ge]=le.labels.en.value:m[ge]=ge})}catch(X){X.name==="AbortError"?console.error("Tag label fetch timed out"):console.error(`Error fetching batch of tag labels: ${X.message}`),K.forEach(te=>{m[te]||(m[te]=te)})}}}catch(x){console.error("Error fetching tag labels:",x)}}let U=null;function Se(){let b=[t.trim()];if(c.forEach(D=>{b.push(D.label)}),b=b.filter(D=>D&&D.trim().length>0).map(D=>D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),b.length===0){U=null;return}const x=b.join("|");U=new RegExp(`(${x})`,"gi")}function Te(b){return!b||!U?b:b.replace(U,"<mark>$1</mark>")}function be(b){return m[b]||b}function W(b){b.preventDefault(),!f&&!n&&t.trim().length>=3&&(L(),y())}let I="",B="";function me(b){t=b,r(0,t)}const G=(b,x)=>x.relation===b&&!x.label.match(/^Q\d+$/),fe=b=>ee(b),At=()=>{r(2,c=[]),L()};return s.$$.update=()=>{if(s.$$.dirty[0]&1867779)if(t&&t.trim().length>=3&&!d){const b=t.trim();b!==I&&!f&&!n&&(r(20,I=b),clearTimeout(o),r(15,o=setTimeout(()=>{L(),t.trim()===b&&y()},300)))}else(!t||t.trim().length<3)&&(f||(r(3,l=[]),r(4,a=!1)));if(s.$$.dirty[0]&5&&(t||c.length>0?Se():U=null),s.$$.dirty[0]&2555905&&w&&typeof window<"u"&&!d){const b=t.trim();b!==B&&(r(21,B=b),clearTimeout(h),r(16,h=setTimeout(()=>{try{const x=new URL(window.location.href);b.length>=3?x.searchParams.set("q",b):x.searchParams.delete("q"),window.history.replaceState({},"",x.toString())}catch(x){console.error("Error updating URL:",x)}},500)))}},[t,n,c,l,a,g,k,T,A,L,ee,re,Te,be,W,o,h,w,d,f,I,B,me,G,fe,At]}class tl extends Ve{constructor(e){super(),Re(this,e,Ur,Hr,Pe,{},null,[-1,-1])}}export{tl as component};
