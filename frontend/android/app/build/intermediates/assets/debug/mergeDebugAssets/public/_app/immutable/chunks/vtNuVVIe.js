import{s as be,e as w,a as S,t as F,c as y,b as V,g as T,f as _,d as U,l as d,W as ke,i as D,h as b,m as re,j as M,n as Z,z as Ce,Q as ye,q as ne,u as ae,k as de,D as nt,r as W,H as _e,F as ie,G as oe,a2 as ot,O as at,P as st,a3 as ut,a4 as Ae,y as Ve,E as we}from"./DhMr5c2G.js";import{S as ge,i as ve,e as se,c as G,a as J,m as ee,t as N,b as q,d as te,g as ce,f as fe}from"./D_SvASXj.js";import{e as le,u as ct,o as ft}from"./DtBTuCuf.js";import{T as dt}from"./C0vSs4Ow.js";import{I as me}from"./CKjRT1KS.js";import{w as he}from"./Crv6Zvwd.js";import{B as pe}from"./BNST9Elv.js";function ht(a){let e,t,l,n,s,r,i,o=(a[2]?"Loading...":a[0]||"Select a color")+"",c,p,u,h,f,m,g,v;return{c(){e=w("div"),t=w("input"),l=S(),n=w("div"),s=w("div"),r=S(),i=w("span"),c=F(o),p=S(),u=w("span"),h=F("("),f=F(a[1]),m=F(")"),this.h()},l(k){e=y(k,"DIV",{class:!0});var C=V(e);t=y(C,"INPUT",{type:!0,id:!0,class:!0,"aria-label":!0}),l=T(C),n=y(C,"DIV",{class:!0,tabindex:!0,role:!0,"aria-label":!0});var O=V(n);s=y(O,"DIV",{class:!0,style:!0}),V(s).forEach(_),r=T(O),i=y(O,"SPAN",{class:!0});var L=V(i);c=U(L,o),p=T(L),u=y(L,"SPAN",{class:!0});var x=V(u);h=U(x,"("),f=U(x,a[1]),m=U(x,")"),x.forEach(_),L.forEach(_),O.forEach(_),C.forEach(_),this.h()},h(){d(t,"type","color"),d(t,"id","color-picker"),t.value=a[1],d(t,"class","sr-only"),d(t,"aria-label","Select color"),d(s,"class","w-6 h-6 rounded border"),ke(s,"background-color",a[1]),d(u,"class","text-xs opacity-75 ml-1"),d(i,"class","text-sm truncate"),d(n,"class","flex items-center gap-2 flex-1 border rounded p-2 bg-white dark:bg-neutral-800 cursor-pointer hover:bg-gray-50 dark:hover:bg-neutral-700"),d(n,"tabindex","0"),d(n,"role","button"),d(n,"aria-label","Open color picker"),d(e,"class","flex items-center gap-3")},m(k,C){D(k,e,C),b(e,t),a[7](t),b(e,l),b(e,n),b(n,s),b(n,r),b(n,i),b(i,c),b(i,p),b(i,u),b(u,h),b(u,f),b(u,m),g||(v=[re(t,"change",a[4]),re(n,"click",a[5]),re(n,"keydown",a[8])],g=!0)},p(k,[C]){C&2&&(t.value=k[1]),C&2&&ke(s,"background-color",k[1]),C&5&&o!==(o=(k[2]?"Loading...":k[0]||"Select a color")+"")&&M(c,o),C&2&&M(f,k[1])},i:Z,o:Z,d(k){k&&_(e),a[7](null),g=!1,Ce(v)}}}function Ie(a){return a?(a.startsWith("#")||(a="#"+a),/^#([0-9A-Fa-f]{3}){1,2}$/.test(a)?a:(console.warn("Invalid hex color, using default:",a),"#ffffff")):"#ffffff"}function pt(a,e,t){let{value:l=""}=e,{hexValue:n="#ffffff"}=e,s=n||"#ffffff",r=!1,i;const o=ye();async function c(m){t(2,r=!0),m=Ie(m);const g=m.replace("#","");try{const v=await fetch(`https://www.thecolorapi.com/id?hex=${g}`);if(!v.ok)throw new Error("Failed to fetch color name");const k=await v.json();t(0,l=k.name.value||"Unknown color"),t(6,n=m),o("colorchange",{color:l,hex:m})}catch(v){console.error("Error fetching color name:",v),t(0,l="Unknown color"),t(6,n=m),o("colorchange",{color:l,hex:m})}finally{t(2,r=!1)}}function p(m){t(1,s=Ie(m.target.value)),c(s)}function u(){i&&i.click()}function h(m){ne[m?"unshift":"push"](()=>{i=m,t(3,i)})}const f=m=>m.key==="Enter"&&u();return a.$$set=m=>{"value"in m&&t(0,l=m.value),"hexValue"in m&&t(6,n=m.hexValue)},[l,s,r,i,p,u,n,h,f]}class _t extends ge{constructor(e){super(),ve(this,e,pt,ht,be,{value:0,hexValue:6})}}function xe(a,e,t){const l=a.slice();return l[26]=e[t],l}function De(a,e,t){const l=a.slice();return l[23]=e[t],l}function je(a){let e;function t(s,r){return s[4]?wt:s[5]?kt:s[6].length===0&&s[1].length>=2?vt:s[1].length>=2&&s[6].length>0?gt:s[3].length>0?bt:mt}let l=t(a),n=l(a);return{c(){e=w("div"),n.c(),this.h()},l(s){e=y(s,"DIV",{class:!0});var r=V(e);n.l(r),r.forEach(_),this.h()},h(){d(e,"class","absolute z-20 mt-1 w-full max-h-60 overflow-y-auto bg-white dark:bg-neutral-900 shadow-lg border rounded-md")},m(s,r){D(s,e,r),n.m(e,null)},p(s,r){l===(l=t(s))&&n?n.p(s,r):(n.d(1),n=l(s),n&&(n.c(),n.m(e,null)))},d(s){s&&_(e),n.d()}}}function mt(a){let e,t="Type at least 2 characters to search for materials";return{c(){e=w("div"),e.textContent=t,this.h()},l(l){e=y(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1aqodsy"&&(e.textContent=t),this.h()},h(){d(e,"class","p-3 text-sm text-gray-500")},m(l,n){D(l,e,n)},p:Z,d(l){l&&_(e)}}}function bt(a){let e,t,l="Common Material Categories",n,s,r,i="Type to search for specific materials",o=le(a[3]),c=[];for(let p=0;p<o.length;p+=1)c[p]=Le(xe(a,o,p));return{c(){e=w("div"),t=w("div"),t.textContent=l,n=S();for(let p=0;p<c.length;p+=1)c[p].c();s=S(),r=w("div"),r.textContent=i,this.h()},l(p){e=y(p,"DIV",{class:!0});var u=V(e);t=y(u,"DIV",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-veu948"&&(t.textContent=l),n=T(u);for(let h=0;h<c.length;h+=1)c[h].l(u);s=T(u),r=y(u,"DIV",{class:!0,"data-svelte-h":!0}),W(r)!=="svelte-fk0eye"&&(r.textContent=i),u.forEach(_),this.h()},h(){d(t,"class","text-xs font-semibold mb-1 px-2 text-gray-500"),d(r,"class","text-xs text-center mt-2 text-gray-500"),d(e,"class","p-2")},m(p,u){D(p,e,u),b(e,t),b(e,n);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(e,null);b(e,s),b(e,r)},p(p,u){if(u&8200){o=le(p[3]);let h;for(h=0;h<o.length;h+=1){const f=xe(p,o,h);c[h]?c[h].p(f,u):(c[h]=Le(f),c[h].c(),c[h].m(e,s))}for(;h<c.length;h+=1)c[h].d(1);c.length=o.length}},d(p){p&&_(e),_e(c,p)}}}function gt(a){let e,t,l="Material Suggestions",n,s=le(a[6]),r=[];for(let i=0;i<s.length;i+=1)r[i]=Te(De(a,s,i));return{c(){e=w("div"),t=w("div"),t.textContent=l,n=S();for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){e=y(i,"DIV",{class:!0});var o=V(e);t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-1bl4i5a"&&(t.textContent=l),n=T(o);for(let c=0;c<r.length;c+=1)r[c].l(o);o.forEach(_),this.h()},h(){d(t,"class","text-xs font-semibold mb-1 px-2 text-gray-500"),d(e,"class","p-2")},m(i,o){D(i,e,o),b(e,t),b(e,n);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null)},p(i,o){if(o&4160){s=le(i[6]);let c;for(c=0;c<s.length;c+=1){const p=De(i,s,c);r[c]?r[c].p(p,o):(r[c]=Te(p),r[c].c(),r[c].m(e,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=s.length}},d(i){i&&_(e),_e(r,i)}}}function vt(a){let e,t="No matching materials found. You can use your own term.";return{c(){e=w("div"),e.textContent=t,this.h()},l(l){e=y(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1m3g9j"&&(e.textContent=t),this.h()},h(){d(e,"class","p-3 text-sm text-gray-500")},m(l,n){D(l,e,n)},p:Z,d(l){l&&_(e)}}}function kt(a){let e,t;return{c(){e=w("div"),t=F(a[5]),this.h()},l(l){e=y(l,"DIV",{class:!0});var n=V(e);t=U(n,a[5]),n.forEach(_),this.h()},h(){d(e,"class","p-3 text-sm text-red-500")},m(l,n){D(l,e,n),b(e,t)},p(l,n){n&32&&M(t,l[5])},d(l){l&&_(e)}}}function wt(a){let e,t='<div class="animate-spin h-4 w-4 border-2 border-neutral-300 rounded-full border-t-neutral-600 mr-2"></div> <span class="text-sm">Loading materials...</span>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(l){e=y(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-xwku09"&&(e.innerHTML=t),this.h()},h(){d(e,"class","p-3 flex items-center justify-center")},m(l,n){D(l,e,n)},p:Z,d(l){l&&_(e)}}}function Le(a){let e,t,l=a[26].label+"",n,s,r,i="Select as material",o,c;function p(){return a[18](a[26])}return{c(){e=w("button"),t=w("div"),n=F(l),s=S(),r=w("div"),r.textContent=i,this.h()},l(u){e=y(u,"BUTTON",{class:!0});var h=V(e);t=y(h,"DIV",{class:!0});var f=V(t);n=U(f,l),f.forEach(_),s=T(h),r=y(h,"DIV",{class:!0,"data-svelte-h":!0}),W(r)!=="svelte-1kkrvo2"&&(r.textContent=i),h.forEach(_),this.h()},h(){d(t,"class","text-sm font-medium"),d(r,"class","text-xs text-gray-500"),d(e,"class","block w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-neutral-800 rounded transition-colors")},m(u,h){D(u,e,h),b(e,t),b(t,n),b(e,s),b(e,r),o||(c=re(e,"click",p),o=!0)},p(u,h){a=u,h&8&&l!==(l=a[26].label+"")&&M(n,l)},d(u){u&&_(e),o=!1,c()}}}function Se(a){let e,t=a[23].description+"",l;return{c(){e=w("div"),l=F(t),this.h()},l(n){e=y(n,"DIV",{class:!0});var s=V(e);l=U(s,t),s.forEach(_),this.h()},h(){d(e,"class","text-xs text-gray-500 line-clamp-1")},m(n,s){D(n,e,s),b(e,l)},p(n,s){s&64&&t!==(t=n[23].description+"")&&M(l,t)},d(n){n&&_(e)}}}function Te(a){let e,t,l=a[23].label+"",n,s,r,i,o,c=a[23].description&&Se(a);function p(){return a[17](a[23])}return{c(){e=w("button"),t=w("div"),n=F(l),s=S(),c&&c.c(),r=S(),this.h()},l(u){e=y(u,"BUTTON",{class:!0});var h=V(e);t=y(h,"DIV",{class:!0});var f=V(t);n=U(f,l),f.forEach(_),s=T(h),c&&c.l(h),r=T(h),h.forEach(_),this.h()},h(){d(t,"class","text-sm font-medium"),d(e,"class","block w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-neutral-800 rounded transition-colors")},m(u,h){D(u,e,h),b(e,t),b(t,n),b(e,s),c&&c.m(e,null),b(e,r),i||(o=re(e,"click",p),i=!0)},p(u,h){a=u,h&64&&l!==(l=a[23].label+"")&&M(n,l),a[23].description?c?c.p(a,h):(c=Se(a),c.c(),c.m(e,r)):c&&(c.d(1),c=null)},d(u){u&&_(e),c&&c.d(),i=!1,o()}}}function yt(a){let e,t,l,n,s;function r(c){a[16](c)}let i={type:"text",placeholder:a[0],class:"w-full"};a[1]!==void 0&&(i.value=a[1]),t=new me({props:i}),ne.push(()=>se(t,"value",r)),t.$on("input",a[11]),t.$on("focus",a[14]);let o=a[2]&&je(a);return{c(){e=w("div"),G(t.$$.fragment),n=S(),o&&o.c(),this.h()},l(c){e=y(c,"DIV",{class:!0});var p=V(e);J(t.$$.fragment,p),n=T(p),o&&o.l(p),p.forEach(_),this.h()},h(){d(e,"class","material-selector relative")},m(c,p){D(c,e,p),ee(t,e,null),b(e,n),o&&o.m(e,null),s=!0},p(c,[p]){const u={};p&1&&(u.placeholder=c[0]),!l&&p&2&&(l=!0,u.value=c[1],ae(()=>l=!1)),t.$set(u),c[2]?o?o.p(c,p):(o=je(c),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i(c){s||(N(t.$$.fragment,c),s=!0)},o(c){q(t.$$.fragment,c),s=!1},d(c){c&&_(e),te(t),o&&o.d()}}}function Ee(a){return a?a.charAt(0).toUpperCase()+a.slice(1):""}function Et(a,e,t){let l,n,s,r,{value:i=""}=e,{placeholder:o="Select or type a material"}=e;const c=ye();let p=i||"",u=!1,h=he(!1);de(a,h,I=>t(4,n=I));let f=he([]);de(a,f,I=>t(6,r=I));let m=he([]);de(a,m,I=>t(3,l=I));let g=he(null);de(a,g,I=>t(5,s=I));async function v(I){if(!I||I.length<2){f.set([]);return}h.set(!0),g.set(null);try{const j=`https://www.wikidata.org/w/api.php?action=wbsearchentities&search=${encodeURIComponent(I)}&language=en&format=json&origin=*&limit=8&type=item`,B=await fetch(j);if(!B.ok)throw new Error("Failed to fetch from Wikidata");const R=(await B.json()).search.filter(Y=>{var X,ue;const H=((X=Y.label)==null?void 0:X.toLowerCase())||"",K=((ue=Y.description)==null?void 0:ue.toLowerCase())||"";return["material","substance","metal","alloy","polymer","ceramic","wood","plastic","fabric","textile","compound","element","mineral"].some(it=>K.includes(it))}).map(Y=>({id:Y.id,label:Y.label,description:Y.description||"No description available"}));f.set(R)}catch(j){console.error("Error fetching materials:",j),g.set("Failed to fetch materials. Please try again."),f.set([])}finally{h.set(!1)}}async function k(){h.set(!0),g.set(null);try{const j=`https://query.wikidata.org/sparql?query=${encodeURIComponent(`
        SELECT ?category ?categoryLabel WHERE {
          ?category wdt:P279 wd:Q214609. # subclass of material
          SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
        }
        LIMIT 15
      `)}&format=json`,B=await fetch(j);if(!B.ok)throw new Error("Failed to fetch material categories");const R=(await B.json()).results.bindings.map(Y=>({id:Y.category.value.split("/").pop(),label:Y.categoryLabel.value}));m.set(R)}catch(I){console.error("Error fetching material categories:",I),g.set("Failed to load material categories."),m.set([])}finally{h.set(!1)}}let C;function O(){p&&t(1,p=Ee(p)),t(15,i=p),c("change",{value:p}),clearTimeout(C),C=setTimeout(()=>{p.length>=2?v(p):f.set([])},300)}function L(I){const j=Ee(I.label);t(1,p=j),t(15,i=j),c("change",{value:j,id:I.id,description:I.description}),t(2,u=!1)}function x(I){const j=Ee(I.label);t(1,p=j),t(15,i=j),c("change",{value:j,id:I.id}),t(2,u=!1)}function E(){t(2,u=!0),p.length<2&&l.length===0?k():p.length>=2&&v(p)}nt(()=>{function I(j){j.target.closest(".material-selector")||t(2,u=!1)}return document.addEventListener("click",I),()=>{document.removeEventListener("click",I)}});function $(I){p=I,t(1,p)}const P=I=>L(I),A=I=>x(I);return a.$$set=I=>{"value"in I&&t(15,i=I.value),"placeholder"in I&&t(0,o=I.placeholder)},[o,p,u,l,n,s,r,h,f,m,g,O,L,x,E,i,$,P,A]}class Ct extends ge{constructor(e){super(),ve(this,e,Et,yt,be,{value:15,placeholder:0})}}function $e(a,e,t){const l=a.slice();l[31]=e[t],l[33]=e,l[34]=t;const n=l[5].find(function(...r){return a[29](l[31],...r)});return l[32]=n,l}function ze(a,e,t){const l=a.slice();return l[35]=e[t],l}function Oe(a,e,t){const l=a.slice();return l[38]=e[t],l}function At(a){let e,t,l,n,s,r="Add Attribute";return{c(){e=ie("svg"),t=ie("line"),l=ie("line"),n=S(),s=w("span"),s.textContent=r,this.h()},l(i){e=oe(i,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var o=V(e);t=oe(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),V(t).forEach(_),l=oe(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),V(l).forEach(_),o.forEach(_),n=T(i),s=y(i,"SPAN",{class:!0,"data-svelte-h":!0}),W(s)!=="svelte-surwue"&&(s.textContent=r),this.h()},h(){d(t,"x1","12"),d(t,"y1","5"),d(t,"x2","12"),d(t,"y2","19"),d(l,"x1","5"),d(l,"y1","12"),d(l,"x2","19"),d(l,"y2","12"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","16"),d(e,"height","16"),d(e,"viewBox","0 0 24 24"),d(e,"fill","none"),d(e,"stroke","currentColor"),d(e,"stroke-width","2"),d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"class","feather feather-plus"),d(s,"class","text-sm")},m(i,o){D(i,e,o),b(e,t),b(e,l),D(i,n,o),D(i,s,o)},p:Z,d(i){i&&(_(e),_(n),_(s))}}}function Pe(a){let e,t,l,n="Select Attribute",s,r,i="✕",o,c,p,u,h=le(a[3]),f=[];for(let g=0;g<h.length;g+=1)f[g]=Ne(Oe(a,h,g));let m=a[3].length===0&&Be();return{c(){e=w("div"),t=w("div"),l=w("span"),l.textContent=n,s=S(),r=w("button"),r.textContent=i,o=S();for(let g=0;g<f.length;g+=1)f[g].c();c=S(),m&&m.c(),this.h()},l(g){e=y(g,"DIV",{class:!0});var v=V(e);t=y(v,"DIV",{class:!0});var k=V(t);l=y(k,"SPAN",{class:!0,"data-svelte-h":!0}),W(l)!=="svelte-4alrd8"&&(l.textContent=n),s=T(k),r=y(k,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(r)!=="svelte-1jyjt8z"&&(r.textContent=i),k.forEach(_),o=T(v);for(let C=0;C<f.length;C+=1)f[C].l(v);c=T(v),m&&m.l(v),v.forEach(_),this.h()},h(){d(l,"class","text-sm font-medium"),d(r,"class","text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"),d(r,"aria-label","Close selector"),d(t,"class","sticky top-0 bg-white dark:bg-neutral-800 p-2 border-b mb-1 flex items-center justify-between"),d(e,"class","mt-2 p-2 border rounded bg-white dark:bg-neutral-950 shadow-lg max-h-60 overflow-y-auto mb-4 z-10 relative")},m(g,v){D(g,e,v),b(e,t),b(t,l),b(t,s),b(t,r),b(e,o);for(let k=0;k<f.length;k+=1)f[k]&&f[k].m(e,null);b(e,c),m&&m.m(e,null),p||(u=re(r,"click",a[11]),p=!0)},p(g,v){if(v[0]&72){h=le(g[3]);let k;for(k=0;k<h.length;k+=1){const C=Oe(g,h,k);f[k]?f[k].p(C,v):(f[k]=Ne(C),f[k].c(),f[k].m(e,c))}for(;k<f.length;k+=1)f[k].d(1);f.length=h.length}g[3].length===0?m||(m=Be(),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},d(g){g&&_(e),_e(f,g),m&&m.d(),p=!1,u()}}}function Ne(a){let e,t=a[38].label+"",l,n,s;function r(){return a[12](a[38])}return{c(){e=w("button"),l=F(t),this.h()},l(i){e=y(i,"BUTTON",{class:!0});var o=V(e);l=U(o,t),o.forEach(_),this.h()},h(){d(e,"class","block w-full text-left p-2.5 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded transition-colors text-sm")},m(i,o){D(i,e,o),b(e,l),n||(s=re(e,"click",r),n=!0)},p(i,o){a=i,o[0]&8&&t!==(t=a[38].label+"")&&M(l,t)},d(i){i&&_(e),n=!1,s()}}}function Be(a){let e,t="All attributes have been added";return{c(){e=w("p"),e.textContent=t,this.h()},l(l){e=y(l,"P",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-10tjwa0"&&(e.textContent=t),this.h()},h(){d(e,"class","p-2 text-sm text-neutral-500 text-center")},m(l,n){D(l,e,n)},d(l){l&&_(e)}}}function Vt(a){let e,t="No attributes added yet. Click 'Add Attribute' to start.";return{c(){e=w("p"),e.textContent=t,this.h()},l(l){e=y(l,"P",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-vce7sm"&&(e.textContent=t),this.h()},h(){d(e,"class","text-sm text-neutral-500 dark:text-gray-400 mt-2")},m(l,n){D(l,e,n)},p:Z,i:Z,o:Z,d(l){l&&_(e)}}}function It(a){let e,t,l=le(a[0]),n=[];for(let r=0;r<l.length;r+=1)n[r]=Fe($e(a,l,r));const s=r=>q(n[r],1,1,()=>{n[r]=null});return{c(){e=w("div");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=y(r,"DIV",{class:!0});var i=V(e);for(let o=0;o<n.length;o+=1)n[o].l(i);i.forEach(_),this.h()},h(){d(e,"class","grid grid-cols-1 sm:grid-cols-2 gap-4 mb-2")},m(r,i){D(r,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);t=!0},p(r,i){if(i[0]&947){l=le(r[0]);let o;for(o=0;o<l.length;o+=1){const c=$e(r,l,o);n[o]?(n[o].p(c,i),N(n[o],1)):(n[o]=Fe(c),n[o].c(),N(n[o],1),n[o].m(e,null))}for(ce(),o=l.length;o<n.length;o+=1)s(o);fe()}},i(r){if(!t){for(let i=0;i<l.length;i+=1)N(n[i]);t=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)q(n[i]);t=!1},d(r){r&&_(e),_e(n,r)}}}function He(a){let e,t,l,n=zt()+"",s,r,i,o,c,p,u;function h(){return a[13](a[31])}const f=[Tt,St,Lt,jt,Dt,xt],m=[];function g(v,k){return v[32].type==="select"?0:v[32].type==="dimensions"?1:v[32].type==="checkbox"?2:v[31]==="color"?3:v[31]==="material"?4:5}return r=g(a),i=m[r]=f[r](a),{c(){e=w("div"),t=w("button"),l=new at(!1),s=S(),i.c(),this.h()},l(v){e=y(v,"DIV",{class:!0});var k=V(e);t=y(k,"BUTTON",{type:!0,class:!0,title:!0});var C=V(t);l=st(C,!1),C.forEach(_),s=T(k),i.l(k),k.forEach(_),this.h()},h(){l.a=null,d(t,"type","button"),d(t,"class","absolute top-2 right-2 h-6 w-6 rounded-full flex items-center justify-center bg-neutral-100 text-neutral-500 hover:bg-red-50 hover:text-red-500 dark:bg-neutral-800 dark:hover:bg-neutral-700 transition-colors"),d(t,"title","Remove attribute"),d(e,"class",o="relative p-3 rounded-md border bg-neutral-50 dark:bg-neutral-900 dark:border-neutral-700 transition-all hover:shadow-sm "+(a[32].type==="dimensions"?"col-span-1 sm:col-span-2":""))},m(v,k){D(v,e,k),b(e,t),l.m(n,t),b(e,s),m[r].m(e,null),c=!0,p||(u=re(t,"click",h),p=!0)},p(v,k){a=v;let C=r;r=g(a),r===C?m[r].p(a,k):(ce(),q(m[C],1,1,()=>{m[C]=null}),fe(),i=m[r],i?i.p(a,k):(i=m[r]=f[r](a),i.c()),N(i,1),i.m(e,null)),(!c||k[0]&33&&o!==(o="relative p-3 rounded-md border bg-neutral-50 dark:bg-neutral-900 dark:border-neutral-700 transition-all hover:shadow-sm "+(a[32].type==="dimensions"?"col-span-1 sm:col-span-2":"")))&&d(e,"class",o)},i(v){c||(N(i),c=!0)},o(v){q(i),c=!1},d(v){v&&_(e),m[r].d(),p=!1,u()}}}function xt(a){let e,t=a[32].label+"",l,n,s,r,i,o;function c(u){a[27](u,a[31])}let p={type:a[32].type||"text",id:a[31],class:"w-full p-2 border rounded dark:border-neutral-600",placeholder:a[32].placeholder||""};return a[1][a[31]]!==void 0&&(p.value=a[1][a[31]]),r=new me({props:p}),ne.push(()=>se(r,"value",c)),r.$on("input",a[28]),{c(){e=w("label"),l=F(t),s=S(),G(r.$$.fragment),this.h()},l(u){e=y(u,"LABEL",{for:!0,class:!0});var h=V(e);l=U(h,t),h.forEach(_),s=T(u),J(r.$$.fragment,u),this.h()},h(){d(e,"for",n=a[31]),d(e,"class","block text-sm font-medium mb-2")},m(u,h){D(u,e,h),b(e,l),D(u,s,h),ee(r,u,h),o=!0},p(u,h){a=u,(!o||h[0]&1)&&t!==(t=a[32].label+"")&&M(l,t),(!o||h[0]&33&&n!==(n=a[31]))&&d(e,"for",n);const f={};h[0]&1&&(f.type=a[32].type||"text"),h[0]&1&&(f.id=a[31]),h[0]&1&&(f.placeholder=a[32].placeholder||""),!i&&h[0]&3&&(i=!0,f.value=a[1][a[31]],ae(()=>i=!1)),r.$set(f)},i(u){o||(N(r.$$.fragment,u),o=!0)},o(u){q(r.$$.fragment,u),o=!1},d(u){u&&(_(e),_(s)),te(r,u)}}}function Dt(a){let e,t=a[32].label+"",l,n,s,r,i,o;function c(u){a[26](u)}let p={placeholder:a[32].placeholder};return a[1].material!==void 0&&(p.value=a[1].material),r=new Ct({props:p}),ne.push(()=>se(r,"value",c)),r.$on("change",a[9]),{c(){e=w("label"),l=F(t),s=S(),G(r.$$.fragment),this.h()},l(u){e=y(u,"LABEL",{for:!0,class:!0});var h=V(e);l=U(h,t),h.forEach(_),s=T(u),J(r.$$.fragment,u),this.h()},h(){d(e,"for",n=a[31]),d(e,"class","block text-sm font-medium mb-2")},m(u,h){D(u,e,h),b(e,l),D(u,s,h),ee(r,u,h),o=!0},p(u,h){(!o||h[0]&1)&&t!==(t=u[32].label+"")&&M(l,t),(!o||h[0]&33&&n!==(n=u[31]))&&d(e,"for",n);const f={};h[0]&1&&(f.placeholder=u[32].placeholder),!i&&h[0]&2&&(i=!0,f.value=u[1].material,ae(()=>i=!1)),r.$set(f)},i(u){o||(N(r.$$.fragment,u),o=!0)},o(u){q(r.$$.fragment,u),o=!1},d(u){u&&(_(e),_(s)),te(r,u)}}}function jt(a){let e,t=a[32].label+"",l,n,s,r,i,o,c;function p(f){a[24](f)}function u(f){a[25](f)}let h={};return a[1].color!==void 0&&(h.value=a[1].color),a[1].colorHex!==void 0&&(h.hexValue=a[1].colorHex),r=new _t({props:h}),ne.push(()=>se(r,"value",p)),ne.push(()=>se(r,"hexValue",u)),r.$on("colorchange",a[8]),{c(){e=w("label"),l=F(t),s=S(),G(r.$$.fragment),this.h()},l(f){e=y(f,"LABEL",{for:!0,class:!0});var m=V(e);l=U(m,t),m.forEach(_),s=T(f),J(r.$$.fragment,f),this.h()},h(){d(e,"for",n=a[31]),d(e,"class","block text-sm font-medium mb-2")},m(f,m){D(f,e,m),b(e,l),D(f,s,m),ee(r,f,m),c=!0},p(f,m){(!c||m[0]&1)&&t!==(t=f[32].label+"")&&M(l,t),(!c||m[0]&33&&n!==(n=f[31]))&&d(e,"for",n);const g={};!i&&m[0]&2&&(i=!0,g.value=f[1].color,ae(()=>i=!1)),!o&&m[0]&2&&(o=!0,g.hexValue=f[1].colorHex,ae(()=>o=!1)),r.$set(g)},i(f){c||(N(r.$$.fragment,f),c=!0)},o(f){q(r.$$.fragment,f),c=!1},d(f){f&&(_(e),_(s)),te(r,f)}}}function Lt(a){let e,t,l,n,s,r,i=a[32].label+"",o,c,p,u;function h(){a[22].call(l,a[31])}return{c(){e=w("div"),t=w("div"),l=w("input"),s=S(),r=w("label"),o=F(i),this.h()},l(f){e=y(f,"DIV",{class:!0});var m=V(e);t=y(m,"DIV",{class:!0});var g=V(t);l=y(g,"INPUT",{type:!0,id:!0,class:!0}),s=T(g),r=y(g,"LABEL",{for:!0,class:!0});var v=V(r);o=U(v,i),v.forEach(_),g.forEach(_),m.forEach(_),this.h()},h(){d(l,"type","checkbox"),d(l,"id",n=`${a[31]}-checkbox`),d(l,"class","w-4 h-4 mr-3"),d(r,"for",c=`${a[31]}-checkbox`),d(r,"class","text-sm font-medium"),d(t,"class","flex items-center"),d(e,"class","pt-2")},m(f,m){D(f,e,m),b(e,t),b(t,l),l.checked=a[1][a[31]],b(t,s),b(t,r),b(r,o),p||(u=[re(l,"change",h),re(l,"change",a[23])],p=!0)},p(f,m){a=f,m[0]&33&&n!==(n=`${a[31]}-checkbox`)&&d(l,"id",n),m[0]&35&&(l.checked=a[1][a[31]]),m[0]&1&&i!==(i=a[32].label+"")&&M(o,i),m[0]&33&&c!==(c=`${a[31]}-checkbox`)&&d(r,"for",c)},i:Z,o:Z,d(f){f&&_(e),p=!1,Ce(u)}}}function St(a){let e,t="Dimensions (cm)",l,n,s,r,i="Length",o,c,p,u,h,f,m="Width",g,v,k,C,O,L,x="Height",E,$,P,A;function I(H){a[16](H)}let j={type:"number",id:"sizeX",class:"w-full p-2 border rounded dark:border-neutral-600",placeholder:"Length (cm)"};a[1].sizeX!==void 0&&(j.value=a[1].sizeX),c=new me({props:j}),ne.push(()=>se(c,"value",I)),c.$on("input",a[17]);function B(H){a[18](H)}let Q={type:"number",id:"sizeY",class:"w-full p-2 border rounded dark:border-neutral-600",placeholder:"Width (cm)"};a[1].sizeY!==void 0&&(Q.value=a[1].sizeY),v=new me({props:Q}),ne.push(()=>se(v,"value",B)),v.$on("input",a[19]);function R(H){a[20](H)}let Y={type:"number",id:"sizeZ",class:"w-full p-2 border rounded dark:border-neutral-600",placeholder:"Height (cm)"};return a[1].sizeZ!==void 0&&(Y.value=a[1].sizeZ),$=new me({props:Y}),ne.push(()=>se($,"value",R)),$.$on("input",a[21]),{c(){e=w("div"),e.textContent=t,l=S(),n=w("div"),s=w("div"),r=w("label"),r.textContent=i,o=S(),G(c.$$.fragment),u=S(),h=w("div"),f=w("label"),f.textContent=m,g=S(),G(v.$$.fragment),C=S(),O=w("div"),L=w("label"),L.textContent=x,E=S(),G($.$$.fragment),this.h()},l(H){e=y(H,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1nva788"&&(e.textContent=t),l=T(H),n=y(H,"DIV",{class:!0,role:!0,"aria-labelledby":!0});var K=V(n);s=y(K,"DIV",{});var z=V(s);r=y(z,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(r)!=="svelte-14ubxu4"&&(r.textContent=i),o=T(z),J(c.$$.fragment,z),z.forEach(_),u=T(K),h=y(K,"DIV",{});var X=V(h);f=y(X,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(f)!=="svelte-1mon701"&&(f.textContent=m),g=T(X),J(v.$$.fragment,X),X.forEach(_),C=T(K),O=y(K,"DIV",{});var ue=V(O);L=y(ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(L)!=="svelte-1w92f5h"&&(L.textContent=x),E=T(ue),J($.$$.fragment,ue),ue.forEach(_),K.forEach(_),this.h()},h(){d(e,"id","dimensions-label"),d(e,"class","block text-sm font-medium mb-3"),d(r,"for","sizeX"),d(r,"class","block text-xs font-medium mb-1"),d(f,"for","sizeY"),d(f,"class","block text-xs font-medium mb-1"),d(L,"for","sizeZ"),d(L,"class","block text-xs font-medium mb-1"),d(n,"class","grid grid-cols-3 gap-3"),d(n,"role","group"),d(n,"aria-labelledby","dimensions-label")},m(H,K){D(H,e,K),D(H,l,K),D(H,n,K),b(n,s),b(s,r),b(s,o),ee(c,s,null),b(n,u),b(n,h),b(h,f),b(h,g),ee(v,h,null),b(n,C),b(n,O),b(O,L),b(O,E),ee($,O,null),A=!0},p(H,K){const z={};!p&&K[0]&2&&(p=!0,z.value=H[1].sizeX,ae(()=>p=!1)),c.$set(z);const X={};!k&&K[0]&2&&(k=!0,X.value=H[1].sizeY,ae(()=>k=!1)),v.$set(X);const ue={};!P&&K[0]&2&&(P=!0,ue.value=H[1].sizeZ,ae(()=>P=!1)),$.$set(ue)},i(H){A||(N(c.$$.fragment,H),N(v.$$.fragment,H),N($.$$.fragment,H),A=!0)},o(H){q(c.$$.fragment,H),q(v.$$.fragment,H),q($.$$.fragment,H),A=!1},d(H){H&&(_(e),_(l),_(n)),te(c),te(v),te($)}}}function Tt(a){let e,t=a[32].label+"",l,n,s,r,i,o,c,p=le(a[32].options),u=[];for(let f=0;f<p.length;f+=1)u[f]=qe(ze(a,p,f));function h(){a[14].call(r,a[31])}return{c(){e=w("label"),l=F(t),s=S(),r=w("select");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=y(f,"LABEL",{for:!0,class:!0});var m=V(e);l=U(m,t),m.forEach(_),s=T(f),r=y(f,"SELECT",{id:!0,class:!0});var g=V(r);for(let v=0;v<u.length;v+=1)u[v].l(g);g.forEach(_),this.h()},h(){d(e,"for",n=a[31]),d(e,"class","block text-sm font-medium mb-2"),d(r,"id",i=a[31]),d(r,"class","w-full p-2 rounded border dark:border-neutral-600 dark:bg-neutral-950 text-sm"),a[1][a[31]]===void 0&&ut(h)},m(f,m){D(f,e,m),b(e,l),D(f,s,m),D(f,r,m);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(r,null);Ae(r,a[1][a[31]],!0),o||(c=[re(r,"change",h),re(r,"change",a[15])],o=!0)},p(f,m){if(a=f,m[0]&1&&t!==(t=a[32].label+"")&&M(l,t),m[0]&33&&n!==(n=a[31])&&d(e,"for",n),m[0]&33){p=le(a[32].options);let g;for(g=0;g<p.length;g+=1){const v=ze(a,p,g);u[g]?u[g].p(v,m):(u[g]=qe(v),u[g].c(),u[g].m(r,null))}for(;g<u.length;g+=1)u[g].d(1);u.length=p.length}m[0]&33&&i!==(i=a[31])&&d(r,"id",i),m[0]&35&&Ae(r,a[1][a[31]])},i:Z,o:Z,d(f){f&&(_(e),_(s),_(r)),_e(u,f),o=!1,Ce(c)}}}function qe(a){let e,t=a[35].label+"",l,n;return{c(){e=w("option"),l=F(t),this.h()},l(s){e=y(s,"OPTION",{});var r=V(e);l=U(r,t),r.forEach(_),this.h()},h(){e.__value=n=a[35].value,Ve(e,e.__value)},m(s,r){D(s,e,r),b(e,l)},p(s,r){r[0]&1&&t!==(t=s[35].label+"")&&M(l,t),r[0]&33&&n!==(n=s[35].value)&&(e.__value=n,Ve(e,e.__value))},d(s){s&&_(e)}}}function Fe(a){let e,t,l=a[32]&&He(a);return{c(){l&&l.c(),e=S()},l(n){l&&l.l(n),e=T(n)},m(n,s){l&&l.m(n,s),D(n,e,s),t=!0},p(n,s){n[32]?l?(l.p(n,s),s[0]&1&&N(l,1)):(l=He(n),l.c(),N(l,1),l.m(e.parentNode,e)):l&&(ce(),q(l,1,1,()=>{l=null}),fe())},i(n){t||(N(l),t=!0)},o(n){q(l),t=!1},d(n){n&&_(e),l&&l.d(n)}}}function $t(a){let e,t,l,n="Object Attributes",s,r,i=a[0].length+"",o,c,p,u,h,f,m,g,v;u=new pe({props:{variant:"outline",class:"w-full p-2 border dark:border-gray-600 rounded mb-4 transition-all hover:bg-neutral-50 dark:hover:bg-neutral-800 flex justify-center items-center gap-2 "+(a[2]?"ring-2 dark:ring-neutral-50 ring-neutral-800":""),$$slots:{default:[At]},$$scope:{ctx:a}}}),u.$on("click",a[10]);let k=a[2]&&Pe(a);const C=[It,Vt],O=[];function L(x,E){return x[0].length>0?0:1}return m=L(a),g=O[m]=C[m](a),{c(){e=w("div"),t=w("label"),l=w("span"),l.textContent=n,s=S(),r=w("span"),o=F(i),c=F(" added"),p=S(),G(u.$$.fragment),h=S(),k&&k.c(),f=S(),g.c(),this.h()},l(x){e=y(x,"DIV",{class:!0});var E=V(e);t=y(E,"LABEL",{class:!0});var $=V(t);l=y($,"SPAN",{"data-svelte-h":!0}),W(l)!=="svelte-1mutspe"&&(l.textContent=n),s=T($),r=y($,"SPAN",{class:!0});var P=V(r);o=U(P,i),c=U(P," added"),P.forEach(_),$.forEach(_),p=T(E),J(u.$$.fragment,E),h=T(E),k&&k.l(E),f=T(E),g.l(E),E.forEach(_),this.h()},h(){d(r,"class","ml-2 px-2 py-0.5 bg-gray-100 dark:bg-gray-800 text-xs rounded-full"),d(t,"class","sm:block text-sm font-medium mb-1.5 flex items-center"),d(e,"class","mb-5")},m(x,E){D(x,e,E),b(e,t),b(t,l),b(t,s),b(t,r),b(r,o),b(r,c),b(e,p),ee(u,e,null),b(e,h),k&&k.m(e,null),b(e,f),O[m].m(e,null),v=!0},p(x,E){(!v||E[0]&1)&&i!==(i=x[0].length+"")&&M(o,i);const $={};E[0]&4&&($.class="w-full p-2 border dark:border-gray-600 rounded mb-4 transition-all hover:bg-neutral-50 dark:hover:bg-neutral-800 flex justify-center items-center gap-2 "+(x[2]?"ring-2 dark:ring-neutral-50 ring-neutral-800":"")),E[1]&1024&&($.$$scope={dirty:E,ctx:x}),u.$set($),x[2]?k?k.p(x,E):(k=Pe(x),k.c(),k.m(e,f)):k&&(k.d(1),k=null);let P=m;m=L(x),m===P?O[m].p(x,E):(ce(),q(O[P],1,1,()=>{O[P]=null}),fe(),g=O[m],g?g.p(x,E):(g=O[m]=C[m](x),g.c()),N(g,1),g.m(e,null))},i(x){v||(N(u.$$.fragment,x),N(g),v=!0)},o(x){q(u.$$.fragment,x),q(g),v=!1},d(x){x&&_(e),te(u),k&&k.d(),O[m].d()}}}function zt(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>'}function Ot(a,e,t){let l;const n=ye();let{attributeValues:s={}}=e,{activeAttributes:r=[]}=e,i=!1;const o=[{id:"material",label:"Material",placeholder:"E.g., wood, metal, plastic, fabric"},{id:"shape",label:"Shape",placeholder:"E.g., round, square or something more elaborate"},{id:"color",label:"Color",placeholder:"E.g., red, blue, yellow, transparent"},{id:"texture",label:"Texture",placeholder:"E.g., smooth, rough, bumpy"},{id:"marking",label:"Markings",placeholder:"Does it have logo, text, engravings etc?"},{id:"smell",label:"Smell",placeholder:"E.g., sweet, odorless, pungent"},{id:"functionality",label:"Functionality",placeholder:"E.g., cutting, writing, art"},{id:"period",label:"Time Period",placeholder:"E.g., 1800s, 1900s, 2000s"},{id:"location",label:"Location",placeholder:"Where is it typically found? E.g., Europe, Asia"},{id:"writtenText",label:"Written Text",placeholder:"Any writing on the object"},{id:"hardness",label:"Hardness",placeholder:"E.g., soft, hard, flexible"},{id:"value",label:"Price ($)",placeholder:"Estimated value in dollars",type:"number"},{id:"originOfAcquisition",label:"Origin of Acquisition",placeholder:"Where/how you got it"},{id:"pattern",label:"Pattern",placeholder:"E.g., striped, checkered, floral"},{id:"print",label:"Print",placeholder:"Any printed design or imagery"},{id:"dimensions",label:"Dimensions",placeholder:"Size measurements",type:"dimensions"},{id:"weight",label:"Weight (grams)",placeholder:"Weight in grams",type:"number"},{id:"handmade",label:"Handmade",placeholder:"",type:"checkbox"},{id:"oneOfAKind",label:"One of a Kind",placeholder:"",type:"checkbox"}];function c(z){r.includes(z)||(t(0,r=[...r,z]),n("update",{activeAttributes:r})),t(2,i=!1)}function p(z){t(0,r=r.filter(X=>X!==z)),n("update",{activeAttributes:r})}function u(z,X){t(1,s[z]=X,s),n("valuechange",{attributeValues:s})}function h(z){t(1,s.color=z.detail.color,s),t(1,s.colorHex=z.detail.hex,s),n("valuechange",{attributeValues:s})}function f(z){u("material",z.detail.value)}const m=()=>t(2,i=!i),g=()=>t(2,i=!1),v=z=>c(z.id),k=z=>p(z);function C(z){s[z]=ot(this),t(1,s),t(5,o),t(0,r)}const O=()=>n("valuechange",{attributeValues:s});function L(z){a.$$.not_equal(s.sizeX,z)&&(s.sizeX=z,t(1,s))}const x=()=>n("valuechange",{attributeValues:s});function E(z){a.$$.not_equal(s.sizeY,z)&&(s.sizeY=z,t(1,s))}const $=()=>n("valuechange",{attributeValues:s});function P(z){a.$$.not_equal(s.sizeZ,z)&&(s.sizeZ=z,t(1,s))}const A=()=>n("valuechange",{attributeValues:s});function I(z){s[z]=this.checked,t(1,s),t(5,o),t(0,r)}const j=()=>n("valuechange",{attributeValues:s});function B(z){a.$$.not_equal(s.color,z)&&(s.color=z,t(1,s))}function Q(z){a.$$.not_equal(s.colorHex,z)&&(s.colorHex=z,t(1,s))}function R(z){a.$$.not_equal(s.material,z)&&(s.material=z,t(1,s))}function Y(z,X){a.$$.not_equal(s[X],z)&&(s[X]=z,t(1,s))}const H=()=>n("valuechange",{attributeValues:s}),K=(z,X)=>X.id===z;return a.$$set=z=>{"attributeValues"in z&&t(1,s=z.attributeValues),"activeAttributes"in z&&t(0,r=z.activeAttributes)},a.$$.update=()=>{a.$$.dirty[0]&1&&t(3,l=o.filter(z=>!r.includes(z.id)))},[r,s,i,l,n,o,c,p,h,f,m,g,v,k,C,O,L,x,E,$,P,A,I,j,B,Q,R,Y,H,K]}class Pt extends ge{constructor(e){super(),ve(this,e,Ot,$t,be,{attributeValues:1,activeAttributes:0},null,[-1,-1])}}async function Nt(a,e){const t=await fetch(`/api/mysteryObjects/${a}/subParts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to add sub-part: ${t.statusText}`);return await t.json()}async function Bt(a,e,t){const l=await fetch(`/api/mysteryObjects/${a}/subParts/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!l.ok)throw new Error(`Failed to update sub-part: ${l.statusText}`);return await l.json()}async function Ht(a,e){const t=await fetch(`/api/mysteryObjects/${a}/subParts/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to remove sub-part: ${t.statusText}`);return!0}function Ue(a,e,t){const l=a.slice();return l[22]=e[t],l}function qt(a){let e,t,l,n;return{c(){e=ie("svg"),t=ie("line"),l=ie("line"),n=F(`\r
                Add Part`),this.h()},l(s){e=oe(s,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var r=V(e);t=oe(r,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),V(t).forEach(_),l=oe(r,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),V(l).forEach(_),r.forEach(_),n=U(s,`\r
                Add Part`),this.h()},h(){d(t,"x1","12"),d(t,"y1","5"),d(t,"x2","12"),d(t,"y2","19"),d(l,"x1","5"),d(l,"y1","12"),d(l,"x2","19"),d(l,"y2","12"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","16"),d(e,"height","16"),d(e,"viewBox","0 0 24 24"),d(e,"fill","none"),d(e,"stroke","currentColor"),d(e,"stroke-width","2"),d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"class","mr-1")},m(s,r){D(s,e,r),b(e,t),b(e,l),D(s,n,r)},d(s){s&&(_(e),_(n))}}}function Ft(a){let e;return{c(){e=F("Cancel")},l(t){e=U(t,"Cancel")},m(t,l){D(t,e,l)},d(t){t&&_(e)}}}function Ut(a){let e;function t(s,r){return s[1]?Ft:qt}let l=t(a),n=l(a);return{c(){n.c(),e=we()},l(s){n.l(s),e=we()},m(s,r){n.m(s,r),D(s,e,r)},p(s,r){l!==(l=t(s))&&(n.d(1),n=l(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&_(e),n.d(s)}}}function Me(a){let e,t;return{c(){e=w("div"),t=F(a[4]),this.h()},l(l){e=y(l,"DIV",{class:!0});var n=V(e);t=U(n,a[4]),n.forEach(_),this.h()},h(){d(e,"class","bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 p-3 rounded-md mb-4")},m(l,n){D(l,e,n),b(e,t)},p(l,n){n&16&&M(t,l[4])},d(l){l&&_(e)}}}function Re(a){let e,t,l=a[2]?"Edit Part":"Add New Part",n,s,r,i,o="Description*",c,p,u,h,f,m,g,v,k,C,O,L,x;function E(j){a[16](j)}let $={id:"description",class:"w-full p-2 border rounded dark:border-gray-600 h-20",placeholder:"Describe this part of the object"};a[5]!==void 0&&($.value=a[5]),p=new dt({props:$}),ne.push(()=>se(p,"value",E));function P(j){a[17](j)}function A(j){a[18](j)}let I={};return a[6]!==void 0&&(I.attributeValues=a[6]),a[7]!==void 0&&(I.activeAttributes=a[7]),f=new Pt({props:I}),ne.push(()=>se(f,"attributeValues",P)),ne.push(()=>se(f,"activeAttributes",A)),f.$on("update",a[9]),f.$on("valuechange",a[10]),C=new pe({props:{variant:"outline",size:"sm",class:"text-xs",$$slots:{default:[Mt]},$$scope:{ctx:a}}}),C.$on("click",a[8]),L=new pe({props:{variant:"default",size:"sm",class:"text-xs",disabled:a[3],$$slots:{default:[Yt]},$$scope:{ctx:a}}}),L.$on("click",a[12]),{c(){e=w("div"),t=w("h4"),n=F(l),s=S(),r=w("div"),i=w("label"),i.textContent=o,c=S(),G(p.$$.fragment),h=S(),G(f.$$.fragment),v=S(),k=w("div"),G(C.$$.fragment),O=S(),G(L.$$.fragment),this.h()},l(j){e=y(j,"DIV",{class:!0});var B=V(e);t=y(B,"H4",{class:!0});var Q=V(t);n=U(Q,l),Q.forEach(_),s=T(B),r=y(B,"DIV",{class:!0});var R=V(r);i=y(R,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(i)!=="svelte-1hpburp"&&(i.textContent=o),c=T(R),J(p.$$.fragment,R),R.forEach(_),h=T(B),J(f.$$.fragment,B),v=T(B),k=y(B,"DIV",{class:!0});var Y=V(k);J(C.$$.fragment,Y),O=T(Y),J(L.$$.fragment,Y),Y.forEach(_),B.forEach(_),this.h()},h(){d(t,"class","text-sm font-medium mb-3"),d(i,"for","description"),d(i,"class","block text-sm font-medium mb-1.5"),d(r,"class","mb-4"),d(k,"class","flex justify-end mt-4 gap-2"),d(e,"class","bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded-md p-4 mb-4")},m(j,B){D(j,e,B),b(e,t),b(t,n),b(e,s),b(e,r),b(r,i),b(r,c),ee(p,r,null),b(e,h),ee(f,e,null),b(e,v),b(e,k),ee(C,k,null),b(k,O),ee(L,k,null),x=!0},p(j,B){(!x||B&4)&&l!==(l=j[2]?"Edit Part":"Add New Part")&&M(n,l);const Q={};!u&&B&32&&(u=!0,Q.value=j[5],ae(()=>u=!1)),p.$set(Q);const R={};!m&&B&64&&(m=!0,R.attributeValues=j[6],ae(()=>m=!1)),!g&&B&128&&(g=!0,R.activeAttributes=j[7],ae(()=>g=!1)),f.$set(R);const Y={};B&33554432&&(Y.$$scope={dirty:B,ctx:j}),C.$set(Y);const H={};B&8&&(H.disabled=j[3]),B&33554440&&(H.$$scope={dirty:B,ctx:j}),L.$set(H)},i(j){x||(N(p.$$.fragment,j),N(f.$$.fragment,j),N(C.$$.fragment,j),N(L.$$.fragment,j),x=!0)},o(j){q(p.$$.fragment,j),q(f.$$.fragment,j),q(C.$$.fragment,j),q(L.$$.fragment,j),x=!1},d(j){j&&_(e),te(p),te(f),te(C),te(L)}}}function Mt(a){let e;return{c(){e=F("Cancel")},l(t){e=U(t,"Cancel")},m(t,l){D(t,e,l)},d(t){t&&_(e)}}}function Rt(a){let e;return{c(){e=F("Save Part")},l(t){e=U(t,"Save Part")},m(t,l){D(t,e,l)},d(t){t&&_(e)}}}function Wt(a){let e,t;return{c(){e=w("span"),t=F(`\r
                        Saving...`),this.h()},l(l){e=y(l,"SPAN",{class:!0}),V(e).forEach(_),t=U(l,`\r
                        Saving...`),this.h()},h(){d(e,"class","inline-block h-4 w-4 border-2 border-current/30 border-t-current rounded-full animate-spin mr-2")},m(l,n){D(l,e,n),D(l,t,n)},d(l){l&&(_(e),_(t))}}}function Yt(a){let e;function t(s,r){return s[3]?Wt:Rt}let l=t(a),n=l(a);return{c(){n.c(),e=we()},l(s){n.l(s),e=we()},m(s,r){n.m(s,r),D(s,e,r)},p(s,r){l!==(l=t(s))&&(n.d(1),n=l(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&_(e),n.d(s)}}}function Xt(a){let e,t='No parts added yet. Click "Add Part" to create object sub-parts.';return{c(){e=w("div"),e.textContent=t,this.h()},l(l){e=y(l,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-kc4nes"&&(e.textContent=t),this.h()},h(){d(e,"class","bg-neutral-50 dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded-md p-4 text-center text-sm text-neutral-500")},m(l,n){D(l,e,n)},p:Z,i:Z,o:Z,d(l){l&&_(e)}}}function Zt(a){let e,t=[],l=new Map,n,s=le(a[0]);const r=i=>i[22].id;for(let i=0;i<s.length;i+=1){let o=Ue(a,s,i),c=r(o);l.set(c,t[i]=Ke(c,o))}return{c(){e=w("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=y(i,"DIV",{class:!0});var o=V(e);for(let c=0;c<t.length;c+=1)t[c].l(o);o.forEach(_),this.h()},h(){d(e,"class","space-y-3")},m(i,o){D(i,e,o);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);n=!0},p(i,o){o&10241&&(s=le(i[0]),ce(),t=ct(t,o,r,1,i,s,l,e,ft,Ke,null,Ue),fe())},i(i){if(!n){for(let o=0;o<s.length;o+=1)N(t[o]);n=!0}},o(i){for(let o=0;o<t.length;o+=1)q(t[o]);n=!1},d(i){i&&_(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function Kt(a){let e,t;return{c(){e=ie("svg"),t=ie("path"),this.h()},l(l){e=oe(l,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var n=V(e);t=oe(n,"path",{d:!0}),V(t).forEach(_),n.forEach(_),this.h()},h(){d(t,"d","M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","14"),d(e,"height","14"),d(e,"viewBox","0 0 24 24"),d(e,"fill","none"),d(e,"stroke","currentColor"),d(e,"stroke-width","2"),d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round")},m(l,n){D(l,e,n),b(e,t)},p:Z,d(l){l&&_(e)}}}function Qt(a){let e,t,l;return{c(){e=ie("svg"),t=ie("polyline"),l=ie("path"),this.h()},l(n){e=oe(n,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var s=V(e);t=oe(s,"polyline",{points:!0}),V(t).forEach(_),l=oe(s,"path",{d:!0}),V(l).forEach(_),s.forEach(_),this.h()},h(){d(t,"points","3 6 5 6 21 6"),d(l,"d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","14"),d(e,"height","14"),d(e,"viewBox","0 0 24 24"),d(e,"fill","none"),d(e,"stroke","currentColor"),d(e,"stroke-width","2"),d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round")},m(n,s){D(n,e,s),b(e,t),b(e,l)},p:Z,d(n){n&&_(e)}}}function We(a){let e,t,l="Material:",n,s,r=a[22].material+"",i;return{c(){e=w("div"),t=w("span"),t.textContent=l,n=S(),s=w("span"),i=F(r),this.h()},l(o){e=y(o,"DIV",{class:!0});var c=V(e);t=y(c,"SPAN",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-uyrk2x"&&(t.textContent=l),n=T(c),s=y(c,"SPAN",{});var p=V(s);i=U(p,r),p.forEach(_),c.forEach(_),this.h()},h(){d(t,"class","text-neutral-500"),d(e,"class","flex justify-between")},m(o,c){D(o,e,c),b(e,t),b(e,n),b(e,s),b(s,i)},p(o,c){c&1&&r!==(r=o[22].material+"")&&M(i,r)},d(o){o&&_(e)}}}function Ye(a){let e,t,l,n=a[22].color+"",s;return{c(){e=w("span"),t=S(),l=w("span"),s=F(n),this.h()},l(r){e=y(r,"SPAN",{class:!0,style:!0}),V(e).forEach(_),t=T(r),l=y(r,"SPAN",{});var i=V(l);s=U(i,n),i.forEach(_),this.h()},h(){d(e,"class","w-3 h-3 inline-block rounded border"),ke(e,"background-color",a[22].color)},m(r,i){D(r,e,i),D(r,t,i),D(r,l,i),b(l,s)},p(r,i){i&1&&ke(e,"background-color",r[22].color),i&1&&n!==(n=r[22].color+"")&&M(s,n)},d(r){r&&(_(e),_(t),_(l))}}}function Xe(a){let e,t,l="Shape:",n,s,r=a[22].shape+"",i;return{c(){e=w("div"),t=w("span"),t.textContent=l,n=S(),s=w("span"),i=F(r),this.h()},l(o){e=y(o,"DIV",{class:!0});var c=V(e);t=y(c,"SPAN",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-de34jr"&&(t.textContent=l),n=T(c),s=y(c,"SPAN",{});var p=V(s);i=U(p,r),p.forEach(_),c.forEach(_),this.h()},h(){d(t,"class","text-neutral-500"),d(e,"class","flex justify-between")},m(o,c){D(o,e,c),b(e,t),b(e,n),b(e,s),b(s,i)},p(o,c){c&1&&r!==(r=o[22].shape+"")&&M(i,r)},d(o){o&&_(e)}}}function Ze(a){let e,t,l="Texture:",n,s,r=a[22].texture+"",i;return{c(){e=w("div"),t=w("span"),t.textContent=l,n=S(),s=w("span"),i=F(r),this.h()},l(o){e=y(o,"DIV",{class:!0});var c=V(e);t=y(c,"SPAN",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-12pdhd5"&&(t.textContent=l),n=T(c),s=y(c,"SPAN",{});var p=V(s);i=U(p,r),p.forEach(_),c.forEach(_),this.h()},h(){d(t,"class","text-neutral-500"),d(e,"class","flex justify-between")},m(o,c){D(o,e,c),b(e,t),b(e,n),b(e,s),b(s,i)},p(o,c){c&1&&r!==(r=o[22].texture+"")&&M(i,r)},d(o){o&&_(e)}}}function Ke(a,e){let t,l,n,s=(e[22].description||"Unnamed Part")+"",r,i,o,c,p,u,h,f,m,g,v,k,C;function O(){return e[19](e[22])}c=new pe({props:{variant:"ghost",size:"xs",class:"h-6 px-2 text-xs",$$slots:{default:[Kt]},$$scope:{ctx:e}}}),c.$on("click",O);function L(){return e[20](e[22])}u=new pe({props:{variant:"ghost",size:"xs",class:"h-6 px-2 text-xs text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",$$slots:{default:[Qt]},$$scope:{ctx:e}}}),u.$on("click",L);let x=e[22].material&&We(e),E=e[22].color&&Ye(e),$=e[22].shape&&Xe(e),P=e[22].texture&&Ze(e);return{key:a,first:null,c(){t=w("div"),l=w("div"),n=w("h5"),r=F(s),i=S(),o=w("div"),G(c.$$.fragment),p=S(),G(u.$$.fragment),h=S(),f=w("div"),x&&x.c(),m=S(),E&&E.c(),g=S(),$&&$.c(),v=S(),P&&P.c(),k=S(),this.h()},l(A){t=y(A,"DIV",{class:!0});var I=V(t);l=y(I,"DIV",{class:!0});var j=V(l);n=y(j,"H5",{class:!0});var B=V(n);r=U(B,s),B.forEach(_),i=T(j),o=y(j,"DIV",{class:!0});var Q=V(o);J(c.$$.fragment,Q),p=T(Q),J(u.$$.fragment,Q),Q.forEach(_),j.forEach(_),h=T(I),f=y(I,"DIV",{class:!0});var R=V(f);x&&x.l(R),m=T(R),E&&E.l(R),g=T(R),$&&$.l(R),v=T(R),P&&P.l(R),R.forEach(_),k=T(I),I.forEach(_),this.h()},h(){d(n,"class","font-medium text-sm"),d(o,"class","flex gap-1"),d(l,"class","flex justify-between items-start mb-2"),d(f,"class","grid grid-cols-2 gap-x-4 gap-y-1 text-xs mt-2"),d(t,"class","bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-md p-3"),this.first=t},m(A,I){D(A,t,I),b(t,l),b(l,n),b(n,r),b(l,i),b(l,o),ee(c,o,null),b(o,p),ee(u,o,null),b(t,h),b(t,f),x&&x.m(f,null),b(f,m),E&&E.m(f,null),b(f,g),$&&$.m(f,null),b(f,v),P&&P.m(f,null),b(t,k),C=!0},p(A,I){e=A,(!C||I&1)&&s!==(s=(e[22].description||"Unnamed Part")+"")&&M(r,s);const j={};I&33554432&&(j.$$scope={dirty:I,ctx:e}),c.$set(j);const B={};I&33554432&&(B.$$scope={dirty:I,ctx:e}),u.$set(B),e[22].material?x?x.p(e,I):(x=We(e),x.c(),x.m(f,m)):x&&(x.d(1),x=null),e[22].color?E?E.p(e,I):(E=Ye(e),E.c(),E.m(f,g)):E&&(E.d(1),E=null),e[22].shape?$?$.p(e,I):($=Xe(e),$.c(),$.m(f,v)):$&&($.d(1),$=null),e[22].texture?P?P.p(e,I):(P=Ze(e),P.c(),P.m(f,null)):P&&(P.d(1),P=null)},i(A){C||(N(c.$$.fragment,A),N(u.$$.fragment,A),C=!0)},o(A){q(c.$$.fragment,A),q(u.$$.fragment,A),C=!1},d(A){A&&_(t),te(c),te(u),x&&x.d(),E&&E.d(),$&&$.d(),P&&P.d()}}}function Gt(a){let e,t,l,n="Object Parts",s,r,i,o,c,p,u,h;r=new pe({props:{variant:"outline",size:"sm",class:"text-xs",$$slots:{default:[Ut]},$$scope:{ctx:a}}}),r.$on("click",a[15]);let f=a[4]&&Me(a),m=a[1]&&Re(a);const g=[Zt,Xt],v=[];function k(C,O){return C[0].length>0?0:1}return p=k(a),u=v[p]=g[p](a),{c(){e=w("div"),t=w("div"),l=w("h3"),l.textContent=n,s=S(),G(r.$$.fragment),i=S(),f&&f.c(),o=S(),m&&m.c(),c=S(),u.c(),this.h()},l(C){e=y(C,"DIV",{class:!0});var O=V(e);t=y(O,"DIV",{class:!0});var L=V(t);l=y(L,"H3",{class:!0,"data-svelte-h":!0}),W(l)!=="svelte-1auwms2"&&(l.textContent=n),s=T(L),J(r.$$.fragment,L),L.forEach(_),i=T(O),f&&f.l(O),o=T(O),m&&m.l(O),c=T(O),u.l(O),O.forEach(_),this.h()},h(){d(l,"class","text-lg font-medium"),d(t,"class","flex items-center justify-between mb-4"),d(e,"class","mb-6")},m(C,O){D(C,e,O),b(e,t),b(t,l),b(t,s),ee(r,t,null),b(e,i),f&&f.m(e,null),b(e,o),m&&m.m(e,null),b(e,c),v[p].m(e,null),h=!0},p(C,[O]){const L={};O&33554434&&(L.$$scope={dirty:O,ctx:C}),r.$set(L),C[4]?f?f.p(C,O):(f=Me(C),f.c(),f.m(e,o)):f&&(f.d(1),f=null),C[1]?m?(m.p(C,O),O&2&&N(m,1)):(m=Re(C),m.c(),N(m,1),m.m(e,c)):m&&(ce(),q(m,1,1,()=>{m=null}),fe());let x=p;p=k(C),p===x?v[p].p(C,O):(ce(),q(v[x],1,1,()=>{v[x]=null}),fe(),u=v[p],u?u.p(C,O):(u=v[p]=g[p](C),u.c()),N(u,1),u.m(e,null))},i(C){h||(N(r.$$.fragment,C),N(m),N(u),h=!0)},o(C){q(r.$$.fragment,C),q(m),q(u),h=!1},d(C){C&&_(e),te(r),f&&f.d(),m&&m.d(),v[p].d()}}}function Jt(a,e,t){const l=ye();let{mysteryObjectId:n=null}=e,{subParts:s=[]}=e,r=!1,i=null,o=!1,c=null,p="",u={},h=[];function f(){t(5,p=""),t(6,u={}),t(7,h=[]),t(2,i=null),t(1,r=!1)}function m(A){t(7,h=A.detail.activeAttributes)}function g(A){t(6,u=A.detail.attributeValues)}function v(A){t(2,i=A.id),t(5,p=A.description||""),t(6,u={material:A.material||"",shape:A.shape||"",color:A.color||"",texture:A.texture||"",writtenText:A.writtenText||"",descriptionOfParts:A.descriptionOfParts||"",location:A.location||"",hardness:A.hardness||"",timePeriod:A.timePeriod||"",smell:A.smell||"",taste:A.taste||"",functionality:A.functionality||"",markings:A.markings||"",pattern:A.pattern||"",brand:A.brand||"",print:A.print||"",imageLicenses:A.imageLicenses||"",value:A.value||"",originOfAcquisition:A.originOfAcquisition||"",weight:A.weight||"",handmade:A.handmade||!1,oneOfAKind:A.oneOfAKind||!1,sizeX:A.sizeX||"",sizeY:A.sizeY||"",sizeZ:A.sizeZ||""}),t(7,h=Object.keys(u).filter(I=>{const j=u[I];return j!==""&&j!==null&&j!==void 0})),t(1,r=!0)}async function k(){if(!p.trim()){t(4,c="Description is required");return}t(3,o=!0),t(4,c=null);try{const A={description:p,material:u.material,color:u.color,shape:u.shape,location:u.location,smell:u.smell,taste:u.taste,texture:u.texture,functionality:u.functionality,markings:u.markings,handmade:u.handmade||!1,oneOfAKind:u.oneOfAKind||!1,weight:parseFloat(u.weight)||null,timePeriod:u.timePeriod,writtenText:u.writtenText,descriptionOfParts:u.descriptionOfParts,hardness:u.hardness,value:parseFloat(u.value)||null,originOfAcquisition:u.originOfAcquisition,pattern:u.pattern,brand:u.brand,print:u.print,imageLicenses:u.imageLicenses,sizeX:parseFloat(u.sizeX)||null,sizeY:parseFloat(u.sizeY)||null,sizeZ:parseFloat(u.sizeZ)||null,item_condition:u.itemCondition||null};let I;if(n===null){const j=Date.now();I={...A,id:j},t(0,s=[...s,I])}else i?(I=await Bt(n,i,A),t(0,s=s.map(j=>j.id===i?I:j))):(I=await Nt(n,A),t(0,s=[...s,I]));l("update",{subParts:s}),f()}catch(A){console.error("Error saving sub-part:",A),t(4,c=A.message||"Failed to save sub-part")}finally{t(3,o=!1)}}async function C(A){if(confirm("Are you sure you want to delete this part?")){t(3,o=!0),t(4,c=null);try{n===null?t(0,s=s.filter(I=>I.id!==A)):(await Ht(n,A),t(0,s=s.filter(I=>I.id!==A))),l("update",{subParts:s})}catch(I){console.error("Error deleting sub-part:",I),t(4,c=I.message||"Failed to delete sub-part")}finally{t(3,o=!1)}}}const O=()=>{f(),t(1,r=!r)};function L(A){p=A,t(5,p)}function x(A){u=A,t(6,u)}function E(A){h=A,t(7,h)}const $=A=>v(A),P=A=>C(A.id);return a.$$set=A=>{"mysteryObjectId"in A&&t(14,n=A.mysteryObjectId),"subParts"in A&&t(0,s=A.subParts)},[s,r,i,o,c,p,u,h,f,m,g,v,k,C,n,O,L,x,E,$,P]}class hl extends ge{constructor(e){super(),ve(this,e,Jt,Gt,be,{mysteryObjectId:14,subParts:0})}}function Qe(a,e,t){const l=a.slice();return l[19]=e[t],l}function Ge(a,e,t){const l=a.slice();return l[22]=e[t],l}function Je(a){let e,t="Loading...";return{c(){e=w("p"),e.textContent=t,this.h()},l(l){e=y(l,"P",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-17rvozf"&&(e.textContent=t),this.h()},h(){d(e,"class","mt-2 text-sm")},m(l,n){D(l,e,n)},d(l){l&&_(e)}}}function et(a){let e,t,l=le(a[4]),n=[];for(let r=0;r<l.length;r+=1)n[r]=tt(Ge(a,l,r));const s=r=>q(n[r],1,1,()=>{n[r]=null});return{c(){e=w("ul");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=y(r,"UL",{class:!0});var i=V(e);for(let o=0;o<n.length;o+=1)n[o].l(i);i.forEach(_),this.h()},h(){d(e,"class","list-none p-0 mt-2 border bg-white dark:bg-neutral-950 rounded-md absolute w-full max-h-60 overflow-y-auto shadow-lg z-10")},m(r,i){D(r,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);t=!0},p(r,i){if(i&1040){l=le(r[4]);let o;for(o=0;o<l.length;o+=1){const c=Ge(r,l,o);n[o]?(n[o].p(c,i),N(n[o],1)):(n[o]=tt(c),n[o].c(),N(n[o],1),n[o].m(e,null))}for(ce(),o=l.length;o<n.length;o+=1)s(o);fe()}},i(r){if(!t){for(let i=0;i<l.length;i+=1)N(n[i]);t=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)q(n[i]);t=!1},d(r){r&&_(e),_e(n,r)}}}function el(a){let e,t,l=a[22].label+"",n,s,r,i=a[22].description+"",o;return{c(){e=w("div"),t=w("div"),n=F(l),s=S(),r=w("div"),o=F(i),this.h()},l(c){e=y(c,"DIV",{});var p=V(e);t=y(p,"DIV",{class:!0});var u=V(t);n=U(u,l),u.forEach(_),s=T(p),r=y(p,"DIV",{class:!0});var h=V(r);o=U(h,i),h.forEach(_),p.forEach(_),this.h()},h(){d(t,"class","font-medium"),d(r,"class","text-xs text-gray-500 dark:text-gray-400")},m(c,p){D(c,e,p),b(e,t),b(t,n),b(e,s),b(e,r),b(r,o)},p(c,p){p&16&&l!==(l=c[22].label+"")&&M(n,l),p&16&&i!==(i=c[22].description+"")&&M(o,i)},d(c){c&&_(e)}}}function tt(a){let e,t,l,n;function s(){return a[17](a[22])}return t=new pe({props:{variant:"ghost",class:"w-full text-left p-2 justify-start h-auto",$$slots:{default:[el]},$$scope:{ctx:a}}}),t.$on("click",s),{c(){e=w("li"),G(t.$$.fragment),l=S()},l(r){e=y(r,"LI",{});var i=V(e);J(t.$$.fragment,i),l=T(i),i.forEach(_)},m(r,i){D(r,e,i),ee(t,e,null),b(e,l),n=!0},p(r,i){a=r;const o={};i&33554448&&(o.$$scope={dirty:i,ctx:a}),t.$set(o)},i(r){n||(N(t.$$.fragment,r),n=!0)},o(r){q(t.$$.fragment,r),n=!1},d(r){r&&_(e),te(t)}}}function tl(a){let e,t="No tags added yet. Search for relevant terms above.";return{c(){e=w("p"),e.textContent=t,this.h()},l(l){e=y(l,"P",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1hes4d4"&&(e.textContent=t),this.h()},h(){d(e,"class","text-sm text-gray-500 dark:text-gray-400 mt-2")},m(l,n){D(l,e,n)},p:Z,d(l){l&&_(e)}}}function ll(a){let e,t=le(a[0]),l=[];for(let n=0;n<t.length;n+=1)l[n]=rt(Qe(a,t,n));return{c(){e=w("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=y(n,"DIV",{class:!0});var s=V(e);for(let r=0;r<l.length;r+=1)l[r].l(s);s.forEach(_),this.h()},h(){d(e,"class","grid grid-cols-1 gap-2 sm:grid-cols-2")},m(n,s){D(n,e,s);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(n,s){if(s&2049){t=le(n[0]);let r;for(r=0;r<t.length;r+=1){const i=Qe(n,t,r);l[r]?l[r].p(i,s):(l[r]=rt(i),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(n){n&&_(e),_e(l,n)}}}function lt(a){let e,t=a[19].description+"",l;return{c(){e=w("p"),l=F(t),this.h()},l(n){e=y(n,"P",{class:!0});var s=V(e);l=U(s,t),s.forEach(_),this.h()},h(){d(e,"class","text-xs mt-1 line-clamp-2 text-gray-600 dark:text-gray-400")},m(n,s){D(n,e,s),b(e,l)},p(n,s){s&1&&t!==(t=n[19].description+"")&&M(l,t)},d(n){n&&_(e)}}}function rt(a){let e,t,l,n=nl()+"",s,r,i,o=a[19].label+"",c,p,u,h=a[19].id+"",f,m,g,v,k,C;function O(){return a[18](a[19])}let L=a[19].description&&lt(a);return{c(){e=w("div"),t=w("button"),l=new at(!1),s=S(),r=w("div"),i=w("div"),c=F(o),p=S(),u=w("a"),f=F(h),g=S(),L&&L.c(),v=S(),this.h()},l(x){e=y(x,"DIV",{class:!0});var E=V(e);t=y(E,"BUTTON",{type:!0,class:!0,title:!0});var $=V(t);l=st($,!1),$.forEach(_),s=T(E),r=y(E,"DIV",{class:!0});var P=V(r);i=y(P,"DIV",{class:!0});var A=V(i);c=U(A,o),A.forEach(_),p=T(P),u=y(P,"A",{href:!0,target:!0,rel:!0,class:!0});var I=V(u);f=U(I,h),I.forEach(_),g=T(P),L&&L.l(P),P.forEach(_),v=T(E),E.forEach(_),this.h()},h(){l.a=null,d(t,"type","button"),d(t,"class","absolute top-2 right-2 h-6 w-6 rounded-full flex items-center justify-center bg-gray-100 text-gray-500 hover:bg-red-50 hover:text-red-500 dark:bg-gray-800 dark:hover:bg-gray-700 transition-colors"),d(t,"title","Remove tag"),d(i,"class","font-medium text-sm mb-1"),d(u,"href",m=`https://www.wikidata.org/wiki/${a[19].id}`),d(u,"target","_blank"),d(u,"rel","noopener noreferrer"),d(u,"class","text-xs text-gray-500 hover:text-rose-700 dark:hover:text-rose-400 transition-colors"),d(r,"class","pr-6"),d(e,"class","relative p-3 rounded-md border bg-gray-50 dark:bg-neutral-900 dark:border-gray-700 transition-all hover:shadow-sm")},m(x,E){D(x,e,E),b(e,t),l.m(n,t),b(e,s),b(e,r),b(r,i),b(i,c),b(r,p),b(r,u),b(u,f),b(r,g),L&&L.m(r,null),b(e,v),k||(C=re(t,"click",O),k=!0)},p(x,E){a=x,E&1&&o!==(o=a[19].label+"")&&M(c,o),E&1&&h!==(h=a[19].id+"")&&M(f,h),E&1&&m!==(m=`https://www.wikidata.org/wiki/${a[19].id}`)&&d(u,"href",m),a[19].description?L?L.p(a,E):(L=lt(a),L.c(),L.m(r,null)):L&&(L.d(1),L=null)},d(x){x&&_(e),L&&L.d(),k=!1,C()}}}function rl(a){let e,t,l,n,s,r,i,o;function c(v){a[16](v)}let p={type:"text",placeholder:"Add relevant tags",class:"w-full p-2 border rounded dark:border-gray-600"};a[1]!==void 0&&(p.value=a[1]),t=new me({props:p}),ne.push(()=>se(t,"value",c)),t.$on("input",a[9]);let u=a[2]&&Je(),h=a[3]&&a[4].length>0&&et(a);function f(v,k){return v[0].length>0?ll:tl}let m=f(a),g=m(a);return{c(){e=w("div"),G(t.$$.fragment),n=S(),u&&u.c(),s=S(),h&&h.c(),r=S(),i=w("div"),g.c(),this.h()},l(v){e=y(v,"DIV",{class:!0});var k=V(e);J(t.$$.fragment,k),n=T(k),u&&u.l(k),s=T(k),h&&h.l(k),r=T(k),i=y(k,"DIV",{class:!0});var C=V(i);g.l(C),C.forEach(_),k.forEach(_),this.h()},h(){d(i,"class","selected-items mt-4"),d(e,"class","w-full mx-auto relative search-container text-sm")},m(v,k){D(v,e,k),ee(t,e,null),b(e,n),u&&u.m(e,null),b(e,s),h&&h.m(e,null),b(e,r),b(e,i),g.m(i,null),o=!0},p(v,[k]){const C={};!l&&k&2&&(l=!0,C.value=v[1],ae(()=>l=!1)),t.$set(C),v[2]?u||(u=Je(),u.c(),u.m(e,s)):u&&(u.d(1),u=null),v[3]&&v[4].length>0?h?(h.p(v,k),k&24&&N(h,1)):(h=et(v),h.c(),N(h,1),h.m(e,r)):h&&(ce(),q(h,1,1,()=>{h=null}),fe()),m===(m=f(v))&&g?g.p(v,k):(g.d(1),g=m(v),g&&(g.c(),g.m(i,null)))},i(v){o||(N(t.$$.fragment,v),N(h),o=!0)},o(v){q(t.$$.fragment,v),q(h),o=!1},d(v){v&&_(e),te(t),u&&u.d(),h&&h.d(),g.d()}}}function nl(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>'}function al(a,e,t){let l,n,s,r,i="",o=he([]);de(a,o,E=>t(4,r=E));let c=he([]);de(a,c,E=>t(0,l=E));let p=he(!1);de(a,p,E=>t(2,n=E));let u=he(!1);de(a,u,E=>t(3,s=E));const h=async()=>{if(!i){o.set([]),u.set(!1);return}p.set(!0),u.set(!0);try{const P=(await(await fetch(`https://www.wikidata.org/w/api.php?action=wbsearchentities&search=${encodeURIComponent(i)}&language=en&format=json&origin=*`)).json()).search.map(A=>({id:A.id,label:A.label,description:A.description||"No description available"}));o.set(P)}catch(E){console.error("Search failed",E),o.set([])}finally{p.set(!1)}},f=E=>{c.update($=>$.find(P=>P.id===E.id)?$:[...$,E]),u.set(!1)},m=E=>{c.update($=>$.filter(P=>P.id!==E))};nt(()=>{const E=$=>{document.querySelector(".search-container").contains($.target)||u.set(!1)};return document.addEventListener("click",E),()=>document.removeEventListener("click",E)});let{tags:g}=e,{labels:v}=e,{selectedCount:k=0}=e,C=!1;function O(E){i=E,t(1,i)}const L=E=>f(E),x=E=>m(E.id);return a.$$set=E=>{"tags"in E&&t(12,g=E.tags),"labels"in E&&t(13,v=E.labels),"selectedCount"in E&&t(14,k=E.selectedCount)},a.$$.update=()=>{if(a.$$.dirty&1&&t(12,g=l),a.$$.dirty&1&&t(13,v=l),a.$$.dirty&1&&t(14,k=l.length),a.$$.dirty&36865&&typeof window<"u"&&Array.isArray(g)){let E=l.map(P=>P.id).sort().join(","),$=g.map(P=>P.id).sort().join(",");(!C||E!==$)&&(c.set(g),g.length>0&&t(15,C=!0))}},[l,i,n,s,r,o,c,p,u,h,f,m,g,v,k,C,O,L,x]}class pl extends ge{constructor(e){super(),ve(this,e,al,rl,be,{tags:12,labels:13,selectedCount:14})}}export{hl as M,Pt as O,pl as Q};
