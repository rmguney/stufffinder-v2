import{s as Zt,e as w,c as k,b,f as u,l as i,i as C,h as d,v as Kt,D as Wt,k as Qt,E as Gt,a as D,g as I,F as ke,B as oe,t as V,p as Ce,C as ue,d as L,G as ye,j as Z,y as Mt,m as xt,n as er}from"../chunks/C6oXrJZt.js";import{S as tr,i as rr,c as G,a as ee,m as te,t as re,b as le,d as se,f as $e}from"../chunks/Zi_cIJN_.js";import{C as lr,e as Qe}from"../chunks/CP0-fytT.js";import{C as sr}from"../chunks/DxZvhrWi.js";import{C as ar}from"../chunks/o6IJ7tp9.js";import{C as nr}from"../chunks/CsWsoBlu.js";import{C as ir}from"../chunks/gU--zBIq.js";import{B as Et}from"../chunks/C7UUfNEJ.js";import{O as or,Q as ur,M as dr}from"../chunks/BQtyXYhr.js";import{t as Pt}from"../chunks/CG5NajwC.js";import{g as ht}from"../chunks/OjtNtuvZ.js";import{a as cr}from"../chunks/CpPhVZOh.js";import{T as jt}from"../chunks/CqnpH9aS.js";import{M as fr}from"../chunks/y53lLsyc.js";function Ct(r,e,t){const s=r.slice();return s[32]=e[t],s}function Ft(r,e,t){const s=r.slice();return s[35]=e[t],s}function mr(r){let e;return{c(){e=V("Let's help you post new stuff")},l(t){e=L(t,"Let's help you post new stuff")},m(t,s){C(t,e,s)},d(t){t&&u(e)}}}function pr(r){let e;return{c(){e=V("Fill in the details about your object, you can leave any blank if you are not sure, but try to be as precise as possible")},l(t){e=L(t,"Fill in the details about your object, you can leave any blank if you are not sure, but try to be as precise as possible")},m(t,s){C(t,e,s)},d(t){t&&u(e)}}}function hr(r){let e,t,s,a;return e=new ir({props:{class:"text-xl font-semibold text-neutral-900 dark:text-white",$$slots:{default:[mr]},$$scope:{ctx:r}}}),s=new ar({props:{class:"text-sm mt-1 text-neutral-600 dark:text-neutral-400",$$slots:{default:[pr]},$$scope:{ctx:r}}}),{c(){G(e.$$.fragment),t=D(),G(s.$$.fragment)},l(l){ee(e.$$.fragment,l),t=I(l),ee(s.$$.fragment,l)},m(l,o){te(e,l,o),C(l,t,o),te(s,l,o),a=!0},p(l,o){const f={};o[1]&128&&(f.$$scope={dirty:o,ctx:l}),e.$set(f);const c={};o[1]&128&&(c.$$scope={dirty:o,ctx:l}),s.$set(c)},i(l){a||(re(e.$$.fragment,l),re(s.$$.fragment,l),a=!0)},o(l){le(e.$$.fragment,l),le(s.$$.fragment,l),a=!1},d(l){l&&u(t),se(e,l),se(s,l)}}}function Ot(r){let e,t,s,a='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>',l,o,f,c="We encountered a problem",x,_,E=(r[10].general||r[10].api)+"",p,g,P,m,T,v,M="If the problem persists, try refreshing the page or checking your internet connection.",A=r[10].mediaFiles.length>0&&Tt(r),z=r[10].subParts.length>0&&It(r),j=r[10].imageUpload&&Lt(r);return{c(){e=w("div"),t=w("div"),s=w("div"),s.innerHTML=a,l=D(),o=w("div"),f=w("h3"),f.textContent=c,x=D(),_=w("div"),p=V(E),g=D(),A&&A.c(),P=D(),z&&z.c(),m=D(),j&&j.c(),T=D(),v=w("div"),v.textContent=M,this.h()},l(S){e=k(S,"DIV",{class:!0});var Y=b(e);t=k(Y,"DIV",{class:!0});var de=b(t);s=k(de,"DIV",{class:!0,"data-svelte-h":!0}),Ce(s)!=="svelte-djm2zv"&&(s.innerHTML=a),l=I(de),o=k(de,"DIV",{class:!0});var U=b(o);f=k(U,"H3",{class:!0,"data-svelte-h":!0}),Ce(f)!=="svelte-11phv65"&&(f.textContent=c),x=I(U),_=k(U,"DIV",{class:!0});var ce=b(_);p=L(ce,E),ce.forEach(u),g=I(U),A&&A.l(U),P=I(U),z&&z.l(U),m=I(U),j&&j.l(U),T=I(U),v=k(U,"DIV",{class:!0,"data-svelte-h":!0}),Ce(v)!=="svelte-l203zd"&&(v.textContent=M),U.forEach(u),de.forEach(u),Y.forEach(u),this.h()},h(){i(s,"class","flex-shrink-0 mt-0.5"),i(f,"class","text-sm font-medium text-red-800 dark:text-red-300"),i(_,"class","mt-1 text-sm text-red-700 dark:text-red-400"),i(v,"class","mt-2 text-xs text-red-600 dark:text-red-400"),i(o,"class","ml-3"),i(t,"class","flex items-start"),i(e,"class","mb-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800 rounded-lg")},m(S,Y){C(S,e,Y),d(e,t),d(t,s),d(t,l),d(t,o),d(o,f),d(o,x),d(o,_),d(_,p),d(o,g),A&&A.m(o,null),d(o,P),z&&z.m(o,null),d(o,m),j&&j.m(o,null),d(o,T),d(o,v)},p(S,Y){Y[0]&1024&&E!==(E=(S[10].general||S[10].api)+"")&&Z(p,E),S[10].mediaFiles.length>0?A?A.p(S,Y):(A=Tt(S),A.c(),A.m(o,P)):A&&(A.d(1),A=null),S[10].subParts.length>0?z?z.p(S,Y):(z=It(S),z.c(),z.m(o,m)):z&&(z.d(1),z=null),S[10].imageUpload?j?j.p(S,Y):(j=Lt(S),j.c(),j.m(o,T)):j&&(j.d(1),j=null)},d(S){S&&u(e),A&&A.d(),z&&z.d(),j&&j.d()}}}function Tt(r){let e,t,s,a=r[10].mediaFiles.length+"",l,o,f=r[10].mediaFiles.length===1?"":"s",c,x,_,E=Qe(r[10].mediaFiles),p=[];for(let g=0;g<E.length;g+=1)p[g]=Dt(Ft(r,E,g));return{c(){e=w("div"),t=w("details"),s=w("summary"),l=V(a),o=V(" media file issue"),c=V(f),x=D(),_=w("ul");for(let g=0;g<p.length;g+=1)p[g].c();this.h()},l(g){e=k(g,"DIV",{class:!0});var P=b(e);t=k(P,"DETAILS",{class:!0});var m=b(t);s=k(m,"SUMMARY",{class:!0});var T=b(s);l=L(T,a),o=L(T," media file issue"),c=L(T,f),T.forEach(u),x=I(m),_=k(m,"UL",{class:!0});var v=b(_);for(let M=0;M<p.length;M+=1)p[M].l(v);v.forEach(u),m.forEach(u),P.forEach(u),this.h()},h(){i(s,"class","cursor-pointer font-medium"),i(_,"class","mt-2 pl-5 list-disc space-y-1 text-xs"),i(t,"class","text-sm"),i(e,"class","mt-2")},m(g,P){C(g,e,P),d(e,t),d(t,s),d(s,l),d(s,o),d(s,c),d(t,x),d(t,_);for(let m=0;m<p.length;m+=1)p[m]&&p[m].m(_,null)},p(g,P){if(P[0]&1024&&a!==(a=g[10].mediaFiles.length+"")&&Z(l,a),P[0]&1024&&f!==(f=g[10].mediaFiles.length===1?"":"s")&&Z(c,f),P[0]&1024){E=Qe(g[10].mediaFiles);let m;for(m=0;m<E.length;m+=1){const T=Ft(g,E,m);p[m]?p[m].p(T,P):(p[m]=Dt(T),p[m].c(),p[m].m(_,null))}for(;m<p.length;m+=1)p[m].d(1);p.length=E.length}},d(g){g&&u(e),Mt(p,g)}}}function Dt(r){let e,t=r[35].filename+"",s,a,l=r[35].error+"",o;return{c(){e=w("li"),s=V(t),a=V(": "),o=V(l)},l(f){e=k(f,"LI",{});var c=b(e);s=L(c,t),a=L(c,": "),o=L(c,l),c.forEach(u)},m(f,c){C(f,e,c),d(e,s),d(e,a),d(e,o)},p(f,c){c[0]&1024&&t!==(t=f[35].filename+"")&&Z(s,t),c[0]&1024&&l!==(l=f[35].error+"")&&Z(o,l)},d(f){f&&u(e)}}}function It(r){let e,t,s,a=r[10].subParts.length+"",l,o,f=r[10].subParts.length===1?"":"s",c,x,_,E=Qe(r[10].subParts),p=[];for(let g=0;g<E.length;g+=1)p[g]=Vt(Ct(r,E,g));return{c(){e=w("div"),t=w("details"),s=w("summary"),l=V(a),o=V(" object part issue"),c=V(f),x=D(),_=w("ul");for(let g=0;g<p.length;g+=1)p[g].c();this.h()},l(g){e=k(g,"DIV",{class:!0});var P=b(e);t=k(P,"DETAILS",{class:!0});var m=b(t);s=k(m,"SUMMARY",{class:!0});var T=b(s);l=L(T,a),o=L(T," object part issue"),c=L(T,f),T.forEach(u),x=I(m),_=k(m,"UL",{class:!0});var v=b(_);for(let M=0;M<p.length;M+=1)p[M].l(v);v.forEach(u),m.forEach(u),P.forEach(u),this.h()},h(){i(s,"class","cursor-pointer font-medium"),i(_,"class","mt-2 pl-5 list-disc space-y-1 text-xs"),i(t,"class","text-sm"),i(e,"class","mt-2")},m(g,P){C(g,e,P),d(e,t),d(t,s),d(s,l),d(s,o),d(s,c),d(t,x),d(t,_);for(let m=0;m<p.length;m+=1)p[m]&&p[m].m(_,null)},p(g,P){if(P[0]&1024&&a!==(a=g[10].subParts.length+"")&&Z(l,a),P[0]&1024&&f!==(f=g[10].subParts.length===1?"":"s")&&Z(c,f),P[0]&1024){E=Qe(g[10].subParts);let m;for(m=0;m<E.length;m+=1){const T=Ct(g,E,m);p[m]?p[m].p(T,P):(p[m]=Vt(T),p[m].c(),p[m].m(_,null))}for(;m<p.length;m+=1)p[m].d(1);p.length=E.length}},d(g){g&&u(e),Mt(p,g)}}}function Vt(r){let e,t=r[32].name+"",s,a,l=r[32].error+"",o;return{c(){e=w("li"),s=V(t),a=V(": "),o=V(l)},l(f){e=k(f,"LI",{});var c=b(e);s=L(c,t),a=L(c,": "),o=L(c,l),c.forEach(u)},m(f,c){C(f,e,c),d(e,s),d(e,a),d(e,o)},p(f,c){c[0]&1024&&t!==(t=f[32].name+"")&&Z(s,t),c[0]&1024&&l!==(l=f[32].error+"")&&Z(o,l)},d(f){f&&u(e)}}}function Lt(r){let e,t=r[10].imageUpload+"",s;return{c(){e=w("div"),s=V(t),this.h()},l(a){e=k(a,"DIV",{class:!0});var l=b(e);s=L(l,t),l.forEach(u),this.h()},h(){i(e,"class","mt-1 text-sm text-red-700 dark:text-red-400")},m(a,l){C(a,e,l),d(e,s)},p(a,l){l[0]&1024&&t!==(t=a[10].imageUpload+"")&&Z(s,t)},d(a){a&&u(e)}}}function At(r){let e,t=r[8].title+"",s;return{c(){e=w("p"),s=V(t),this.h()},l(a){e=k(a,"P",{class:!0});var l=b(e);s=L(l,t),l.forEach(u),this.h()},h(){i(e,"class","text-red-500 text-sm mt-1")},m(a,l){C(a,e,l),d(e,s)},p(a,l){l[0]&256&&t!==(t=a[8].title+"")&&Z(s,t)},d(a){a&&u(e)}}}function zt(r){let e,t=r[8].description+"",s;return{c(){e=w("p"),s=V(t),this.h()},l(a){e=k(a,"P",{class:!0});var l=b(e);s=L(l,t),l.forEach(u),this.h()},h(){i(e,"class","text-red-500 text-sm mt-1")},m(a,l){C(a,e,l),d(e,s)},p(a,l){l[0]&256&&t!==(t=a[8].description+"")&&Z(s,t)},d(a){a&&u(e)}}}function St(r){let e,t=r[8].media+"",s;return{c(){e=w("p"),s=V(t),this.h()},l(a){e=k(a,"P",{class:!0});var l=b(e);s=L(l,t),l.forEach(u),this.h()},h(){i(e,"class","text-red-500 text-sm mt-2")},m(a,l){C(a,e,l),d(e,s)},p(a,l){l[0]&256&&t!==(t=a[8].media+"")&&Z(s,t)},d(a){a&&u(e)}}}function gr(r){let e,t,s;return{c(){e=oe("svg"),t=oe("path"),s=V(`\r
                                Post Your Stuff`),this.h()},l(a){e=ue(a,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var l=b(e);t=ue(l,"path",{d:!0}),b(t).forEach(u),l.forEach(u),s=L(a,`\r
                                Post Your Stuff`),this.h()},h(){i(t,"d","M20 6L9 17l-5-5"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4 mr-1.5"),i(e,"viewBox","0 0 24 24"),i(e,"fill","none"),i(e,"stroke","currentColor"),i(e,"stroke-width","2.5"),i(e,"stroke-linecap","round"),i(e,"stroke-linejoin","round")},m(a,l){C(a,e,l),d(e,t),C(a,s,l)},d(a){a&&(u(e),u(s))}}}function br(r){let e,t;return{c(){e=w("div"),t=V(`\r
                                Creating Post...`),this.h()},l(s){e=k(s,"DIV",{class:!0}),b(e).forEach(u),t=L(s,`\r
                                Creating Post...`),this.h()},h(){i(e,"class","animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full")},m(s,a){C(s,e,a),C(s,t,a)},d(s){s&&(u(e),u(t))}}}function _r(r){let e;function t(l,o){return l[9]?br:gr}let s=t(r),a=s(r);return{c(){a.c(),e=xt()},l(l){a.l(l),e=xt()},m(l,o){a.m(l,o),C(l,e,o)},p(l,o){s!==(s=t(l))&&(a.d(1),a=s(l),a&&(a.c(),a.m(e.parentNode,e)))},d(l){l&&u(e),a.d(l)}}}function vr(r){let e,t,s,a;return{c(){e=oe("svg"),t=oe("line"),s=oe("polyline"),a=V(`\r
                            Cancel`),this.h()},l(l){e=ue(l,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var o=b(e);t=ue(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),b(t).forEach(u),s=ue(o,"polyline",{points:!0}),b(s).forEach(u),o.forEach(u),a=L(l,`\r
                            Cancel`),this.h()},h(){i(t,"x1","19"),i(t,"y1","12"),i(t,"x2","5"),i(t,"y2","12"),i(s,"points","12 19 5 12 12 5"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"class","h-4 w-4 mr-1.5"),i(e,"viewBox","0 0 24 24"),i(e,"fill","none"),i(e,"stroke","currentColor"),i(e,"stroke-width","2"),i(e,"stroke-linecap","round"),i(e,"stroke-linejoin","round")},m(l,o){C(l,e,o),d(e,t),d(e,s),C(l,a,o)},p:er,d(l){l&&(u(e),u(a))}}}function wr(r){let e,t,s,a=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg>
                            Title*`,l,o,f,c,x,_,E,p=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                            Description*`,g,P,m,T,v,M,A,z,j,S,Y,de,U,ce=r[7].length+"",Ve,Be,He,$,J,F,Le,qe,X,fe,B,K,W,xe,h,O=r[2].length+"",Q,ae,Ge,Ae,me,et,tt,Ne,ne,Fe,gt=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                            Object Parts (Optional)`,rt,Oe,bt="You can add parts to your mystery object if it consists of multiple components.",lt,ze,pe,st,Re,he,Te,_t=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
                            Media Files*`,at,ge,ie,nt,it,ot,Je,be,_e,ut,ve,Se,H=(r[10].general||r[10].api)&&Ot(r);function Ut(n){r[17](n)}let vt={id:"title",class:"w-full p-3 border rounded-md text-sm bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-700 focus:ring-2 focus:ring-teal-500/30 focus:border-teal-500",placeholder:"This is what people will see on their homepage so try to make it interesting"};r[1]!==void 0&&(vt.value=r[1]),o=new jt({props:vt}),ke.push(()=>$e(o,"value",Ut));let q=r[8].title&&At(r);function Yt(n){r[18](n)}let wt={id:"description",class:"w-full p-3 border rounded-md text-sm bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-700 focus:ring-2 focus:ring-teal-500/30 focus:border-teal-500 min-h-[120px]",placeholder:"You can add any additional context about your object or how you came into possession of it."};r[4]!==void 0&&(wt.value=r[4]),P=new jt({props:wt}),ke.push(()=>$e(P,"value",Yt));let N=r[8].description&&zt(r);function Bt(n){r[19](n)}function Ht(n){r[20](n)}let dt={};r[6]!==void 0&&(dt.attributeValues=r[6]),r[7]!==void 0&&(dt.activeAttributes=r[7]),J=new or({props:dt}),ke.push(()=>$e(J,"attributeValues",Bt)),ke.push(()=>$e(J,"activeAttributes",Ht)),J.$on("update",r[12]),J.$on("valuechange",r[13]);function qt(n){r[21](n)}function Nt(n){r[22](n)}let ct={};r[2]!==void 0&&(ct.tags=r[2]),r[3]!==void 0&&(ct.labels=r[3]),me=new ur({props:ct}),ke.push(()=>$e(me,"tags",qt)),ke.push(()=>$e(me,"labels",Nt));function Rt(n){r[23](n)}let kt={mysteryObjectId:null};r[5]!==void 0&&(kt.subParts=r[5]),pe=new dr({props:kt}),ke.push(()=>$e(pe,"subParts",Rt)),pe.$on("update",r[15]);function Jt(n){r[24](n)}function Xt(n){r[25](n)}let ft={};r[0]!==void 0&&(ft.mediaFiles=r[0]),r[8]!==void 0&&(ft.errors=r[8]),ie=new fr({props:ft}),ke.push(()=>$e(ie,"mediaFiles",Jt)),ke.push(()=>$e(ie,"errors",Xt)),ie.$on("update",r[11]);let R=r[8].media&&St(r);return _e=new Et({props:{variant:"default",class:"text-sm py-1 px-4 bg-teal-600 hover:bg-teal-700 text-white rounded-full",disabled:r[9],$$slots:{default:[_r]},$$scope:{ctx:r}}}),_e.$on("click",r[14]),ve=new Et({props:{variant:"outline",class:"text-sm py-1 px-3 border-neutral-300 dark:border-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-full",disabled:r[9],$$slots:{default:[vr]},$$scope:{ctx:r}}}),ve.$on("click",r[26]),{c(){H&&H.c(),e=D(),t=w("div"),s=w("label"),s.innerHTML=a,l=D(),G(o.$$.fragment),c=D(),q&&q.c(),x=D(),_=w("div"),E=w("label"),E.innerHTML=p,g=D(),G(P.$$.fragment),T=D(),N&&N.c(),v=D(),M=w("div"),A=w("div"),z=w("div"),j=oe("svg"),S=oe("path"),Y=oe("line"),de=V(`\r
                                Object Attributes\r
                                `),U=w("span"),Ve=V(ce),Be=V(" added"),He=D(),$=w("div"),G(J.$$.fragment),qe=D(),X=w("div"),fe=w("div"),B=oe("svg"),K=oe("path"),W=oe("line"),xe=V(`\r
                                Tags\r
                                `),h=w("span"),Q=V(O),ae=V(" added"),Ge=D(),Ae=w("div"),G(me.$$.fragment),Ne=D(),ne=w("div"),Fe=w("h3"),Fe.innerHTML=gt,rt=D(),Oe=w("p"),Oe.textContent=bt,lt=D(),ze=w("div"),G(pe.$$.fragment),Re=D(),he=w("div"),Te=w("h3"),Te.innerHTML=_t,at=D(),ge=w("div"),G(ie.$$.fragment),ot=D(),R&&R.c(),Je=D(),be=w("div"),G(_e.$$.fragment),ut=D(),G(ve.$$.fragment),this.h()},l(n){H&&H.l(n),e=I(n),t=k(n,"DIV",{class:!0});var y=b(t);s=k(y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ce(s)!=="svelte-1slex1s"&&(s.innerHTML=a),l=I(y),ee(o.$$.fragment,y),c=I(y),q&&q.l(y),y.forEach(u),x=I(n),_=k(n,"DIV",{class:!0});var we=b(_);E=k(we,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ce(E)!=="svelte-1h2xg6h"&&(E.innerHTML=p),g=I(we),ee(P.$$.fragment,we),T=I(we),N&&N.l(we),we.forEach(u),v=I(n),M=k(n,"DIV",{class:!0});var De=b(M);A=k(De,"DIV",{class:!0});var Ee=b(A);z=k(Ee,"DIV",{class:!0});var Pe=b(z);j=ue(Pe,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var Me=b(j);S=ue(Me,"path",{d:!0}),b(S).forEach(u),Y=ue(Me,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),b(Y).forEach(u),Me.forEach(u),de=L(Pe,`\r
                                Object Attributes\r
                                `),U=k(Pe,"SPAN",{class:!0});var Ie=b(U);Ve=L(Ie,ce),Be=L(Ie," added"),Ie.forEach(u),Pe.forEach(u),He=I(Ee),$=k(Ee,"DIV",{class:!0});var Ue=b($);ee(J.$$.fragment,Ue),Ue.forEach(u),Ee.forEach(u),qe=I(De),X=k(De,"DIV",{class:!0});var je=b(X);fe=k(je,"DIV",{class:!0});var Xe=b(fe);B=ue(Xe,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0});var mt=b(B);K=ue(mt,"path",{d:!0}),b(K).forEach(u),W=ue(mt,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),b(W).forEach(u),mt.forEach(u),xe=L(Xe,`\r
                                Tags\r
                                `),h=k(Xe,"SPAN",{class:!0});var pt=b(h);Q=L(pt,O),ae=L(pt," added"),pt.forEach(u),Xe.forEach(u),Ge=I(je),Ae=k(je,"DIV",{class:!0});var yt=b(Ae);ee(me.$$.fragment,yt),yt.forEach(u),je.forEach(u),De.forEach(u),Ne=I(n),ne=k(n,"DIV",{class:!0});var Ye=b(ne);Fe=k(Ye,"H3",{class:!0,"data-svelte-h":!0}),Ce(Fe)!=="svelte-h3zurb"&&(Fe.innerHTML=gt),rt=I(Ye),Oe=k(Ye,"P",{class:!0,"data-svelte-h":!0}),Ce(Oe)!=="svelte-ga1ny"&&(Oe.textContent=bt),lt=I(Ye),ze=k(Ye,"DIV",{class:!0});var $t=b(ze);ee(pe.$$.fragment,$t),$t.forEach(u),Ye.forEach(u),Re=I(n),he=k(n,"DIV",{class:!0});var Ze=b(he);Te=k(Ze,"H3",{class:!0,"data-svelte-h":!0}),Ce(Te)!=="svelte-ss8gp1"&&(Te.innerHTML=_t),at=I(Ze),ge=k(Ze,"DIV",{class:!0});var Ke=b(ge);ee(ie.$$.fragment,Ke),ot=I(Ke),R&&R.l(Ke),Ke.forEach(u),Ze.forEach(u),Je=I(n),be=k(n,"DIV",{class:!0});var We=b(be);ee(_e.$$.fragment,We),ut=I(We),ee(ve.$$.fragment,We),We.forEach(u),this.h()},h(){i(s,"for","title"),i(s,"class","block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300 flex items-center"),i(t,"class","mb-4"),i(E,"for","description"),i(E,"class","block text-sm font-medium mb-1.5 text-neutral-700 dark:text-neutral-300 flex items-center"),i(_,"class","mb-5"),i(S,"d","M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"),i(Y,"x1","7"),i(Y,"y1","7"),i(Y,"x2","7.01"),i(Y,"y2","7"),i(j,"xmlns","http://www.w3.org/2000/svg"),i(j,"class","h-4 w-4 mr-1.5"),i(j,"viewBox","0 0 24 24"),i(j,"fill","none"),i(j,"stroke","currentColor"),i(j,"stroke-width","2"),i(j,"stroke-linecap","round"),i(j,"stroke-linejoin","round"),i(U,"class","ml-2 px-2 py-0.5 bg-neutral-100 dark:bg-neutral-800 text-xs rounded-full text-neutral-700 dark:text-neutral-300"),i(z,"class","mb-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 flex items-center"),i($,"class","bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 rounded-md shadow-sm p-3"),i(A,"class","w-full lg:w-1/2 mb-6 lg:mb-0"),i(K,"d","M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"),i(W,"x1","7"),i(W,"y1","7"),i(W,"x2","7.01"),i(W,"y2","7"),i(B,"xmlns","http://www.w3.org/2000/svg"),i(B,"class","h-4 w-4 mr-1.5"),i(B,"viewBox","0 0 24 24"),i(B,"fill","none"),i(B,"stroke","currentColor"),i(B,"stroke-width","2"),i(B,"stroke-linecap","round"),i(B,"stroke-linejoin","round"),i(h,"class","ml-2 px-2 py-0.5 bg-neutral-100 dark:bg-neutral-800 text-xs rounded-full text-neutral-700 dark:text-neutral-300"),i(fe,"class","mb-2 text-sm font-medium text-neutral-700 dark:text-neutral-300 flex items-center"),i(Ae,"class","bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 rounded-md shadow-sm p-3"),i(X,"class","w-full lg:w-1/2"),i(M,"class","flex flex-col lg:flex-row lg:gap-6 mb-6"),i(Fe,"class","block text-sm font-medium mb-2 text-neutral-700 dark:text-neutral-300 flex items-center"),i(Oe,"class","text-sm text-neutral-500 dark:text-neutral-400 mb-3"),i(ze,"class","bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 rounded-md shadow-sm p-3"),i(ne,"class","mb-6"),i(Te,"class","block text-sm font-medium mb-2 text-neutral-700 dark:text-neutral-300 flex items-center"),i(ge,"class","bg-white dark:bg-neutral-950 border border-neutral-200 dark:border-neutral-700 rounded-md shadow-sm p-3"),i(he,"class","mb-6"),i(be,"class","flex justify-start gap-3 border-t border-neutral-100 dark:border-neutral-800 pt-4 mt-6")},m(n,y){H&&H.m(n,y),C(n,e,y),C(n,t,y),d(t,s),d(t,l),te(o,t,null),d(t,c),q&&q.m(t,null),C(n,x,y),C(n,_,y),d(_,E),d(_,g),te(P,_,null),d(_,T),N&&N.m(_,null),C(n,v,y),C(n,M,y),d(M,A),d(A,z),d(z,j),d(j,S),d(j,Y),d(z,de),d(z,U),d(U,Ve),d(U,Be),d(A,He),d(A,$),te(J,$,null),d(M,qe),d(M,X),d(X,fe),d(fe,B),d(B,K),d(B,W),d(fe,xe),d(fe,h),d(h,Q),d(h,ae),d(X,Ge),d(X,Ae),te(me,Ae,null),C(n,Ne,y),C(n,ne,y),d(ne,Fe),d(ne,rt),d(ne,Oe),d(ne,lt),d(ne,ze),te(pe,ze,null),C(n,Re,y),C(n,he,y),d(he,Te),d(he,at),d(he,ge),te(ie,ge,null),d(ge,ot),R&&R.m(ge,null),C(n,Je,y),C(n,be,y),te(_e,be,null),d(be,ut),te(ve,be,null),Se=!0},p(n,y){n[10].general||n[10].api?H?H.p(n,y):(H=Ot(n),H.c(),H.m(e.parentNode,e)):H&&(H.d(1),H=null);const we={};!f&&y[0]&2&&(f=!0,we.value=n[1],ye(()=>f=!1)),o.$set(we),n[8].title?q?q.p(n,y):(q=At(n),q.c(),q.m(t,null)):q&&(q.d(1),q=null);const De={};!m&&y[0]&16&&(m=!0,De.value=n[4],ye(()=>m=!1)),P.$set(De),n[8].description?N?N.p(n,y):(N=zt(n),N.c(),N.m(_,null)):N&&(N.d(1),N=null),(!Se||y[0]&128)&&ce!==(ce=n[7].length+"")&&Z(Ve,ce);const Ee={};!F&&y[0]&64&&(F=!0,Ee.attributeValues=n[6],ye(()=>F=!1)),!Le&&y[0]&128&&(Le=!0,Ee.activeAttributes=n[7],ye(()=>Le=!1)),J.$set(Ee),(!Se||y[0]&4)&&O!==(O=n[2].length+"")&&Z(Q,O);const Pe={};!et&&y[0]&4&&(et=!0,Pe.tags=n[2],ye(()=>et=!1)),!tt&&y[0]&8&&(tt=!0,Pe.labels=n[3],ye(()=>tt=!1)),me.$set(Pe);const Me={};!st&&y[0]&32&&(st=!0,Me.subParts=n[5],ye(()=>st=!1)),pe.$set(Me);const Ie={};!nt&&y[0]&1&&(nt=!0,Ie.mediaFiles=n[0],ye(()=>nt=!1)),!it&&y[0]&256&&(it=!0,Ie.errors=n[8],ye(()=>it=!1)),ie.$set(Ie),n[8].media?R?R.p(n,y):(R=St(n),R.c(),R.m(ge,null)):R&&(R.d(1),R=null);const Ue={};y[0]&512&&(Ue.disabled=n[9]),y[0]&512|y[1]&128&&(Ue.$$scope={dirty:y,ctx:n}),_e.$set(Ue);const je={};y[0]&512&&(je.disabled=n[9]),y[1]&128&&(je.$$scope={dirty:y,ctx:n}),ve.$set(je)},i(n){Se||(re(o.$$.fragment,n),re(P.$$.fragment,n),re(J.$$.fragment,n),re(me.$$.fragment,n),re(pe.$$.fragment,n),re(ie.$$.fragment,n),re(_e.$$.fragment,n),re(ve.$$.fragment,n),Se=!0)},o(n){le(o.$$.fragment,n),le(P.$$.fragment,n),le(J.$$.fragment,n),le(me.$$.fragment,n),le(pe.$$.fragment,n),le(ie.$$.fragment,n),le(_e.$$.fragment,n),le(ve.$$.fragment,n),Se=!1},d(n){n&&(u(e),u(t),u(x),u(_),u(v),u(M),u(Ne),u(ne),u(Re),u(he),u(Je),u(be)),H&&H.d(n),se(o),q&&q.d(),se(P),N&&N.d(),se(J),se(me),se(pe),se(ie),R&&R.d(),se(_e),se(ve)}}}function kr(r){let e,t,s,a;return e=new nr({props:{class:"p-4 border-b border-neutral-100 dark:border-neutral-800",$$slots:{default:[hr]},$$scope:{ctx:r}}}),s=new sr({props:{class:"p-4 sm:p-6",$$slots:{default:[wr]},$$scope:{ctx:r}}}),{c(){G(e.$$.fragment),t=D(),G(s.$$.fragment)},l(l){ee(e.$$.fragment,l),t=I(l),ee(s.$$.fragment,l)},m(l,o){te(e,l,o),C(l,t,o),te(s,l,o),a=!0},p(l,o){const f={};o[1]&128&&(f.$$scope={dirty:o,ctx:l}),e.$set(f);const c={};o[0]&2047|o[1]&128&&(c.$$scope={dirty:o,ctx:l}),s.$set(c)},i(l){a||(re(e.$$.fragment,l),re(s.$$.fragment,l),a=!0)},o(l){le(e.$$.fragment,l),le(s.$$.fragment,l),a=!1},d(l){l&&u(t),se(e,l),se(s,l)}}}function yr(r){let e,t,s,a,l,o,f;return a=new lr({props:{class:"bg-white dark:bg-neutral-950 shadow-md rounded-md border border-neutral-200 dark:border-neutral-800 overflow-hidden",$$slots:{default:[kr]},$$scope:{ctx:r}}}),{c(){e=w("div"),t=w("div"),s=w("form"),G(a.$$.fragment),this.h()},l(c){e=k(c,"DIV",{class:!0});var x=b(e);t=k(x,"DIV",{class:!0});var _=b(t);s=k(_,"FORM",{class:!0});var E=b(s);ee(a.$$.fragment,E),E.forEach(u),_.forEach(u),x.forEach(u),this.h()},h(){i(s,"class","w-full"),i(t,"class","w-full max-w-7xl mx-auto"),i(e,"class","flex flex-col items-center bg-change dark:bg-dark shifting p-3 py-5")},m(c,x){C(c,e,x),d(e,t),d(t,s),te(a,s,null),l=!0,o||(f=Kt(s,"submit",Wt(r[14])),o=!0)},p(c,x){const _={};x[0]&2047|x[1]&128&&(_.$$scope={dirty:x,ctx:c}),a.$set(_)},i(c){l||(re(a.$$.fragment,c),l=!0)},o(c){le(a.$$.fragment,c),l=!1},d(c){c&&u(e),se(a),o=!1,f()}}}async function $r(r){var t,s,a;const e=`https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${r}&format=json&languages=en&origin=*`;try{const f=(a=(s=(t=(await(await fetch(e)).json()).entities[r])==null?void 0:t.labels)==null?void 0:s.en)==null?void 0:a.value;if(!f)throw new Error(`Label not found for qcode: ${r}`);return f}catch(l){return console.error("Error fetching label:",l),null}}async function xr(r){const e=[];for(const t of r){const s=await $r(t.id);s&&e.push({id:t.id,label:s})}return e}function Er(r){return{description:r.description||"",material:r.material||null,color:r.color||null,shape:r.shape||null,location:r.location||null,smell:r.smell||null,taste:r.taste||null,texture:r.texture||null,functionality:r.functionality||null,markings:r.markings||null,handmade:r.handmade||!1,oneOfAKind:r.oneOfAKind||!1,weight:r.weight?parseFloat(r.weight):null,timePeriod:r.timePeriod||null,writtenText:r.writtenText||null,descriptionOfParts:r.descriptionOfParts||null,hardness:r.hardness||null,value:r.value?parseFloat(r.value):null,originOfAcquisition:r.originOfAcquisition||null,pattern:r.pattern||null,brand:r.brand||null,print:r.print||null,imageLicenses:r.imageLicenses||null,sizeX:r.sizeX?parseFloat(r.sizeX):null,sizeY:r.sizeY?parseFloat(r.sizeY):null,sizeZ:r.sizeZ?parseFloat(r.sizeZ):null,item_condition:r.item_condition||null}}function Pr(r,e,t){let s;Qt(r,cr,$=>t(16,s=$));let a=[],l="",o=[],f=[],c="",x=[],_={material:"",shape:"",color:"",texture:"",weight:"",smell:"",taste:"",marking:"",functionality:"",period:"",location:"",writtenText:"",descriptionOfParts:"",hardness:"",value:"",originOfAcquisition:"",pattern:"",brand:"",print:"",imageLicenses:"",sizeX:"",sizeY:"",sizeZ:"",itemCondition:"",handmade:!1,oneOfAKind:!1},E=[],p={title:"",media:"",description:""};function g($){t(0,a=$.detail.mediaFiles)}function P($){t(7,E=$.detail.activeAttributes)}function m($){t(6,_=$.detail.attributeValues)}let T=!1,v={general:"",api:"",imageUpload:"",mediaFiles:[],subParts:[]},M=async()=>{t(8,p={title:"",media:"",description:""}),t(10,v={general:"",api:"",imageUpload:"",mediaFiles:[],subParts:[]});let $=!1;if(l.trim()||(t(8,p.title="Title is required",p),$=!0),a.length===0&&(t(8,p.media="At least one media file is required",p),$=!0),c.trim()||(t(8,p.description="Description is required",p),$=!0),$){window.scrollTo({top:0,behavior:"smooth"});return}try{t(9,T=!0);const J=await xr(o),F=JSON.parse(JSON.stringify(_)),Le={description:c,material:F.material||null,color:F.colorHex||null,shape:F.shape||null,location:F.location||null,smell:F.smell||null,taste:F.taste||F.smell||null,texture:F.texture||null,functionality:F.functionality||null,markings:F.marking||null,handmade:F.handmade||!1,oneOfAKind:F.oneOfAKind||!1,weight:parseFloat(F.weight)||null,timePeriod:F.period||null,writtenText:F.writtenText||null,descriptionOfParts:F.descriptionOfParts||null,hardness:F.hardness||null,value:parseFloat(F.value)||null,originOfAcquisition:F.originOfAcquisition||null,pattern:F.pattern||null,brand:F.brand||null,print:F.print||null,imageLicenses:F.imageLicenses||null,sizeX:parseFloat(F.sizeX)||null,sizeY:parseFloat(F.sizeY)||null,sizeZ:parseFloat(F.sizeZ)||null,item_condition:F.itemCondition||null},qe=_.color,X=new FormData;if(X.append("title",l),X.append("content",c),o&&o.length>0){const h=o.map(O=>O.id);X.append("tags",JSON.stringify(h))}else X.append("tags",JSON.stringify([]));if(X.append("mysteryObject",JSON.stringify(Le)),a.length>0){const h=a[0].file;X.append("image",h)}const fe={title:l,content:c,tags:o.map(h=>h.id),mysteryObject:Le};console.log("Creating post with JSON data");const B=await fetch("https://backend-310608491068.europe-west1.run.app/api/posts/create-json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(fe),credentials:"include"});if(!B.ok){let h="";try{const O=await B.json();O.message?h=O.message:O.error&&(h=O.error),h.includes("401")||h.includes("Unauthorized")?t(10,v.api="Your session may have expired. Please log in again.",v):h.includes("413")||h.toLowerCase().includes("large")?t(10,v.api="Your image is too large. Please try with a smaller file size.",v):h.includes("403")||h.includes("Forbidden")?t(10,v.api="You don't have permission to create this post.",v):t(10,v.api="We couldn't create your post. Please check your information and try again.",v)}catch(O){console.error("Error parsing response:",O),t(10,v.api="Something went wrong. Please try again or check your connection.",v)}throw new Error(v.api)}const K=await B.json();if(console.log("Post created successfully:",K),a.length>0){const h=new FormData;h.append("file",a[0].file),console.log("Uploading main image");try{const O=await fetch(`https://backend-310608491068.europe-west1.run.app/api/posts/${K.postId}/mysteryObjects/${K.mysteryObjectId}/set-image`,{method:"POST",body:h,credentials:"include"});O.ok||(t(10,v.imageUpload="We couldn't upload the main image, but your post was created. You can try adding the image later.",v),console.error("Error uploading main image:",await O.text()))}catch(O){t(10,v.imageUpload="Image upload failed, but your post was created. You can add images later from the edit screen.",v),console.error("Error uploading main image:",O)}}let W=0;if(a.length>0){console.log(`Uploading ${a.length} media files`);for(let h=0;h<a.length;h++){const O=a[h],Q=new FormData;Q.append("file",O.file),Q.append("type",O.type||"image");try{console.log(`Uploading media file ${h+1}/${a.length}`);const ae=await fetch(`https://backend-310608491068.europe-west1.run.app/api/mysteryObjects/${K.mysteryObjectId}/upload-media`,{method:"POST",body:Q,credentials:"include"});ae.ok?console.log(`Media file ${h+1} uploaded successfully`):(v.mediaFiles.push({index:h,filename:O.file.name,error:"Failed to upload. The file may be too large or in an unsupported format."}),W++,console.error(`Failed to upload media file ${h+1}:`,ae.status,ae.statusText))}catch(ae){v.mediaFiles.push({index:h,filename:O.file.name,error:"Couldn't upload. Please check your connection and try again."}),W++,console.error(`Error uploading media file ${h+1}:`,ae)}}}let xe=0;if(x.length>0){console.log(`Adding ${x.length} sub-parts to mystery object`);for(let h=0;h<x.length;h++)try{console.log(`Adding sub-part ${h+1}/${x.length}`);const O=Er(x[h]),Q=await fetch(`https://backend-310608491068.europe-west1.run.app/api/mysteryObjects/${K.mysteryObjectId}/subParts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O),credentials:"include"});if(Q.ok)console.log(`Sub-part ${h+1} added successfully`);else{xe++,v.subParts.push({index:h,name:x[h].description||`Part ${h+1}`,error:"Could not add this part. Please check if your description is complete."}),console.error(`Failed to add sub-part ${h+1}:`,Q.status,Q.statusText);const ae=await Q.text();console.error("Error response:",ae)}}catch(O){xe++,v.subParts.push({index:h,name:x[h].description||`Part ${h+1}`,error:"Failed to add this part. Try again with fewer details."}),console.error(`Error adding sub-part ${h+1}:`,O)}}if(W>0||xe>0){let h=W+xe;t(10,v.general=`Your post was created successfully! However, ${h} attachment${h===1?"":"s"} couldn't be added. You can edit your post later to add them.`,v),setTimeout(()=>{Pt.update(O=>[...O,K]),ht("/")},4e3)}else Pt.update(h=>[...h,K]),ht("/")}catch(J){console.error("Error creating post:",J),!v.general&&!v.api&&t(10,v.general="We couldn't create your post. Please check your information and try again later.",v),window.scrollTo({top:0,behavior:"smooth"})}finally{t(9,T=!1)}};Gt(()=>{for(const $ of a)$.url&&URL.revokeObjectURL($.url)});function A($){t(5,x=$.detail.subParts)}function z($){l=$,t(1,l)}function j($){c=$,t(4,c)}function S($){_=$,t(6,_)}function Y($){E=$,t(7,E)}function de($){o=$,t(2,o)}function U($){f=$,t(3,f)}function ce($){x=$,t(5,x)}function Ve($){a=$,t(0,a)}function Be($){p=$,t(8,p)}const He=()=>ht("/");return r.$$.update=()=>{r.$$.dirty[0]&65536},[a,l,o,f,c,x,_,E,p,T,v,g,P,m,M,A,s,z,j,S,Y,de,U,ce,Ve,Be,He]}class Yr extends tr{constructor(e){super(),rr(this,e,Pr,yr,Zt,{},null,[-1,-1])}}export{Yr as component};
