import{s as Z,e as w,a as S,c as D,b as E,g as T,f as d,l as v,i as P,h as g,k as y,C as x,t as C,d as I,j as H,D as Q}from"../chunks/scheduler.CONNQF1V.js";import{S as ee,i as te,t as b,b as $,e as j,g as N,c as U,a as W,m as X,d as Y}from"../chunks/index.BnMMC023.js";import{e as A}from"../chunks/userStore.C8Faxakg.js";import{P as le}from"../chunks/post.ljCMMT_e.js";import{C as oe}from"../chunks/comment.CNrXOIqZ.js";import{t as re}from"../chunks/threadStore.z8eUMdcT.js";import{p as se}from"../chunks/stores.BEL-MH0e.js";function L(a,t,s){const n=a.slice();return n[6]=t[s],n}function M(a,t,s){const n=a.slice();return n[9]=t[s],n}function R(a){let t,s,n,o;return{c(){t=w("p"),s=C("Loading the profile for "),n=C(a[0]),o=C("..."),this.h()},l(i){t=D(i,"P",{class:!0});var e=E(t);s=I(e,"Loading the profile for "),n=I(e,a[0]),o=I(e,"..."),e.forEach(d),this.h()},h(){v(t,"class","font-bold text-lg")},m(i,e){P(i,t,e),g(t,s),g(t,n),g(t,o)},p(i,e){e&1&&H(n,i[0])},d(i){i&&d(t)}}}function q(a){let t,s,n,o,i=A(a[1]),e=[];for(let l=0;l<i.length;l+=1)e[l]=F(M(a,i,l));const r=l=>$(e[l],1,1,()=>{e[l]=null});return{c(){t=w("div");for(let l=0;l<e.length;l+=1)e[l].c();this.h()},l(l){t=D(l,"DIV",{class:!0,style:!0});var h=E(t);for(let f=0;f<e.length;f+=1)e[f].l(h);h.forEach(d),this.h()},h(){v(t,"class",s=a[1].length===1?"flex flex-col items-center gap-4":"grid gap-4 lg:gap-6 w-full"),v(t,"style",n=a[1].length===1?"":"grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));")},m(l,h){P(l,t,h);for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(t,null);o=!0},p(l,h){if(h&2){i=A(l[1]);let f;for(f=0;f<i.length;f+=1){const m=M(l,i,f);e[f]?(e[f].p(m,h),b(e[f],1)):(e[f]=F(m),e[f].c(),b(e[f],1),e[f].m(t,null))}for(N(),f=i.length;f<e.length;f+=1)r(f);j()}(!o||h&2&&s!==(s=l[1].length===1?"flex flex-col items-center gap-4":"grid gap-4 lg:gap-6 w-full"))&&v(t,"class",s),(!o||h&2&&n!==(n=l[1].length===1?"":"grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));"))&&v(t,"style",n)},i(l){if(!o){for(let h=0;h<i.length;h+=1)b(e[h]);o=!0}},o(l){e=e.filter(Boolean);for(let h=0;h<e.length;h+=1)$(e[h]);o=!1},d(l){l&&d(t),Q(e,l)}}}function F(a){let t,s,n,o,i;return s=new le({props:{id:a[9].id,title:a[9].title,description:a[9].description,tags:a[9].tags,imageSrc:a[9].imageSrc,postedBy:a[9].postedBy,postedDate:a[9].postedDate,variant:"thumb",resolved:a[9].resolved}}),{c(){t=w("a"),U(s.$$.fragment),n=S(),this.h()},l(e){t=D(e,"A",{href:!0,class:!0});var r=E(t);W(s.$$.fragment,r),n=T(r),r.forEach(d),this.h()},h(){v(t,"href",o=`/thread/${a[9].id}`),v(t,"class","w-full")},m(e,r){P(e,t,r),X(s,t,null),g(t,n),i=!0},p(e,r){const l={};r&2&&(l.id=e[9].id),r&2&&(l.title=e[9].title),r&2&&(l.description=e[9].description),r&2&&(l.tags=e[9].tags),r&2&&(l.imageSrc=e[9].imageSrc),r&2&&(l.postedBy=e[9].postedBy),r&2&&(l.postedDate=e[9].postedDate),r&2&&(l.resolved=e[9].resolved),s.$set(l),(!i||r&2&&o!==(o=`/thread/${e[9].id}`))&&v(t,"href",o)},i(e){i||(b(s.$$.fragment,e),i=!0)},o(e){$(s.$$.fragment,e),i=!1},d(e){e&&d(t),Y(s)}}}function z(a){let t,s,n,o;return{c(){t=w("p"),s=C("No threads found for "),n=C(a[0]),o=C("."),this.h()},l(i){t=D(i,"P",{class:!0});var e=E(t);s=I(e,"No threads found for "),n=I(e,a[0]),o=I(e,"."),e.forEach(d),this.h()},h(){v(t,"class","font-bold text-lg")},m(i,e){P(i,t,e),g(t,s),g(t,n),g(t,o)},p(i,e){e&1&&H(n,i[0])},d(i){i&&d(t)}}}function G(a){let t,s,n=A(a[2]),o=[];for(let e=0;e<n.length;e+=1)o[e]=J(L(a,n,e));const i=e=>$(o[e],1,1,()=>{o[e]=null});return{c(){t=w("div");for(let e=0;e<o.length;e+=1)o[e].c();this.h()},l(e){t=D(e,"DIV",{class:!0});var r=E(t);for(let l=0;l<o.length;l+=1)o[l].l(r);r.forEach(d),this.h()},h(){v(t,"class","flex flex-col w-full")},m(e,r){P(e,t,r);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(t,null);s=!0},p(e,r){if(r&4){n=A(e[2]);let l;for(l=0;l<n.length;l+=1){const h=L(e,n,l);o[l]?(o[l].p(h,r),b(o[l],1)):(o[l]=J(h),o[l].c(),b(o[l],1),o[l].m(t,null))}for(N(),l=n.length;l<o.length;l+=1)i(l);j()}},i(e){if(!s){for(let r=0;r<n.length;r+=1)b(o[r]);s=!0}},o(e){o=o.filter(Boolean);for(let r=0;r<o.length;r+=1)$(o[r]);s=!1},d(e){e&&d(t),Q(o,e)}}}function J(a){let t,s,n,o,i;return s=new oe({props:{commentId:a[6].id,comment:a[6].comment,commentator:a[6].commentator,postedDateComment:a[6].postedDateComment,threadOwner:a[6].threadOwner,selected:a[6].selected}}),{c(){t=w("a"),U(s.$$.fragment),n=S(),this.h()},l(e){t=D(e,"A",{href:!0,class:!0});var r=E(t);W(s.$$.fragment,r),n=T(r),r.forEach(d),this.h()},h(){v(t,"href",o=`/thread/${a[6].thread}`),v(t,"class","block")},m(e,r){P(e,t,r),X(s,t,null),g(t,n),i=!0},p(e,r){const l={};r&4&&(l.commentId=e[6].id),r&4&&(l.comment=e[6].comment),r&4&&(l.commentator=e[6].commentator),r&4&&(l.postedDateComment=e[6].postedDateComment),r&4&&(l.threadOwner=e[6].threadOwner),r&4&&(l.selected=e[6].selected),s.$set(l),(!i||r&4&&o!==(o=`/thread/${e[6].thread}`))&&v(t,"href",o)},i(e){i||(b(s.$$.fragment,e),i=!0)},o(e){$(s.$$.fragment,e),i=!1},d(e){e&&d(t),Y(s)}}}function K(a){let t,s,n,o;return{c(){t=w("p"),s=C("No comments or replies found for "),n=C(a[0]),o=C("."),this.h()},l(i){t=D(i,"P",{class:!0});var e=E(t);s=I(e,"No comments or replies found for "),n=I(e,a[0]),o=I(e,"."),e.forEach(d),this.h()},h(){v(t,"class","font-bold text-lg")},m(i,e){P(i,t,e),g(t,s),g(t,n),g(t,o)},p(i,e){e&1&&H(n,i[0])},d(i){i&&d(t)}}}function ae(a){let t,s,n,o,i,e,r,l,h,f=(a[3]??a[4])&&R(a),m=!a[3]&&a[1].length>0&&q(a),p=!a[3]&&a[1].length===0&&z(a),u=!a[4]&&a[2].length>0&&G(a),_=!a[4]&&a[2].length===0&&K(a);return{c(){t=w("div"),s=w("div"),n=w("div"),f&&f.c(),o=S(),m&&m.c(),i=S(),p&&p.c(),e=S(),r=w("div"),u&&u.c(),l=S(),_&&_.c(),this.h()},l(c){t=D(c,"DIV",{class:!0});var k=E(t);s=D(k,"DIV",{class:!0});var V=E(s);n=D(V,"DIV",{class:!0});var B=E(n);f&&f.l(B),o=T(B),m&&m.l(B),i=T(B),p&&p.l(B),B.forEach(d),e=T(V),r=D(V,"DIV",{class:!0});var O=E(r);u&&u.l(O),l=T(O),_&&_.l(O),O.forEach(d),V.forEach(d),k.forEach(d),this.h()},h(){v(n,"class","flex flex-col items-center mb-8"),v(r,"class","flex flex-col items-center"),v(s,"class","w-full lg:w-2/3"),v(t,"class","flex justify-center p-4 pb-0 lg:py-8 bg-change dark:bg-dark shifting")},m(c,k){P(c,t,k),g(t,s),g(s,n),f&&f.m(n,null),g(n,o),m&&m.m(n,null),g(n,i),p&&p.m(n,null),g(s,e),g(s,r),u&&u.m(r,null),g(r,l),_&&_.m(r,null),h=!0},p(c,[k]){c[3]??c[4]?f?f.p(c,k):(f=R(c),f.c(),f.m(n,o)):f&&(f.d(1),f=null),!c[3]&&c[1].length>0?m?(m.p(c,k),k&10&&b(m,1)):(m=q(c),m.c(),b(m,1),m.m(n,i)):m&&(N(),$(m,1,1,()=>{m=null}),j()),!c[3]&&c[1].length===0?p?p.p(c,k):(p=z(c),p.c(),p.m(n,null)):p&&(p.d(1),p=null),!c[4]&&c[2].length>0?u?(u.p(c,k),k&20&&b(u,1)):(u=G(c),u.c(),b(u,1),u.m(r,l)):u&&(N(),$(u,1,1,()=>{u=null}),j()),!c[4]&&c[2].length===0?_?_.p(c,k):(_=K(c),_.c(),_.m(r,null)):_&&(_.d(1),_=null)},i(c){h||(b(m),b(u),h=!0)},o(c){$(m),$(u),h=!1},d(c){c&&d(t),f&&f.d(),m&&m.d(),p&&p.d(),u&&u.d(),_&&_.d()}}}function ne(a,t,s){let n;y(a,se,h=>s(5,n=h));let o,i=[],e=[],r=!0,l=!0;return x(async()=>{try{s(3,r=!0),s(4,l=!0);const h=await fetch("https://threef.vercel.app/api/thread");if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);const f=await h.json();re.set(f),s(1,i=f.filter(c=>c.postedBy===o));const m=await fetch("https://threef.vercel.app/api/comment");if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const p=await m.json(),u=p.filter(c=>c.commentator===o),_=p.flatMap(c=>c.replies||[]).filter(c=>c.commentator===o);s(2,e=[...u,..._])}catch(h){console.error("Error fetching data:",h)}finally{s(3,r=!1),s(4,l=!1)}}),a.$$.update=()=>{a.$$.dirty&32&&s(0,o=n.params.username)},[o,i,e,r,l,n]}class de extends ee{constructor(t){super(),te(this,t,ne,ae,Z,{})}}export{de as component};
