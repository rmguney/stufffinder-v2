import{s as Ie,T as le,e as w,a as T,c as y,b as $,g as O,f as m,C as p,i as j,h as _,X as re,k as _e,x as Ct,B as W,E as we,t as H,d as R,j as X,n as ue,N as $t,O as At,q as fe,G as Ze,P as Re,z as Ue,A as Be,Z as zt,r as Vt,_ as Pt,$ as Je,p as Qe,a0 as Ft,Q as Nt}from"../chunks/CEgPK7Kn.js";import{S as Le,i as De,f as ne,c as Q,a as K,m as G,t as q,g as xe,b as B,e as je,d as ee}from"../chunks/D5iEvBOg.js";import{e as ce,C as qt,a as Ut,P as Ke}from"../chunks/pqZsTTMp.js";import{w as ve}from"../chunks/3WS7gtyC.js";import{I as Ce}from"../chunks/ucg5DYzH.js";import{B as Me}from"../chunks/dIJLHdEI.js";import{t as Bt}from"../chunks/CmYgl3nr.js";import{g as Ht}from"../chunks/C912g2uI.js";import{a as Rt}from"../chunks/zczyAANr.js";import{T as Ge,M as Mt}from"../chunks/DG9Hls1a.js";function et(l,e,t){const r=l.slice();return r[18]=e[t],r}function tt(l,e,t){const r=l.slice();return r[21]=e[t],r}function lt(l){let e,t="Loading...";return{c(){e=w("p"),e.textContent=t,this.h()},l(r){e=y(r,"P",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-17rvozf"&&(e.textContent=t),this.h()},h(){p(e,"class","mt-2 text-sm")},m(r,a){j(r,e,a)},d(r){r&&m(e)}}}function rt(l){let e,t,r=ce(l[4]),a=[];for(let n=0;n<r.length;n+=1)a[n]=nt(tt(l,r,n));const s=n=>B(a[n],1,1,()=>{a[n]=null});return{c(){e=w("ul");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){e=y(n,"UL",{class:!0});var i=$(e);for(let o=0;o<a.length;o+=1)a[o].l(i);i.forEach(m),this.h()},h(){p(e,"class","list-none p-0 mt-2 border bg-white dark:bg-neutral-950 rounded-md absolute w-full max-h-60 overflow-y-auto shadow-lg z-10")},m(n,i){j(n,e,i);for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(e,null);t=!0},p(n,i){if(i&1040){r=ce(n[4]);let o;for(o=0;o<r.length;o+=1){const c=tt(n,r,o);a[o]?(a[o].p(c,i),q(a[o],1)):(a[o]=nt(c),a[o].c(),q(a[o],1),a[o].m(e,null))}for(xe(),o=r.length;o<a.length;o+=1)s(o);je()}},i(n){if(!t){for(let i=0;i<r.length;i+=1)q(a[i]);t=!0}},o(n){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)B(a[i]);t=!1},d(n){n&&m(e),we(a,n)}}}function Yt(l){let e,t,r=l[21].label+"",a,s,n,i=l[21].description+"",o;return{c(){e=w("div"),t=w("div"),a=H(r),s=T(),n=w("div"),o=H(i),this.h()},l(c){e=y(c,"DIV",{});var h=$(e);t=y(h,"DIV",{class:!0});var u=$(t);a=R(u,r),u.forEach(m),s=O(h),n=y(h,"DIV",{class:!0});var f=$(n);o=R(f,i),f.forEach(m),h.forEach(m),this.h()},h(){p(t,"class","font-medium"),p(n,"class","text-xs text-gray-500 dark:text-gray-400")},m(c,h){j(c,e,h),_(e,t),_(t,a),_(e,s),_(e,n),_(n,o)},p(c,h){h&16&&r!==(r=c[21].label+"")&&X(a,r),h&16&&i!==(i=c[21].description+"")&&X(o,i)},d(c){c&&m(e)}}}function nt(l){let e,t,r,a;function s(){return l[16](l[21])}return t=new Me({props:{variant:"ghost",class:"w-full text-left p-2 justify-start h-auto",$$slots:{default:[Yt]},$$scope:{ctx:l}}}),t.$on("click",s),{c(){e=w("li"),Q(t.$$.fragment),r=T()},l(n){e=y(n,"LI",{});var i=$(e);K(t.$$.fragment,i),r=O(i),i.forEach(m)},m(n,i){j(n,e,i),G(t,e,null),_(e,r),a=!0},p(n,i){l=n;const o={};i&16777232&&(o.$$scope={dirty:i,ctx:l}),t.$set(o)},i(n){a||(q(t.$$.fragment,n),a=!0)},o(n){B(t.$$.fragment,n),a=!1},d(n){n&&m(e),ee(t)}}}function Wt(l){let e,t="No tags added yet. Search for relevant terms above.";return{c(){e=w("p"),e.textContent=t,this.h()},l(r){e=y(r,"P",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1hes4d4"&&(e.textContent=t),this.h()},h(){p(e,"class","text-sm text-gray-500 dark:text-gray-400 mt-2")},m(r,a){j(r,e,a)},p:ue,d(r){r&&m(e)}}}function Xt(l){let e,t=ce(l[0]),r=[];for(let a=0;a<t.length;a+=1)r[a]=st(et(l,t,a));return{c(){e=w("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=y(a,"DIV",{class:!0});var s=$(e);for(let n=0;n<r.length;n+=1)r[n].l(s);s.forEach(m),this.h()},h(){p(e,"class","grid grid-cols-1 gap-2 sm:grid-cols-2")},m(a,s){j(a,e,s);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(e,null)},p(a,s){if(s&2049){t=ce(a[0]);let n;for(n=0;n<t.length;n+=1){const i=et(a,t,n);r[n]?r[n].p(i,s):(r[n]=st(i),r[n].c(),r[n].m(e,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=t.length}},d(a){a&&m(e),we(r,a)}}}function at(l){let e,t=l[18].description+"",r;return{c(){e=w("p"),r=H(t),this.h()},l(a){e=y(a,"P",{class:!0});var s=$(e);r=R(s,t),s.forEach(m),this.h()},h(){p(e,"class","text-xs mt-1 line-clamp-2 text-gray-600 dark:text-gray-400")},m(a,s){j(a,e,s),_(e,r)},p(a,s){s&1&&t!==(t=a[18].description+"")&&X(r,t)},d(a){a&&m(e)}}}function st(l){let e,t,r,a=Jt()+"",s,n,i,o=l[18].label+"",c,h,u,f=l[18].id+"",d,v,g,k,b,L;function z(){return l[17](l[18])}let S=l[18].description&&at(l);return{c(){e=w("div"),t=w("button"),r=new $t(!1),s=T(),n=w("div"),i=w("div"),c=H(o),h=T(),u=w("a"),d=H(f),g=T(),S&&S.c(),k=T(),this.h()},l(E){e=y(E,"DIV",{class:!0});var V=$(e);t=y(V,"BUTTON",{type:!0,class:!0,title:!0});var P=$(t);r=At(P,!1),P.forEach(m),s=O(V),n=y(V,"DIV",{class:!0});var I=$(n);i=y(I,"DIV",{class:!0});var J=$(i);c=R(J,o),J.forEach(m),h=O(I),u=y(I,"A",{href:!0,target:!0,rel:!0,class:!0});var C=$(u);d=R(C,f),C.forEach(m),g=O(I),S&&S.l(I),I.forEach(m),k=O(V),V.forEach(m),this.h()},h(){r.a=null,p(t,"type","button"),p(t,"class","absolute top-2 right-2 h-6 w-6 rounded-full flex items-center justify-center bg-gray-100 text-gray-500 hover:bg-red-50 hover:text-red-500 dark:bg-gray-800 dark:hover:bg-gray-700 transition-colors"),p(t,"title","Remove tag"),p(i,"class","font-medium text-sm mb-1"),p(u,"href",v=`https://www.wikidata.org/wiki/${l[18].id}`),p(u,"target","_blank"),p(u,"rel","noopener noreferrer"),p(u,"class","text-xs text-gray-500 hover:text-rose-700 dark:hover:text-rose-400 transition-colors"),p(n,"class","pr-6"),p(e,"class","relative p-3 rounded-md border bg-gray-50 dark:bg-neutral-900 dark:border-gray-700 transition-all hover:shadow-sm")},m(E,V){j(E,e,V),_(e,t),r.m(a,t),_(e,s),_(e,n),_(n,i),_(i,c),_(n,h),_(n,u),_(u,d),_(n,g),S&&S.m(n,null),_(e,k),b||(L=fe(t,"click",z),b=!0)},p(E,V){l=E,V&1&&o!==(o=l[18].label+"")&&X(c,o),V&1&&f!==(f=l[18].id+"")&&X(d,f),V&1&&v!==(v=`https://www.wikidata.org/wiki/${l[18].id}`)&&p(u,"href",v),l[18].description?S?S.p(l,V):(S=at(l),S.c(),S.m(n,null)):S&&(S.d(1),S=null)},d(E){E&&m(e),S&&S.d(),b=!1,L()}}}function Zt(l){let e,t,r,a,s,n,i,o;function c(k){l[15](k)}let h={type:"text",placeholder:"Add relevant tags",class:"w-full p-2 border rounded dark:border-gray-600"};l[1]!==void 0&&(h.value=l[1]),t=new Ce({props:h}),le.push(()=>ne(t,"value",c)),t.$on("input",l[9]);let u=l[2]&&lt(),f=l[3]&&l[4].length>0&&rt(l);function d(k,b){return k[0].length>0?Xt:Wt}let v=d(l),g=v(l);return{c(){e=w("div"),Q(t.$$.fragment),a=T(),u&&u.c(),s=T(),f&&f.c(),n=T(),i=w("div"),g.c(),this.h()},l(k){e=y(k,"DIV",{class:!0});var b=$(e);K(t.$$.fragment,b),a=O(b),u&&u.l(b),s=O(b),f&&f.l(b),n=O(b),i=y(b,"DIV",{class:!0});var L=$(i);g.l(L),L.forEach(m),b.forEach(m),this.h()},h(){p(i,"class","selected-items mt-4"),p(e,"class","w-full mx-auto relative search-container text-sm")},m(k,b){j(k,e,b),G(t,e,null),_(e,a),u&&u.m(e,null),_(e,s),f&&f.m(e,null),_(e,n),_(e,i),g.m(i,null),o=!0},p(k,[b]){const L={};!r&&b&2&&(r=!0,L.value=k[1],re(()=>r=!1)),t.$set(L),k[2]?u||(u=lt(),u.c(),u.m(e,s)):u&&(u.d(1),u=null),k[3]&&k[4].length>0?f?(f.p(k,b),b&24&&q(f,1)):(f=rt(k),f.c(),q(f,1),f.m(e,n)):f&&(xe(),B(f,1,1,()=>{f=null}),je()),v===(v=d(k))&&g?g.p(k,b):(g.d(1),g=v(k),g&&(g.c(),g.m(i,null)))},i(k){o||(q(t.$$.fragment,k),q(f),o=!0)},o(k){B(t.$$.fragment,k),B(f),o=!1},d(k){k&&m(e),ee(t),u&&u.d(),f&&f.d(),g.d()}}}function Jt(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>'}function Qt(l,e,t){let r,a,s,n,i="",o=ve([]);_e(l,o,E=>t(4,n=E));let c=ve([]);_e(l,c,E=>t(0,r=E));let h=ve(!1);_e(l,h,E=>t(2,a=E));let u=ve(!1);_e(l,u,E=>t(3,s=E));const f=async()=>{if(!i){o.set([]),u.set(!1);return}h.set(!0),u.set(!0);try{const P=(await(await fetch(`https://www.wikidata.org/w/api.php?action=wbsearchentities&search=${encodeURIComponent(i)}&language=en&format=json&origin=*`)).json()).search.map(I=>({id:I.id,label:I.label,description:I.description||"No description available"}));o.set(P)}catch(E){console.error("Search failed",E),o.set([])}finally{h.set(!1)}},d=E=>{c.update(V=>V.find(P=>P.id===E.id)?V:[...V,E]),u.set(!1)},v=E=>{c.update(V=>V.filter(P=>P.id!==E))};Ct(()=>{const E=V=>{document.querySelector(".search-container").contains(V.target)||u.set(!1)};return document.addEventListener("click",E),()=>document.removeEventListener("click",E)});let{tags:g}=e,{labels:k}=e,{selectedCount:b=0}=e;function L(E){i=E,t(1,i)}const z=E=>d(E),S=E=>v(E.id);return l.$$set=E=>{"tags"in E&&t(12,g=E.tags),"labels"in E&&t(13,k=E.labels),"selectedCount"in E&&t(14,b=E.selectedCount)},l.$$.update=()=>{l.$$.dirty&1&&t(12,g=r),l.$$.dirty&1&&t(13,k=r),l.$$.dirty&1&&t(14,b=r.length)},[r,i,a,s,n,o,c,h,u,f,d,v,g,k,b,L,z,S]}class Kt extends Le{constructor(e){super(),De(this,e,Qt,Zt,Ie,{tags:12,labels:13,selectedCount:14})}}function Gt(l){let e,t,r,a,s,n,i,o=(l[2]?"Loading...":l[0]||"Select a color")+"",c,h,u,f,d,v,g,k;return{c(){e=w("div"),t=w("input"),r=T(),a=w("div"),s=w("div"),n=T(),i=w("span"),c=H(o),h=T(),u=w("span"),f=H("("),d=H(l[1]),v=H(")"),this.h()},l(b){e=y(b,"DIV",{class:!0});var L=$(e);t=y(L,"INPUT",{type:!0,id:!0,class:!0,"aria-label":!0}),r=O(L),a=y(L,"DIV",{class:!0});var z=$(a);s=y(z,"DIV",{class:!0,style:!0}),$(s).forEach(m),n=O(z),i=y(z,"SPAN",{class:!0});var S=$(i);c=R(S,o),h=O(S),u=y(S,"SPAN",{class:!0});var E=$(u);f=R(E,"("),d=R(E,l[1]),v=R(E,")"),E.forEach(m),S.forEach(m),z.forEach(m),L.forEach(m),this.h()},h(){p(t,"type","color"),p(t,"id","color-picker"),t.value=l[1],p(t,"class","w-full sm:w-14 h-10 border-none p-0 cursor-pointer rounded"),p(t,"aria-label","Select color"),p(s,"class","w-6 h-6 rounded border"),Ze(s,"background-color",l[1]),p(u,"class","text-xs opacity-75 ml-1"),p(i,"class","text-sm truncate"),p(a,"class","flex items-center gap-2 flex-1 mt-2 sm:mt-0 border rounded p-2 bg-white dark:bg-neutral-800"),p(e,"class","flex flex-col sm:flex-row sm:items-center gap-3")},m(b,L){j(b,e,L),_(e,t),_(e,r),_(e,a),_(a,s),_(a,n),_(a,i),_(i,c),_(i,h),_(i,u),_(u,f),_(u,d),_(u,v),g||(k=fe(t,"change",l[3]),g=!0)},p(b,[L]){L&2&&(t.value=b[1]),L&2&&Ze(s,"background-color",b[1]),L&5&&o!==(o=(b[2]?"Loading...":b[0]||"Select a color")+"")&&X(c,o),L&2&&X(d,b[1])},i:ue,o:ue,d(b){b&&m(e),g=!1,k()}}}function it(l){return l?(l.startsWith("#")||(l="#"+l),/^#([0-9A-Fa-f]{3}){1,2}$/.test(l)?l:(console.warn("Invalid hex color, using default:",l),"#ffffff")):"#ffffff"}function el(l,e,t){let{value:r=""}=e,{hexValue:a="#ffffff"}=e,s=a||"#ffffff",n=!1;const i=Re();async function o(h){t(2,n=!0),h=it(h);const u=h.replace("#","");try{const f=await fetch(`https://www.thecolorapi.com/id?hex=${u}`);if(!f.ok)throw new Error("Failed to fetch color name");const d=await f.json();t(0,r=d.name.value||"Unknown color"),t(4,a=h),i("colorchange",{color:r,hex:h})}catch(f){console.error("Error fetching color name:",f),t(0,r="Unknown color"),t(4,a=h),i("colorchange",{color:r,hex:h})}finally{t(2,n=!1)}}function c(h){t(1,s=it(h.target.value)),o(s)}return l.$$set=h=>{"value"in h&&t(0,r=h.value),"hexValue"in h&&t(4,a=h.hexValue)},[r,s,n,c,a]}class tl extends Le{constructor(e){super(),De(this,e,el,Gt,Ie,{value:0,hexValue:4})}}function ot(l,e,t){const r=l.slice();return r[26]=e[t],r}function ut(l,e,t){const r=l.slice();return r[23]=e[t],r}function ct(l){let e;function t(s,n){return s[4]?il:s[5]?sl:s[6].length===0&&s[1].length>=2?al:s[1].length>=2&&s[6].length>0?nl:s[3].length>0?rl:ll}let r=t(l),a=r(l);return{c(){e=w("div"),a.c(),this.h()},l(s){e=y(s,"DIV",{class:!0});var n=$(e);a.l(n),n.forEach(m),this.h()},h(){p(e,"class","absolute z-20 mt-1 w-full max-h-60 overflow-y-auto bg-white dark:bg-neutral-900 shadow-lg border rounded-md")},m(s,n){j(s,e,n),a.m(e,null)},p(s,n){r===(r=t(s))&&a?a.p(s,n):(a.d(1),a=r(s),a&&(a.c(),a.m(e,null)))},d(s){s&&m(e),a.d()}}}function ll(l){let e,t="Type at least 2 characters to search for materials";return{c(){e=w("div"),e.textContent=t,this.h()},l(r){e=y(r,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1aqodsy"&&(e.textContent=t),this.h()},h(){p(e,"class","p-3 text-sm text-gray-500")},m(r,a){j(r,e,a)},p:ue,d(r){r&&m(e)}}}function rl(l){let e,t,r="Common Material Categories",a,s,n,i="Type to search for specific materials",o=ce(l[3]),c=[];for(let h=0;h<o.length;h+=1)c[h]=ft(ot(l,o,h));return{c(){e=w("div"),t=w("div"),t.textContent=r,a=T();for(let h=0;h<c.length;h+=1)c[h].c();s=T(),n=w("div"),n.textContent=i,this.h()},l(h){e=y(h,"DIV",{class:!0});var u=$(e);t=y(u,"DIV",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-veu948"&&(t.textContent=r),a=O(u);for(let f=0;f<c.length;f+=1)c[f].l(u);s=O(u),n=y(u,"DIV",{class:!0,"data-svelte-h":!0}),W(n)!=="svelte-fk0eye"&&(n.textContent=i),u.forEach(m),this.h()},h(){p(t,"class","text-xs font-semibold mb-1 px-2 text-gray-500"),p(n,"class","text-xs text-center mt-2 text-gray-500"),p(e,"class","p-2")},m(h,u){j(h,e,u),_(e,t),_(e,a);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(e,null);_(e,s),_(e,n)},p(h,u){if(u&8200){o=ce(h[3]);let f;for(f=0;f<o.length;f+=1){const d=ot(h,o,f);c[f]?c[f].p(d,u):(c[f]=ft(d),c[f].c(),c[f].m(e,s))}for(;f<c.length;f+=1)c[f].d(1);c.length=o.length}},d(h){h&&m(e),we(c,h)}}}function nl(l){let e,t,r="Material Suggestions",a,s=ce(l[6]),n=[];for(let i=0;i<s.length;i+=1)n[i]=ht(ut(l,s,i));return{c(){e=w("div"),t=w("div"),t.textContent=r,a=T();for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=y(i,"DIV",{class:!0});var o=$(e);t=y(o,"DIV",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-1bl4i5a"&&(t.textContent=r),a=O(o);for(let c=0;c<n.length;c+=1)n[c].l(o);o.forEach(m),this.h()},h(){p(t,"class","text-xs font-semibold mb-1 px-2 text-gray-500"),p(e,"class","p-2")},m(i,o){j(i,e,o),_(e,t),_(e,a);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null)},p(i,o){if(o&4160){s=ce(i[6]);let c;for(c=0;c<s.length;c+=1){const h=ut(i,s,c);n[c]?n[c].p(h,o):(n[c]=ht(h),n[c].c(),n[c].m(e,null))}for(;c<n.length;c+=1)n[c].d(1);n.length=s.length}},d(i){i&&m(e),we(n,i)}}}function al(l){let e,t="No matching materials found. You can use your own term.";return{c(){e=w("div"),e.textContent=t,this.h()},l(r){e=y(r,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1m3g9j"&&(e.textContent=t),this.h()},h(){p(e,"class","p-3 text-sm text-gray-500")},m(r,a){j(r,e,a)},p:ue,d(r){r&&m(e)}}}function sl(l){let e,t;return{c(){e=w("div"),t=H(l[5]),this.h()},l(r){e=y(r,"DIV",{class:!0});var a=$(e);t=R(a,l[5]),a.forEach(m),this.h()},h(){p(e,"class","p-3 text-sm text-red-500")},m(r,a){j(r,e,a),_(e,t)},p(r,a){a&32&&X(t,r[5])},d(r){r&&m(e)}}}function il(l){let e,t='<div class="animate-spin h-4 w-4 border-2 border-neutral-300 rounded-full border-t-neutral-600 mr-2"></div> <span class="text-sm">Loading materials...</span>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(r){e=y(r,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-xwku09"&&(e.innerHTML=t),this.h()},h(){p(e,"class","p-3 flex items-center justify-center")},m(r,a){j(r,e,a)},p:ue,d(r){r&&m(e)}}}function ft(l){let e,t,r=l[26].label+"",a,s,n,i="Select as material",o,c;function h(){return l[18](l[26])}return{c(){e=w("button"),t=w("div"),a=H(r),s=T(),n=w("div"),n.textContent=i,this.h()},l(u){e=y(u,"BUTTON",{class:!0});var f=$(e);t=y(f,"DIV",{class:!0});var d=$(t);a=R(d,r),d.forEach(m),s=O(f),n=y(f,"DIV",{class:!0,"data-svelte-h":!0}),W(n)!=="svelte-1kkrvo2"&&(n.textContent=i),f.forEach(m),this.h()},h(){p(t,"class","text-sm font-medium"),p(n,"class","text-xs text-gray-500"),p(e,"class","block w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-neutral-800 rounded transition-colors")},m(u,f){j(u,e,f),_(e,t),_(t,a),_(e,s),_(e,n),o||(c=fe(e,"click",h),o=!0)},p(u,f){l=u,f&8&&r!==(r=l[26].label+"")&&X(a,r)},d(u){u&&m(e),o=!1,c()}}}function dt(l){let e,t=l[23].description+"",r;return{c(){e=w("div"),r=H(t),this.h()},l(a){e=y(a,"DIV",{class:!0});var s=$(e);r=R(s,t),s.forEach(m),this.h()},h(){p(e,"class","text-xs text-gray-500 line-clamp-1")},m(a,s){j(a,e,s),_(e,r)},p(a,s){s&64&&t!==(t=a[23].description+"")&&X(r,t)},d(a){a&&m(e)}}}function ht(l){let e,t,r=l[23].label+"",a,s,n,i,o,c=l[23].description&&dt(l);function h(){return l[17](l[23])}return{c(){e=w("button"),t=w("div"),a=H(r),s=T(),c&&c.c(),n=T(),this.h()},l(u){e=y(u,"BUTTON",{class:!0});var f=$(e);t=y(f,"DIV",{class:!0});var d=$(t);a=R(d,r),d.forEach(m),s=O(f),c&&c.l(f),n=O(f),f.forEach(m),this.h()},h(){p(t,"class","text-sm font-medium"),p(e,"class","block w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-neutral-800 rounded transition-colors")},m(u,f){j(u,e,f),_(e,t),_(t,a),_(e,s),c&&c.m(e,null),_(e,n),i||(o=fe(e,"click",h),i=!0)},p(u,f){l=u,f&64&&r!==(r=l[23].label+"")&&X(a,r),l[23].description?c?c.p(l,f):(c=dt(l),c.c(),c.m(e,n)):c&&(c.d(1),c=null)},d(u){u&&m(e),c&&c.d(),i=!1,o()}}}function ol(l){let e,t,r,a,s;function n(c){l[16](c)}let i={type:"text",placeholder:l[0],class:"w-full"};l[1]!==void 0&&(i.value=l[1]),t=new Ce({props:i}),le.push(()=>ne(t,"value",n)),t.$on("input",l[11]),t.$on("focus",l[14]);let o=l[2]&&ct(l);return{c(){e=w("div"),Q(t.$$.fragment),a=T(),o&&o.c(),this.h()},l(c){e=y(c,"DIV",{class:!0});var h=$(e);K(t.$$.fragment,h),a=O(h),o&&o.l(h),h.forEach(m),this.h()},h(){p(e,"class","material-selector relative")},m(c,h){j(c,e,h),G(t,e,null),_(e,a),o&&o.m(e,null),s=!0},p(c,[h]){const u={};h&1&&(u.placeholder=c[0]),!r&&h&2&&(r=!0,u.value=c[1],re(()=>r=!1)),t.$set(u),c[2]?o?o.p(c,h):(o=ct(c),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i(c){s||(q(t.$$.fragment,c),s=!0)},o(c){B(t.$$.fragment,c),s=!1},d(c){c&&m(e),ee(t),o&&o.d()}}}function He(l){return l?l.charAt(0).toUpperCase()+l.slice(1):""}function ul(l,e,t){let r,a,s,n,{value:i=""}=e,{placeholder:o="Select or type a material"}=e;const c=Re();let h=i||"",u=!1,f=ve(!1);_e(l,f,C=>t(4,a=C));let d=ve([]);_e(l,d,C=>t(6,n=C));let v=ve([]);_e(l,v,C=>t(3,r=C));let g=ve(null);_e(l,g,C=>t(5,s=C));async function k(C){if(!C||C.length<2){d.set([]);return}f.set(!0),g.set(null);try{const F=`https://www.wikidata.org/w/api.php?action=wbsearchentities&search=${encodeURIComponent(C)}&language=en&format=json&origin=*&limit=8&type=item`,te=await fetch(F);if(!te.ok)throw new Error("Failed to fetch from Wikidata");const oe=(await te.json()).search.filter(Y=>{var M,Z;const x=((M=Y.label)==null?void 0:M.toLowerCase())||"",N=((Z=Y.description)==null?void 0:Z.toLowerCase())||"";return["material","substance","metal","alloy","polymer","ceramic","wood","plastic","fabric","textile","compound","element","mineral"].some($e=>N.includes($e))}).map(Y=>({id:Y.id,label:Y.label,description:Y.description||"No description available"}));d.set(oe)}catch(F){console.error("Error fetching materials:",F),g.set("Failed to fetch materials. Please try again."),d.set([])}finally{f.set(!1)}}async function b(){f.set(!0),g.set(null);try{const F=`https://query.wikidata.org/sparql?query=${encodeURIComponent(`
        SELECT ?category ?categoryLabel WHERE {
          ?category wdt:P279 wd:Q214609. # subclass of material
          SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }
        }
        LIMIT 15
      `)}&format=json`,te=await fetch(F);if(!te.ok)throw new Error("Failed to fetch material categories");const oe=(await te.json()).results.bindings.map(Y=>({id:Y.category.value.split("/").pop(),label:Y.categoryLabel.value}));v.set(oe)}catch(C){console.error("Error fetching material categories:",C),g.set("Failed to load material categories."),v.set([])}finally{f.set(!1)}}let L;function z(){h&&t(1,h=He(h)),t(15,i=h),c("change",{value:h}),clearTimeout(L),L=setTimeout(()=>{h.length>=2?k(h):d.set([])},300)}function S(C){const F=He(C.label);t(1,h=F),t(15,i=F),c("change",{value:F,id:C.id,description:C.description}),t(2,u=!1)}function E(C){const F=He(C.label);t(1,h=F),t(15,i=F),c("change",{value:F,id:C.id}),t(2,u=!1)}function V(){t(2,u=!0),h.length<2&&r.length===0?b():h.length>=2&&k(h)}Ct(()=>{function C(F){F.target.closest(".material-selector")||t(2,u=!1)}return document.addEventListener("click",C),()=>{document.removeEventListener("click",C)}});function P(C){h=C,t(1,h)}const I=C=>S(C),J=C=>E(C);return l.$$set=C=>{"value"in C&&t(15,i=C.value),"placeholder"in C&&t(0,o=C.placeholder)},[o,h,u,r,a,s,n,f,d,v,g,z,S,E,V,i,P,I,J]}class cl extends Le{constructor(e){super(),De(this,e,ul,ol,Ie,{value:15,placeholder:0})}}function pt(l,e,t){const r=l.slice();r[31]=e[t],r[33]=e,r[34]=t;const a=r[5].find(function(...n){return l[29](r[31],...n)});return r[32]=a,r}function mt(l,e,t){const r=l.slice();return r[35]=e[t],r}function _t(l,e,t){const r=l.slice();return r[38]=e[t],r}function fl(l){let e,t,r,a,s,n="Add Attribute";return{c(){e=Ue("svg"),t=Ue("line"),r=Ue("line"),a=T(),s=w("span"),s.textContent=n,this.h()},l(i){e=Be(i,"svg",{xmlns:!0,width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var o=$(e);t=Be(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),$(t).forEach(m),r=Be(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),$(r).forEach(m),o.forEach(m),a=O(i),s=y(i,"SPAN",{class:!0,"data-svelte-h":!0}),W(s)!=="svelte-surwue"&&(s.textContent=n),this.h()},h(){p(t,"x1","12"),p(t,"y1","5"),p(t,"x2","12"),p(t,"y2","19"),p(r,"x1","5"),p(r,"y1","12"),p(r,"x2","19"),p(r,"y2","12"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"width","16"),p(e,"height","16"),p(e,"viewBox","0 0 24 24"),p(e,"fill","none"),p(e,"stroke","currentColor"),p(e,"stroke-width","2"),p(e,"stroke-linecap","round"),p(e,"stroke-linejoin","round"),p(e,"class","feather feather-plus"),p(s,"class","text-sm")},m(i,o){j(i,e,o),_(e,t),_(e,r),j(i,a,o),j(i,s,o)},p:ue,d(i){i&&(m(e),m(a),m(s))}}}function gt(l){let e,t,r,a="Select Attribute",s,n,i="✕",o,c,h,u,f=ce(l[3]),d=[];for(let g=0;g<f.length;g+=1)d[g]=bt(_t(l,f,g));let v=l[3].length===0&&vt();return{c(){e=w("div"),t=w("div"),r=w("span"),r.textContent=a,s=T(),n=w("button"),n.textContent=i,o=T();for(let g=0;g<d.length;g+=1)d[g].c();c=T(),v&&v.c(),this.h()},l(g){e=y(g,"DIV",{class:!0});var k=$(e);t=y(k,"DIV",{class:!0});var b=$(t);r=y(b,"SPAN",{class:!0,"data-svelte-h":!0}),W(r)!=="svelte-4alrd8"&&(r.textContent=a),s=O(b),n=y(b,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),W(n)!=="svelte-7xqa6n"&&(n.textContent=i),b.forEach(m),o=O(k);for(let L=0;L<d.length;L+=1)d[L].l(k);c=O(k),v&&v.l(k),k.forEach(m),this.h()},h(){p(r,"class","text-sm font-medium"),p(n,"class","text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"),p(n,"aria-label","Close selector"),p(t,"class","sticky top-0 bg-white dark:bg-neutral-800 p-2 border-b mb-1 flex items-center justify-between"),p(e,"class","mt-2 p-2 border rounded bg-white dark:bg-neutral-950 shadow-lg max-h-60 overflow-y-auto mb-4 z-10 relative")},m(g,k){j(g,e,k),_(e,t),_(t,r),_(t,s),_(t,n),_(e,o);for(let b=0;b<d.length;b+=1)d[b]&&d[b].m(e,null);_(e,c),v&&v.m(e,null),h||(u=fe(n,"click",l[11]),h=!0)},p(g,k){if(k[0]&72){f=ce(g[3]);let b;for(b=0;b<f.length;b+=1){const L=_t(g,f,b);d[b]?d[b].p(L,k):(d[b]=bt(L),d[b].c(),d[b].m(e,c))}for(;b<d.length;b+=1)d[b].d(1);d.length=f.length}g[3].length===0?v||(v=vt(),v.c(),v.m(e,null)):v&&(v.d(1),v=null)},d(g){g&&m(e),we(d,g),v&&v.d(),h=!1,u()}}}function bt(l){let e,t=l[38].label+"",r,a,s;function n(){return l[12](l[38])}return{c(){e=w("button"),r=H(t),this.h()},l(i){e=y(i,"BUTTON",{class:!0});var o=$(e);r=R(o,t),o.forEach(m),this.h()},h(){p(e,"class","block w-full text-left p-2.5 hover:bg-neutral-100 dark:hover:bg-neutral-700 rounded transition-colors text-sm")},m(i,o){j(i,e,o),_(e,r),a||(s=fe(e,"click",n),a=!0)},p(i,o){l=i,o[0]&8&&t!==(t=l[38].label+"")&&X(r,t)},d(i){i&&m(e),a=!1,s()}}}function vt(l){let e,t="All attributes have been added";return{c(){e=w("p"),e.textContent=t,this.h()},l(r){e=y(r,"P",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-10tjwa0"&&(e.textContent=t),this.h()},h(){p(e,"class","p-2 text-sm text-neutral-500 text-center")},m(r,a){j(r,e,a)},d(r){r&&m(e)}}}function dl(l){let e,t="No attributes added yet. Click 'Add Attribute' to start.";return{c(){e=w("p"),e.textContent=t,this.h()},l(r){e=y(r,"P",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-vce7sm"&&(e.textContent=t),this.h()},h(){p(e,"class","text-sm text-neutral-500 dark:text-gray-400 mt-2")},m(r,a){j(r,e,a)},p:ue,i:ue,o:ue,d(r){r&&m(e)}}}function hl(l){let e,t,r=ce(l[0]),a=[];for(let n=0;n<r.length;n+=1)a[n]=wt(pt(l,r,n));const s=n=>B(a[n],1,1,()=>{a[n]=null});return{c(){e=w("div");for(let n=0;n<a.length;n+=1)a[n].c();this.h()},l(n){e=y(n,"DIV",{class:!0});var i=$(e);for(let o=0;o<a.length;o+=1)a[o].l(i);i.forEach(m),this.h()},h(){p(e,"class","grid grid-cols-1 sm:grid-cols-2 gap-4 mb-2")},m(n,i){j(n,e,i);for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(e,null);t=!0},p(n,i){if(i[0]&947){r=ce(n[0]);let o;for(o=0;o<r.length;o+=1){const c=pt(n,r,o);a[o]?(a[o].p(c,i),q(a[o],1)):(a[o]=wt(c),a[o].c(),q(a[o],1),a[o].m(e,null))}for(xe(),o=r.length;o<a.length;o+=1)s(o);je()}},i(n){if(!t){for(let i=0;i<r.length;i+=1)q(a[i]);t=!0}},o(n){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)B(a[i]);t=!1},d(n){n&&m(e),we(a,n)}}}function pl(l){let e,t=l[32].label+"",r,a,s,n,i,o;function c(u){l[27](u,l[31])}let h={type:l[32].type||"text",id:l[31],class:"w-full p-2 border rounded dark:border-neutral-600",placeholder:l[32].placeholder||""};return l[1][l[31]]!==void 0&&(h.value=l[1][l[31]]),n=new Ce({props:h}),le.push(()=>ne(n,"value",c)),n.$on("input",l[28]),{c(){e=w("label"),r=H(t),s=T(),Q(n.$$.fragment),this.h()},l(u){e=y(u,"LABEL",{for:!0,class:!0});var f=$(e);r=R(f,t),f.forEach(m),s=O(u),K(n.$$.fragment,u),this.h()},h(){p(e,"for",a=l[31]),p(e,"class","block text-sm font-medium mb-2")},m(u,f){j(u,e,f),_(e,r),j(u,s,f),G(n,u,f),o=!0},p(u,f){l=u,(!o||f[0]&1)&&t!==(t=l[32].label+"")&&X(r,t),(!o||f[0]&33&&a!==(a=l[31]))&&p(e,"for",a);const d={};f[0]&1&&(d.type=l[32].type||"text"),f[0]&1&&(d.id=l[31]),f[0]&1&&(d.placeholder=l[32].placeholder||""),!i&&f[0]&3&&(i=!0,d.value=l[1][l[31]],re(()=>i=!1)),n.$set(d)},i(u){o||(q(n.$$.fragment,u),o=!0)},o(u){B(n.$$.fragment,u),o=!1},d(u){u&&(m(e),m(s)),ee(n,u)}}}function ml(l){let e,t=l[32].label+"",r,a,s,n,i,o;function c(u){l[26](u)}let h={placeholder:l[32].placeholder};return l[1].material!==void 0&&(h.value=l[1].material),n=new cl({props:h}),le.push(()=>ne(n,"value",c)),n.$on("change",l[9]),{c(){e=w("label"),r=H(t),s=T(),Q(n.$$.fragment),this.h()},l(u){e=y(u,"LABEL",{for:!0,class:!0});var f=$(e);r=R(f,t),f.forEach(m),s=O(u),K(n.$$.fragment,u),this.h()},h(){p(e,"for",a=l[31]),p(e,"class","block text-sm font-medium mb-2")},m(u,f){j(u,e,f),_(e,r),j(u,s,f),G(n,u,f),o=!0},p(u,f){(!o||f[0]&1)&&t!==(t=u[32].label+"")&&X(r,t),(!o||f[0]&33&&a!==(a=u[31]))&&p(e,"for",a);const d={};f[0]&1&&(d.placeholder=u[32].placeholder),!i&&f[0]&2&&(i=!0,d.value=u[1].material,re(()=>i=!1)),n.$set(d)},i(u){o||(q(n.$$.fragment,u),o=!0)},o(u){B(n.$$.fragment,u),o=!1},d(u){u&&(m(e),m(s)),ee(n,u)}}}function _l(l){let e,t=l[32].label+"",r,a,s,n,i,o,c;function h(d){l[24](d)}function u(d){l[25](d)}let f={};return l[1].color!==void 0&&(f.value=l[1].color),l[1].colorHex!==void 0&&(f.hexValue=l[1].colorHex),n=new tl({props:f}),le.push(()=>ne(n,"value",h)),le.push(()=>ne(n,"hexValue",u)),n.$on("colorchange",l[8]),{c(){e=w("label"),r=H(t),s=T(),Q(n.$$.fragment),this.h()},l(d){e=y(d,"LABEL",{for:!0,class:!0});var v=$(e);r=R(v,t),v.forEach(m),s=O(d),K(n.$$.fragment,d),this.h()},h(){p(e,"for",a=l[31]),p(e,"class","block text-sm font-medium mb-2")},m(d,v){j(d,e,v),_(e,r),j(d,s,v),G(n,d,v),c=!0},p(d,v){(!c||v[0]&1)&&t!==(t=d[32].label+"")&&X(r,t),(!c||v[0]&33&&a!==(a=d[31]))&&p(e,"for",a);const g={};!i&&v[0]&2&&(i=!0,g.value=d[1].color,re(()=>i=!1)),!o&&v[0]&2&&(o=!0,g.hexValue=d[1].colorHex,re(()=>o=!1)),n.$set(g)},i(d){c||(q(n.$$.fragment,d),c=!0)},o(d){B(n.$$.fragment,d),c=!1},d(d){d&&(m(e),m(s)),ee(n,d)}}}function gl(l){let e,t,r,a,s,n,i=l[32].label+"",o,c,h,u;function f(){l[22].call(r,l[31])}return{c(){e=w("div"),t=w("div"),r=w("input"),s=T(),n=w("label"),o=H(i),this.h()},l(d){e=y(d,"DIV",{class:!0});var v=$(e);t=y(v,"DIV",{class:!0});var g=$(t);r=y(g,"INPUT",{type:!0,id:!0,class:!0}),s=O(g),n=y(g,"LABEL",{for:!0,class:!0});var k=$(n);o=R(k,i),k.forEach(m),g.forEach(m),v.forEach(m),this.h()},h(){p(r,"type","checkbox"),p(r,"id",a=`${l[31]}-checkbox`),p(r,"class","w-4 h-4 mr-3"),p(n,"for",c=`${l[31]}-checkbox`),p(n,"class","text-sm font-medium"),p(t,"class","flex items-center"),p(e,"class","pt-2")},m(d,v){j(d,e,v),_(e,t),_(t,r),r.checked=l[1][l[31]],_(t,s),_(t,n),_(n,o),h||(u=[fe(r,"change",f),fe(r,"change",l[23])],h=!0)},p(d,v){l=d,v[0]&33&&a!==(a=`${l[31]}-checkbox`)&&p(r,"id",a),v[0]&35&&(r.checked=l[1][l[31]]),v[0]&1&&i!==(i=l[32].label+"")&&X(o,i),v[0]&33&&c!==(c=`${l[31]}-checkbox`)&&p(n,"for",c)},i:ue,o:ue,d(d){d&&m(e),h=!1,Vt(u)}}}function bl(l){let e,t="Dimensions (cm)",r,a,s,n,i="Length",o,c,h,u,f,d,v="Width",g,k,b,L,z,S,E="Height",V,P,I,J;function C(x){l[16](x)}let F={type:"number",id:"sizeX",class:"w-full p-2 border rounded dark:border-neutral-600",placeholder:"Length (cm)"};l[1].sizeX!==void 0&&(F.value=l[1].sizeX),c=new Ce({props:F}),le.push(()=>ne(c,"value",C)),c.$on("input",l[17]);function te(x){l[18](x)}let ae={type:"number",id:"sizeY",class:"w-full p-2 border rounded dark:border-neutral-600",placeholder:"Width (cm)"};l[1].sizeY!==void 0&&(ae.value=l[1].sizeY),k=new Ce({props:ae}),le.push(()=>ne(k,"value",te)),k.$on("input",l[19]);function oe(x){l[20](x)}let Y={type:"number",id:"sizeZ",class:"w-full p-2 border rounded dark:border-neutral-600",placeholder:"Height (cm)"};return l[1].sizeZ!==void 0&&(Y.value=l[1].sizeZ),P=new Ce({props:Y}),le.push(()=>ne(P,"value",oe)),P.$on("input",l[21]),{c(){e=w("div"),e.textContent=t,r=T(),a=w("div"),s=w("div"),n=w("label"),n.textContent=i,o=T(),Q(c.$$.fragment),u=T(),f=w("div"),d=w("label"),d.textContent=v,g=T(),Q(k.$$.fragment),L=T(),z=w("div"),S=w("label"),S.textContent=E,V=T(),Q(P.$$.fragment),this.h()},l(x){e=y(x,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1nva788"&&(e.textContent=t),r=O(x),a=y(x,"DIV",{class:!0,role:!0,"aria-labelledby":!0});var N=$(a);s=y(N,"DIV",{});var A=$(s);n=y(A,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(n)!=="svelte-14ubxu4"&&(n.textContent=i),o=O(A),K(c.$$.fragment,A),A.forEach(m),u=O(N),f=y(N,"DIV",{});var M=$(f);d=y(M,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(d)!=="svelte-1mon701"&&(d.textContent=v),g=O(M),K(k.$$.fragment,M),M.forEach(m),L=O(N),z=y(N,"DIV",{});var Z=$(z);S=y(Z,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(S)!=="svelte-1w92f5h"&&(S.textContent=E),V=O(Z),K(P.$$.fragment,Z),Z.forEach(m),N.forEach(m),this.h()},h(){p(e,"id","dimensions-label"),p(e,"class","block text-sm font-medium mb-3"),p(n,"for","sizeX"),p(n,"class","block text-xs font-medium mb-1"),p(d,"for","sizeY"),p(d,"class","block text-xs font-medium mb-1"),p(S,"for","sizeZ"),p(S,"class","block text-xs font-medium mb-1"),p(a,"class","grid grid-cols-3 gap-3"),p(a,"role","group"),p(a,"aria-labelledby","dimensions-label")},m(x,N){j(x,e,N),j(x,r,N),j(x,a,N),_(a,s),_(s,n),_(s,o),G(c,s,null),_(a,u),_(a,f),_(f,d),_(f,g),G(k,f,null),_(a,L),_(a,z),_(z,S),_(z,V),G(P,z,null),J=!0},p(x,N){const A={};!h&&N[0]&2&&(h=!0,A.value=x[1].sizeX,re(()=>h=!1)),c.$set(A);const M={};!b&&N[0]&2&&(b=!0,M.value=x[1].sizeY,re(()=>b=!1)),k.$set(M);const Z={};!I&&N[0]&2&&(I=!0,Z.value=x[1].sizeZ,re(()=>I=!1)),P.$set(Z)},i(x){J||(q(c.$$.fragment,x),q(k.$$.fragment,x),q(P.$$.fragment,x),J=!0)},o(x){B(c.$$.fragment,x),B(k.$$.fragment,x),B(P.$$.fragment,x),J=!1},d(x){x&&(m(e),m(r),m(a)),ee(c),ee(k),ee(P)}}}function vl(l){let e,t=l[32].label+"",r,a,s,n,i,o,c,h=ce(l[32].options),u=[];for(let d=0;d<h.length;d+=1)u[d]=kt(mt(l,h,d));function f(){l[14].call(n,l[31])}return{c(){e=w("label"),r=H(t),s=T(),n=w("select");for(let d=0;d<u.length;d+=1)u[d].c();this.h()},l(d){e=y(d,"LABEL",{for:!0,class:!0});var v=$(e);r=R(v,t),v.forEach(m),s=O(d),n=y(d,"SELECT",{id:!0,class:!0});var g=$(n);for(let k=0;k<u.length;k+=1)u[k].l(g);g.forEach(m),this.h()},h(){p(e,"for",a=l[31]),p(e,"class","block text-sm font-medium mb-2"),p(n,"id",i=l[31]),p(n,"class","w-full p-2 rounded border dark:border-neutral-600 dark:bg-neutral-950 text-sm"),l[1][l[31]]===void 0&&Pt(f)},m(d,v){j(d,e,v),_(e,r),j(d,s,v),j(d,n,v);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(n,null);Je(n,l[1][l[31]],!0),o||(c=[fe(n,"change",f),fe(n,"change",l[15])],o=!0)},p(d,v){if(l=d,v[0]&1&&t!==(t=l[32].label+"")&&X(r,t),v[0]&33&&a!==(a=l[31])&&p(e,"for",a),v[0]&33){h=ce(l[32].options);let g;for(g=0;g<h.length;g+=1){const k=mt(l,h,g);u[g]?u[g].p(k,v):(u[g]=kt(k),u[g].c(),u[g].m(n,null))}for(;g<u.length;g+=1)u[g].d(1);u.length=h.length}v[0]&33&&i!==(i=l[31])&&p(n,"id",i),v[0]&35&&Je(n,l[1][l[31]])},i:ue,o:ue,d(d){d&&(m(e),m(s),m(n)),we(u,d),o=!1,Vt(c)}}}function kt(l){let e,t=l[35].label+"",r,a;return{c(){e=w("option"),r=H(t),this.h()},l(s){e=y(s,"OPTION",{});var n=$(e);r=R(n,t),n.forEach(m),this.h()},h(){e.__value=a=l[35].value,Qe(e,e.__value)},m(s,n){j(s,e,n),_(e,r)},p(s,n){n[0]&1&&t!==(t=s[35].label+"")&&X(r,t),n[0]&33&&a!==(a=s[35].value)&&(e.__value=a,Qe(e,e.__value))},d(s){s&&m(e)}}}function wt(l){let e,t,r,a=wl()+"",s,n,i,o,c,h,u,f;function d(){return l[13](l[31])}const v=[vl,bl,gl,_l,ml,pl],g=[];function k(b,L){return b[32].type==="select"?0:b[32].type==="dimensions"?1:b[32].type==="checkbox"?2:b[31]==="color"?3:b[31]==="material"?4:5}return n=k(l),i=g[n]=v[n](l),{c(){e=w("div"),t=w("button"),r=new $t(!1),s=T(),i.c(),o=T(),this.h()},l(b){e=y(b,"DIV",{class:!0});var L=$(e);t=y(L,"BUTTON",{type:!0,class:!0,title:!0});var z=$(t);r=At(z,!1),z.forEach(m),s=O(L),i.l(L),o=O(L),L.forEach(m),this.h()},h(){r.a=null,p(t,"type","button"),p(t,"class","absolute top-2 right-2 h-6 w-6 rounded-full flex items-center justify-center bg-neutral-100 text-neutral-500 hover:bg-red-50 hover:text-red-500 dark:bg-neutral-800 dark:hover:bg-neutral-700 transition-colors"),p(t,"title","Remove attribute"),p(e,"class",c="relative p-3 rounded-md border bg-neutral-50 dark:bg-neutral-900 dark:border-neutral-700 transition-all hover:shadow-sm "+(l[32].type==="dimensions"?"col-span-1 sm:col-span-2":""))},m(b,L){j(b,e,L),_(e,t),r.m(a,t),_(e,s),g[n].m(e,null),_(e,o),h=!0,u||(f=fe(t,"click",d),u=!0)},p(b,L){l=b;let z=n;n=k(l),n===z?g[n].p(l,L):(xe(),B(g[z],1,1,()=>{g[z]=null}),je(),i=g[n],i?i.p(l,L):(i=g[n]=v[n](l),i.c()),q(i,1),i.m(e,o)),(!h||L[0]&33&&c!==(c="relative p-3 rounded-md border bg-neutral-50 dark:bg-neutral-900 dark:border-neutral-700 transition-all hover:shadow-sm "+(l[32].type==="dimensions"?"col-span-1 sm:col-span-2":"")))&&p(e,"class",c)},i(b){h||(q(i),h=!0)},o(b){B(i),h=!1},d(b){b&&m(e),g[n].d(),u=!1,f()}}}function kl(l){let e,t,r,a="Object Attributes",s,n,i=l[0].length+"",o,c,h,u,f,d,v,g,k;u=new Me({props:{variant:"outline",class:`w-full p-2 border dark:border-gray-600 rounded mb-4 transition-all hover:bg-neutral-50 dark:hover:bg-neutral-800 flex justify-center items-center gap-2 \r
               `+(l[2]?"ring-2 dark:ring-neutral-50 ring-neutral-800":""),$$slots:{default:[fl]},$$scope:{ctx:l}}}),u.$on("click",l[10]);let b=l[2]&&gt(l);const L=[hl,dl],z=[];function S(E,V){return E[0].length>0?0:1}return v=S(l),g=z[v]=L[v](l),{c(){e=w("div"),t=w("label"),r=w("span"),r.textContent=a,s=T(),n=w("span"),o=H(i),c=H(" added"),h=T(),Q(u.$$.fragment),f=T(),b&&b.c(),d=T(),g.c(),this.h()},l(E){e=y(E,"DIV",{class:!0});var V=$(e);t=y(V,"LABEL",{class:!0});var P=$(t);r=y(P,"SPAN",{"data-svelte-h":!0}),W(r)!=="svelte-1mutspe"&&(r.textContent=a),s=O(P),n=y(P,"SPAN",{class:!0});var I=$(n);o=R(I,i),c=R(I," added"),I.forEach(m),P.forEach(m),h=O(V),K(u.$$.fragment,V),f=O(V),b&&b.l(V),d=O(V),g.l(V),V.forEach(m),this.h()},h(){p(n,"class","ml-2 px-2 py-0.5 bg-gray-100 dark:bg-gray-800 text-xs rounded-full"),p(t,"class","sm:block text-sm font-medium mb-1.5 flex items-center"),p(e,"class","mb-5")},m(E,V){j(E,e,V),_(e,t),_(t,r),_(t,s),_(t,n),_(n,o),_(n,c),_(e,h),G(u,e,null),_(e,f),b&&b.m(e,null),_(e,d),z[v].m(e,null),k=!0},p(E,V){(!k||V[0]&1)&&i!==(i=E[0].length+"")&&X(o,i);const P={};V[0]&4&&(P.class=`w-full p-2 border dark:border-gray-600 rounded mb-4 transition-all hover:bg-neutral-50 dark:hover:bg-neutral-800 flex justify-center items-center gap-2 \r
               `+(E[2]?"ring-2 dark:ring-neutral-50 ring-neutral-800":"")),V[1]&1024&&(P.$$scope={dirty:V,ctx:E}),u.$set(P),E[2]?b?b.p(E,V):(b=gt(E),b.c(),b.m(e,d)):b&&(b.d(1),b=null);let I=v;v=S(E),v===I?z[v].p(E,V):(xe(),B(z[I],1,1,()=>{z[I]=null}),je(),g=z[v],g?g.p(E,V):(g=z[v]=L[v](E),g.c()),q(g,1),g.m(e,null))},i(E){k||(q(u.$$.fragment,E),q(g),k=!0)},o(E){B(u.$$.fragment,E),B(g),k=!1},d(E){E&&m(e),ee(u),b&&b.d(),z[v].d()}}}function wl(){return'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>'}function yl(l,e,t){let r;const a=Re();let{attributeValues:s={}}=e,{activeAttributes:n=[]}=e,i=!1;const o=[{id:"material",label:"Material",placeholder:"E.g., wood, metal, plastic, fabric"},{id:"shape",label:"Shape",placeholder:"E.g., round, square or something more elaborate"},{id:"color",label:"Color",placeholder:"E.g., red, blue, yellow, transparent"},{id:"texture",label:"Texture",placeholder:"E.g., smooth, rough, bumpy"},{id:"marking",label:"Markings",placeholder:"Does it have logo, text, engravings etc?"},{id:"smell",label:"Smell",placeholder:"E.g., sweet, odorless, pungent"},{id:"functionality",label:"Functionality",placeholder:"E.g., cutting, writing, art"},{id:"period",label:"Time Period",placeholder:"E.g., 1800s, 1900s, 2000s"},{id:"location",label:"Location",placeholder:"Where is it typically found? E.g., Europe, Asia"},{id:"writtenText",label:"Written Text",placeholder:"Any writing on the object"},{id:"hardness",label:"Hardness",placeholder:"E.g., soft, hard, flexible"},{id:"value",label:"Price ($)",placeholder:"Estimated value in dollars",type:"number"},{id:"originOfAcquisition",label:"Origin of Acquisition",placeholder:"Where/how you got it"},{id:"pattern",label:"Pattern",placeholder:"E.g., striped, checkered, floral"},{id:"print",label:"Print",placeholder:"Any printed design or imagery"},{id:"dimensions",label:"Dimensions",placeholder:"Size measurements",type:"dimensions"},{id:"weight",label:"Weight (grams)",placeholder:"Weight in grams",type:"number"},{id:"handmade",label:"Handmade",placeholder:"",type:"checkbox"},{id:"oneOfAKind",label:"One of a Kind",placeholder:"",type:"checkbox"}];function c(A){n.includes(A)||(t(0,n=[...n,A]),a("update",{activeAttributes:n})),t(2,i=!1)}function h(A){t(0,n=n.filter(M=>M!==A)),a("update",{activeAttributes:n})}function u(A,M){t(1,s[A]=M,s),a("valuechange",{attributeValues:s})}function f(A){t(1,s.color=A.detail.color,s),t(1,s.colorHex=A.detail.hex,s),a("valuechange",{attributeValues:s})}function d(A){u("material",A.detail.value)}const v=()=>t(2,i=!i),g=()=>t(2,i=!1),k=A=>c(A.id),b=A=>h(A);function L(A){s[A]=zt(this),t(1,s),t(5,o),t(0,n)}const z=()=>a("valuechange",{attributeValues:s});function S(A){l.$$.not_equal(s.sizeX,A)&&(s.sizeX=A,t(1,s))}const E=()=>a("valuechange",{attributeValues:s});function V(A){l.$$.not_equal(s.sizeY,A)&&(s.sizeY=A,t(1,s))}const P=()=>a("valuechange",{attributeValues:s});function I(A){l.$$.not_equal(s.sizeZ,A)&&(s.sizeZ=A,t(1,s))}const J=()=>a("valuechange",{attributeValues:s});function C(A){s[A]=this.checked,t(1,s),t(5,o),t(0,n)}const F=()=>a("valuechange",{attributeValues:s});function te(A){l.$$.not_equal(s.color,A)&&(s.color=A,t(1,s))}function ae(A){l.$$.not_equal(s.colorHex,A)&&(s.colorHex=A,t(1,s))}function oe(A){l.$$.not_equal(s.material,A)&&(s.material=A,t(1,s))}function Y(A,M){l.$$.not_equal(s[M],A)&&(s[M]=A,t(1,s))}const x=()=>a("valuechange",{attributeValues:s}),N=(A,M)=>M.id===A;return l.$$set=A=>{"attributeValues"in A&&t(1,s=A.attributeValues),"activeAttributes"in A&&t(0,n=A.activeAttributes)},l.$$.update=()=>{l.$$.dirty[0]&1&&t(3,r=o.filter(A=>!n.includes(A.id)))},[n,s,i,r,a,o,c,h,f,d,v,g,k,b,L,z,S,E,V,P,I,J,C,F,te,ae,oe,Y,x,N]}class El extends Le{constructor(e){super(),De(this,e,yl,kl,Ie,{attributeValues:1,activeAttributes:0},null,[-1,-1])}}function Cl(l){let e,t,r="Fill in the details about your object, you can leave any blank if you are not sure, but try to be as precise as possible";return{c(){e=H(`Let's help you post new stuff\r
                `),t=w("small"),t.textContent=r,this.h()},l(a){e=R(a,`Let's help you post new stuff\r
                `),t=y(a,"SMALL",{class:!0,"data-svelte-h":!0}),W(t)!=="svelte-1b6x60p"&&(t.textContent=r),this.h()},h(){p(t,"class","block text-xs sm:text-sm mt-1 sm:mt-2 font-semibold opacity-80")},m(a,s){j(a,e,s),j(a,t,s)},p:ue,d(a){a&&(m(e),m(t))}}}function yt(l){let e,t=l[7].title+"",r;return{c(){e=w("p"),r=H(t),this.h()},l(a){e=y(a,"P",{class:!0});var s=$(e);r=R(s,t),s.forEach(m),this.h()},h(){p(e,"class","text-red-500 text-sm mt-1")},m(a,s){j(a,e,s),_(e,r)},p(a,s){s&128&&t!==(t=a[7].title+"")&&X(r,t)},d(a){a&&m(e)}}}function Et(l){let e,t=l[7].description+"",r;return{c(){e=w("p"),r=H(t),this.h()},l(a){e=y(a,"P",{class:!0});var s=$(e);r=R(s,t),s.forEach(m),this.h()},h(){p(e,"class","text-red-500 text-sm mt-1")},m(a,s){j(a,e,s),_(e,r)},p(a,s){s&128&&t!==(t=a[7].description+"")&&X(r,t)},d(a){a&&m(e)}}}function $l(l){let e;return{c(){e=H("Post Your Stuff")},l(t){e=R(t,"Post Your Stuff")},m(t,r){j(t,e,r)},d(t){t&&m(e)}}}function Al(l){let e,t,r,a,s,n="Title*",i,o,c,h,u,f,d,v="Description*",g,k,b,L,z,S,E,V,P,I,J,C,F,te,ae="Tags",oe,Y,x=l[2].length+"",N,A,M,Z,$e,Te,Oe,de,Se,ze,Pe,Ae,he,Ve;e=new Ut({props:{class:"p-3 sm:p-4 text-xl sm:text-2xl mt-4 sm:mt-6 text-center",$$slots:{default:[Cl]},$$scope:{ctx:l}}});function It(D){l[13](D)}let Ye={id:"title",class:"w-full p-2 border rounded dark:border-gray-600 h-auto text-base",placeholder:"This is what people will see on their homepage so try to make it interesting"};l[1]!==void 0&&(Ye.value=l[1]),o=new Ge({props:Ye}),le.push(()=>ne(o,"value",It));let se=l[7].title&&yt(l);function Lt(D){l[14](D)}let We={id:"description",class:"w-full p-2 mb-4 border rounded dark:border-gray-600 h-32",placeholder:"You can add any additional context about your object or how you came into possession of it."};l[4]!==void 0&&(We.value=l[4]),k=new Ge({props:We}),le.push(()=>ne(k,"value",Lt));let ie=l[7].description&&Et(l);function Dt(D){l[15](D)}function xt(D){l[16](D)}let Fe={};l[5]!==void 0&&(Fe.attributeValues=l[5]),l[6]!==void 0&&(Fe.activeAttributes=l[6]),V=new El({props:Fe}),le.push(()=>ne(V,"attributeValues",Dt)),le.push(()=>ne(V,"activeAttributes",xt)),V.$on("update",l[9]),V.$on("valuechange",l[10]);function jt(D){l[17](D)}function Tt(D){l[18](D)}let Ne={};l[2]!==void 0&&(Ne.tags=l[2]),l[3]!==void 0&&(Ne.labels=l[3]),Z=new Kt({props:Ne}),le.push(()=>ne(Z,"tags",jt)),le.push(()=>ne(Z,"labels",Tt));function Ot(D){l[19](D)}function St(D){l[20](D)}let qe={};return l[0]!==void 0&&(qe.mediaFiles=l[0]),l[7]!==void 0&&(qe.errors=l[7]),de=new Mt({props:qe}),le.push(()=>ne(de,"mediaFiles",Ot)),le.push(()=>ne(de,"errors",St)),de.$on("update",l[8]),he=new Me({props:{variant:"outline",size:"icon",class:"w-full p-2 border rounded mb-4 transition-all hover:bg-rose-900 flex justify-center items-center gap-2",$$slots:{default:[$l]},$$scope:{ctx:l}}}),he.$on("click",l[11]),{c(){Q(e.$$.fragment),t=T(),r=w("div"),a=w("div"),s=w("label"),s.textContent=n,i=T(),Q(o.$$.fragment),h=T(),se&&se.c(),u=T(),f=w("div"),d=w("label"),d.textContent=v,g=T(),Q(k.$$.fragment),L=T(),ie&&ie.c(),z=T(),S=w("div"),E=w("div"),Q(V.$$.fragment),J=T(),C=w("div"),F=w("label"),te=w("span"),te.textContent=ae,oe=T(),Y=w("span"),N=H(x),A=H(" added"),M=T(),Q(Z.$$.fragment),Oe=T(),Q(de.$$.fragment),Pe=T(),Ae=w("div"),Q(he.$$.fragment),this.h()},l(D){K(e.$$.fragment,D),t=O(D),r=y(D,"DIV",{class:!0});var U=$(r);a=y(U,"DIV",{class:!0});var pe=$(a);s=y(pe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(s)!=="svelte-1yfolbh"&&(s.textContent=n),i=O(pe),K(o.$$.fragment,pe),h=O(pe),se&&se.l(pe),pe.forEach(m),u=O(U),f=y(U,"DIV",{class:!0});var me=$(f);d=y(me,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(d)!=="svelte-1hpburp"&&(d.textContent=v),g=O(me),K(k.$$.fragment,me),L=O(me),ie&&ie.l(me),me.forEach(m),z=O(U),S=y(U,"DIV",{class:!0});var ke=$(S);E=y(ke,"DIV",{class:!0});var ye=$(E);K(V.$$.fragment,ye),ye.forEach(m),J=O(ke),C=y(ke,"DIV",{class:!0});var ge=$(C);F=y(ge,"LABEL",{class:!0});var be=$(F);te=y(be,"SPAN",{"data-svelte-h":!0}),W(te)!=="svelte-fsa5fj"&&(te.textContent=ae),oe=O(be),Y=y(be,"SPAN",{class:!0});var Ee=$(Y);N=R(Ee,x),A=R(Ee," added"),Ee.forEach(m),be.forEach(m),M=O(ge),K(Z.$$.fragment,ge),ge.forEach(m),ke.forEach(m),Oe=O(U),K(de.$$.fragment,U),Pe=O(U),Ae=y(U,"DIV",{});var Xe=$(Ae);K(he.$$.fragment,Xe),Xe.forEach(m),U.forEach(m),this.h()},h(){p(s,"for","title"),p(s,"class","block text-sm font-medium mb-1.5"),p(a,"class","mb-5"),p(d,"for","description"),p(d,"class","block text-sm font-medium mb-1.5"),p(f,"class","mb-5"),p(E,"class","w-full lg:w-1/2"),p(Y,"class","ml-2 px-2 py-0.5 bg-gray-100 dark:bg-gray-800 text-xs rounded-full"),p(F,"class","lg:block text-sm font-medium mb-1.5 flex items-center"),p(C,"class","w-full lg:w-1/2 mb-5"),p(S,"class","flex flex-col lg:flex-row lg:gap-6"),p(r,"class","bg-opacity-95 rounded-lg shadow-lg p-4 sm:p-6")},m(D,U){G(e,D,U),j(D,t,U),j(D,r,U),_(r,a),_(a,s),_(a,i),G(o,a,null),_(a,h),se&&se.m(a,null),_(r,u),_(r,f),_(f,d),_(f,g),G(k,f,null),_(f,L),ie&&ie.m(f,null),_(r,z),_(r,S),_(S,E),G(V,E,null),_(S,J),_(S,C),_(C,F),_(F,te),_(F,oe),_(F,Y),_(Y,N),_(Y,A),_(C,M),G(Z,C,null),_(r,Oe),G(de,r,null),_(r,Pe),_(r,Ae),G(he,Ae,null),Ve=!0},p(D,U){const pe={};U&67108864&&(pe.$$scope={dirty:U,ctx:D}),e.$set(pe);const me={};!c&&U&2&&(c=!0,me.value=D[1],re(()=>c=!1)),o.$set(me),D[7].title?se?se.p(D,U):(se=yt(D),se.c(),se.m(a,null)):se&&(se.d(1),se=null);const ke={};!b&&U&16&&(b=!0,ke.value=D[4],re(()=>b=!1)),k.$set(ke),D[7].description?ie?ie.p(D,U):(ie=Et(D),ie.c(),ie.m(f,null)):ie&&(ie.d(1),ie=null);const ye={};!P&&U&32&&(P=!0,ye.attributeValues=D[5],re(()=>P=!1)),!I&&U&64&&(I=!0,ye.activeAttributes=D[6],re(()=>I=!1)),V.$set(ye),(!Ve||U&4)&&x!==(x=D[2].length+"")&&X(N,x);const ge={};!$e&&U&4&&($e=!0,ge.tags=D[2],re(()=>$e=!1)),!Te&&U&8&&(Te=!0,ge.labels=D[3],re(()=>Te=!1)),Z.$set(ge);const be={};!Se&&U&1&&(Se=!0,be.mediaFiles=D[0],re(()=>Se=!1)),!ze&&U&128&&(ze=!0,be.errors=D[7],re(()=>ze=!1)),de.$set(be);const Ee={};U&67108864&&(Ee.$$scope={dirty:U,ctx:D}),he.$set(Ee)},i(D){Ve||(q(e.$$.fragment,D),q(o.$$.fragment,D),q(k.$$.fragment,D),q(V.$$.fragment,D),q(Z.$$.fragment,D),q(de.$$.fragment,D),q(he.$$.fragment,D),Ve=!0)},o(D){B(e.$$.fragment,D),B(o.$$.fragment,D),B(k.$$.fragment,D),B(V.$$.fragment,D),B(Z.$$.fragment,D),B(de.$$.fragment,D),B(he.$$.fragment,D),Ve=!1},d(D){D&&(m(t),m(r)),ee(e,D),ee(o),se&&se.d(),ee(k),ie&&ie.d(),ee(V),ee(Z),ee(de),ee(he)}}}function Vl(l){let e,t,r,a,s,n;return r=new qt({props:{class:"bg-opacity-90 shadow-xl",$$slots:{default:[Al]},$$scope:{ctx:l}}}),{c(){e=w("div"),t=w("form"),Q(r.$$.fragment),this.h()},l(i){e=y(i,"DIV",{class:!0});var o=$(e);t=y(o,"FORM",{class:!0});var c=$(t);K(r.$$.fragment,c),c.forEach(m),o.forEach(m),this.h()},h(){p(t,"class","w-full lg:w-2/3"),p(e,"class","flex justify-center p-3 sm:p-6 lg:py-10 bg-change dark:bg-dark shifting")},m(i,o){j(i,e,o),_(e,t),G(r,t,null),a=!0,s||(n=fe(t,"submit",Ft(l[11])),s=!0)},p(i,[o]){const c={};o&67109119&&(c.$$scope={dirty:o,ctx:i}),r.$set(c)},i(i){a||(q(r.$$.fragment,i),a=!0)},o(i){B(r.$$.fragment,i),a=!1},d(i){i&&m(e),ee(r),s=!1,n()}}}async function Il(l){var t,r,a;const e=`https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${l}&format=json&languages=en&origin=*`;try{const i=(a=(r=(t=(await(await fetch(e)).json()).entities[l])==null?void 0:t.labels)==null?void 0:r.en)==null?void 0:a.value;if(!i)throw new Error(`Label not found for qcode: ${l}`);return i}catch(s){return console.error("Error fetching label:",s),null}}async function Ll(l){const e=[];for(const t of l){const r=await Il(t.id);r&&e.push({id:t.id,label:r})}return e}function Dl(l,e,t){let r;_e(l,Rt,I=>t(12,r=I));let a=[],s="",n=[],i=[],o="",c={material:"",shape:"",color:"",colorHex:"#ffffff",texture:"",weight:"",smell:"",taste:"",marking:"",functionality:"",period:"",location:"",writtenText:"",descriptionOfParts:"",hardness:"",value:"",originOfAcquisition:"",pattern:"",brand:"",print:"",imageLicenses:"",sizeX:"",sizeY:"",sizeZ:"",itemCondition:"",handmade:!1,oneOfAKind:!1},h=[],u={title:"",media:"",description:""};function f(I){t(0,a=I.detail.mediaFiles)}function d(I){t(6,h=I.detail.activeAttributes)}function v(I){t(5,c=I.detail.attributeValues)}let g=async()=>{t(7,u={title:"",media:"",description:""});let I=!1;if(s.trim()||(t(7,u.title="Title is required",u),I=!0),a.length===0&&(t(7,u.media="At least one media file is required",u),I=!0),o.trim()||(t(7,u.description="Description is required",u),I=!0),!I)try{const J=await Ll(n),C=JSON.parse(JSON.stringify(c)),F={description:o,material:C.material||null,color:C.colorHex||null,shape:C.shape||null,location:C.location||null,smell:C.smell||null,taste:C.taste||C.smell||null,texture:C.texture||null,functionality:C.functionality||null,markings:C.marking||null,handmade:C.handmade||!1,oneOfAKind:C.oneOfAKind||!1,weight:parseFloat(C.weight)||null,timePeriod:C.period||null,writtenText:C.writtenText||null,descriptionOfParts:C.descriptionOfParts||null,hardness:C.hardness||null,value:parseFloat(C.value)||null,originOfAcquisition:C.originOfAcquisition||null,pattern:C.pattern||null,brand:C.brand||null,print:C.print||null,imageLicenses:C.imageLicenses||null,sizeX:parseFloat(C.sizeX)||null,sizeY:parseFloat(C.sizeY)||null,sizeZ:parseFloat(C.sizeZ)||null,item_condition:C.itemCondition||null},te=c.color,ae=new FormData;if(ae.append("title",s),ae.append("content",o),n&&n.length>0){const x=n.map(N=>N.id);ae.append("tags",JSON.stringify(x))}try{Object.keys(F).forEach(N=>{(F[N]===void 0||F[N]===""||F[N]===null)&&delete F[N]});const x=JSON.stringify(F);ae.append("mysteryObject",x),console.log("Sending mysteryObject:",x)}catch(x){throw console.error("Error converting mysteryObject to JSON:",x,F),new Error("Failed to process object data")}if(a.length>0){const x=a[0].file;ae.append("image",x)}const oe=await fetch(`${Ke}/api/posts/create`,{method:"POST",body:ae,credentials:"include"});if(!oe.ok){const x=await oe.json();throw new Error(x.message||"Failed to create post")}const Y=await oe.json();for(let x=0;x<a.length;x++){const N=a[x],A=new FormData;A.append("file",N.file),A.append("type",N.type||"image");try{(await fetch(`${Ke}/api/mysteryObjects/${Y.mysteryObjectId}/upload-media`,{method:"POST",body:A,credentials:"include"})).ok||console.error(`Failed to upload media file ${x+1}`)}catch(M){console.error(`Error uploading media file ${x+1}:`,M)}}Bt.update(x=>[...x,Y]),Ht("/")}catch(J){console.error("Error creating post:",J),alert(`Failed to create post: ${J.message}`)}};Nt(()=>{for(const I of a)I.url&&URL.revokeObjectURL(I.url)});function k(I){s=I,t(1,s)}function b(I){o=I,t(4,o)}function L(I){c=I,t(5,c)}function z(I){h=I,t(6,h)}function S(I){n=I,t(2,n)}function E(I){i=I,t(3,i)}function V(I){a=I,t(0,a)}function P(I){u=I,t(7,u)}return l.$$.update=()=>{l.$$.dirty&4096},[a,s,n,i,o,c,h,u,f,d,v,g,r,k,b,L,z,S,E,V,P]}class Ul extends Le{constructor(e){super(),De(this,e,Dl,Vl,Ie,{})}}export{Ul as component};
