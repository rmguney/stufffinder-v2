import{s as Z,e as V,a as z,c as J,b as U,g as E,f as S,l as q,i as C,h as T,k as M,F as x,G as ee,E as H,D as te,t as I,d as P}from"../chunks/scheduler.CONNQF1V.js";import{S as re,i as ne,c as b,a as v,m as w,b as _,e as A,t as $,d as k,g as F,f as oe}from"../chunks/index.BnMMC023.js";import{a as ae,B as se,e as K}from"../chunks/userStore.C8Faxakg.js";import{T as le}from"../chunks/textarea.BA-fNqlE.js";import{C as G,a as X}from"../chunks/card-title.CkskY9-3.js";import{C as Y,a as ie}from"../chunks/card-header.LrTvonhQ.js";import{P as ce}from"../chunks/post.ljCMMT_e.js";import{C as fe}from"../chunks/comment.CNrXOIqZ.js";import{t as L}from"../chunks/threadStore.z8eUMdcT.js";function me({params:o}){return{id:o.id}}const Ve=Object.freeze(Object.defineProperty({__proto__:null,load:me},Symbol.toStringTag,{value:"Module"}));function Q(o,t,r){const e=o.slice();return e[3]=t[r],e}function ue(o){let t,r;return t=new G({props:{class:"bg-opacity-90 hover:bg-opacity-100 mt-4",$$slots:{default:[de]},$$scope:{ctx:o}}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){w(t,e,n),r=!0},p(e,n){const a={};n&1024&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function pe(o){let t,r;return t=new G({props:{class:"bg-opacity-90 hover:bg-opacity-100 p-4 mt-4 flex flex-row justify-center items-center",$$slots:{default:[he]},$$scope:{ctx:o}}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){w(t,e,n),r=!0},p(e,n){const a={};n&1032&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function $e(o){let t;return{c(){t=I("Sign in to comment")},l(r){t=P(r,"Sign in to comment")},m(r,e){C(r,t,e)},d(r){r&&S(t)}}}function _e(o){let t,r;return t=new X({props:{class:"text-lg text-center pb-6",$$slots:{default:[$e]},$$scope:{ctx:o}}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){w(t,e,n),r=!0},p(e,n){const a={};n&1024&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function de(o){let t,r;return t=new Y({props:{$$slots:{default:[_e]},$$scope:{ctx:o}}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){w(t,e,n),r=!0},p(e,n){const a={};n&1024&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function ge(o){let t;return{c(){t=I("Send")},l(r){t=P(r,"Send")},m(r,e){C(r,t,e)},d(r){r&&S(t)}}}function he(o){let t,r,e,n,a;function l(s){o[6](s)}let c={class:"h-20 resize-none p-2",placeholder:"Say stuff"};return o[3]!==void 0&&(c.value=o[3]),t=new le({props:c}),x.push(()=>oe(t,"value",l)),n=new se({props:{class:"ml-4 hover:bg-rose-900",$$slots:{default:[ge]},$$scope:{ctx:o}}}),n.$on("click",o[4]),{c(){b(t.$$.fragment),e=z(),b(n.$$.fragment)},l(s){v(t.$$.fragment,s),e=E(s),v(n.$$.fragment,s)},m(s,u){w(t,s,u),C(s,e,u),w(n,s,u),a=!0},p(s,u){const d={};!r&&u&8&&(r=!0,d.value=s[3],ee(()=>r=!1)),t.$set(d);const p={};u&1024&&(p.$$scope={dirty:u,ctx:s}),n.$set(p)},i(s){a||($(t.$$.fragment,s),$(n.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),_(n.$$.fragment,s),a=!1},d(s){s&&S(e),k(t,s),k(n,s)}}}function be(o){let t,r;return t=new G({props:{class:"bg-opacity-90 hover:bg-opacity-100",$$slots:{default:[Ce]},$$scope:{ctx:o}}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){w(t,e,n),r=!0},p(e,n){const a={};n&1024&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function ve(o){let t,r,e=K(o[1].comments.filter(W)),n=[];for(let l=0;l<e.length;l+=1)n[l]=R(Q(o,e,l));const a=l=>_(n[l],1,1,()=>{n[l]=null});return{c(){for(let l=0;l<n.length;l+=1)n[l].c();t=H()},l(l){for(let c=0;c<n.length;c+=1)n[c].l(l);t=H()},m(l,c){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(l,c);C(l,t,c),r=!0},p(l,c){if(c&2){e=K(l[1].comments.filter(W));let s;for(s=0;s<e.length;s+=1){const u=Q(l,e,s);n[s]?(n[s].p(u,c),$(n[s],1)):(n[s]=R(u),n[s].c(),$(n[s],1),n[s].m(t.parentNode,t))}for(F(),s=e.length;s<n.length;s+=1)a(s);A()}},i(l){if(!r){for(let c=0;c<e.length;c+=1)$(n[c]);r=!0}},o(l){n=n.filter(Boolean);for(let c=0;c<n.length;c+=1)_(n[c]);r=!1},d(l){l&&S(t),te(n,l)}}}function we(o){let t;return{c(){t=I("There are no comments yet")},l(r){t=P(r,"There are no comments yet")},m(r,e){C(r,t,e)},d(r){r&&S(t)}}}function ke(o){let t,r;return t=new X({props:{class:"pb-2 text-lg text-center",$$slots:{default:[we]},$$scope:{ctx:o}}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){w(t,e,n),r=!0},p(e,n){const a={};n&1024&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function Se(o){let t;return{c(){t=I("Be the first to comment!")},l(r){t=P(r,"Be the first to comment!")},m(r,e){C(r,t,e)},d(r){r&&S(t)}}}function Ce(o){let t,r,e,n;return t=new Y({props:{$$slots:{default:[ke]},$$scope:{ctx:o}}}),e=new ie({props:{class:"p-4 text-center",$$slots:{default:[Se]},$$scope:{ctx:o}}}),{c(){b(t.$$.fragment),r=z(),b(e.$$.fragment)},l(a){v(t.$$.fragment,a),r=E(a),v(e.$$.fragment,a)},m(a,l){w(t,a,l),C(a,r,l),w(e,a,l),n=!0},p(a,l){const c={};l&1024&&(c.$$scope={dirty:l,ctx:a}),t.$set(c);const s={};l&1024&&(s.$$scope={dirty:l,ctx:a}),e.$set(s)},i(a){n||($(t.$$.fragment,a),$(e.$$.fragment,a),n=!0)},o(a){_(t.$$.fragment,a),_(e.$$.fragment,a),n=!1},d(a){a&&S(r),k(t,a),k(e,a)}}}function R(o){let t,r;return t=new fe({props:{commentId:o[3].id,comment:o[3].comment,commentator:o[3].commentator,postedDateComment:o[3].postedDateComment,selected:o[3].selected,threadOwner:o[1].postedBy,replies:o[3].replies||[]}}),{c(){b(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){w(t,e,n),r=!0},p(e,n){const a={};n&2&&(a.commentId=e[3].id),n&2&&(a.comment=e[3].comment),n&2&&(a.commentator=e[3].commentator),n&2&&(a.postedDateComment=e[3].postedDateComment),n&2&&(a.selected=e[3].selected),n&2&&(a.threadOwner=e[1].postedBy),n&2&&(a.replies=e[3].replies||[]),t.$set(a)},i(e){r||($(t.$$.fragment,e),r=!0)},o(e){_(t.$$.fragment,e),r=!1},d(e){k(t,e)}}}function De(o){let t,r,e,n,a,l,c,s,u,d,p;e=new ce({props:{id:o[0].id,title:o[1].title,description:o[1].description,tags:o[1].tags,imageSrc:o[1].imageSrc,postedBy:o[1].postedBy,postedDate:o[1].postedDate,material:o[1].material,size:o[1].size,shape:o[1].shape,color:o[1].color,texture:o[1].texture,weight:o[1].weight,smell:o[1].smell,functionality:o[1].functionality,period:o[1].period,location:o[1].location,variant:"thread",resolved:o[1].resolved}});const O=[pe,ue],g=[];function j(i,f){return i[2]?0:1}a=j(o),l=g[a]=O[a](o);const D=[ve,be],h=[];function y(i,f){return i[1].comments&&i[1].comments.length>0?0:1}return u=y(o),d=h[u]=D[u](o),{c(){t=V("div"),r=V("div"),b(e.$$.fragment),n=z(),l.c(),c=z(),s=V("div"),d.c(),this.h()},l(i){t=J(i,"DIV",{class:!0});var f=U(t);r=J(f,"DIV",{class:!0});var m=U(r);v(e.$$.fragment,m),n=E(m),l.l(m),c=E(m),s=J(m,"DIV",{class:!0});var B=U(s);d.l(B),B.forEach(S),m.forEach(S),f.forEach(S),this.h()},h(){q(s,"class","flex flex-col justify-center pt-4"),q(r,"class","w-full lg:w-2/3"),q(t,"class","flex flex-col items-center bg-change dark:bg-dark shifting p-4 lg:p-8")},m(i,f){C(i,t,f),T(t,r),w(e,r,null),T(r,n),g[a].m(r,null),T(r,c),T(r,s),h[u].m(s,null),p=!0},p(i,[f]){const m={};f&1&&(m.id=i[0].id),f&2&&(m.title=i[1].title),f&2&&(m.description=i[1].description),f&2&&(m.tags=i[1].tags),f&2&&(m.imageSrc=i[1].imageSrc),f&2&&(m.postedBy=i[1].postedBy),f&2&&(m.postedDate=i[1].postedDate),f&2&&(m.material=i[1].material),f&2&&(m.size=i[1].size),f&2&&(m.shape=i[1].shape),f&2&&(m.color=i[1].color),f&2&&(m.texture=i[1].texture),f&2&&(m.weight=i[1].weight),f&2&&(m.smell=i[1].smell),f&2&&(m.functionality=i[1].functionality),f&2&&(m.period=i[1].period),f&2&&(m.location=i[1].location),f&2&&(m.resolved=i[1].resolved),e.$set(m);let B=a;a=j(i),a===B?g[a].p(i,f):(F(),_(g[B],1,1,()=>{g[B]=null}),A(),l=g[a],l?l.p(i,f):(l=g[a]=O[a](i),l.c()),$(l,1),l.m(r,c));let N=u;u=y(i),u===N?h[u].p(i,f):(F(),_(h[N],1,1,()=>{h[N]=null}),A(),d=h[u],d?d.p(i,f):(d=h[u]=D[u](i),d.c()),$(d,1),d.m(s,null))},i(i){p||($(e.$$.fragment,i),$(l),$(d),p=!0)},o(i){_(e.$$.fragment,i),_(l),_(d),p=!1},d(i){i&&S(t),k(e),g[a].d(),h[u].d()}}}const W=o=>!o.parent;function Be(o,t,r){let e,n,a,l;M(o,L,p=>r(5,a=p)),M(o,ae,p=>r(2,l=p));let{data:c}=t,s="",u=async()=>{if(!s.trim()){console.error("Comment cannot be empty");return}const p="https://threef.vercel.app/api/comment/",O={thread:c.id,comment:s,commentator:e,postedDateComment:new Date().toISOString()};try{const g=await fetch(p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!g.ok){const D=await g.json();throw new Error(JSON.stringify(D))}const j=await g.json();L.update(D=>D.map(h=>{if(h.id==c.id){const y=h.comments?h.comments:[];return{...h,comments:[...y,j]}}return h})),r(3,s="")}catch(g){console.error("Error submitting comment:",g)}};function d(p){s=p,r(3,s)}return o.$$set=p=>{"data"in p&&r(0,c=p.data)},o.$$.update=()=>{o.$$.dirty&4&&(e=l||"Anonymous"),o.$$.dirty&33&&r(1,n=a.find(p=>p.id==c.id))},[c,n,l,s,u,a,d]}class Je extends re{constructor(t){super(),ne(this,t,Be,De,Z,{data:0})}}export{Je as component,Ve as universal};
