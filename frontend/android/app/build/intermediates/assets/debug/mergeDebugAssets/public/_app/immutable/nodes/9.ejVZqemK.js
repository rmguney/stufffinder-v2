import{s as gr,e as g,a as I,c as v,b as p,g as P,f as u,l as o,i as E,h as c,o as vr,B as ee,C as te,v as Ae,w as Ot,p as fe,q as it,r as zl,u as qr,t as q,d as G,j as _e,x as Ul,m as Ge,n as Me,F as St,G as Vt,a8 as hr,y as Qt,S as Ke,k as Gt,E as Ll,a4 as jl,U as Hl,a3 as qt,a9 as Fl}from"../chunks/C6oXrJZt.js";import{S as br,i as _r,c as Ce,a as Te,m as Se,t as le,g as We,b as ce,e as Ye,d as Ie,f as Rt}from"../chunks/Zi_cIJN_.js";import{C as Bt,e as Qe,u as Wt,o as Al,d as Ml}from"../chunks/CP0-fytT.js";import{T as Yt}from"../chunks/CqnpH9aS.js";import{B as lt}from"../chunks/C7UUfNEJ.js";import{C as Dl}from"../chunks/o6IJ7tp9.js";import{C as wr}from"../chunks/gU--zBIq.js";import{P as ql}from"../chunks/lvuOJiju.js";import{C as Gl}from"../chunks/CsWsoBlu.js";import{a as Nl}from"../chunks/CpPhVZOh.js";import{M as Ql}from"../chunks/y53lLsyc.js";import{g as Tt}from"../chunks/RSIJn0f_.js";import{t as mr,r as Wl,u as Yl,b as Jl}from"../chunks/CG5NajwC.js";import{a as Kl,p as Xl}from"../chunks/BxIVeE_E.js";import{g as Zl}from"../chunks/OjtNtuvZ.js";import{w as Vl}from"../chunks/CTHOJFrz.js";import{g as en}from"../chunks/D0QH3NT1.js";function tn({params:n}){return{id:n.id}}const ua=Object.freeze(Object.defineProperty({__proto__:null,load:tn},Symbol.toStringTag,{value:"Module"}));function Gr(n,e,t){const r=n.slice();return r[51]=e[t],r}function Qr(n,e,t){const r=n.slice();return r[54]=e[t],r[56]=t,r}function fr(n){const e=n.slice(),t=e[12][e[27]];return e[54]=t,e}function rn(n){let e,t="0";return{c(){e=g("span"),e.textContent=t,this.h()},l(r){e=v(r,"SPAN",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-1j3zr1w"&&(e.textContent=t),this.h()},h(){o(e,"class","text-neutral-500")},m(r,l){E(r,e,l)},p:Me,d(r){r&&u(e)}}}function ln(n){let e,t=n[1]-n[2]+"",r;return{c(){e=g("span"),r=q(t),this.h()},l(l){e=v(l,"SPAN",{class:!0});var s=p(e);r=G(s,t),s.forEach(u),this.h()},h(){o(e,"class","text-teal-600")},m(l,s){E(l,e,s),c(e,r)},p(l,s){s[0]&6&&t!==(t=l[1]-l[2]+"")&&_e(r,t)},d(l){l&&u(e)}}}function nn(n){let e,t=n[1]-n[2]+"",r;return{c(){e=g("span"),r=q(t),this.h()},l(l){e=v(l,"SPAN",{class:!0});var s=p(e);r=G(s,t),s.forEach(u),this.h()},h(){o(e,"class","text-rose-600")},m(l,s){E(l,e,s),c(e,r)},p(l,s){s[0]&6&&t!==(t=l[1]-l[2]+"")&&_e(r,t)},d(l){l&&u(e)}}}function Wr(n){let e,t="•",r,l;function s(d,f){return d[14]==="QUESTION"?on:d[14]==="SUGGESTION"?an:sn}let a=s(n),i=a(n);return{c(){e=g("span"),e.textContent=t,r=I(),i.c(),l=Ge()},l(d){e=v(d,"SPAN",{"data-svelte-h":!0}),fe(e)!=="svelte-7hh8jk"&&(e.textContent=t),r=P(d),i.l(d),l=Ge()},m(d,f){E(d,e,f),E(d,r,f),i.m(d,f),E(d,l,f)},p(d,f){a!==(a=s(d))&&(i.d(1),i=a(d),i&&(i.c(),i.m(l.parentNode,l)))},d(d){d&&(u(e),u(r),u(l)),i.d(d)}}}function sn(n){let e,t=`<svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-1.5" viewBox="0 0 20 20" fill="currentColor"><path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"></path></svg>
                  Story`;return{c(){e=g("span"),e.innerHTML=t,this.h()},l(r){e=v(r,"SPAN",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-1g6yym1"&&(e.innerHTML=t),this.h()},h(){o(e,"class","inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-300 border border-blue-200 dark:border-blue-800/50")},m(r,l){E(r,e,l)},d(r){r&&u(e)}}}function an(n){let e,t=`<svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-1.5" viewBox="0 0 20 20" fill="currentColor"><path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"></path></svg>
                  Suggestion`;return{c(){e=g("span"),e.innerHTML=t,this.h()},l(r){e=v(r,"SPAN",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-15k44mf"&&(e.innerHTML=t),this.h()},h(){o(e,"class","inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-emerald-100 dark:bg-emerald-900/40 text-emerald-800 dark:text-emerald-300 border border-emerald-200 dark:border-emerald-800/50")},m(r,l){E(r,e,l)},d(r){r&&u(e)}}}function on(n){let e,t=`<svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 mr-1.5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>
                  Question`;return{c(){e=g("span"),e.innerHTML=t,this.h()},l(r){e=v(r,"SPAN",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-7isix2"&&(e.innerHTML=t),this.h()},h(){o(e,"class","inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-amber-100 dark:bg-amber-900/40 text-amber-800 dark:text-amber-300 border border-amber-200 dark:border-amber-800/50")},m(r,l){E(r,e,l)},d(r){r&&u(e)}}}function Yr(n){let e,t="•",r,l,s=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                Contributing`;return{c(){e=g("span"),e.textContent=t,r=I(),l=g("span"),l.innerHTML=s,this.h()},l(a){e=v(a,"SPAN",{"data-svelte-h":!0}),fe(e)!=="svelte-7hh8jk"&&(e.textContent=t),r=P(a),l=v(a,"SPAN",{class:!0,"data-svelte-h":!0}),fe(l)!=="svelte-chqhq3"&&(l.innerHTML=s),this.h()},h(){o(l,"class","text-teal-800 dark:text-teal-400 font-medium flex items-center gap-1")},m(a,i){E(a,e,i),E(a,r,i),E(a,l,i)},d(a){a&&(u(e),u(r),u(l))}}}function un(n){let e,t=(n[0]||"No content")+"",r;return{c(){e=g("div"),r=q(t),this.h()},l(l){e=v(l,"DIV",{class:!0});var s=p(e);r=G(s,t),s.forEach(u),this.h()},h(){o(e,"class","text-neutral-900 dark:text-neutral-100 leading-relaxed text-left")},m(l,s){E(l,e,s),c(e,r)},p(l,s){s[0]&1&&t!==(t=(l[0]||"No content")+"")&&_e(r,t)},i:Me,o:Me,d(l){l&&u(e)}}}function cn(n){let e,t,r;function l(a){n[37](a)}let s={class:"w-full p-3 border rounded-md text-sm bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-700 focus:ring-2 focus:ring-teal-500/30 text-left",placeholder:"Edit your comment..."};return n[21]!==void 0&&(s.value=n[21]),e=new Yt({props:s}),St.push(()=>Rt(e,"value",l)),{c(){Ce(e.$$.fragment)},l(a){Te(e.$$.fragment,a)},m(a,i){Se(e,a,i),r=!0},p(a,i){const d={};!t&&i[0]&2097152&&(t=!0,d.value=a[21],Vt(()=>t=!1)),e.$set(d)},i(a){r||(le(e.$$.fragment,a),r=!0)},o(a){ce(e.$$.fragment,a),r=!1},d(a){Ie(e,a)}}}function Jr(n){let e,t,r,l,s,a=n[12].length>1&&Kr(n),i=n[12][n[27]]&&Xr(fr(n)),d=n[12].length>1&&Zr(n);return{c(){e=g("div"),t=g("div"),a&&a.c(),r=I(),l=g("div"),i&&i.c(),s=I(),d&&d.c(),this.h()},l(f){e=v(f,"DIV",{class:!0});var h=p(e);t=v(h,"DIV",{class:!0});var m=p(t);a&&a.l(m),r=P(m),l=v(m,"DIV",{class:!0});var b=p(l);i&&i.l(b),b.forEach(u),m.forEach(u),s=P(h),d&&d.l(h),h.forEach(u),this.h()},h(){o(l,"class","w-full"),o(t,"class","relative"),o(e,"class","mt-3 bg-neutral-100 dark:bg-neutral-900 rounded-md overflow-hidden")},m(f,h){E(f,e,h),c(e,t),a&&a.m(t,null),c(t,r),c(t,l),i&&i.m(l,null),c(e,s),d&&d.m(e,null)},p(f,h){f[12].length>1?a?a.p(f,h):(a=Kr(f),a.c(),a.m(t,r)):a&&(a.d(1),a=null),f[12][f[27]]?i?i.p(fr(f),h):(i=Xr(fr(f)),i.c(),i.m(l,null)):i&&(i.d(1),i=null),f[12].length>1?d?d.p(f,h):(d=Zr(f),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},d(f){f&&u(e),a&&a.d(),i&&i.d(),d&&d.d()}}}function Kr(n){let e,t,r='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>',l,s,a,i='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>',d,f,h,m=n[27]+1+"",b,x,L=n[12].length+"",_,k,C;return{c(){e=g("div"),t=g("button"),t.innerHTML=r,l=I(),s=g("div"),a=g("button"),a.innerHTML=i,d=I(),f=g("div"),h=g("div"),b=q(m),x=q(" / "),_=q(L),this.h()},l(O){e=v(O,"DIV",{class:!0});var $=p(e);t=v($,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),fe(t)!=="svelte-16s3sx6"&&(t.innerHTML=r),$.forEach(u),l=P(O),s=v(O,"DIV",{class:!0});var j=p(s);a=v(j,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),fe(a)!=="svelte-pzyo2s"&&(a.innerHTML=i),j.forEach(u),d=P(O),f=v(O,"DIV",{class:!0});var Y=p(f);h=v(Y,"DIV",{class:!0});var z=p(h);b=G(z,m),x=G(z," / "),_=G(z,L),z.forEach(u),Y.forEach(u),this.h()},h(){o(t,"class","bg-black bg-opacity-40 hover:bg-opacity-60 text-white p-1 rounded-r-lg ml-1 focus:outline-none transform transition hover:scale-110"),o(t,"aria-label","Previous media"),o(e,"class","absolute top-0 bottom-0 left-0 flex items-center z-10"),o(a,"class","bg-black bg-opacity-40 hover:bg-opacity-60 text-white p-1 rounded-l-lg mr-1 focus:outline-none transform transition hover:scale-110"),o(a,"aria-label","Next media"),o(s,"class","absolute top-0 bottom-0 right-0 flex items-center z-10"),o(h,"class","bg-black bg-opacity-60 text-white px-2 py-0.5 rounded-full text-xs"),o(f,"class","absolute bottom-2 left-0 right-0 flex justify-center z-10")},m(O,$){E(O,e,$),c(e,t),E(O,l,$),E(O,s,$),c(s,a),E(O,d,$),E(O,f,$),c(f,h),c(h,b),c(h,x),c(h,_),k||(C=[Ae(t,"click",hr(n[33])),Ae(a,"click",hr(n[32]))],k=!0)},p(O,$){$[0]&134217728&&m!==(m=O[27]+1+"")&&_e(b,m),$[0]&4096&&L!==(L=O[12].length+"")&&_e(_,L)},d(O){O&&(u(e),u(l),u(s),u(d),u(f)),k=!1,Ot(C)}}}function Xr(n){let e;function t(s,a){return s[54].type==="image"?mn:s[54].type==="video"?hn:s[54].type==="audio"?fn:dn}let r=t(n),l=r(n);return{c(){l.c(),e=Ge()},l(s){l.l(s),e=Ge()},m(s,a){l.m(s,a),E(s,e,a)},p(s,a){r===(r=t(s))&&l?l.p(s,a):(l.d(1),l=r(s),l&&(l.c(),l.m(e.parentNode,e)))},d(s){s&&u(e),l.d(s)}}}function dn(n){let e,t,r,l,s,a=(n[54].name||"Attachment")+"",i;return{c(){e=g("div"),t=ee("svg"),r=ee("path"),l=I(),s=g("p"),i=q(a),this.h()},l(d){e=v(d,"DIV",{class:!0});var f=p(e);t=te(f,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var h=p(t);r=te(h,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),p(r).forEach(u),h.forEach(u),l=P(f),s=v(f,"P",{class:!0});var m=p(s);i=G(m,a),m.forEach(u),f.forEach(u),this.h()},h(){o(r,"stroke-linecap","round"),o(r,"stroke-linejoin","round"),o(r,"stroke-width","1.5"),o(r,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),o(t,"xmlns","http://www.w3.org/2000/svg"),o(t,"class","h-12 w-12 mx-auto text-neutral-500 mb-2"),o(t,"fill","none"),o(t,"viewBox","0 0 24 24"),o(t,"stroke","currentColor"),o(s,"class","text-sm text-gray-700 dark:text-gray-300"),o(e,"class","p-4 bg-neutral-200 dark:bg-neutral-900 text-center")},m(d,f){E(d,e,f),c(e,t),c(t,r),c(e,l),c(e,s),c(s,i)},p(d,f){f[0]&134221824&&a!==(a=(d[54].name||"Attachment")+"")&&_e(i,a)},d(d){d&&u(e)}}}function fn(n){let e,t,r,l,s,a,i,d,f,h=(n[54].name||"Audio file")+"",m,b,x;return{c(){e=g("div"),t=ee("svg"),r=ee("path"),l=I(),s=g("audio"),a=q("Your browser does not support the audio tag."),d=I(),f=g("p"),m=q(h),this.h()},l(L){e=v(L,"DIV",{class:!0});var _=p(e);t=te(_,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var k=p(t);r=te(k,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),p(r).forEach(u),k.forEach(u),l=P(_),s=v(_,"AUDIO",{src:!0,class:!0});var C=p(s);a=G(C,"Your browser does not support the audio tag."),C.forEach(u),d=P(_),f=v(_,"P",{class:!0});var O=p(f);m=G(O,h),O.forEach(u),_.forEach(u),this.h()},h(){o(r,"stroke-linecap","round"),o(r,"stroke-linejoin","round"),o(r,"stroke-width","1.5"),o(r,"d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"),o(t,"xmlns","http://www.w3.org/2000/svg"),o(t,"class","h-12 w-12 text-neutral-500 mb-2"),o(t,"fill","none"),o(t,"viewBox","0 0 24 24"),o(t,"stroke","currentColor"),Ke(s.src,i=n[54].url)||o(s,"src",i),s.controls=!0,o(s,"class","w-full max-w-md"),o(f,"class","mt-2 text-sm text-gray-700 dark:text-gray-300"),o(e,"class","flex flex-col items-center justify-center p-4 bg-neutral-200 dark:bg-neutral-900")},m(L,_){E(L,e,_),c(e,t),c(t,r),c(e,l),c(e,s),c(s,a),c(e,d),c(e,f),c(f,m),b||(x=Ae(s,"error",kr),b=!0)},p(L,_){_[0]&134221824&&!Ke(s.src,i=L[54].url)&&o(s,"src",i),_[0]&134221824&&h!==(h=(L[54].name||"Audio file")+"")&&_e(m,h)},d(L){L&&u(e),b=!1,x()}}}function hn(n){let e,t,r,l,s;return{c(){e=g("video"),t=q("Your browser does not support the video tag."),this.h()},l(a){e=v(a,"VIDEO",{src:!0,class:!0});var i=p(e);t=G(i,"Your browser does not support the video tag."),i.forEach(u),this.h()},h(){Ke(e.src,r=n[54].url)||o(e,"src",r),e.controls=!0,o(e,"class","max-h-96 w-full object-contain")},m(a,i){E(a,e,i),c(e,t),l||(s=Ae(e,"error",kr),l=!0)},p(a,i){i[0]&134221824&&!Ke(e.src,r=a[54].url)&&o(e,"src",r)},d(a){a&&u(e),l=!1,s()}}}function mn(n){let e,t,r,l,s;return{c(){e=g("img"),this.h()},l(a){e=v(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ke(e.src,t=n[54].url)||o(e,"src",t),o(e,"alt",r=n[54].name||"Comment attachment"),o(e,"class","max-h-96 w-full object-contain")},m(a,i){E(a,e,i),l||(s=Ae(e,"error",kr),l=!0)},p(a,i){i[0]&134221824&&!Ke(e.src,t=a[54].url)&&o(e,"src",t),i[0]&134221824&&r!==(r=a[54].name||"Comment attachment")&&o(e,"alt",r)},d(a){a&&u(e),l=!1,s()}}}function Zr(n){let e,t=Qe(n[12]),r=[];for(let l=0;l<t.length;l+=1)r[l]=el(Qr(n,t,l));return{c(){e=g("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=v(l,"DIV",{class:!0});var s=p(e);for(let a=0;a<r.length;a+=1)r[a].l(s);s.forEach(u),this.h()},h(){o(e,"class","flex justify-start overflow-x-auto gap-1 p-1 bg-neutral-200 dark:bg-neutral-900")},m(l,s){E(l,e,s);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null)},p(l,s){if(s[0]&134221824){t=Qe(l[12]);let a;for(a=0;a<t.length;a+=1){const i=Qr(l,t,a);r[a]?r[a].p(i,s):(r[a]=el(i),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(l){l&&u(e),Qt(r,l)}}}function pn(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-neutral-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(r){e=v(r,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-si9d6t"&&(e.innerHTML=t),this.h()},h(){o(e,"class","w-full h-full bg-neutral-300 dark:bg-neutral-900 flex items-center justify-center")},m(r,l){E(r,e,l)},p:Me,d(r){r&&u(e)}}}function gn(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-neutral-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path></svg>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(r){e=v(r,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-g0y2ch"&&(e.innerHTML=t),this.h()},h(){o(e,"class","w-full h-full bg-neutral-300 dark:bg-neutral-900 flex items-center justify-center")},m(r,l){E(r,e,l)},p:Me,d(r){r&&u(e)}}}function vn(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-neutral-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(r){e=v(r,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-1a0alih"&&(e.innerHTML=t),this.h()},h(){o(e,"class","w-full h-full bg-neutral-300 dark:bg-neutral-900 flex items-center justify-center")},m(r,l){E(r,e,l)},p:Me,d(r){r&&u(e)}}}function bn(n){let e,t;return{c(){e=g("img"),this.h()},l(r){e=v(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ke(e.src,t=n[54].url)||o(e,"src",t),o(e,"alt","thumbnail"),o(e,"class","w-full h-full object-cover")},m(r,l){E(r,e,l)},p(r,l){l[0]&4096&&!Ke(e.src,t=r[54].url)&&o(e,"src",t)},d(r){r&&u(e)}}}function el(n){let e,t,r,l,s;function a(h,m){return h[54].type==="image"?bn:h[54].type==="video"?vn:h[54].type==="audio"?gn:pn}let i=a(n),d=i(n);function f(){return n[38](n[56])}return{c(){e=g("button"),d.c(),t=I(),this.h()},l(h){e=v(h,"BUTTON",{class:!0});var m=p(e);d.l(m),t=P(m),m.forEach(u),this.h()},h(){o(e,"class",r="flex-shrink-0 w-12 h-12 rounded overflow-hidden focus:outline-none transition-all "+(n[56]===n[27]?"ring-2 ring-neutral-500 transform scale-105":"opacity-60 hover:opacity-100"))},m(h,m){E(h,e,m),d.m(e,null),c(e,t),l||(s=Ae(e,"click",hr(f)),l=!0)},p(h,m){n=h,i===(i=a(n))&&d?d.p(n,m):(d.d(1),d=i(n),d&&(d.c(),d.m(e,t))),m[0]&134217728&&r!==(r="flex-shrink-0 w-12 h-12 rounded overflow-hidden focus:outline-none transition-all "+(n[56]===n[27]?"ring-2 ring-neutral-500 transform scale-105":"opacity-60 hover:opacity-100"))&&o(e,"class",r)},d(h){h&&u(e),d.d(),l=!1,s()}}}function _n(n){let e,t,r=(n[6]||"Anonymous")+"",l,s,a,i,d="•",f,h,m=n[31](n[7])+"",b,x,L,_,k,C,O,$,j,Y=!n[13]&&Wr(n),z=n[8]&&Yr();const F=[cn,un],R=[];function B(A,M){return A[17]?0:1}k=B(n),C=R[k]=F[k](n);let H=n[12]&&n[12].length>0&&Jr(n);return{c(){e=g("div"),t=g("a"),l=q(r),a=I(),i=g("span"),i.textContent=d,f=I(),h=g("span"),b=q(m),x=I(),Y&&Y.c(),L=I(),z&&z.c(),_=I(),C.c(),O=I(),H&&H.c(),$=Ge(),this.h()},l(A){e=v(A,"DIV",{class:!0});var M=p(e);t=v(M,"A",{href:!0,class:!0});var ie=p(t);l=G(ie,r),ie.forEach(u),a=P(M),i=v(M,"SPAN",{"data-svelte-h":!0}),fe(i)!=="svelte-7hh8jk"&&(i.textContent=d),f=P(M),h=v(M,"SPAN",{title:!0,class:!0});var se=p(h);b=G(se,m),se.forEach(u),x=P(M),Y&&Y.l(M),L=P(M),z&&z.l(M),M.forEach(u),_=P(A),C.l(A),O=P(A),H&&H.l(A),$=Ge(),this.h()},h(){o(t,"href",s=`/user/${n[6]}`),o(t,"class","font-medium hover:text-rose-900 hover:underline"),o(h,"title",n[7]),o(h,"class","text-neutral-500 dark:text-neutral-400"),o(e,"class","flex flex-wrap items-center gap-2 text-sm text-gray-600 mb-2")},m(A,M){E(A,e,M),c(e,t),c(t,l),c(e,a),c(e,i),c(e,f),c(e,h),c(h,b),c(e,x),Y&&Y.m(e,null),c(e,L),z&&z.m(e,null),E(A,_,M),R[k].m(A,M),E(A,O,M),H&&H.m(A,M),E(A,$,M),j=!0},p(A,M){(!j||M[0]&64)&&r!==(r=(A[6]||"Anonymous")+"")&&_e(l,r),(!j||M[0]&64&&s!==(s=`/user/${A[6]}`))&&o(t,"href",s),(!j||M[0]&128)&&m!==(m=A[31](A[7])+"")&&_e(b,m),(!j||M[0]&128)&&o(h,"title",A[7]),A[13]?Y&&(Y.d(1),Y=null):Y?Y.p(A,M):(Y=Wr(A),Y.c(),Y.m(e,L)),A[8]?z||(z=Yr(),z.c(),z.m(e,null)):z&&(z.d(1),z=null);let ie=k;k=B(A),k===ie?R[k].p(A,M):(We(),ce(R[ie],1,1,()=>{R[ie]=null}),Ye(),C=R[k],C?C.p(A,M):(C=R[k]=F[k](A),C.c()),le(C,1),C.m(O.parentNode,O)),A[12]&&A[12].length>0?H?H.p(A,M):(H=Jr(A),H.c(),H.m($.parentNode,$)):H&&(H.d(1),H=null)},i(A){j||(le(C),j=!0)},o(A){ce(C),j=!1},d(A){A&&(u(e),u(_),u(O),u($)),Y&&Y.d(),z&&z.d(),R[k].d(A),H&&H.d(A)}}}function tl(n){let e,t;return e=new lt({props:{variant:"outline",size:"sm",class:"text-xs py-1 px-3 hover:bg-neutral-100 dark:hover:bg-neutral-900 border-neutral-300 dark:border-neutral-700 rounded-full",$$slots:{default:[wn]},$$scope:{ctx:n}}}),e.$on("click",n[39]),{c(){Ce(e.$$.fragment)},l(r){Te(e.$$.fragment,r)},m(r,l){Se(e,r,l),t=!0},p(r,l){const s={};l[0]&131072|l[1]&67108864&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){t||(le(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ie(e,r)}}}function wn(n){let e,t,r,l=n[17]?"Cancel":"Edit",s;return{c(){e=ee("svg"),t=ee("path"),r=I(),s=q(l),this.h()},l(a){e=te(a,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var i=p(e);t=te(i,"path",{d:!0}),p(t).forEach(u),i.forEach(u),r=P(a),s=G(a,l),this.h()},h(){o(t,"d","M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class","h-3 w-3 mr-1"),o(e,"viewBox","0 0 20 20"),o(e,"fill","currentColor")},m(a,i){E(a,e,i),c(e,t),E(a,r,i),E(a,s,i)},p(a,i){i[0]&131072&&l!==(l=a[17]?"Cancel":"Edit")&&_e(s,l)},d(a){a&&(u(e),u(r),u(s))}}}function kn(n){let e,t,r;return{c(){e=ee("svg"),t=ee("path"),r=q(`\r
            Reply`),this.h()},l(l){e=te(l,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var s=p(e);t=te(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(t).forEach(u),s.forEach(u),r=G(l,`\r
            Reply`),this.h()},h(){o(t,"fill-rule","evenodd"),o(t,"d","M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"),o(t,"clip-rule","evenodd"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class","h-3 w-3 mr-1"),o(e,"viewBox","0 0 20 20"),o(e,"fill","currentColor")},m(l,s){E(l,e,s),c(e,t),E(l,r,s)},p:Me,d(l){l&&(u(e),u(r))}}}function rl(n){let e,t;return e=new lt({props:{variant:n[26]?"outline":"default",size:"sm",class:`ml-2 text-xs px-3 rounded-full flex items-center transition ${n[26]?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-rose-600 text-white hover:bg-rose-700"}`,disabled:n[26],$$slots:{default:[xn]},$$scope:{ctx:n}}}),e.$on("click",n[40]),{c(){Ce(e.$$.fragment)},l(r){Te(e.$$.fragment,r)},m(r,l){Se(e,r,l),t=!0},p(r,l){const s={};l[0]&67108864&&(s.variant=r[26]?"outline":"default"),l[0]&67108864&&(s.class=`ml-2 text-xs px-3 rounded-full flex items-center transition ${r[26]?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-rose-600 text-white hover:bg-rose-700"}`),l[0]&67108864&&(s.disabled=r[26]),l[0]&67108864|l[1]&67108864&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){t||(le(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ie(e,r)}}}function xn(n){let e,t,r,l=n[26]?"Reported":"Report",s;return{c(){e=ee("svg"),t=ee("path"),r=I(),s=q(l),this.h()},l(a){e=te(a,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var i=p(e);t=te(i,"path",{d:!0}),p(t).forEach(u),i.forEach(u),r=P(a),s=G(a,l),this.h()},h(){o(t,"d","M4 6V20M4 6H15L13.5 9L15 12H4"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class","h-3.5 w-3.5 mr-1"),o(e,"fill","none"),o(e,"viewBox","0 0 24 24"),o(e,"stroke","currentColor")},m(a,i){E(a,e,i),c(e,t),E(a,r,i),E(a,s,i)},p(a,i){i[0]&67108864&&l!==(l=a[26]?"Reported":"Report")&&_e(s,l)},d(a){a&&(u(e),u(r),u(s))}}}function ll(n){let e,t;return e=new lt({props:{variant:"default",size:"sm",class:"text-xs py-1 px-3 bg-teal-600 hover:bg-teal-700 text-white rounded-full",$$slots:{default:[yn]},$$scope:{ctx:n}}}),e.$on("click",n[41]),{c(){Ce(e.$$.fragment)},l(r){Te(e.$$.fragment,r)},m(r,l){Se(e,r,l),t=!0},p(r,l){const s={};l[1]&67108864&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){t||(le(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ie(e,r)}}}function yn(n){let e,t,r;return{c(){e=ee("svg"),t=ee("path"),r=q(`\r
              Save`),this.h()},l(l){e=te(l,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var s=p(e);t=te(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(t).forEach(u),s.forEach(u),r=G(l,`\r
              Save`),this.h()},h(){o(t,"fill-rule","evenodd"),o(t,"d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"),o(t,"clip-rule","evenodd"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class","h-3 w-3 mr-1"),o(e,"viewBox","0 0 20 20"),o(e,"fill","currentColor")},m(l,s){E(l,e,s),c(e,t),E(l,r,s)},p:Me,d(l){l&&(u(e),u(r))}}}function nl(n){let e,t,r,l,s,a,i,d,f,h,m;function b(k){n[42](k)}let x={class:"w-full p-3 border rounded-md text-sm bg-white dark:bg-neutral-900 border-neutral-200 dark:border-neutral-700 focus:ring-2 focus:ring-teal-500/30 text-left",placeholder:"Write your reply..."};n[18]!==void 0&&(x.value=n[18]),t=new Yt({props:x}),St.push(()=>Rt(t,"value",b));function L(k){n[43](k)}let _={};return n[19]!==void 0&&(_.mediaFiles=n[19]),a=new Ql({props:_}),St.push(()=>Rt(a,"mediaFiles",L)),h=new lt({props:{variant:"default",class:"text-xs py-1 px-4 bg-teal-600 hover:bg-teal-700 text-white rounded-full",disabled:n[20],$$slots:{default:[Tn]},$$scope:{ctx:n}}}),h.$on("click",n[29]),{c(){e=g("div"),Ce(t.$$.fragment),l=I(),s=g("div"),Ce(a.$$.fragment),d=I(),f=g("div"),Ce(h.$$.fragment),this.h()},l(k){e=v(k,"DIV",{class:!0});var C=p(e);Te(t.$$.fragment,C),l=P(C),s=v(C,"DIV",{class:!0});var O=p(s);Te(a.$$.fragment,O),O.forEach(u),d=P(C),f=v(C,"DIV",{class:!0});var $=p(f);Te(h.$$.fragment,$),$.forEach(u),C.forEach(u),this.h()},h(){o(s,"class","my-2 text-left"),o(f,"class","flex justify-end"),o(e,"class","p-4 pt-3")},m(k,C){E(k,e,C),Se(t,e,null),c(e,l),c(e,s),Se(a,s,null),c(e,d),c(e,f),Se(h,f,null),m=!0},p(k,C){const O={};!r&&C[0]&262144&&(r=!0,O.value=k[18],Vt(()=>r=!1)),t.$set(O);const $={};!i&&C[0]&524288&&(i=!0,$.mediaFiles=k[19],Vt(()=>i=!1)),a.$set($);const j={};C[0]&1048576&&(j.disabled=k[20]),C[0]&1048576|C[1]&67108864&&(j.$$scope={dirty:C,ctx:k}),h.$set(j)},i(k){m||(le(t.$$.fragment,k),le(a.$$.fragment,k),le(h.$$.fragment,k),m=!0)},o(k){ce(t.$$.fragment,k),ce(a.$$.fragment,k),ce(h.$$.fragment,k),m=!1},d(k){k&&u(e),Ie(t),Ie(a),Ie(h)}}}function En(n){let e,t,r;return{c(){e=ee("svg"),t=ee("path"),r=q(`\r
                  Submit Reply`),this.h()},l(l){e=te(l,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var s=p(e);t=te(s,"path",{d:!0}),p(t).forEach(u),s.forEach(u),r=G(l,`\r
                  Submit Reply`),this.h()},h(){o(t,"d","M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class","h-3 w-3 mr-1.5"),o(e,"viewBox","0 0 20 20"),o(e,"fill","currentColor")},m(l,s){E(l,e,s),c(e,t),E(l,r,s)},d(l){l&&(u(e),u(r))}}}function Cn(n){let e,t;return{c(){e=g("span"),t=q(`\r
                  Uploading...`),this.h()},l(r){e=v(r,"SPAN",{class:!0}),p(e).forEach(u),t=G(r,`\r
                  Uploading...`),this.h()},h(){o(e,"class","inline-block h-3.5 w-3.5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-1.5")},m(r,l){E(r,e,l),E(r,t,l)},d(r){r&&(u(e),u(t))}}}function Tn(n){let e;function t(s,a){return s[20]?Cn:En}let r=t(n),l=r(n);return{c(){l.c(),e=Ge()},l(s){l.l(s),e=Ge()},m(s,a){l.m(s,a),E(s,e,a)},p(s,a){r!==(r=t(s))&&(l.d(1),l=r(s),l&&(l.c(),l.m(e.parentNode,e)))},d(s){s&&u(e),l.d(s)}}}function sl(n){let e,t=[],r=new Map,l,s=Qe(n[10]);const a=i=>i[51].id;for(let i=0;i<s.length;i+=1){let d=Gr(n,s,i),f=a(d);r.set(f,t[i]=al(f,d))}return{c(){e=g("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=v(i,"DIV",{class:!0});var d=p(e);for(let f=0;f<t.length;f+=1)t[f].l(d);d.forEach(u),this.h()},h(){o(e,"class","pl-4 border-l-2 border-neutral-200 dark:border-neutral-700 ml-4 mb-3")},m(i,d){E(i,e,d);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);l=!0},p(i,d){d[0]&3616&&(s=Qe(i[10]),We(),t=Wt(t,d,a,1,i,s,r,e,Al,al,null,Gr),Ye())},i(i){if(!l){for(let d=0;d<s.length;d+=1)le(t[d]);l=!0}},o(i){for(let d=0;d<t.length;d+=1)ce(t[d]);l=!1},d(i){i&&u(e);for(let d=0;d<t.length;d+=1)t[d].d()}}}function al(n,e){let t,r,l,s;return r=new Rl({props:{threadId:e[11],commentId:e[51].id,comment:e[51].content,commentator:e[51].author,postedDateComment:e[51].createdAt,selected:e[51].bestAnswer||!1,threadOwner:e[9],replies:e[51].replies||[],upvotes:e[51].upvotes,downvotes:e[51].downvotes,userUpvoted:e[51].userUpvoted,userDownvoted:e[51].userDownvoted,parentCommentId:e[5],mediaFiles:e[51].mediaFiles||[],commentType:e[51].commentType||"QUESTION"}}),{key:n,first:null,c(){t=g("div"),Ce(r.$$.fragment),l=I(),this.h()},l(a){t=v(a,"DIV",{class:!0});var i=p(t);Te(r.$$.fragment,i),l=P(i),i.forEach(u),this.h()},h(){o(t,"class","mt-1"),this.first=t},m(a,i){E(a,t,i),Se(r,t,null),c(t,l),s=!0},p(a,i){e=a;const d={};i[0]&2048&&(d.threadId=e[11]),i[0]&1024&&(d.commentId=e[51].id),i[0]&1024&&(d.comment=e[51].content),i[0]&1024&&(d.commentator=e[51].author),i[0]&1024&&(d.postedDateComment=e[51].createdAt),i[0]&1024&&(d.selected=e[51].bestAnswer||!1),i[0]&512&&(d.threadOwner=e[9]),i[0]&1024&&(d.replies=e[51].replies||[]),i[0]&1024&&(d.upvotes=e[51].upvotes),i[0]&1024&&(d.downvotes=e[51].downvotes),i[0]&1024&&(d.userUpvoted=e[51].userUpvoted),i[0]&1024&&(d.userDownvoted=e[51].userDownvoted),i[0]&32&&(d.parentCommentId=e[5]),i[0]&1024&&(d.mediaFiles=e[51].mediaFiles||[]),i[0]&1024&&(d.commentType=e[51].commentType||"QUESTION"),r.$set(d)},i(a){s||(le(r.$$.fragment,a),s=!0)},o(a){ce(r.$$.fragment,a),s=!1},d(a){a&&u(t),Ie(r)}}}function Sn(n){let e,t,r,l,s,a,i,d,f,h,m,b,x,L,_,k,C,O,$,j,Y,z,F,R,B,H,A;function M(y,T){return y[2]>y[1]?nn:y[1]>0?ln:rn}let ie=M(n),se=ie(n);k=new Gl({props:{class:"p-4 pb-1",$$slots:{default:[_n]},$$scope:{ctx:n}}});let ae=n[15]===n[6]&&tl(n);j=new lt({props:{variant:"outline",size:"sm",class:"text-xs py-1 px-3 hover:bg-neutral-100 dark:hover:bg-neutral-900 border-neutral-300 dark:border-neutral-700 rounded-full",$$slots:{default:[kn]},$$scope:{ctx:n}}}),j.$on("click",n[28]);let X=n[15]&&n[15]!==n[6]&&rl(n),Z=n[17]&&ll(n),U=n[16]&&nl(n),w=n[10]&&n[10].length>0&&sl(n);return{c(){e=g("div"),t=g("div"),r=g("button"),l=ee("svg"),s=ee("path"),i=I(),d=g("span"),se.c(),f=I(),h=g("button"),m=ee("svg"),b=ee("path"),L=I(),_=g("div"),Ce(k.$$.fragment),C=I(),O=g("div"),ae&&ae.c(),$=I(),Ce(j.$$.fragment),Y=I(),X&&X.c(),z=I(),Z&&Z.c(),F=I(),U&&U.c(),R=I(),w&&w.c(),this.h()},l(y){e=v(y,"DIV",{class:!0});var T=p(e);t=v(T,"DIV",{class:!0});var D=p(t);r=v(D,"BUTTON",{class:!0});var N=p(r);l=te(N,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var re=p(l);s=te(re,"path",{d:!0}),p(s).forEach(u),re.forEach(u),N.forEach(u),i=P(D),d=v(D,"SPAN",{class:!0});var Q=p(d);se.l(Q),Q.forEach(u),f=P(D),h=v(D,"BUTTON",{class:!0});var W=p(h);m=te(W,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var V=p(m);b=te(V,"path",{d:!0}),p(b).forEach(u),V.forEach(u),W.forEach(u),D.forEach(u),L=P(T),_=v(T,"DIV",{class:!0});var J=p(_);Te(k.$$.fragment,J),C=P(J),O=v(J,"DIV",{class:!0});var ue=p(O);ae&&ae.l(ue),$=P(ue),Te(j.$$.fragment,ue),Y=P(ue),X&&X.l(ue),z=P(ue),Z&&Z.l(ue),ue.forEach(u),F=P(J),U&&U.l(J),R=P(J),w&&w.l(J),J.forEach(u),T.forEach(u),this.h()},h(){o(s,"d","M5 14l5-5 5 5H5z"),o(l,"xmlns","http://www.w3.org/2000/svg"),o(l,"class","h-5 w-5"),o(l,"viewBox","0 0 20 20"),o(l,"fill","currentColor"),o(r,"class",a="flex items-center justify-center hover:bg-neutral-100 dark:hover:bg-neutral-900 rounded-full w-8 h-8 transition-colors "+(n[3]?"text-teal-600":"text-neutral-600")),o(d,"class","font-medium text-sm my-1"),o(b,"d","M5 6l5 5 5-5H5z"),o(m,"xmlns","http://www.w3.org/2000/svg"),o(m,"class","h-5 w-5"),o(m,"viewBox","0 0 20 20"),o(m,"fill","currentColor"),o(h,"class",x="flex items-center justify-center hover:bg-neutral-100 dark:hover:bg-neutral-900 rounded-full w-8 h-8 transition-colors "+(n[4]?"text-rose-600":"text-neutral-500")),o(t,"class","flex flex-col items-center justify-center px-4 py-4 border-r border-neutral-100 dark:border-neutral-800"),o(O,"class","px-4 py-2.5 mt-auto border-t border-neutral-100 dark:border-neutral-800 flex"),o(_,"class","flex-1 flex flex-col"),o(e,"class","flex")},m(y,T){E(y,e,T),c(e,t),c(t,r),c(r,l),c(l,s),c(t,i),c(t,d),se.m(d,null),c(t,f),c(t,h),c(h,m),c(m,b),c(e,L),c(e,_),Se(k,_,null),c(_,C),c(_,O),ae&&ae.m(O,null),c(O,$),Se(j,O,null),c(O,Y),X&&X.m(O,null),c(O,z),Z&&Z.m(O,null),c(_,F),U&&U.m(_,null),c(_,R),w&&w.m(_,null),B=!0,H||(A=[Ae(r,"click",n[35]),Ae(h,"click",n[36])],H=!0)},p(y,T){(!B||T[0]&8&&a!==(a="flex items-center justify-center hover:bg-neutral-100 dark:hover:bg-neutral-900 rounded-full w-8 h-8 transition-colors "+(y[3]?"text-teal-600":"text-neutral-600")))&&o(r,"class",a),ie===(ie=M(y))&&se?se.p(y,T):(se.d(1),se=ie(y),se&&(se.c(),se.m(d,null))),(!B||T[0]&16&&x!==(x="flex items-center justify-center hover:bg-neutral-100 dark:hover:bg-neutral-900 rounded-full w-8 h-8 transition-colors "+(y[4]?"text-rose-600":"text-neutral-500")))&&o(h,"class",x);const D={};T[0]&136475073|T[1]&67108864&&(D.$$scope={dirty:T,ctx:y}),k.$set(D),y[15]===y[6]?ae?(ae.p(y,T),T[0]&32832&&le(ae,1)):(ae=tl(y),ae.c(),le(ae,1),ae.m(O,$)):ae&&(We(),ce(ae,1,1,()=>{ae=null}),Ye());const N={};T[1]&67108864&&(N.$$scope={dirty:T,ctx:y}),j.$set(N),y[15]&&y[15]!==y[6]?X?(X.p(y,T),T[0]&32832&&le(X,1)):(X=rl(y),X.c(),le(X,1),X.m(O,z)):X&&(We(),ce(X,1,1,()=>{X=null}),Ye()),y[17]?Z?(Z.p(y,T),T[0]&131072&&le(Z,1)):(Z=ll(y),Z.c(),le(Z,1),Z.m(O,null)):Z&&(We(),ce(Z,1,1,()=>{Z=null}),Ye()),y[16]?U?(U.p(y,T),T[0]&65536&&le(U,1)):(U=nl(y),U.c(),le(U,1),U.m(_,R)):U&&(We(),ce(U,1,1,()=>{U=null}),Ye()),y[10]&&y[10].length>0?w?(w.p(y,T),T[0]&1024&&le(w,1)):(w=sl(y),w.c(),le(w,1),w.m(_,null)):w&&(We(),ce(w,1,1,()=>{w=null}),Ye())},i(y){B||(le(k.$$.fragment,y),le(ae),le(j.$$.fragment,y),le(X),le(Z),le(U),le(w),B=!0)},o(y){ce(k.$$.fragment,y),ce(ae),ce(j.$$.fragment,y),ce(X),ce(Z),ce(U),ce(w),B=!1},d(y){y&&u(e),se.d(),Ie(k),ae&&ae.d(),Ie(j),X&&X.d(),Z&&Z.d(),U&&U.d(),w&&w.d(),H=!1,Ot(A)}}}function ol(n){let e,t,r,l="Report Comment",s,a,i,d="Reason",f,h,m,b="Select reason",x,L="Spam",_,k="Abuse",C,O="Copyright",$,j="Other",Y,z,F="Notes",R,B,H,A,M,ie,se,ae,X,Z,U=n[25]&&il(n);return M=new lt({props:{variant:"outline",$$slots:{default:[In]},$$scope:{ctx:n}}}),M.$on("click",n[46]),se=new lt({props:{variant:"default",class:"bg-rose-600 text-white hover:bg-rose-700",$$slots:{default:[Pn]},$$scope:{ctx:n}}}),se.$on("click",n[34]),{c(){e=g("div"),t=g("div"),r=g("h2"),r.textContent=l,s=I(),U&&U.c(),a=I(),i=g("label"),i.textContent=d,f=I(),h=g("select"),m=g("option"),m.textContent=b,x=g("option"),x.textContent=L,_=g("option"),_.textContent=k,C=g("option"),C.textContent=O,$=g("option"),$.textContent=j,Y=I(),z=g("label"),z.textContent=F,R=I(),B=g("textarea"),H=I(),A=g("div"),Ce(M.$$.fragment),ie=I(),Ce(se.$$.fragment),this.h()},l(w){e=v(w,"DIV",{class:!0});var y=p(e);t=v(y,"DIV",{class:!0});var T=p(t);r=v(T,"H2",{class:!0,"data-svelte-h":!0}),fe(r)!=="svelte-1u5jbq8"&&(r.textContent=l),s=P(T),U&&U.l(T),a=P(T),i=v(T,"LABEL",{class:!0,"data-svelte-h":!0}),fe(i)!=="svelte-4hof8h"&&(i.textContent=d),f=P(T),h=v(T,"SELECT",{class:!0});var D=p(h);m=v(D,"OPTION",{"data-svelte-h":!0}),fe(m)!=="svelte-pe7z2g"&&(m.textContent=b),x=v(D,"OPTION",{"data-svelte-h":!0}),fe(x)!=="svelte-oeokku"&&(x.textContent=L),_=v(D,"OPTION",{"data-svelte-h":!0}),fe(_)!=="svelte-1ksav5i"&&(_.textContent=k),C=v(D,"OPTION",{"data-svelte-h":!0}),fe(C)!=="svelte-2z6efg"&&(C.textContent=O),$=v(D,"OPTION",{"data-svelte-h":!0}),fe($)!=="svelte-56dpqm"&&($.textContent=j),D.forEach(u),Y=P(T),z=v(T,"LABEL",{class:!0,"data-svelte-h":!0}),fe(z)!=="svelte-lmbnwe"&&(z.textContent=F),R=P(T),B=v(T,"TEXTAREA",{class:!0,rows:!0}),p(B).forEach(u),H=P(T),A=v(T,"DIV",{class:!0});var N=p(A);Te(M.$$.fragment,N),ie=P(N),Te(se.$$.fragment,N),N.forEach(u),T.forEach(u),y.forEach(u),this.h()},h(){o(r,"class","text-lg font-semibold mb-4"),o(i,"class","block text-sm mb-1"),m.__value="",it(m,m.__value),x.__value="SPAM",it(x,x.__value),_.__value="ABUSE",it(_,_.__value),C.__value="COPYRIGHT",it(C,C.__value),$.__value="OTHER",it($,$.__value),o(h,"class","w-full p-2 mb-3 border rounded"),n[23]===void 0&&zl(()=>n[44].call(h)),o(z,"class","block text-sm mb-1"),o(B,"class","w-full p-2 mb-3 border rounded"),o(B,"rows","3"),o(A,"class","flex justify-end gap-2"),o(t,"class","bg-white dark:bg-neutral-900 rounded-md p-6 w-full max-w-md shadow-lg"),o(e,"class","fixed inset-0 bg-black/50 flex items-center justify-center z-50")},m(w,y){E(w,e,y),c(e,t),c(t,r),c(t,s),U&&U.m(t,null),c(t,a),c(t,i),c(t,f),c(t,h),c(h,m),c(h,x),c(h,_),c(h,C),c(h,$),qr(h,n[23],!0),c(t,Y),c(t,z),c(t,R),c(t,B),it(B,n[24]),c(t,H),c(t,A),Se(M,A,null),c(A,ie),Se(se,A,null),ae=!0,X||(Z=[Ae(h,"change",n[44]),Ae(B,"input",n[45])],X=!0)},p(w,y){w[25]?U?U.p(w,y):(U=il(w),U.c(),U.m(t,a)):U&&(U.d(1),U=null),y[0]&8388608&&qr(h,w[23]),y[0]&16777216&&it(B,w[24]);const T={};y[1]&67108864&&(T.$$scope={dirty:y,ctx:w}),M.$set(T);const D={};y[1]&67108864&&(D.$$scope={dirty:y,ctx:w}),se.$set(D)},i(w){ae||(le(M.$$.fragment,w),le(se.$$.fragment,w),ae=!0)},o(w){ce(M.$$.fragment,w),ce(se.$$.fragment,w),ae=!1},d(w){w&&u(e),U&&U.d(),Ie(M),Ie(se),X=!1,Ot(Z)}}}function il(n){let e,t;return{c(){e=g("div"),t=q(n[25]),this.h()},l(r){e=v(r,"DIV",{class:!0});var l=p(e);t=G(l,n[25]),l.forEach(u),this.h()},h(){o(e,"class","text-red-500 mb-2 text-sm")},m(r,l){E(r,e,l),c(e,t)},p(r,l){l[0]&33554432&&_e(t,r[25])},d(r){r&&u(e)}}}function In(n){let e;return{c(){e=q("Cancel")},l(t){e=G(t,"Cancel")},m(t,r){E(t,e,r)},d(t){t&&u(e)}}}function Pn(n){let e;return{c(){e=q("Submit")},l(t){e=G(t,"Submit")},m(t,r){E(t,e,r)},d(t){t&&u(e)}}}function $n(n){let e,t,r,l;t=new Bt({props:{class:`w-full bg-white dark:bg-neutral-950 shadow-sm relative rounded-md\r
    $`+(n[8]?"border-l-4 border-teal-600 dark:border-teal-500":"border border-neutral-200 dark:border-neutral-800")+`\r
    $`+(n[14]==="QUESTION"?"question-comment":n[14]==="SUGGESTION"?"suggestion-comment":n[14]==="STORY"?"story-comment":""),$$slots:{default:[Sn]},$$scope:{ctx:n}}});let s=n[22]&&ol(n);return{c(){e=g("div"),Ce(t.$$.fragment),r=I(),s&&s.c(),this.h()},l(a){e=v(a,"DIV",{class:!0});var i=p(e);Te(t.$$.fragment,i),r=P(i),s&&s.l(i),i.forEach(u),this.h()},h(){o(e,"class","flex w-full py-0.5")},m(a,i){E(a,e,i),Se(t,e,null),c(e,r),s&&s.m(e,null),l=!0},p(a,i){const d={};i[0]&16640&&(d.class=`w-full bg-white dark:bg-neutral-950 shadow-sm relative rounded-md\r
    $`+(a[8]?"border-l-4 border-teal-600 dark:border-teal-500":"border border-neutral-200 dark:border-neutral-800")+`\r
    $`+(a[14]==="QUESTION"?"question-comment":a[14]==="SUGGESTION"?"suggestion-comment":a[14]==="STORY"?"story-comment":"")),i[0]&209715199|i[1]&67108864&&(d.$$scope={dirty:i,ctx:a}),t.$set(d),a[22]?s?(s.p(a,i),i[0]&4194304&&le(s,1)):(s=ol(a),s.c(),le(s,1),s.m(e,null)):s&&(We(),ce(s,1,1,()=>{s=null}),Ye())},i(a){l||(le(t.$$.fragment,a),le(s),l=!0)},o(a){ce(t.$$.fragment,a),ce(s),l=!1},d(a){a&&u(e),Ie(t),s&&s.d()}}}function kr(n){console.error("Media failed to load:",n)}function Ln(n,e,t){let{commentId:r}=e,{comment:l}=e,{commentator:s}=e,{postedDateComment:a}=e,{contributingToResolution:i=!1}=e,{threadOwner:d}=e,{replies:f=[]}=e,{threadId:h}=e,{upvotes:m=0}=e,{downvotes:b=0}=e,{userUpvoted:x=!1}=e,{userDownvoted:L=!1}=e,{mediaFiles:_=[]}=e,{parentCommentId:k=null}=e,{commentType:C="QUESTION"}=e,O=null,$=!1,j=!1,Y="",z=[],F=!1,R=l,B=!1,H="SPAM",A="",M=!1,ie=null,se=!1,ae=[],X=0;vr(async()=>{if(typeof l=="object"&&l!==null&&(t(1,m=l.upvotes||0),t(2,b=l.downvotes||0),t(3,x=l.userUpvoted||!1),t(4,L=l.userDownvoted||!1)),O)try{const S=await fetch(`https://backend-310608491068.europe-west1.run.app/api/reports/COMMENT/${r}`,{headers:{"Content-Type":"application/json",...Tt()}});S.ok?(ae=await S.json(),t(26,se=ae.some(ne=>{var ge;return ne.reporterUsername===O&&((ge=ne.status)==null?void 0:ge.toUpperCase())==="OPEN"}))):console.warn("Failed to fetch comment reports")}catch(S){console.error("Error fetching comment report status:",S)}});const Z=()=>{t(16,$=!$),$||t(19,z=[])},U=async()=>{if(!(!Y.trim()&&z.length===0))try{const S=Tt();if(!S.Authorization){console.error("Please log in to reply");return}const ne={content:Y,postId:h,parentCommentId:r,commentType:C},ge=await fetch("https://backend-310608491068.europe-west1.run.app/api/comments/create",{method:"POST",headers:{"Content-Type":"application/json",...S},body:JSON.stringify(ne)});if(!ge.ok){const de=await ge.text();throw new Error(`Failed to add reply: ${de}`)}const Pe=(await ge.json()).commentId;if(z.length>0){t(20,F=!0);for(let de=0;de<z.length;de++){const be=z[de],He=new FormData;He.append("file",be.file),He.append("type",be.type||"image");try{const Re=new Headers;S.Authorization&&Re.append("Authorization",S.Authorization),(await fetch(`https://backend-310608491068.europe-west1.run.app/api/comments/${Pe}/upload-media`,{method:"POST",headers:Re,body:He})).ok||console.error(`Failed to upload media file ${de+1} for reply`)}catch(Re){console.error(`Error uploading media file ${de+1} for reply:`,Re)}}t(20,F=!1)}t(18,Y=""),t(19,z=[]),t(16,$=!1),document.dispatchEvent(new CustomEvent("refreshComments",{bubbles:!0,detail:{threadId:h}}))}catch(S){console.error("Error adding reply:",S)}},w=async S=>{try{const ne=Tt();if(!ne.Authorization){console.error("Please log in to vote");return}const ge=await fetch(`https://backend-310608491068.europe-west1.run.app/api/comments/${S?"upvote":"downvote"}/${r}`,{method:"POST",headers:{"Content-Type":"application/json",...ne}});if(!ge.ok)throw new Error(`Vote failed: ${ge.status}`);const ke=await ge.json();ke&&(t(1,m=ke.upvotes||m),t(2,b=ke.downvotes||b),t(3,x=S),t(4,L=!S))}catch(ne){console.error("Error voting:",ne)}},y=S=>{if(!S)return"";const ne=new Date(S),ge={hour:"numeric",minute:"numeric",hour12:!1},ke=new Intl.DateTimeFormat("en-US",ge).format(ne),Pe=ne.getDate(),de=ne.toLocaleString("en-US",{month:"short"}),be=ne.getFullYear();return`${ke}, ${Pe} ${de} ${be}`},T=()=>{_.length>1&&t(27,X=(X+1)%_.length)},D=()=>{_.length>1&&t(27,X=(X-1+_.length)%_.length)};async function N(){if(!H){t(25,ie="Please select a reason");return}try{M=!0;const S=await fetch("https://backend-310608491068.europe-west1.run.app/api/report/submit",{method:"POST",headers:{"Content-Type":"application/json",...Tt()},body:JSON.stringify({targetType:"COMMENT",targetId:r,reason:H,notes:A})});if(!S.ok){const ne=await S.text();throw new Error(ne||"Failed to submit report")}t(26,se=!0),t(22,B=!1),t(25,ie=""),t(23,H="SPAM")}catch(S){reportError=S.message||"Something went wrong."}finally{reportSubmitting=!1}}const re=()=>w(!0),Q=()=>w(!1);function W(S){R=S,t(21,R)}const V=S=>t(27,X=S),J=()=>{t(17,j=!j),t(21,R=l)},ue=()=>{se||t(22,B=!0)},ve=async()=>{try{const S=Tt();if(!S.Authorization){console.error("Please log in to edit");return}const ne={content:R,postId:h},ge=await fetch(`https://backend-310608491068.europe-west1.run.app/api/comments/edit/${r}`,{method:"PUT",headers:{"Content-Type":"application/json",...S},body:JSON.stringify(ne)});if(!ge.ok){const ke=await ge.text();throw new Error(`Failed to edit comment: ${ke}`)}t(17,j=!1),t(0,l=R),document.dispatchEvent(new CustomEvent("refreshComments",{bubbles:!0,detail:{threadId:h}}))}catch(S){console.error("Error editing comment:",S)}};function Ee(S){Y=S,t(18,Y)}function $e(S){z=S,t(19,z)}function we(){H=Ul(this),t(23,H)}function Ne(){A=this.value,t(24,A)}const me=()=>t(22,B=!1);return n.$$set=S=>{"commentId"in S&&t(5,r=S.commentId),"comment"in S&&t(0,l=S.comment),"commentator"in S&&t(6,s=S.commentator),"postedDateComment"in S&&t(7,a=S.postedDateComment),"contributingToResolution"in S&&t(8,i=S.contributingToResolution),"threadOwner"in S&&t(9,d=S.threadOwner),"replies"in S&&t(10,f=S.replies),"threadId"in S&&t(11,h=S.threadId),"upvotes"in S&&t(1,m=S.upvotes),"downvotes"in S&&t(2,b=S.downvotes),"userUpvoted"in S&&t(3,x=S.userUpvoted),"userDownvoted"in S&&t(4,L=S.userDownvoted),"mediaFiles"in S&&t(12,_=S.mediaFiles),"parentCommentId"in S&&t(13,k=S.parentCommentId),"commentType"in S&&t(14,C=S.commentType)},n.$$.update=()=>{n.$$.dirty[0]&33280&&Nl.subscribe(S=>{t(15,O=S)})},[l,m,b,x,L,r,s,a,i,d,f,h,_,k,C,O,$,j,Y,z,F,R,B,H,A,ie,se,X,Z,U,w,y,T,D,N,re,Q,W,V,J,ue,ve,Ee,$e,we,Ne,me]}class Rl extends br{constructor(e){super(),_r(this,e,Ln,$n,gr,{commentId:5,comment:0,commentator:6,postedDateComment:7,contributingToResolution:8,threadOwner:9,replies:10,threadId:11,upvotes:1,downvotes:2,userUpvoted:3,userDownvoted:4,mediaFiles:12,parentCommentId:13,commentType:14},null,[-1,-1])}}const{Map:Ol}=en;function ul(n,e,t){const r=n.slice();return r[43]=e[t],r}function cl(n,e,t){const r=n.slice();return r[43]=e[t],r}function An(n){let e,t='<div class="flex justify-center"><div class="flex flex-col items-center"><svg class="animate-spin h-6 w-6 text-teal-500 mb-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="text-sm text-neutral-500">Looking for similar posts...</p></div></div>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(r){e=v(r,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-zhoyku"&&(e.innerHTML=t),this.h()},h(){o(e,"class","bg-white dark:bg-neutral-950 shadow-md rounded-md border border-neutral-200 dark:border-neutral-800 overflow-hidden p-4")},m(r,l){E(r,e,l)},p:Me,d(r){r&&u(e)}}}function Mn(n){let e,t,r,l='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-neutral-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',s,a,i,d="No similar posts found",f;function h(x,L){var _,k;return((k=(_=x[0])==null?void 0:_.tags)==null?void 0:k.length)>0?Vn:Nn}let m=h(n),b=m(n);return{c(){e=g("div"),t=g("div"),r=g("div"),r.innerHTML=l,s=I(),a=g("div"),i=g("h3"),i.textContent=d,f=I(),b.c(),this.h()},l(x){e=v(x,"DIV",{class:!0});var L=p(e);t=v(L,"DIV",{class:!0});var _=p(t);r=v(_,"DIV",{class:!0,"data-svelte-h":!0}),fe(r)!=="svelte-6p8h12"&&(r.innerHTML=l),s=P(_),a=v(_,"DIV",{});var k=p(a);i=v(k,"H3",{class:!0,"data-svelte-h":!0}),fe(i)!=="svelte-1f6oi8h"&&(i.textContent=d),f=P(k),b.l(k),k.forEach(u),_.forEach(u),L.forEach(u),this.h()},h(){o(r,"class","w-10 h-10 rounded-full bg-neutral-100 dark:bg-neutral-800 flex items-center justify-center shrink-0"),o(i,"class","text-sm font-medium text-neutral-900 dark:text-white"),o(t,"class","flex items-center gap-2.5"),o(e,"class","bg-white dark:bg-neutral-950 shadow-md rounded-md border border-neutral-200 dark:border-neutral-800 overflow-hidden p-2.5")},m(x,L){E(x,e,L),c(e,t),c(t,r),c(t,s),c(t,a),c(a,i),c(a,f),b.m(a,null)},p(x,L){m!==(m=h(x))&&(b.d(1),b=m(x),b&&(b.c(),b.m(a,null)))},d(x){x&&u(e),b.d()}}}function Dn(n){var R,B,H,A;let e,t,r,l,s,a,i,d=(n[3].length||n[2].length)+"",f,h,m,b,x,L=(((B=(R=n[0])==null?void 0:R.tags)==null?void 0:B.length)||0)+"",_,k,C=((A=(H=n[0])==null?void 0:H.tags)==null?void 0:A.length)!==1?"s":"",O,$,j;function Y(M,ie){return M[4]?Bn:M[3].length>0?On:Rn}let z=Y(n),F=z(n);return{c(){e=g("div"),t=g("div"),r=g("div"),l=g("h3"),s=ee("svg"),a=ee("path"),i=q(`\r
          Similarity among `),f=q(d),h=q(" posts"),m=I(),b=g("p"),x=q("Based on "),_=q(L),k=q(" tag"),O=q(C),$=I(),j=g("div"),F.c(),this.h()},l(M){e=v(M,"DIV",{class:!0});var ie=p(e);t=v(ie,"DIV",{class:!0});var se=p(t);r=v(se,"DIV",{});var ae=p(r);l=v(ae,"H3",{class:!0});var X=p(l);s=te(X,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var Z=p(s);a=te(Z,"path",{d:!0}),p(a).forEach(u),Z.forEach(u),i=G(X,`\r
          Similarity among `),f=G(X,d),h=G(X," posts"),X.forEach(u),m=P(ae),b=v(ae,"P",{class:!0});var U=p(b);x=G(U,"Based on "),_=G(U,L),k=G(U," tag"),O=G(U,C),U.forEach(u),ae.forEach(u),se.forEach(u),$=P(ie),j=v(ie,"DIV",{class:!0});var w=p(j);F.l(w),w.forEach(u),ie.forEach(u),this.h()},h(){o(a,"d","M7 3a1 1 0 000 2h6a1 1 0 100-2H7zM4 7a1 1 0 011-1h10a1 1 0 110 2H5a1 1 0 01-1-1zM2 11a2 2 0 012-2h12a2 2 0 012 2v4a2 2 0 01-2 2H4a2 2 0 01-2-2v-4z"),o(s,"xmlns","http://www.w3.org/2000/svg"),o(s,"class","h-3.5 w-3.5 mr-1.5 text-teal-600"),o(s,"viewBox","0 0 20 20"),o(s,"fill","currentColor"),o(l,"class","text-sm font-medium text-neutral-900 dark:text-white flex items-center"),o(b,"class","text-xs text-neutral-500 dark:text-neutral-400 mt-0.5"),o(t,"class","p-2 border-b border-neutral-100 dark:border-neutral-800"),o(j,"class","p-2"),o(e,"class","bg-white dark:bg-neutral-950 shadow-md rounded-md border border-neutral-200 dark:border-neutral-800 overflow-hidden")},m(M,ie){E(M,e,ie),c(e,t),c(t,r),c(r,l),c(l,s),c(s,a),c(l,i),c(l,f),c(l,h),c(r,m),c(r,b),c(b,x),c(b,_),c(b,k),c(b,O),c(e,$),c(e,j),F.m(j,null)},p(M,ie){var se,ae,X,Z;ie[0]&12&&d!==(d=(M[3].length||M[2].length)+"")&&_e(f,d),ie[0]&1&&L!==(L=(((ae=(se=M[0])==null?void 0:se.tags)==null?void 0:ae.length)||0)+"")&&_e(_,L),ie[0]&1&&C!==(C=((Z=(X=M[0])==null?void 0:X.tags)==null?void 0:Z.length)!==1?"s":"")&&_e(O,C),z===(z=Y(M))&&F?F.p(M,ie):(F.d(1),F=z(M),F&&(F.c(),F.m(j,null)))},d(M){M&&u(e),F.d()}}}function Nn(n){let e,t="Add tags to this post to discover similar content.";return{c(){e=g("p"),e.textContent=t,this.h()},l(r){e=v(r,"P",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-3wj00e"&&(e.textContent=t),this.h()},h(){o(e,"class","text-xs text-neutral-500 dark:text-neutral-400")},m(r,l){E(r,e,l)},d(r){r&&u(e)}}}function Vn(n){let e,t="We couldn't find any other posts with matching or related tags.";return{c(){e=g("p"),e.textContent=t,this.h()},l(r){e=v(r,"P",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-shc9id"&&(e.textContent=t),this.h()},h(){o(e,"class","text-xs text-neutral-500 dark:text-neutral-400")},m(r,l){E(r,e,l)},d(r){r&&u(e)}}}function Rn(n){let e,t='<div class="flex flex-col items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-neutral-300 dark:text-neutral-700 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-sm text-neutral-500 dark:text-neutral-400">No similar posts found</span></div>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(r){e=v(r,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-1c5xjy6"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex-1 flex items-center justify-center py-6")},m(r,l){E(r,e,l)},p:Me,d(r){r&&u(e)}}}function On(n){let e,t,r=[],l=new Ol,s,a=Qe(n[3].slice(0,3));const i=f=>f[43].id;for(let f=0;f<a.length;f+=1){let h=cl(n,a,f),m=i(h);l.set(m,r[f]=dl(m,h))}let d=n[3].length>3&&fl(n);return{c(){e=g("div"),t=g("div");for(let f=0;f<r.length;f+=1)r[f].c();s=I(),d&&d.c(),this.h()},l(f){e=v(f,"DIV",{});var h=p(e);t=v(h,"DIV",{class:!0});var m=p(t);for(let b=0;b<r.length;b+=1)r[b].l(m);m.forEach(u),s=P(h),d&&d.l(h),h.forEach(u),this.h()},h(){o(t,"class","grid grid-cols-3 gap-3")},m(f,h){E(f,e,h),c(e,t);for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(t,null);c(e,s),d&&d.m(e,null),n[13](e)},p(f,h){h[0]&8&&(a=Qe(f[3].slice(0,3)),r=Wt(r,h,i,1,f,a,l,t,Ml,dl,null,cl)),f[3].length>3?d?d.p(f,h):(d=fl(f),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},d(f){f&&u(e);for(let h=0;h<r.length;h+=1)r[h].d();d&&d.d(),n[13](null)}}}function Bn(n){let e,t,r,l,s,a,i;function d(m,b){return m[5]?ts:es}let f=d(n),h=f(n);return{c(){e=g("div"),t=g("div"),r=ee("svg"),l=ee("circle"),s=ee("path"),a=I(),i=g("span"),h.c(),this.h()},l(m){e=v(m,"DIV",{class:!0});var b=p(e);t=v(b,"DIV",{class:!0});var x=p(t);r=te(x,"svg",{class:!0,xmlns:!0,fill:!0,viewBox:!0});var L=p(r);l=te(L,"circle",{class:!0,cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0}),p(l).forEach(u),s=te(L,"path",{class:!0,fill:!0,d:!0}),p(s).forEach(u),L.forEach(u),a=P(x),i=v(x,"SPAN",{class:!0});var _=p(i);h.l(_),_.forEach(u),x.forEach(u),b.forEach(u),this.h()},h(){o(l,"class","opacity-25"),o(l,"cx","12"),o(l,"cy","12"),o(l,"r","10"),o(l,"stroke","currentColor"),o(l,"stroke-width","4"),o(s,"class","opacity-75"),o(s,"fill","currentColor"),o(s,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),o(r,"class","animate-spin h-5 w-5 text-teal-500 mb-2"),o(r,"xmlns","http://www.w3.org/2000/svg"),o(r,"fill","none"),o(r,"viewBox","0 0 24 24"),o(i,"class","text-sm text-neutral-500 dark:text-neutral-400"),o(t,"class","flex flex-col items-center"),o(e,"class","flex-1 flex items-center justify-center py-6")},m(m,b){E(m,e,b),c(e,t),c(t,r),c(r,l),c(r,s),c(t,a),c(t,i),h.m(i,null)},p(m,b){f!==(f=d(m))&&(h.d(1),h=f(m),h&&(h.c(),h.m(i,null)))},d(m){m&&u(e),h.d()}}}function zn(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-neutral-300 dark:text-neutral-700" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path></svg>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(r){e=v(r,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-1uk9oib"&&(e.innerHTML=t),this.h()},h(){o(e,"class","absolute inset-0 flex items-center justify-center")},m(r,l){E(r,e,l)},p:Me,d(r){r&&u(e)}}}function Un(n){let e,t,r;return{c(){e=g("img"),this.h()},l(l){e=v(l,"IMG",{src:!0,alt:!0,class:!0,loading:!0}),this.h()},h(){Ke(e.src,t=n[43].mysteryObjectImageUrl||(n[43].mediaFiles&&n[43].mediaFiles.length>0?n[43].mediaFiles[0].url:""))||o(e,"src",t),o(e,"alt",r=n[43].title),o(e,"class","w-full h-full object-cover"),o(e,"loading","lazy")},m(l,s){E(l,e,s)},p(l,s){s[0]&8&&!Ke(e.src,t=l[43].mysteryObjectImageUrl||(l[43].mediaFiles&&l[43].mediaFiles.length>0?l[43].mediaFiles[0].url:""))&&o(e,"src",t),s[0]&8&&r!==(r=l[43].title)&&o(e,"alt",r)},d(l){l&&u(e)}}}function jn(n){let e;return{c(){e=q("Topics are semantically related")},l(t){e=G(t,"Topics are semantically related")},m(t,r){E(t,e,r)},p:Me,d(t){t&&u(e)}}}function Hn(n){let e=n[43].relationshipExplanation+"",t;return{c(){t=q(e)},l(r){t=G(r,e)},m(r,l){E(r,t,l)},p(r,l){l[0]&8&&e!==(e=r[43].relationshipExplanation+"")&&_e(t,e)},d(r){r&&u(t)}}}function Fn(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(r){e=v(r,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-thlyfy"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex items-center text-rose-800")},m(r,l){E(r,e,l)},d(r){r&&u(e)}}}function qn(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(r){e=v(r,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-1pwl00r"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex items-center text-emerald-600")},m(r,l){E(r,e,l)},d(r){r&&u(e)}}}function dl(n,e){let t,r,l,s,a,i,d=e[43].similarityScore+"",f,h,m,b,x,L=e[43].title+"",_,k,C,O,$,j,Y=e[43].author+"",z,F,R,B,H,A,M,ie=(e[43].commentCount||0)+"",se,ae,X,Z;function U(V,J){return V[43].mysteryObjectImageUrl||V[43].mediaFiles&&V[43].mediaFiles.length>0?Un:zn}let w=U(e),y=w(e);function T(V,J){return V[43].relationshipExplanation?Hn:jn}let D=T(e),N=D(e);function re(V,J){return V[43].solved?qn:Fn}let Q=re(e),W=Q(e);return{key:n,first:null,c(){t=g("a"),r=g("div"),l=g("div"),y.c(),s=I(),a=g("div"),i=g("div"),f=q(d),h=q("% match"),m=I(),b=g("div"),x=g("h4"),_=q(L),k=I(),C=g("div"),N.c(),O=I(),$=g("div"),j=g("div"),z=q(Y),F=I(),R=g("div"),B=g("div"),H=ee("svg"),A=ee("path"),M=I(),se=q(ie),ae=I(),W.c(),X=I(),this.h()},l(V){t=v(V,"A",{href:!0,class:!0});var J=p(t);r=v(J,"DIV",{class:!0});var ue=p(r);l=v(ue,"DIV",{class:!0});var ve=p(l);y.l(ve),s=P(ve),a=v(ve,"DIV",{class:!0});var Ee=p(a);i=v(Ee,"DIV",{class:!0});var $e=p(i);f=G($e,d),h=G($e,"% match"),$e.forEach(u),Ee.forEach(u),ve.forEach(u),m=P(ue),b=v(ue,"DIV",{class:!0});var we=p(b);x=v(we,"H4",{class:!0});var Ne=p(x);_=G(Ne,L),Ne.forEach(u),k=P(we),C=v(we,"DIV",{class:!0});var me=p(C);N.l(me),me.forEach(u),O=P(we),$=v(we,"DIV",{class:!0});var S=p($);j=v(S,"DIV",{class:!0});var ne=p(j);z=G(ne,Y),ne.forEach(u),F=P(S),R=v(S,"DIV",{class:!0});var ge=p(R);B=v(ge,"DIV",{class:!0});var ke=p(B);H=te(ke,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var Pe=p(H);A=te(Pe,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(A).forEach(u),Pe.forEach(u),M=P(ke),se=G(ke,ie),ke.forEach(u),ae=P(ge),W.l(ge),ge.forEach(u),S.forEach(u),we.forEach(u),ue.forEach(u),X=P(J),J.forEach(u),this.h()},h(){o(i,"class","px-1.5 py-0.5 bg-black/40 backdrop-blur-sm rounded-sm text-white text-xs font-medium"),o(a,"class","absolute bottom-0 left-0 right-0 flex justify-between items-center px-2 py-1 bg-gradient-to-t from-black/70 to-transparent"),o(l,"class","aspect-video w-full overflow-hidden relative bg-neutral-100 dark:bg-neutral-850 border-b border-neutral-200 dark:border-neutral-800"),o(x,"class","font-medium text-sm line-clamp-1 text-neutral-900 dark:text-white mb-1.5"),o(C,"class","text-xs text-neutral-600 dark:text-neutral-300 border-l-2 border-teal-500 dark:border-teal-600 pl-2 py-0.5 mb-auto bg-teal-50/50 dark:bg-teal-900/10 rounded-r"),o(j,"class","truncate max-w-[80px]"),o(A,"fill-rule","evenodd"),o(A,"d","M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z"),o(A,"clip-rule","evenodd"),o(H,"xmlns","http://www.w3.org/2000/svg"),o(H,"class","h-3 w-3 mr-0.5"),o(H,"viewBox","0 0 20 20"),o(H,"fill","currentColor"),o(B,"class","flex items-center"),o(R,"class","flex items-center gap-2"),o($,"class","mt-1.5 pt-1.5 border-t border-neutral-100 dark:border-neutral-800 text-xs text-neutral-500 dark:text-neutral-400 flex items-center justify-between"),o(b,"class","p-2 flex-1 flex flex-col"),o(r,"class","bg-neutral-50 dark:bg-neutral-900 rounded border border-neutral-200 dark:border-neutral-800 shadow-sm h-full hover:border-neutral-300 dark:hover:border-neutral-700 transition-all hover:shadow-md overflow-hidden flex flex-col"),o(t,"href",Z=`/thread/${e[43].id}`),o(t,"class","block h-full"),this.first=t},m(V,J){E(V,t,J),c(t,r),c(r,l),y.m(l,null),c(l,s),c(l,a),c(a,i),c(i,f),c(i,h),c(r,m),c(r,b),c(b,x),c(x,_),c(b,k),c(b,C),N.m(C,null),c(b,O),c(b,$),c($,j),c(j,z),c($,F),c($,R),c(R,B),c(B,H),c(H,A),c(B,M),c(B,se),c(R,ae),W.m(R,null),c(t,X)},p(V,J){e=V,w===(w=U(e))&&y?y.p(e,J):(y.d(1),y=w(e),y&&(y.c(),y.m(l,s))),J[0]&8&&d!==(d=e[43].similarityScore+"")&&_e(f,d),J[0]&8&&L!==(L=e[43].title+"")&&_e(_,L),D===(D=T(e))&&N?N.p(e,J):(N.d(1),N=D(e),N&&(N.c(),N.m(C,null))),J[0]&8&&Y!==(Y=e[43].author+"")&&_e(z,Y),J[0]&8&&ie!==(ie=(e[43].commentCount||0)+"")&&_e(se,ie),Q!==(Q=re(e))&&(W.d(1),W=Q(e),W&&(W.c(),W.m(R,null))),J[0]&8&&Z!==(Z=`/thread/${e[43].id}`)&&o(t,"href",Z)},d(V){V&&u(t),y.d(),N.d(),W.d()}}}function fl(n){let e,t,r=[],l=new Ol,s,a,i,d,f,h=Qe(n[3].slice(3));const m=_=>_[43].id;for(let _=0;_<h.length;_+=1){let k=ul(n,h,_),C=m(k);l.set(C,r[_]=hl(C,k))}function b(_,k){return _[6]?Zn:Xn}let x=b(n),L=x(n);return{c(){e=g("div"),t=g("div");for(let _=0;_<r.length;_+=1)r[_].c();s=I(),a=g("div"),i=g("button"),L.c(),this.h()},l(_){e=v(_,"DIV",{class:!0,style:!0});var k=p(e);t=v(k,"DIV",{class:!0});var C=p(t);for(let j=0;j<r.length;j+=1)r[j].l(C);C.forEach(u),k.forEach(u),s=P(_),a=v(_,"DIV",{class:!0});var O=p(a);i=v(O,"BUTTON",{class:!0});var $=p(i);L.l($),$.forEach(u),O.forEach(u),this.h()},h(){o(t,"class","grid grid-cols-3 gap-3 mt-3"),o(e,"class","overflow-hidden transition-all duration-500 ease-in-out"),qt(e,"max-height",n[6]?"1000px":"0px"),qt(e,"opacity",n[6]?"1":"0"),o(i,"class","flex items-center px-3 py-1.5 bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 rounded text-xs font-medium text-neutral-700 dark:text-neutral-300 transition-colors focus:outline-none focus:ring-2 focus:ring-teal-500"),o(a,"class","flex justify-center mt-3")},m(_,k){E(_,e,k),c(e,t);for(let C=0;C<r.length;C+=1)r[C]&&r[C].m(t,null);E(_,s,k),E(_,a,k),c(a,i),L.m(i,null),d||(f=Ae(i,"click",n[8]),d=!0)},p(_,k){k[0]&8&&(h=Qe(_[3].slice(3)),r=Wt(r,k,m,1,_,h,l,t,Ml,hl,null,ul)),k[0]&64&&qt(e,"max-height",_[6]?"1000px":"0px"),k[0]&64&&qt(e,"opacity",_[6]?"1":"0"),x===(x=b(_))&&L?L.p(_,k):(L.d(1),L=x(_),L&&(L.c(),L.m(i,null)))},d(_){_&&(u(e),u(s),u(a));for(let k=0;k<r.length;k+=1)r[k].d();L.d(),d=!1,f()}}}function Gn(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-neutral-300 dark:text-neutral-700" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path></svg>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(r){e=v(r,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-w0lpoz"&&(e.innerHTML=t),this.h()},h(){o(e,"class","absolute inset-0 flex items-center justify-center")},m(r,l){E(r,e,l)},p:Me,d(r){r&&u(e)}}}function Qn(n){let e,t,r;return{c(){e=g("img"),this.h()},l(l){e=v(l,"IMG",{src:!0,alt:!0,class:!0,loading:!0}),this.h()},h(){Ke(e.src,t=n[43].mysteryObjectImageUrl||(n[43].mediaFiles&&n[43].mediaFiles.length>0?n[43].mediaFiles[0].url:""))||o(e,"src",t),o(e,"alt",r=n[43].title),o(e,"class","w-full h-full object-cover"),o(e,"loading","lazy")},m(l,s){E(l,e,s)},p(l,s){s[0]&8&&!Ke(e.src,t=l[43].mysteryObjectImageUrl||(l[43].mediaFiles&&l[43].mediaFiles.length>0?l[43].mediaFiles[0].url:""))&&o(e,"src",t),s[0]&8&&r!==(r=l[43].title)&&o(e,"alt",r)},d(l){l&&u(e)}}}function Wn(n){let e;return{c(){e=q("Topics are semantically related")},l(t){e=G(t,"Topics are semantically related")},m(t,r){E(t,e,r)},p:Me,d(t){t&&u(e)}}}function Yn(n){let e=n[43].relationshipExplanation+"",t;return{c(){t=q(e)},l(r){t=G(r,e)},m(r,l){E(r,t,l)},p(r,l){l[0]&8&&e!==(e=r[43].relationshipExplanation+"")&&_e(t,e)},d(r){r&&u(t)}}}function Jn(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(r){e=v(r,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-oiehem"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex items-center text-rose-800")},m(r,l){E(r,e,l)},d(r){r&&u(e)}}}function Kn(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(r){e=v(r,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-1wsslln"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex items-center text-emerald-600")},m(r,l){E(r,e,l)},d(r){r&&u(e)}}}function hl(n,e){let t,r,l,s,a,i,d=e[43].similarityScore+"",f,h,m,b,x,L=e[43].title+"",_,k,C,O,$,j,Y=e[43].author+"",z,F,R,B,H,A,M,ie=(e[43].commentCount||0)+"",se,ae,X,Z;function U(V,J){return V[43].mysteryObjectImageUrl||V[43].mediaFiles&&V[43].mediaFiles.length>0?Qn:Gn}let w=U(e),y=w(e);function T(V,J){return V[43].relationshipExplanation?Yn:Wn}let D=T(e),N=D(e);function re(V,J){return V[43].solved?Kn:Jn}let Q=re(e),W=Q(e);return{key:n,first:null,c(){t=g("a"),r=g("div"),l=g("div"),y.c(),s=I(),a=g("div"),i=g("div"),f=q(d),h=q("% match"),m=I(),b=g("div"),x=g("h4"),_=q(L),k=I(),C=g("div"),N.c(),O=I(),$=g("div"),j=g("div"),z=q(Y),F=I(),R=g("div"),B=g("div"),H=ee("svg"),A=ee("path"),M=I(),se=q(ie),ae=I(),W.c(),X=I(),this.h()},l(V){t=v(V,"A",{href:!0,class:!0});var J=p(t);r=v(J,"DIV",{class:!0});var ue=p(r);l=v(ue,"DIV",{class:!0});var ve=p(l);y.l(ve),s=P(ve),a=v(ve,"DIV",{class:!0});var Ee=p(a);i=v(Ee,"DIV",{class:!0});var $e=p(i);f=G($e,d),h=G($e,"% match"),$e.forEach(u),Ee.forEach(u),ve.forEach(u),m=P(ue),b=v(ue,"DIV",{class:!0});var we=p(b);x=v(we,"H4",{class:!0});var Ne=p(x);_=G(Ne,L),Ne.forEach(u),k=P(we),C=v(we,"DIV",{class:!0});var me=p(C);N.l(me),me.forEach(u),O=P(we),$=v(we,"DIV",{class:!0});var S=p($);j=v(S,"DIV",{class:!0});var ne=p(j);z=G(ne,Y),ne.forEach(u),F=P(S),R=v(S,"DIV",{class:!0});var ge=p(R);B=v(ge,"DIV",{class:!0});var ke=p(B);H=te(ke,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var Pe=p(H);A=te(Pe,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(A).forEach(u),Pe.forEach(u),M=P(ke),se=G(ke,ie),ke.forEach(u),ae=P(ge),W.l(ge),ge.forEach(u),S.forEach(u),we.forEach(u),ue.forEach(u),X=P(J),J.forEach(u),this.h()},h(){o(i,"class","px-1.5 py-0.5 bg-black/40 backdrop-blur-sm rounded-sm text-white text-xs font-medium"),o(a,"class","absolute bottom-0 left-0 right-0 flex justify-between items-center px-2 py-1 bg-gradient-to-t from-black/70 to-transparent"),o(l,"class","aspect-video w-full overflow-hidden relative bg-neutral-100 dark:bg-neutral-850 border-b border-neutral-200 dark:border-neutral-800"),o(x,"class","font-medium text-sm line-clamp-1 text-neutral-900 dark:text-white mb-1.5"),o(C,"class","text-xs text-neutral-600 dark:text-neutral-300 border-l-2 border-teal-500 dark:border-teal-600 pl-2 py-0.5 mb-auto bg-teal-50/50 dark:bg-teal-900/10 rounded-r"),o(j,"class","truncate max-w-[80px]"),o(A,"fill-rule","evenodd"),o(A,"d","M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z"),o(A,"clip-rule","evenodd"),o(H,"xmlns","http://www.w3.org/2000/svg"),o(H,"class","h-3 w-3 mr-0.5"),o(H,"viewBox","0 0 20 20"),o(H,"fill","currentColor"),o(B,"class","flex items-center"),o(R,"class","flex items-center gap-2"),o($,"class","mt-1.5 pt-1.5 border-t border-neutral-100 dark:border-neutral-800 text-xs text-neutral-500 dark:text-neutral-400 flex items-center justify-between"),o(b,"class","p-2 flex-1 flex flex-col"),o(r,"class","bg-neutral-50 dark:bg-neutral-900 rounded border border-neutral-200 dark:border-neutral-800 shadow-sm h-full hover:border-neutral-300 dark:hover:border-neutral-700 transition-all hover:shadow-md overflow-hidden flex flex-col"),o(t,"href",Z=`/thread/${e[43].id}`),o(t,"class","block h-full"),this.first=t},m(V,J){E(V,t,J),c(t,r),c(r,l),y.m(l,null),c(l,s),c(l,a),c(a,i),c(i,f),c(i,h),c(r,m),c(r,b),c(b,x),c(x,_),c(b,k),c(b,C),N.m(C,null),c(b,O),c(b,$),c($,j),c(j,z),c($,F),c($,R),c(R,B),c(B,H),c(H,A),c(B,M),c(B,se),c(R,ae),W.m(R,null),c(t,X)},p(V,J){e=V,w===(w=U(e))&&y?y.p(e,J):(y.d(1),y=w(e),y&&(y.c(),y.m(l,s))),J[0]&8&&d!==(d=e[43].similarityScore+"")&&_e(f,d),J[0]&8&&L!==(L=e[43].title+"")&&_e(_,L),D===(D=T(e))&&N?N.p(e,J):(N.d(1),N=D(e),N&&(N.c(),N.m(C,null))),J[0]&8&&Y!==(Y=e[43].author+"")&&_e(z,Y),J[0]&8&&ie!==(ie=(e[43].commentCount||0)+"")&&_e(se,ie),Q!==(Q=re(e))&&(W.d(1),W=Q(e),W&&(W.c(),W.m(R,null))),J[0]&8&&Z!==(Z=`/thread/${e[43].id}`)&&o(t,"href",Z)},d(V){V&&u(t),y.d(),N.d(),W.d()}}}function Xn(n){let e,t,r,l=n[3].length-3+"",s,a;return{c(){e=ee("svg"),t=ee("path"),r=q(`\r
                  Show `),s=q(l),a=q(" more"),this.h()},l(i){e=te(i,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var d=p(e);t=te(d,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(t).forEach(u),d.forEach(u),r=G(i,`\r
                  Show `),s=G(i,l),a=G(i," more"),this.h()},h(){o(t,"fill-rule","evenodd"),o(t,"d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"),o(t,"clip-rule","evenodd"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class","h-3.5 w-3.5 mr-1.5"),o(e,"viewBox","0 0 20 20"),o(e,"fill","currentColor")},m(i,d){E(i,e,d),c(e,t),E(i,r,d),E(i,s,d),E(i,a,d)},p(i,d){d[0]&8&&l!==(l=i[3].length-3+"")&&_e(s,l)},d(i){i&&(u(e),u(r),u(s),u(a))}}}function Zn(n){let e,t,r;return{c(){e=ee("svg"),t=ee("path"),r=q(`\r
                  Show less`),this.h()},l(l){e=te(l,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var s=p(e);t=te(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(t).forEach(u),s.forEach(u),r=G(l,`\r
                  Show less`),this.h()},h(){o(t,"fill-rule","evenodd"),o(t,"d","M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"),o(t,"clip-rule","evenodd"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class","h-3.5 w-3.5 mr-1.5"),o(e,"viewBox","0 0 20 20"),o(e,"fill","currentColor")},m(l,s){E(l,e,s),c(e,t),E(l,r,s)},p:Me,d(l){l&&(u(e),u(r))}}}function es(n){let e;return{c(){e=q("Looking for similar posts...")},l(t){e=G(t,"Looking for similar posts...")},m(t,r){E(t,e,r)},d(t){t&&u(e)}}}function ts(n){let e;return{c(){e=q("Finding related posts...")},l(t){e=G(t,"Finding related posts...")},m(t,r){E(t,e,r)},d(t){t&&u(e)}}}function rs(n){let e;function t(s,a){return s[2].length>0?Dn:s[4]?An:Mn}let r=t(n),l=r(n);return{c(){l.c(),e=Ge()},l(s){l.l(s),e=Ge()},m(s,a){l.m(s,a),E(s,e,a)},p(s,a){r===(r=t(s))&&l?l.p(s,a):(l.d(1),l=r(s),l&&(l.c(),l.m(e.parentNode,e)))},i:Me,o:Me,d(s){s&&u(e),l.d(s)}}}let wt=4;function ls(n,e){let t=0,r=[];if(n.matchingTagCount>0){const l=Math.min(65,30*(1+.5*(n.matchingTagCount-1)));t+=l,r.push({factor:"Tags",points:Math.round(l),explanation:`${n.matchingTagCount} matching tag${n.matchingTagCount!==1?"s":""}`})}return n.hasSubclassRelation&&(t+=30,r.push({factor:"Subclass",points:30,explanation:"Taxonomic relationship between concepts"})),n.hasCommonParentRelation&&(t+=25,r.push({factor:"Common Parent",points:25,explanation:"Items share a common parent class"})),n.hasTransitiveRelation&&(t+=22,r.push({factor:"Transitive",points:22,explanation:"Connected through relationship chain"})),n.semanticLinks&&n.semanticLinks.length>0&&n.semanticLinks.forEach(l=>{const s=l.relationWeight||.5,a=.7**(l.hops-1),d=l.relationType==="SUBCLASS_OF"?1.8:1;let f=1;if(l.hierarchyType)switch(l.hierarchyType){case"parent":f=1.3;break;case"child":f=1.2;break;case"sibling":f=1.4;break;case"cousin":f=1;break;case"uncle":f=.95;break;default:f=1}const h=25*s*a*f*d;t+=h,h>10&&r.push({factor:l.relationType,points:Math.round(h),explanation:`${l.hops}-hop ${l.relationType.toLowerCase()} relation`})}),{score:Math.min(100,Math.round(t)),details:r}}async function ns(n,e){try{const t=`
        SELECT ?intermediateEntity ?intermediateLabel ?relation ?relationLabel WHERE {
          VALUES ?source { wd:${n} }
          VALUES ?target { wd:${e} }
          
          # Find relations where source relates to something that is a subclass of target
          # OR target relates to something that is a subclass of source
          {
            # Pattern: Source --relation--> Intermediate --subclass--> Target
            ?source ?relation ?intermediateEntity .
            ?intermediateEntity wdt:P279 ?target .
          } UNION {
            # Pattern: Target --relation--> Intermediate --subclass--> Source
            ?target ?relation ?intermediateEntity .
            ?intermediateEntity wdt:P279 ?source .
          } UNION {
            # Pattern: Source --subclass--> Intermediate --relation--> Target
            ?source wdt:P279 ?intermediateEntity .
            ?intermediateEntity ?relation ?target .
          } UNION {
            # Pattern: Target --subclass--> Intermediate --relation--> Source
            ?target wdt:P279 ?intermediateEntity .
            ?intermediateEntity ?relation ?source .
          }
          
          FILTER(?relation != wdt:P279) # Exclude direct subclass relations
          
          # Get labels
          SERVICE wikibase:label { bd:serviceParam wikibase:language "en". }
        }
        LIMIT 5
      `,r=`https://query.wikidata.org/sparql?query=${encodeURIComponent(t)}&format=json`,l=new AbortController,s=setTimeout(()=>l.abort(),5e3),a=await fetch(r,{signal:l.signal});if(clearTimeout(s),!a.ok)return console.error("Transitive relation query failed:",a.status),{hasTransitiveRelation:!1};const i=await a.json();return!i.results||!i.results.bindings||i.results.bindings.length===0?{hasTransitiveRelation:!1}:{hasTransitiveRelation:!0,transitiveRelations:i.results.bindings.map(f=>{var L,_,k,C;const h=(L=f.relation)==null?void 0:L.value,m=h?h.split("/").pop():"",b=(_=f.intermediateEntity)==null?void 0:_.value,x=b?b.split("/").pop():"";return{relationId:m,relationLabel:((k=f.relationLabel)==null?void 0:k.value)||"related to",intermediateEntityId:x,intermediateEntityLabel:((C=f.intermediateLabel)==null?void 0:C.value)||x}})}}catch(t){return console.error("Error in transitive relation query:",t),{hasTransitiveRelation:!1}}}function ss(n,e,t){let r,l,s=Me,a=()=>(s(),s=Hl(d,w=>t(22,l=w)),d);Gt(n,mr,w=>t(12,r=w)),n.$$.on_destroy.push(()=>s());let{thread:i={}}=e,{tagDetails:d=Vl({})}=e;a();let f=null,h=[],m=[],b=0,x=!0,L=!1,_=[],k=new Map,C=new Map,O=new Map;const $={P31:{name:"INSTANCE_OF",weight:.8,hierarchy:"child"},P279:{name:"SUBCLASS_OF",weight:1.2,hierarchy:"child"},P171:{name:"PARENT_TAXON",weight:.85,hierarchy:"child"},P361:{name:"PART_OF",weight:.7,hierarchy:"child"},P527:{name:"HAS_PART",weight:.7,hierarchy:"parent"},P1889:{name:"DIFFERENT_FROM",weight:.3,hierarchy:"sibling"},P460:{name:"SAME_AS",weight:1,hierarchy:"sibling"},P1382:{name:"COINCIDENT_WITH",weight:.85,hierarchy:"sibling"},P366:{name:"USED_FOR",weight:.6,hierarchy:"function"},P1535:{name:"USED_BY",weight:.6,hierarchy:"function"},P1552:{name:"HAS_QUALITY",weight:.75,hierarchy:"attribute"},P186:{name:"MATERIAL",weight:.8,hierarchy:"composition"},P137:{name:"OPERATOR",weight:.5,hierarchy:"role"},P462:{name:"COLOR",weight:.6,hierarchy:"attribute"}};async function j(w,y){const T=`${w}-${y}`,D=`${y}-${w}`;if(k.has(T))return k.get(T);if(k.has(D))return k.get(D);try{const N=`
        ASK {
          {
            # Direct subclass relationship
            wd:${w} wdt:P279 wd:${y} .
          } UNION {
            # Target is a subclass of source
            wd:${y} wdt:P279 wd:${w} .
          } UNION {
            # Indirect (2-hop) subclass relationship
            wd:${w} wdt:P279/wdt:P279 wd:${y} .
          } UNION {
            # Reverse indirect (2-hop)
            wd:${y} wdt:P279/wdt:P279 wd:${w} .
          } UNION {
            # Common parent class (siblings)
            wd:${w} wdt:P279 ?commonParent .
            wd:${y} wdt:P279 ?commonParent .
            FILTER(?sourceEntityId != ?targetEntityId)
          } UNION {
            # Indirect (3-hop) relationship
            wd:${w} wdt:P279/wdt:P279/wdt:P279 wd:${y} .
          } UNION {
            # Reverse indirect (3-hop)
            wd:${y} wdt:P279/wdt:P279/wdt:P279 wd:${w} .
          }
        }
      `,re=`https://query.wikidata.org/sparql?query=${encodeURIComponent(N)}&format=json`,Q=new AbortController,W=setTimeout(()=>Q.abort(),5e3),V=await fetch(re,{signal:Q.signal});if(clearTimeout(W),!V.ok)return console.error("SPARQL subclass query failed:",V.status),k.set(T,!1),!1;const ue=(await V.json()).boolean===!0;return k.set(T,ue),ue}catch(N){return N.name==="AbortError"?console.warn("SPARQL subclass query timed out for",w,y):console.error("Error in SPARQL subclass query:",N),k.set(T,!1),!1}}async function Y(w,y){const T=`${w}-${y}-commonParent`,D=`${y}-${w}-commonParent`;if(C.has(T))return C.get(T);if(C.has(D))return C.get(D);try{const N=`
        SELECT DISTINCT ?commonParent ?commonParentLabel WHERE {
          VALUES ?entity1 { wd:${w} }
          VALUES ?entity2 { wd:${y} }
          
          # Find common parent class through SUBCLASS_OF
          {
            ?entity1 wdt:P279 ?commonParent .
            ?entity2 wdt:P279 ?commonParent .
            FILTER(?entity1 != ?entity2)
          }
          UNION
          # Also try with P31 (instance of)
          {
            ?entity1 wdt:P31 ?commonParent .
            ?entity2 wdt:P31 ?commonParent .
            FILTER(?entity1 != ?entity2)
          }
          UNION
          # Try one level up in the hierarchy
          {
            ?entity1 wdt:P279/wdt:P279 ?commonParent .
            ?entity2 wdt:P279 ?commonParent .
            FILTER(?entity1 != ?entity2)
          }
          UNION
          {
            ?entity1 wdt:P279 ?commonParent .
            ?entity2 wdt:P279/wdt:P279 ?commonParent .
            FILTER(?entity1 != ?entity2)
          }
          
          # Get label for common parent
          SERVICE wikibase:label { bd:serviceParam wikibase:language "en". }
        }
        LIMIT 5
      `,re=`https://query.wikidata.org/sparql?query=${encodeURIComponent(N)}&format=json`,Q=new AbortController,W=setTimeout(()=>Q.abort(),5e3),V=await fetch(re,{signal:Q.signal});if(clearTimeout(W),!V.ok)return console.error("Common parent SPARQL query failed:",V.status),C.set(T,{hasCommonParent:!1}),{hasCommonParent:!1};const J=await V.json();if(!J.results||!J.results.bindings||J.results.bindings.length===0)return C.set(T,{hasCommonParent:!1}),{hasCommonParent:!1};const ve={hasCommonParent:!0,commonParents:J.results.bindings.map(Ee=>{var Ne,me;const $e=(Ne=Ee.commonParent)==null?void 0:Ne.value,we=$e?$e.split("/").pop():"";return{id:we,label:((me=Ee.commonParentLabel)==null?void 0:me.value)||we}})};return C.set(T,ve),C.set(D,ve),ve}catch(N){return N.name==="AbortError"?console.warn("Common parent SPARQL query timed out for",w,y):console.error("Error in common parent SPARQL query:",N),C.set(T,{hasCommonParent:!1}),C.set(D,{hasCommonParent:!1}),{hasCommonParent:!1}}}async function z(w,y){try{const T=`
        SELECT ?source ?target ?relation ?relationLabel ?hierarchy ?hops ?hop1 ?hop1Label ?hop2 ?hop2Label WHERE {
          VALUES ?source { wd:${w} }
          VALUES ?target { wd:${y} }
          
          # Direct relationship (1 hop) - prioritizing P279 even more strongly
          {
            # Check P279 (subclass of) first for direct relationship
            {
              ?source wdt:P279 ?target .
              BIND(wdt:P279 AS ?relation)
              BIND("child" AS ?hierarchy)
              BIND(1 AS ?hops)
            } UNION {
              ?target wdt:P279 ?source .
              BIND(wdt:P279 AS ?relation)
              BIND("parent" AS ?hierarchy)
              BIND(1 AS ?hops)
            } UNION {
              # Then check other relations with lower priority
              ?source ?relation ?target .
              FILTER(?relation != wdt:P279)
              BIND(1 AS ?hops)
              
              # Determine hierarchy type for direct relationships
              OPTIONAL {
                # Check if source is a parent of target
                {
                  VALUES ?parentRel { wdt:P279 wdt:P31 wdt:P171 }
                  ?target ?parentRel ?source .
                  BIND("parent" AS ?hierarchy)
                } UNION {
                  # Check if source is a child of target
                  VALUES ?childRel { wdt:P279 wdt:P31 wdt:P171 }
                  ?source ?childRel ?target .
                  BIND("child" AS ?hierarchy)
                } UNION {
                  # Check if source and target are siblings (same parent)
                  VALUES ?siblingRel { wdt:P279 wdt:P31 wdt:P171 }
                  ?source ?siblingRel ?commonParent .
                  ?target ?siblingRel ?commonParent .
                  FILTER(?source != ?target)
                  BIND("sibling" AS ?hierarchy)
                }
              }
            }
          }
          UNION
          # 2-hop path with hierarchy identification - prioritize P279 chains even more
          {
            # First check specifically for P279 chains (subclass hierarchy)
            {
              ?source wdt:P279 ?hop1 .
              ?hop1 wdt:P279 ?target .
              BIND(wdt:P279 AS ?relation)
              BIND("child" AS ?hierarchy)
              BIND(2 AS ?hops)
            } UNION {
              ?target wdt:P279 ?hop1 .
              ?hop1 wdt:P279 ?source .
              BIND(wdt:P279 AS ?relation)
              BIND("parent" AS ?hierarchy)
              BIND(2 AS ?hops)
            } UNION {
              # Common parent class (siblings) - new priority case
              ?source wdt:P279 ?hop1 .
              ?target wdt:P279 ?hop1 .
              FILTER(?source != ?target)
              BIND(wdt:P279 AS ?relation)
              BIND("sibling" AS ?hierarchy)
              BIND(2 AS ?hops)
            } UNION {
              # Then check other 2-hop paths
              ?source ?relation ?hop1 .
              ?hop1 ?relation2 ?target .
              FILTER(?relation != wdt:P279 || ?relation2 != wdt:P279)
              BIND(2 AS ?hops)
              
              # Try to determine hierarchy type for 2-hop relationships
              OPTIONAL {
                # Check for grandparent relationship
                VALUES ?parentRel { wdt:P279 wdt:P31 wdt:P171 }
                ?hop1 ?parentRel ?source .
                ?target ?parentRel ?hop1 .
                BIND("grandparent" AS ?hierarchy)
              }
              OPTIONAL {
                # Check for grandchild relationship
                VALUES ?childRel { wdt:P279 wdt:P31 wdt:P171 }
                ?source ?childRel ?hop1 .
                ?hop1 ?childRel ?target .
                BIND("grandchild" AS ?hierarchy)
              }
              OPTIONAL {
                # Check for cousin relationship
                VALUES ?cousinRel { wdt:P279 wdt:P31 wdt:P171 }
                ?source ?cousinRel ?parentSource .
                ?target ?cousinRel ?parentTarget .
                ?parentSource wdt:P279 ?commonAncestor .
                ?parentTarget wdt:P279 ?commonAncestor .
                FILTER(?parentSource != ?parentTarget)
                BIND("cousin" AS ?hierarchy)
              }
              OPTIONAL {
                # Check for uncle/aunt relationship
                VALUES ?uncleRel { wdt:P279 wdt:P31 wdt:P171 }
                ?source ?uncleRel ?grandparent .
                ?parentTarget ?uncleRel ?grandparent .
                ?target ?uncleRel ?parentTarget .
                BIND("uncle" AS ?hierarchy)
              }
            }
          }
          
          SERVICE wikibase:label { bd:serviceParam wikibase:language "en". }
        }
        LIMIT 20
      `,D=`https://query.wikidata.org/sparql?query=${encodeURIComponent(T)}&format=json`,N=new AbortController,re=setTimeout(()=>N.abort(),5e3);try{const Q=await fetch(D,{signal:N.signal});if(clearTimeout(re),!Q.ok)return console.error("SPARQL query failed:",Q.status),[];const W=await Q.json();return!W.results||!W.results.bindings||W.results.bindings.length===0?[]:W.results.bindings.map(V=>{var Ne,me,S,ne,ge,ke,Pe,de;const J=(Ne=V.relation)==null?void 0:Ne.value,ue=J?J.split("/").pop():"",ve=$[ue]||{name:"RELATED",weight:.5,hierarchy:null};let Ee=((me=V.hierarchy)==null?void 0:me.value)||ve.hierarchy;const $e=ue==="P279"?1.2:ve.weight||.5;let we="direct";return ue==="P279"?Ee==="child"?we="subclass":Ee==="parent"?we="superclass":Ee==="sibling"&&(we="sibling"):["P361","P527"].includes(ue)&&(we="composition"),{sourceEntity:w,targetEntity:y,relationType:ve.name,relationId:ue,relationWeight:$e,relationLabel:((S=V.relationLabel)==null?void 0:S.value)||"related to",hops:(ne=V.hops)!=null&&ne.value?parseInt(V.hops.value):1,hierarchyType:Ee,isSubclassRelation:ue==="P279",visualType:we,intermediates:[(ge=V.hop1)!=null&&ge.value?{id:V.hop1.value.split("/").pop(),label:(ke=V.hop1Label)==null?void 0:ke.value}:null,(Pe=V.hop2)!=null&&Pe.value?{id:V.hop2.value.split("/").pop(),label:(de=V.hop2Label)==null?void 0:de.value}:null].filter(Boolean)}})}catch(Q){return Q.name==="AbortError"?console.warn("SPARQL query timed out for",w,y):console.error("Error in SPARQL query:",Q),[]}}catch(T){return console.error("Error preparing semantic links query:",T),[]}}async function F(w){var y,T,D,N;if(!(!w||!Array.isArray(w)||w.length===0))try{let re={};const Q=l,W=w.filter(V=>V&&!Q[V]);if(W.length===0)return;for(const V of W)try{const ue=await(await fetch(`https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${V}&format=json&languages=en&props=labels|descriptions&origin=*`)).json();if(ue.entities&&ue.entities[V]){const ve=ue.entities[V];re[V]={id:V,label:((T=(y=ve.labels)==null?void 0:y.en)==null?void 0:T.value)||"Unknown label",description:((N=(D=ve.descriptions)==null?void 0:D.en)==null?void 0:N.value)||"No description"}}}catch(J){console.error(`Failed to fetch details for tag ${V}:`,J)}d.update(V=>({...V,...re}))}catch(re){console.error("Failed to fetch tag details for similar posts:",re)}}function R(){if(!m||!m.length)return{currentPage:0,totalPages:0,itemsPerPage:wt,startIndex:0,endIndex:0,hasNext:!1,hasPrev:!1};const w=Math.floor(b/wt),y=Math.ceil(m.length/wt),T=w*wt,D=Math.min(T+wt,m.length);return{currentPage:w,totalPages:y,itemsPerPage:wt,startIndex:T,endIndex:D,hasNext:w<y-1,hasPrev:w>0}}async function B(){if(!(i!=null&&i.tags)||i.tags.length===0||!h||h.length===0){t(4,x=!1),t(3,_=[]);return}t(4,x=!0),t(5,L=!0);try{const w=h.filter(N=>N.matchingTagCount>0),y=h;console.log(`Processing ${y.length} posts for semantic relationships`);const D=(await Promise.all(y.map(async N=>{try{const re={...N,semanticLinks:[],hasSubclassRelation:!1,hasCommonParentRelation:!1,hasTransitiveRelation:!1,similarityScore:0},Q=i.tags.slice(0,5),W=N.tags.slice(0,5);let V=!1,J=[];for(const me of Q){if(V)break;for(const S of W)if(await j(me,S)){console.log(`Found subclass relation between ${me} and ${S}`),V=!0;const ge=await z(me,S);if(ge&&ge.length>0){J.push(...ge);break}}}let ue=!1,ve=null;if(!V){const me=Math.min(5,Math.max(Q.length,W.length));for(let S=0;S<me&&!ue;S++){const ne=Q[S%Q.length];for(let ge=0;ge<me&&!ue;ge++){const ke=W[ge%W.length];if(ne===ke)continue;const Pe=await Y(ne,ke);if(Pe.hasCommonParent){ue=!0,ve=Pe;break}}}}let Ee=!1,$e=null;if(!V&&!ue)for(const me of Q){if(Ee)break;for(const S of W){const ne=await ns(me,S);if(ne.hasTransitiveRelation){console.log(`Found transitive relation between ${me} and ${S}`),Ee=!0,$e=ne;break}}}let we=[];if(!V&&!ue&&!Ee)for(const me of Q)for(const S of W)try{const ne=await z(me,S);ne&&ne.length>0&&we.push(...ne)}catch(ne){console.warn(`Error fetching semantic links for ${me}->${S}:`,ne)}V?(re.hasSubclassRelation=!0,re.semanticLinks=J,J.length>0&&(re.primaryRelationship=J.find(me=>me.isSubclassRelation&&me.hops===1)||J[0])):ue?(re.hasCommonParentRelation=!0,re.commonParents=ve.commonParents):Ee?(re.hasTransitiveRelation=!0,re.transitiveRelations=$e.transitiveRelations):we.length>0&&(re.semanticLinks=we,re.primaryRelationship=we.reduce((me,S)=>{const ne=me.relationWeight/me.hops;return S.relationWeight/S.hops>ne?S:me}));const Ne=ls(re,i);return re.similarityScore=Ne.score,re.scoreDetails=Ne.details,re.relationshipExplanation=A(re,i),re}catch(re){return console.error("Error processing post:",re),{...N,semanticLinks:[],hasSubclassRelation:!1,similarityScore:N.matchingTagCount>0?30*N.matchingTagCount:0}}}))).filter(N=>N.matchingTagCount>0||N.hasSubclassRelation||N.hasCommonParentRelation||N.hasTransitiveRelation||N.semanticLinks&&N.semanticLinks.length>0&&N.similarityScore>=12);console.log(`Found ${D.length} related posts`),t(3,_=D.sort((N,re)=>re.similarityScore-N.similarityScore))}catch(w){console.error("Error in processPosts:",w),t(3,_=h.filter(y=>y.matchingTagCount>0).map(y=>({...y,semanticLinks:[],hasSubclassRelation:!1,similarityScore:30*(y.matchingTagCount||0),relationshipExplanation:`Shares ${y.matchingTagCount} tag${y.matchingTagCount!==1?"s":""}`})))}finally{t(4,x=!1),t(5,L=!1)}}function H(w){const y=w!=null&&w.includes(":")?w.split(":").pop():w;return y?$[y]?$[y].name.toLowerCase().replace(/_/g," "):{P31:"instance of",P279:"subclass of",P171:"parent taxon",P361:"part of",P527:"has part",P1889:"different from",P460:"same as",P1382:"coincident with",P366:"used for",P1535:"used by",P1552:"has quality",P186:"material",P137:"operator",P462:"color"}[y]||"relationship":"relationship"}function A(w,y){var re;if(!w)return"";const T=["taxon","material","entity","object","thing","item","substance","physical object","abstract object","physical entity","abstract entity","chemical compound","chemical element","chemical substance","product","solid"],D=Q=>Q?T.some(W=>Q.toLowerCase()===W.toLowerCase()||Q.toLowerCase().includes(`(${W.toLowerCase()})`)):!0,N=Q=>Q?Q.replace(/\s*\([^)]*\)/g,"").trim():"";if(w.matchingTagCount>0){const Q=w.tags.filter(V=>y.tags.includes(V)),W=Q.slice(0,Math.min(3,Q.length)).map(V=>{var J;return((J=l[V])==null?void 0:J.label)||V}).filter(Boolean);if(W.length>0){let V=`Both posts discuss ${W.map(J=>`"${J}"`).join(", ")}`;return Q.length>3&&(V+=` and ${Q.length-3} other similar topics`),V}}if(w.hasCommonParentRelation&&w.commonParents&&w.commonParents.length>0){const Q=w.commonParents.find(W=>W.label&&!D(W.label));if(Q)return`Both are types of "${Q.label}"`}if(w.hasSubclassRelation&&w.primaryRelationship){if(w.primaryRelationship.hierarchyType==="child"){if(l[w.primaryRelationship.sourceEntity]&&l[w.primaryRelationship.targetEntity]){const Q=l[w.primaryRelationship.sourceEntity].label,W=l[w.primaryRelationship.targetEntity].label;if(!D(Q)&&!D(W))return`"${Q}" is a subclass of "${W}"`}}else if(w.primaryRelationship.hierarchyType==="parent"&&l[w.primaryRelationship.targetEntity]&&l[w.primaryRelationship.sourceEntity]){const Q=l[w.primaryRelationship.sourceEntity].label,W=l[w.primaryRelationship.targetEntity].label;if(!D(W)&&!D(Q))return`"${W}" is a subclass of "${Q}"`}}if(w.hasTransitiveRelation&&w.transitiveRelations&&w.transitiveRelations.length>0){const Q=w.transitiveRelations[0];let W=Q.intermediateEntityLabel||"";W=W.replace(/Q\d+\s*(\([^)]*\))?/g,"").trim(),W=N(W);const V=Q.relationId,J=H(V);if(W&&!D(W))return`Connected through ${W}`;if(J!=="relationship")return`Connected through ${J} relationship`;const ue=N(Q.relationLabel);if(ue&&!D(ue))return`Connected through ${ue.toLowerCase()}`}if(w.semanticLinks&&w.semanticLinks.length>0){const Q=w.semanticLinks[0];if(l[Q.sourceEntity]&&l[Q.targetEntity]){const J=l[Q.sourceEntity].label,ue=l[Q.targetEntity].label;if(!D(J)&&!D(ue)){const ve=H(Q.relationId)||((re=Q.relationLabel)==null?void 0:re.toLowerCase())||"related to";return`"${J}" is ${ve} "${ue}"`}}const W=H(Q.relationId);if(W!=="relationship")return`Topics connected by ${W} relationship`;const V=N(Q.relationLabel);if(V&&!D(V))return`Topics have a ${V.toLowerCase()} connection`}if(w.similarityScore>50)return"Topics are closely connected in the knowledge graph";if(w.similarityScore>30)return"Topics share knowledge graph connections";if(w.semanticLinks&&w.semanticLinks.length>0){const Q=w.semanticLinks.reduce((V,J)=>{const ue=V.relationWeight||.5;return(J.relationWeight||.5)>ue?J:V}),W=H(Q.relationId);return W!=="relationship"?`Topics share a ${W} connection`:"Objects are connected through distant semantic links"}return"Objects have similar high level classifications"}let M=!1;function ie(){console.log("Resetting similar posts component - new thread or refresh detected"),t(2,h=[]),t(3,_=[]),t(4,x=!0),t(5,L=!1),b=0,k.size>100&&(k=new Map),C.size>100&&(C=new Map),O.size>100&&(O=new Map),i&&i.id&&i.tags&&r&&se()}function se(){if(!i||!i.id||!i.tags||!r){t(2,h=[]),t(4,x=!1);return}t(2,h=r.filter(T=>!(String(T.id)===String(i.id)||!i.tags||!T.tags||i.tags.length===0||T.tags.length===0)).map(T=>{const D=T.tags.filter(N=>{var re;return(re=i==null?void 0:i.tags)==null?void 0:re.includes(N)}).length;return{...T,matchingTagCount:D}}));const w=h.filter(T=>T.matchingTagCount>0),y=h.filter(T=>T.matchingTagCount===0);w.sort((T,D)=>D.matchingTagCount-T.matchingTagCount),y.sort((T,D)=>D.id-T.id),t(2,h=[...w,...y.slice(0,30)]),h.length>0?B():t(4,x=!1)}vr(()=>{setTimeout(()=>{i!=null&&i.id&&i.tags&&i.tags.length>0?(console.log("Initializing similar posts on mount"),t(9,f=i.id),t(11,M=!0),ie()):t(4,x=!1)},300);const w=()=>{M&&(i!=null&&i.id)&&(console.log("Window focused, checking for updates to similar posts"),se())};return window.addEventListener("focus",w),()=>{window.removeEventListener("focus",w)}}),Ll(()=>{k.clear(),C.clear(),O.clear()}),jl(()=>{if(_.length>0&&b>0){const w=Math.max(0,_.length-wt);b>w&&(b=w)}});let ae=!1,X;function Z(){t(6,ae=!ae)}function U(w){St[w?"unshift":"push"](()=>{X=w,t(7,X)})}return n.$$set=w=>{"thread"in w&&t(0,i=w.thread),"tagDetails"in w&&a(t(1,d=w.tagDetails))},n.$$.update=()=>{var w;if(n.$$.dirty[0]&4101)if(i&&i.id&&i.tags&&r){t(2,h=r.filter(D=>!(String(D.id)===String(i.id)||!i.tags||!D.tags||i.tags.length===0||D.tags.length===0)).map(D=>{const N=D.tags.filter(re=>{var Q;return(Q=i==null?void 0:i.tags)==null?void 0:Q.includes(re)}).length;return{...D,matchingTagCount:N}}));const y=h.filter(D=>D.matchingTagCount>0),T=h.filter(D=>D.matchingTagCount===0);y.sort((D,N)=>N.matchingTagCount-D.matchingTagCount),T.sort((D,N)=>N.id-D.id),t(2,h=[...y,...T.slice(0,30)]),b=0}else t(2,h=[]);if(n.$$.dirty[0]&2561&&(i!=null&&i.id?(!M||f!==i.id)&&(console.log(`Thread data loaded or changed: ${i.id}`),t(9,f=i.id),t(11,M=!0),ie()):(t(11,M=!1),t(2,h=[]),t(3,_=[]),t(4,x=!1))),n.$$.dirty[0]&4&&h.length>0){const y=new Set;h.forEach(T=>{T.tags&&T.tags.forEach(D=>y.add(D))}),y.size>0&&F([...y])}if(n.$$.dirty[0]&5&&(h&&h.length>0&&i&&i.tags?B():(!h||h.length===0)&&(t(4,x=!1),t(3,_=[]))),n.$$.dirty[0]&6145&&M&&i!=null&&i.id&&r&&r.length>0){const y=r.find(T=>String(T.id)===String(i.id));if(y&&((w=y.tags)==null?void 0:w.length)>0){const T=i.tags||[],D=y.tags||[];JSON.stringify(T)!==JSON.stringify(D)&&(console.log("Thread tags have changed, updating similar posts"),se())}}n.$$.dirty[0]&8&&t(10,m=_),n.$$.dirty[0]&1024&&m&&Math.ceil(m.length/wt)},R(),[i,d,h,_,x,L,ae,X,Z,f,m,M,r,U]}class as extends br{constructor(e){super(),_r(this,e,ss,rs,gr,{thread:0,tagDetails:1},null,[-1,-1])}}function ml(n,e,t){const r=n.slice();return r[61]=e[t],r}function pl(n,e,t){const r=n.slice();return r[64]=e[t],r[66]=t,r}function gl(n,e,t){const r=n.slice();return r[8]=e[t],r}function vl(n,e,t){const r=n.slice();return r[69]=e[t],r}function bl(n){let e,t,r,l,s=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-teal-600 dark:text-teal-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
          Resolve Mystery Object`,a,i,d,f,h="Resolution Description*",m,b,x,L,_,k,C=`<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 text-neutral-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z" clip-rule="evenodd"></path></svg>
            Contributing Comments`,O,$,j="Select comments that contributed to the resolution:",Y,z,F,R,B,H,A,M=n[18]&&_l(n);function ie(U){n[30](U)}let se={id:"resolution-description",class:"w-full p-3 border rounded-lg text-sm bg-white dark:bg-neutral-950 border-neutral-200 dark:border-neutral-700 focus:ring-2 focus:ring-teal-500/30 focus:border-teal-500",placeholder:"Explain how this mystery object was resolved...",rows:"4"};n[16]!==void 0&&(se.value=n[16]),b=new Yt({props:se}),St.push(()=>Rt(b,"value",ie));function ae(U,w){return U[2].length>0?is:os}let X=ae(n),Z=X(n);return R=new lt({props:{variant:"outline",class:"text-sm px-4",$$slots:{default:[us]},$$scope:{ctx:n}}}),R.$on("click",n[33]),H=new lt({props:{variant:"default",class:"text-sm bg-teal-600 hover:bg-teal-700 px-4",$$slots:{default:[cs]},$$scope:{ctx:n}}}),H.$on("click",n[24]),{c(){e=g("div"),t=g("div"),r=g("div"),l=g("h2"),l.innerHTML=s,a=I(),M&&M.c(),i=I(),d=g("div"),f=g("label"),f.textContent=h,m=I(),Ce(b.$$.fragment),L=I(),_=g("div"),k=g("h3"),k.innerHTML=C,O=I(),$=g("p"),$.textContent=j,Y=I(),Z.c(),z=I(),F=g("div"),Ce(R.$$.fragment),B=I(),Ce(H.$$.fragment),this.h()},l(U){e=v(U,"DIV",{class:!0});var w=p(e);t=v(w,"DIV",{class:!0});var y=p(t);r=v(y,"DIV",{class:!0});var T=p(r);l=v(T,"H2",{class:!0,"data-svelte-h":!0}),fe(l)!=="svelte-18qn8hk"&&(l.innerHTML=s),a=P(T),M&&M.l(T),i=P(T),d=v(T,"DIV",{class:!0});var D=p(d);f=v(D,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),fe(f)!=="svelte-9y2yf8"&&(f.textContent=h),m=P(D),Te(b.$$.fragment,D),D.forEach(u),L=P(T),_=v(T,"DIV",{class:!0});var N=p(_);k=v(N,"H3",{class:!0,"data-svelte-h":!0}),fe(k)!=="svelte-qx7dte"&&(k.innerHTML=C),O=P(N),$=v(N,"P",{class:!0,"data-svelte-h":!0}),fe($)!=="svelte-uh509s"&&($.textContent=j),Y=P(N),Z.l(N),N.forEach(u),z=P(T),F=v(T,"DIV",{class:!0});var re=p(F);Te(R.$$.fragment,re),B=P(re),Te(H.$$.fragment,re),re.forEach(u),T.forEach(u),y.forEach(u),w.forEach(u),this.h()},h(){o(l,"class","text-xl font-semibold mb-4 flex items-center"),o(f,"for","resolution-description"),o(f,"class","block text-sm font-medium mb-2 text-neutral-700 dark:text-neutral-300"),o(d,"class","mb-5"),o(k,"class","text-sm font-medium mb-2 flex items-center text-neutral-700 dark:text-neutral-300"),o($,"class","text-xs text-neutral-600 dark:text-neutral-400 mb-2"),o(_,"class","mb-5"),o(F,"class","flex justify-end gap-3 mt-6"),o(r,"class","p-6"),o(t,"class","bg-white dark:dark:bg-neutral-950 rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-neutral-200 dark:border-neutral-800 animate-in fade-in zoom-in-95 duration-200"),o(e,"class","fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4 transition-all duration-300")},m(U,w){E(U,e,w),c(e,t),c(t,r),c(r,l),c(r,a),M&&M.m(r,null),c(r,i),c(r,d),c(d,f),c(d,m),Se(b,d,null),c(r,L),c(r,_),c(_,k),c(_,O),c(_,$),c(_,Y),Z.m(_,null),c(r,z),c(r,F),Se(R,F,null),c(F,B),Se(H,F,null),A=!0},p(U,w){U[18]?M?M.p(U,w):(M=_l(U),M.c(),M.m(r,i)):M&&(M.d(1),M=null);const y={};!x&&w[0]&65536&&(x=!0,y.value=U[16],Vt(()=>x=!1)),b.$set(y),X===(X=ae(U))&&Z?Z.p(U,w):(Z.d(1),Z=X(U),Z&&(Z.c(),Z.m(_,null)));const T={};w[2]&1024&&(T.$$scope={dirty:w,ctx:U}),R.$set(T);const D={};w[2]&1024&&(D.$$scope={dirty:w,ctx:U}),H.$set(D)},i(U){A||(le(b.$$.fragment,U),le(R.$$.fragment,U),le(H.$$.fragment,U),A=!0)},o(U){ce(b.$$.fragment,U),ce(R.$$.fragment,U),ce(H.$$.fragment,U),A=!1},d(U){U&&u(e),M&&M.d(),Ie(b),Z.d(),Ie(R),Ie(H)}}}function _l(n){let e,t;return{c(){e=g("div"),t=q(n[18]),this.h()},l(r){e=v(r,"DIV",{class:!0});var l=p(e);t=G(l,n[18]),l.forEach(u),this.h()},h(){o(e,"class","bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 p-3 rounded-lg mb-4 border border-red-200 dark:border-red-800/50")},m(r,l){E(r,e,l),c(e,t)},p(r,l){l[0]&262144&&_e(t,r[18])},d(r){r&&u(e)}}}function os(n){let e,t=`<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 opacity-70" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg>
              No comments available to select`;return{c(){e=g("div"),e.innerHTML=t,this.h()},l(r){e=v(r,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-mp6q7y"&&(e.innerHTML=t),this.h()},h(){o(e,"class","text-sm text-neutral-500 dark:text-neutral-400 italic flex items-center justify-center p-4 border border-dashed border-neutral-300 dark:border-neutral-700 rounded-lg")},m(r,l){E(r,e,l)},p:Me,d(r){r&&u(e)}}}function is(n){let e,t=Qe(n[2]),r=[];for(let l=0;l<t.length;l+=1)r[l]=El(gl(n,t,l));return{c(){e=g("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=v(l,"DIV",{class:!0});var s=p(e);for(let a=0;a<r.length;a+=1)r[a].l(s);s.forEach(u),this.h()},h(){o(e,"class","max-h-60 overflow-y-auto border border-neutral-200 dark:border-neutral-700 rounded-lg p-2 shadow-inner")},m(l,s){E(l,e,s);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null)},p(l,s){if(s[0]&67239940){t=Qe(l[2]);let a;for(a=0;a<t.length;a+=1){const i=gl(l,t,a);r[a]?r[a].p(i,s):(r[a]=El(i),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(l){l&&u(e),Qt(r,l)}}}function wl(n){let e,t=n[8].commentType.toLowerCase()+"",r;return{c(){e=g("span"),r=q(t),this.h()},l(l){e=v(l,"SPAN",{class:!0});var s=p(e);r=G(s,t),s.forEach(u),this.h()},h(){o(e,"class","ml-2 px-1.5 py-0.5 text-xs rounded-full bg-neutral-100 dark:bg-neutral-950 text-neutral-600 dark:text-neutral-400")},m(l,s){E(l,e,s),c(e,r)},p(l,s){s[0]&4&&t!==(t=l[8].commentType.toLowerCase()+"")&&_e(r,t)},d(l){l&&u(e)}}}function kl(n){let e,t=Qe(n[8].replies),r=[];for(let l=0;l<t.length;l+=1)r[l]=yl(vl(n,t,l));return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=Ge()},l(l){for(let s=0;s<r.length;s+=1)r[s].l(l);e=Ge()},m(l,s){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(l,s);E(l,e,s)},p(l,s){if(s[0]&67239940){t=Qe(l[8].replies);let a;for(a=0;a<t.length;a+=1){const i=vl(l,t,a);r[a]?r[a].p(i,s):(r[a]=yl(i),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(l){l&&u(e),Qt(r,l)}}}function xl(n){let e,t=n[69].commentType.toLowerCase()+"",r;return{c(){e=g("span"),r=q(t),this.h()},l(l){e=v(l,"SPAN",{class:!0});var s=p(e);r=G(s,t),s.forEach(u),this.h()},h(){o(e,"class","ml-2 px-1.5 py-0.5 text-xs rounded-full bg-neutral-100 dark:bg-neutral-950 text-neutral-600 dark:text-neutral-400")},m(l,s){E(l,e,s),c(e,r)},p(l,s){s[0]&4&&t!==(t=l[69].commentType.toLowerCase()+"")&&_e(r,t)},d(l){l&&u(e)}}}function yl(n){let e,t,r,l,s,a,i,d=n[69].author+"",f,h,m,b="(reply)",x,L,_,k=n[69].content+"",C,O,$,j,Y;function z(){return n[32](n[69])}let F=n[69].commentType&&xl(n);return{c(){e=g("div"),t=g("input"),s=I(),a=g("label"),i=g("div"),f=q(d),h=I(),m=g("span"),m.textContent=b,x=I(),F&&F.c(),L=I(),_=g("div"),C=q(k),$=I(),this.h()},l(R){e=v(R,"DIV",{class:!0});var B=p(e);t=v(B,"INPUT",{type:!0,id:!0,class:!0}),s=P(B),a=v(B,"LABEL",{for:!0,class:!0});var H=p(a);i=v(H,"DIV",{class:!0});var A=p(i);f=G(A,d),h=P(A),m=v(A,"SPAN",{class:!0,"data-svelte-h":!0}),fe(m)!=="svelte-18etcib"&&(m.textContent=b),x=P(A),F&&F.l(A),A.forEach(u),L=P(H),_=v(H,"DIV",{class:!0});var M=p(_);C=G(M,k),M.forEach(u),H.forEach(u),$=P(B),B.forEach(u),this.h()},h(){o(t,"type","checkbox"),o(t,"id",r=`comment-${n[69].id}`),t.checked=l=n[17].includes(n[69].id),o(t,"class","h-4 w-4 text-teal-600 focus:ring-teal-500 rounded-sm"),o(m,"class","ml-1 text-xs text-neutral-500"),o(i,"class","text-sm font-medium flex items-center"),o(_,"class","text-xs text-neutral-600 dark:text-neutral-400 line-clamp-1"),o(a,"for",O=`comment-${n[69].id}`),o(a,"class","flex-1 cursor-pointer"),o(e,"class","flex items-center gap-2 p-2 hover:bg-neutral-100 dark:bg-neutral-950 rounded-md ml-6 border-l-2 border-neutral-200 dark:border-neutral-700 pl-4 transition-colors duration-150")},m(R,B){E(R,e,B),c(e,t),c(e,s),c(e,a),c(a,i),c(i,f),c(i,h),c(i,m),c(i,x),F&&F.m(i,null),c(a,L),c(a,_),c(_,C),c(e,$),j||(Y=Ae(t,"change",z),j=!0)},p(R,B){n=R,B[0]&4&&r!==(r=`comment-${n[69].id}`)&&o(t,"id",r),B[0]&131076&&l!==(l=n[17].includes(n[69].id))&&(t.checked=l),B[0]&4&&d!==(d=n[69].author+"")&&_e(f,d),n[69].commentType?F?F.p(n,B):(F=xl(n),F.c(),F.m(i,null)):F&&(F.d(1),F=null),B[0]&4&&k!==(k=n[69].content+"")&&_e(C,k),B[0]&4&&O!==(O=`comment-${n[69].id}`)&&o(a,"for",O)},d(R){R&&u(e),F&&F.d(),j=!1,Y()}}}function El(n){let e,t,r,l,s,a,i,d=n[8].author+"",f,h,m,b,x=n[8].content+"",L,_,k,C,O,$;function j(){return n[31](n[8])}let Y=n[8].commentType&&wl(n),z=n[8].replies&&n[8].replies.length>0&&kl(n);return{c(){e=g("div"),t=g("input"),s=I(),a=g("label"),i=g("div"),f=q(d),h=I(),Y&&Y.c(),m=I(),b=g("div"),L=q(x),k=I(),z&&z.c(),C=Ge(),this.h()},l(F){e=v(F,"DIV",{class:!0});var R=p(e);t=v(R,"INPUT",{type:!0,id:!0,class:!0}),s=P(R),a=v(R,"LABEL",{for:!0,class:!0});var B=p(a);i=v(B,"DIV",{class:!0});var H=p(i);f=G(H,d),h=P(H),Y&&Y.l(H),H.forEach(u),m=P(B),b=v(B,"DIV",{class:!0});var A=p(b);L=G(A,x),A.forEach(u),B.forEach(u),R.forEach(u),k=P(F),z&&z.l(F),C=Ge(),this.h()},h(){o(t,"type","checkbox"),o(t,"id",r=`comment-${n[8].id}`),t.checked=l=n[17].includes(n[8].id),o(t,"class","h-4 w-4 text-teal-600 focus:ring-teal-500 rounded-sm"),o(i,"class","text-sm font-medium flex items-center"),o(b,"class","text-xs text-neutral-600 dark:text-neutral-400 line-clamp-1"),o(a,"for",_=`comment-${n[8].id}`),o(a,"class","flex-1 cursor-pointer"),o(e,"class","flex items-center gap-2 p-2 hover:bg-neutral-100 dark:bg-neutral-950 rounded-md transition-colors duration-150")},m(F,R){E(F,e,R),c(e,t),c(e,s),c(e,a),c(a,i),c(i,f),c(i,h),Y&&Y.m(i,null),c(a,m),c(a,b),c(b,L),E(F,k,R),z&&z.m(F,R),E(F,C,R),O||($=Ae(t,"change",j),O=!0)},p(F,R){n=F,R[0]&4&&r!==(r=`comment-${n[8].id}`)&&o(t,"id",r),R[0]&131076&&l!==(l=n[17].includes(n[8].id))&&(t.checked=l),R[0]&4&&d!==(d=n[8].author+"")&&_e(f,d),n[8].commentType?Y?Y.p(n,R):(Y=wl(n),Y.c(),Y.m(i,null)):Y&&(Y.d(1),Y=null),R[0]&4&&x!==(x=n[8].content+"")&&_e(L,x),R[0]&4&&_!==(_=`comment-${n[8].id}`)&&o(a,"for",_),n[8].replies&&n[8].replies.length>0?z?z.p(n,R):(z=kl(n),z.c(),z.m(C.parentNode,C)):z&&(z.d(1),z=null)},d(F){F&&(u(e),u(k),u(C)),Y&&Y.d(),z&&z.d(F),O=!1,$()}}}function us(n){let e;return{c(){e=q("Cancel")},l(t){e=G(t,"Cancel")},m(t,r){E(t,e,r)},d(t){t&&u(e)}}}function cs(n){let e,t,r;return{c(){e=ee("svg"),t=ee("path"),r=q(`\r
            Resolve`),this.h()},l(l){e=te(l,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var s=p(e);t=te(s,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(t).forEach(u),s.forEach(u),r=G(l,`\r
            Resolve`),this.h()},h(){o(t,"fill-rule","evenodd"),o(t,"d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"),o(t,"clip-rule","evenodd"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class","h-4 w-4 mr-1.5"),o(e,"viewBox","0 0 20 20"),o(e,"fill","currentColor")},m(l,s){E(l,e,s),c(e,t),E(l,r,s)},p:Me,d(l){l&&(u(e),u(r))}}}function Cl(n){let e,t,r;return t=new ql({props:{id:n[0].id,title:n[1].title,description:n[1].description,tags:n[1].tags,mysteryObject:n[1].mysteryObject,imageSrc:n[1].mysteryObjectImage?`data:image/png;base64,${n[1].mysteryObjectImage}`:"",mediaFiles:n[1].mediaFiles||[],postedBy:n[1].author,postedDate:n[1].createdAt,upvotes:n[1].upvotes,downvotes:n[1].downvotes,userUpvoted:n[1].userUpvoted,userDownvoted:n[1].userDownvoted,createdAt:n[1].createdAt,updatedAt:n[1].updatedAt,solved:n[1].solved,resolution:n[1].resolution,variant:"thread",currentUser:n[7],contributingCommentObjects:n[19]}}),t.$on("edit",n[34]),t.$on("resolve",n[23]),t.$on("unresolve",n[25]),{c(){e=g("div"),Ce(t.$$.fragment),this.h()},l(l){e=v(l,"DIV",{class:!0});var s=p(e);Te(t.$$.fragment,s),s.forEach(u),this.h()},h(){o(e,"class","bg-white dark:dark:bg-neutral-950 shadow-md rounded-md border border-neutral-200 dark:border-neutral-800 overflow-hidden")},m(l,s){E(l,e,s),Se(t,e,null),r=!0},p(l,s){const a={};s[0]&1&&(a.id=l[0].id),s[0]&2&&(a.title=l[1].title),s[0]&2&&(a.description=l[1].description),s[0]&2&&(a.tags=l[1].tags),s[0]&2&&(a.mysteryObject=l[1].mysteryObject),s[0]&2&&(a.imageSrc=l[1].mysteryObjectImage?`data:image/png;base64,${l[1].mysteryObjectImage}`:""),s[0]&2&&(a.mediaFiles=l[1].mediaFiles||[]),s[0]&2&&(a.postedBy=l[1].author),s[0]&2&&(a.postedDate=l[1].createdAt),s[0]&2&&(a.upvotes=l[1].upvotes),s[0]&2&&(a.downvotes=l[1].downvotes),s[0]&2&&(a.userUpvoted=l[1].userUpvoted),s[0]&2&&(a.userDownvoted=l[1].userDownvoted),s[0]&2&&(a.createdAt=l[1].createdAt),s[0]&2&&(a.updatedAt=l[1].updatedAt),s[0]&2&&(a.solved=l[1].solved),s[0]&2&&(a.resolution=l[1].resolution),s[0]&128&&(a.currentUser=l[7]),s[0]&524288&&(a.contributingCommentObjects=l[19]),t.$set(a)},i(l){r||(le(t.$$.fragment,l),r=!0)},o(l){ce(t.$$.fragment,l),r=!1},d(l){l&&u(e),Ie(t)}}}function ds(n){let e,t='<div class="bg-white dark:bg-neutral-950 shadow-md rounded-md border border-neutral-200 dark:border-neutral-800 overflow-hidden p-4"><div class="flex justify-center"><div class="flex flex-col items-center"><svg class="animate-spin h-6 w-6 text-teal-500 mb-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="text-sm text-neutral-500">Loading post details...</p></div></div></div>';return{c(){e=g("div"),e.innerHTML=t,this.h()},l(r){e=v(r,"DIV",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-h8xek4"&&(e.innerHTML=t),this.h()},h(){o(e,"class","mt-3 mb-1")},m(r,l){E(r,e,l)},p:Me,i:Me,o:Me,d(r){r&&u(e)}}}function fs(n){let e,t,r;return t=new as({props:{thread:n[1],tagDetails:n[22]}}),{c(){e=g("div"),Ce(t.$$.fragment),this.h()},l(l){e=v(l,"DIV",{class:!0});var s=p(e);Te(t.$$.fragment,s),s.forEach(u),this.h()},h(){o(e,"class","mt-3 mb-1")},m(l,s){E(l,e,s),Se(t,e,null),r=!0},p(l,s){const a={};s[0]&2&&(a.thread=l[1]),t.$set(a)},i(l){r||(le(t.$$.fragment,l),r=!0)},o(l){ce(t.$$.fragment,l),r=!1},d(l){l&&u(e),Ie(t)}}}function hs(n){let e,t=n[21].length+"",r,l,s=n[2].length+"",a,i,d,f="Clear filter",h,m;return{c(){e=q("Showing "),r=q(t),l=q(" of "),a=q(s),i=q(` comments\r
                `),d=g("button"),d.textContent=f,this.h()},l(b){e=G(b,"Showing "),r=G(b,t),l=G(b," of "),a=G(b,s),i=G(b,` comments\r
                `),d=v(b,"BUTTON",{class:!0,"data-svelte-h":!0}),fe(d)!=="svelte-46k5v6"&&(d.textContent=f),this.h()},h(){o(d,"class","ml-2 text-teal-600 dark:text-teal-500 hover:underline")},m(b,x){E(b,e,x),E(b,r,x),E(b,l,x),E(b,a,x),E(b,i,x),E(b,d,x),h||(m=Ae(d,"click",n[44]),h=!0)},p(b,x){x[0]&2097152&&t!==(t=b[21].length+"")&&_e(r,t),x[0]&4&&s!==(s=b[2].length+"")&&_e(a,s)},d(b){b&&(u(e),u(r),u(l),u(a),u(i),u(d)),h=!1,m()}}}function ms(n){let e;return{c(){e=q("Showing all comments")},l(t){e=G(t,"Showing all comments")},m(t,r){E(t,e,r)},p:Me,d(t){t&&u(e)}}}function ps(n){let e,t;return e=new Bt({props:{class:"bg-white dark:dark:bg-neutral-950 shadow-md rounded-md border border-neutral-200 dark:border-neutral-800 overflow-hidden h-full",$$slots:{default:[bs]},$$scope:{ctx:n}}}),{c(){Ce(e.$$.fragment)},l(r){Te(e.$$.fragment,r)},m(r,l){Se(e,r,l),t=!0},p(r,l){const s={};l[2]&1024&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){t||(le(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ie(e,r)}}}function gs(n){let e,t;return e=new Bt({props:{class:"bg-white dark:bg-neutral-950 shadow-md rounded-md border border-neutral-200 dark:border-neutral-800 overflow-hidden h-full",$$slots:{default:[$s]},$$scope:{ctx:n}}}),{c(){Ce(e.$$.fragment)},l(r){Te(e.$$.fragment,r)},m(r,l){Se(e,r,l),t=!0},p(r,l){const s={};l[0]&28416|l[2]&1024&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){t||(le(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ie(e,r)}}}function vs(n){let e;return{c(){e=q("Sign in to comment")},l(t){e=G(t,"Sign in to comment")},m(t,r){E(t,e,r)},d(t){t&&u(e)}}}function bs(n){let e,t,r,l,s,a,i,d="Join the discussion by signing in to your account",f;return s=new wr({props:{class:"text-lg mb-1",$$slots:{default:[vs]},$$scope:{ctx:n}}}),{c(){e=g("div"),t=ee("svg"),r=ee("path"),l=I(),Ce(s.$$.fragment),a=I(),i=g("p"),i.textContent=d,this.h()},l(h){e=v(h,"DIV",{class:!0});var m=p(e);t=te(m,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var b=p(t);r=te(b,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),p(r).forEach(u),b.forEach(u),l=P(m),Te(s.$$.fragment,m),a=P(m),i=v(m,"P",{class:!0,"data-svelte-h":!0}),fe(i)!=="svelte-pupnv3"&&(i.textContent=d),m.forEach(u),this.h()},h(){o(r,"stroke-linecap","round"),o(r,"stroke-linejoin","round"),o(r,"stroke-width","1.5"),o(r,"d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"),o(t,"xmlns","http://www.w3.org/2000/svg"),o(t,"class","h-10 w-10 text-neutral-400 mx-auto mb-2"),o(t,"fill","none"),o(t,"viewBox","0 0 24 24"),o(t,"stroke","currentColor"),o(i,"class","text-sm text-neutral-500 dark:text-neutral-400"),o(e,"class","py-6 text-center")},m(h,m){E(h,e,m),c(e,t),c(t,r),c(e,l),Se(s,e,null),c(e,a),c(e,i),f=!0},p(h,m){const b={};m[2]&1024&&(b.$$scope={dirty:m,ctx:h}),s.$set(b)},i(h){f||(le(s.$$.fragment,h),f=!0)},o(h){ce(s.$$.fragment,h),f=!1},d(h){h&&u(e),Ie(s)}}}function _s(n){let e,t,r,l=n[13].length>0?`${n[13].length!==1?"s":""}`:"Add Media",s;return{c(){e=ee("svg"),t=ee("path"),r=I(),s=q(l),this.h()},l(a){e=te(a,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var i=p(e);t=te(i,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(t).forEach(u),i.forEach(u),r=P(a),s=G(a,l),this.h()},h(){o(t,"fill-rule","evenodd"),o(t,"d","M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"),o(t,"clip-rule","evenodd"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class","h-4 w-4 mr-1.5"),o(e,"viewBox","0 0 20 20"),o(e,"fill","currentColor")},m(a,i){E(a,e,i),c(e,t),E(a,r,i),E(a,s,i)},p(a,i){i[0]&8192&&l!==(l=a[13].length>0?`${a[13].length!==1?"s":""}`:"Add Media")&&_e(s,l)},d(a){a&&(u(e),u(r),u(s))}}}function ws(n){let e,t,r,l=n[11].charAt(0)+n[11].slice(1).toLowerCase()+"",s;return{c(){e=ee("svg"),t=ee("path"),r=q(`\r
                      Post as `),s=q(l),this.h()},l(a){e=te(a,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var i=p(e);t=te(i,"path",{d:!0}),p(t).forEach(u),i.forEach(u),r=G(a,`\r
                      Post as `),s=G(a,l),this.h()},h(){o(t,"d","M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class","h-4 w-4 mr-1.5"),o(e,"viewBox","0 0 20 20"),o(e,"fill","currentColor")},m(a,i){E(a,e,i),c(e,t),E(a,r,i),E(a,s,i)},p(a,i){i[0]&2048&&l!==(l=a[11].charAt(0)+a[11].slice(1).toLowerCase()+"")&&_e(s,l)},d(a){a&&(u(e),u(r),u(s))}}}function ks(n){let e,t,r=n[13].length>0?"Uploading...":"Posting...",l;return{c(){e=g("span"),t=I(),l=q(r),this.h()},l(s){e=v(s,"SPAN",{class:!0}),p(e).forEach(u),t=P(s),l=G(s,r),this.h()},h(){o(e,"class","inline-block h-4 w-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-1.5")},m(s,a){E(s,e,a),E(s,t,a),E(s,l,a)},p(s,a){a[0]&8192&&r!==(r=s[13].length>0?"Uploading...":"Posting...")&&_e(l,r)},d(s){s&&(u(e),u(t),u(l))}}}function xs(n){let e;function t(s,a){return s[9]?ks:ws}let r=t(n),l=r(n);return{c(){l.c(),e=Ge()},l(s){l.l(s),e=Ge()},m(s,a){l.m(s,a),E(s,e,a)},p(s,a){r===(r=t(s))&&l?l.p(s,a):(l.d(1),l=r(s),l&&(l.c(),l.m(e.parentNode,e)))},d(s){s&&u(e),l.d(s)}}}function Tl(n){let e,t=Qe(n[13]),r=[];for(let l=0;l<t.length;l+=1)r[l]=Sl(pl(n,t,l));return{c(){e=g("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=v(l,"DIV",{class:!0});var s=p(e);for(let a=0;a<r.length;a+=1)r[a].l(s);s.forEach(u),this.h()},h(){o(e,"class","mt-3 flex flex-wrap gap-2 p-2 border border-neutral-200 dark:border-neutral-700 rounded-md bg-white dark:dark:bg-neutral-950")},m(l,s){E(l,e,s);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null)},p(l,s){if(s[0]&8192){t=Qe(l[13]);let a;for(a=0;a<t.length;a+=1){const i=pl(l,t,a);r[a]?r[a].p(i,s):(r[a]=Sl(i),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=t.length}},d(l){l&&u(e),Qt(r,l)}}}function ys(n){let e,t;return{c(){e=ee("svg"),t=ee("path"),this.h()},l(r){e=te(r,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var l=p(e);t=te(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),p(t).forEach(u),l.forEach(u),this.h()},h(){o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class","h-8 w-8 text-neutral-500"),o(e,"fill","none"),o(e,"viewBox","0 0 24 24"),o(e,"stroke","currentColor")},m(r,l){E(r,e,l),c(e,t)},p:Me,d(r){r&&u(e)}}}function Es(n){let e,t;return{c(){e=ee("svg"),t=ee("path"),this.h()},l(r){e=te(r,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var l=p(e);t=te(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),p(t).forEach(u),l.forEach(u),this.h()},h(){o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2zM9 10l12-3"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class","h-8 w-8 text-neutral-500"),o(e,"fill","none"),o(e,"viewBox","0 0 24 24"),o(e,"stroke","currentColor")},m(r,l){E(r,e,l),c(e,t)},p:Me,d(r){r&&u(e)}}}function Cs(n){let e,t,r;return{c(){e=ee("svg"),t=ee("path"),r=ee("path"),this.h()},l(l){e=te(l,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var s=p(e);t=te(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),p(t).forEach(u),r=te(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),p(r).forEach(u),s.forEach(u),this.h()},h(){o(t,"stroke-linecap","round"),o(t,"stroke-linejoin","round"),o(t,"stroke-width","2"),o(t,"d","M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"),o(r,"stroke-linecap","round"),o(r,"stroke-linejoin","round"),o(r,"stroke-width","2"),o(r,"d","M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class","h-8 w-8 text-neutral-500"),o(e,"fill","none"),o(e,"viewBox","0 0 24 24"),o(e,"stroke","currentColor")},m(l,s){E(l,e,s),c(e,t),c(e,r)},p:Me,d(l){l&&u(e)}}}function Ts(n){let e,t,r;return{c(){e=g("img"),this.h()},l(l){e=v(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ke(e.src,t=URL.createObjectURL(n[64]))||o(e,"src",t),o(e,"alt",r=n[64].name),o(e,"class","max-w-full max-h-full object-contain rounded")},m(l,s){E(l,e,s)},p(l,s){s[0]&8192&&!Ke(e.src,t=URL.createObjectURL(l[64]))&&o(e,"src",t),s[0]&8192&&r!==(r=l[64].name)&&o(e,"alt",r)},d(l){l&&u(e)}}}function Sl(n){let e,t,r,l,s,a,i="×",d,f,h;function m(_,k){return k[0]&8192&&(t=null),k[0]&8192&&(r=null),k[0]&8192&&(l=null),t==null&&(t=!!_[64].type.startsWith("image/")),t?Ts:(r==null&&(r=!!_[64].type.startsWith("video/")),r?Cs:(l==null&&(l=!!_[64].type.startsWith("audio/")),l?Es:ys))}let b=m(n,[-1,-1,-1]),x=b(n);function L(){return n[52](n[66])}return{c(){e=g("div"),x.c(),s=I(),a=g("button"),a.textContent=i,d=I(),this.h()},l(_){e=v(_,"DIV",{class:!0});var k=p(e);x.l(k),s=P(k),a=v(k,"BUTTON",{class:!0,"data-svelte-h":!0}),fe(a)!=="svelte-5b3ppd"&&(a.textContent=i),d=P(k),k.forEach(u),this.h()},h(){o(a,"class","absolute -top-1.5 -right-1.5 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs shadow-sm hover:bg-red-600 transition-colors"),o(e,"class","relative bg-white dark:dark:bg-neutral-950 rounded-md shadow-sm p-1 w-16 h-16 flex items-center justify-center border border-neutral-200 dark:border-neutral-700")},m(_,k){E(_,e,k),x.m(e,null),c(e,s),c(e,a),c(e,d),f||(h=Ae(a,"click",L),f=!0)},p(_,k){n=_,b===(b=m(n,k))&&x?x.p(n,k):(x.d(1),x=b(n),x&&(x.c(),x.m(e,s)))},d(_){_&&u(e),x.d(),f=!1,h()}}}function Il(n){let e,t,r,l,s;return{c(){e=g("div"),t=ee("svg"),r=ee("path"),l=I(),s=q(n[10]),this.h()},l(a){e=v(a,"DIV",{class:!0});var i=p(e);t=te(i,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var d=p(t);r=te(d,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(r).forEach(u),d.forEach(u),l=P(i),s=G(i,n[10]),i.forEach(u),this.h()},h(){o(r,"fill-rule","evenodd"),o(r,"d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"),o(r,"clip-rule","evenodd"),o(t,"xmlns","http://www.w3.org/2000/svg"),o(t,"class","h-4 w-4 mr-1"),o(t,"viewBox","0 0 20 20"),o(t,"fill","currentColor"),o(e,"class","mt-2 text-red-500 text-sm flex items-center")},m(a,i){E(a,e,i),c(e,t),c(t,r),c(e,l),c(e,s)},p(a,i){i[0]&1024&&_e(s,a[10])},d(a){a&&u(e)}}}function Ss(n){let e,t=`<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-0.5" viewBox="0 0 20 20" fill="currentColor"><path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"></path></svg>
                      Story`,r;return{c(){e=g("span"),e.innerHTML=t,r=q(`\r
                    - Share a personal experience or related story`),this.h()},l(l){e=v(l,"SPAN",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-qag6fz"&&(e.innerHTML=t),r=G(l,`\r
                    - Share a personal experience or related story`),this.h()},h(){o(e,"class","inline-flex items-center px-1.5 py-0.5 rounded-full text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300")},m(l,s){E(l,e,s),E(l,r,s)},d(l){l&&(u(e),u(r))}}}function Is(n){let e,t=`<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-0.5" viewBox="0 0 20 20" fill="currentColor"><path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"></path></svg>
                      Suggestion`,r;return{c(){e=g("span"),e.innerHTML=t,r=q(`\r
                    - Offer an idea about what the mystery object might be`),this.h()},l(l){e=v(l,"SPAN",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-covn0l"&&(e.innerHTML=t),r=G(l,`\r
                    - Offer an idea about what the mystery object might be`),this.h()},h(){o(e,"class","inline-flex items-center px-1.5 py-0.5 rounded-full text-xs bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-300")},m(l,s){E(l,e,s),E(l,r,s)},d(l){l&&(u(e),u(r))}}}function Ps(n){let e,t=`<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-0.5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>
                      Question`,r;return{c(){e=g("span"),e.innerHTML=t,r=q(`\r
                    - Ask for more details or information about the mystery object`),this.h()},l(l){e=v(l,"SPAN",{class:!0,"data-svelte-h":!0}),fe(e)!=="svelte-1g5zh4i"&&(e.innerHTML=t),r=G(l,`\r
                    - Ask for more details or information about the mystery object`),this.h()},h(){o(e,"class","inline-flex items-center px-1.5 py-0.5 rounded-full text-xs bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300")},m(l,s){E(l,e,s),E(l,r,s)},d(l){l&&(u(e),u(r))}}}function $s(n){let e,t,r,l,s,a,i,d,f,h,m,b,x,L,_,k,C,O,$,j,Y,z,F,R,B,H,A,M,ie,se,ae,X,Z,U,w,y,T,D,N,re,Q,W,V,J="Posting as:",ue,ve,Ee,$e,we;function Ne(de){n[45](de)}let me={class:"w-full resize-none p-3 border border-neutral-200 dark:border-neutral-700 rounded-md bg-white dark:dark:bg-neutral-950 focus:ring-2 focus:ring-teal-500/30 focus:border-teal-500 mb-3",placeholder:"Write your comment..."};n[8]!==void 0&&(me.value=n[8]),t=new Yt({props:me}),St.push(()=>Rt(t,"value",Ne)),w=new lt({props:{variant:"outline",size:"sm",class:"text-xs bg-white dark:dark:bg-neutral-950 hover:bg-neutral-100 dark:bg-neutral-950 hover:dark:bg-neutral-900 border-neutral-300 dark:border-neutral-700 rounded-full",$$slots:{default:[_s]},$$scope:{ctx:n}}}),w.$on("click",n[51]),T=new lt({props:{variant:"default",size:"sm",class:"text-xs bg-teal-600 hover:bg-teal-700 text-white px-4 rounded-full",disabled:n[9],$$slots:{default:[xs]},$$scope:{ctx:n}}}),T.$on("click",n[28]);let S=n[13].length>0&&Tl(n),ne=n[10]&&Il(n);function ge(de,be){return de[11]==="QUESTION"?Ps:de[11]==="SUGGESTION"?Is:Ss}let ke=ge(n),Pe=ke(n);return Ee=Fl(n[47][0]),{c(){e=g("div"),Ce(t.$$.fragment),l=I(),s=g("div"),a=g("div"),i=g("div"),d=g("label"),f=g("input"),h=I(),m=ee("svg"),b=ee("path"),x=q(`\r
                      Question`),_=I(),k=g("label"),C=g("input"),O=I(),$=ee("svg"),j=ee("path"),Y=q(`\r
                      Suggestion`),F=I(),R=g("label"),B=g("input"),H=I(),A=ee("svg"),M=ee("path"),ie=q(`\r
                      Story`),ae=I(),X=g("div"),Z=g("input"),U=I(),Ce(w.$$.fragment),y=I(),Ce(T.$$.fragment),D=I(),S&&S.c(),N=I(),ne&&ne.c(),re=I(),Q=g("div"),W=g("div"),V=g("span"),V.textContent=J,ue=I(),Pe.c(),this.h()},l(de){e=v(de,"DIV",{class:!0});var be=p(e);Te(t.$$.fragment,be),l=P(be),s=v(be,"DIV",{class:!0});var He=p(s);a=v(He,"DIV",{class:!0});var Re=p(a);i=v(Re,"DIV",{class:!0});var je=p(i);d=v(je,"LABEL",{class:!0});var nt=p(d);f=v(nt,"INPUT",{type:!0,id:!0,class:!0}),h=P(nt),m=te(nt,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var K=p(m);b=te(K,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(b).forEach(u),K.forEach(u),x=G(nt,`\r
                      Question`),nt.forEach(u),_=P(je),k=v(je,"LABEL",{class:!0});var he=p(k);C=v(he,"INPUT",{type:!0,id:!0,class:!0}),O=P(he),$=te(he,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var pe=p($);j=te(pe,"path",{d:!0}),p(j).forEach(u),pe.forEach(u),Y=G(he,`\r
                      Suggestion`),he.forEach(u),F=P(je),R=v(je,"LABEL",{class:!0});var Oe=p(R);B=v(Oe,"INPUT",{type:!0,id:!0,class:!0}),H=P(Oe),A=te(Oe,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var Le=p(A);M=te(Le,"path",{d:!0}),p(M).forEach(u),Le.forEach(u),ie=G(Oe,`\r
                      Story`),Oe.forEach(u),je.forEach(u),ae=P(Re),X=v(Re,"DIV",{class:!0});var ye=p(X);Z=v(ye,"INPUT",{type:!0,id:!0,accept:!0,class:!0}),U=P(ye),Te(w.$$.fragment,ye),ye.forEach(u),y=P(Re),Te(T.$$.fragment,Re),Re.forEach(u),He.forEach(u),D=P(be),S&&S.l(be),N=P(be),ne&&ne.l(be),re=P(be),Q=v(be,"DIV",{class:!0});var De=p(Q);W=v(De,"DIV",{class:!0});var Ve=p(W);V=v(Ve,"SPAN",{class:!0,"data-svelte-h":!0}),fe(V)!=="svelte-yo3g6e"&&(V.textContent=J),ue=P(Ve),Pe.l(Ve),Ve.forEach(u),De.forEach(u),be.forEach(u),this.h()},h(){o(f,"type","radio"),o(f,"id","question"),f.__value="QUESTION",it(f,f.__value),o(f,"class","sr-only"),o(b,"fill-rule","evenodd"),o(b,"d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z"),o(b,"clip-rule","evenodd"),o(m,"xmlns","http://www.w3.org/2000/svg"),o(m,"class","h-3.5 w-3.5 mr-1"),o(m,"viewBox","0 0 20 20"),o(m,"fill","currentColor"),o(d,"class",L="inline-flex items-center px-2.5 py-1 rounded-full cursor-pointer transition-all text-xs "+(n[11]==="QUESTION"?"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 shadow-sm":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-neutral-900")),o(C,"type","radio"),o(C,"id","suggestion"),C.__value="SUGGESTION",it(C,C.__value),o(C,"class","sr-only"),o(j,"d","M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"),o($,"xmlns","http://www.w3.org/2000/svg"),o($,"class","h-3.5 w-3.5 mr-1"),o($,"viewBox","0 0 20 20"),o($,"fill","currentColor"),o(k,"class",z="inline-flex items-center px-2.5 py-1 rounded-full cursor-pointer transition-all text-xs "+(n[11]==="SUGGESTION"?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-300 shadow-sm":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-neutral-900")),o(B,"type","radio"),o(B,"id","story"),B.__value="STORY",it(B,B.__value),o(B,"class","sr-only"),o(M,"d","M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"),o(A,"xmlns","http://www.w3.org/2000/svg"),o(A,"class","h-3.5 w-3.5 mr-1"),o(A,"viewBox","0 0 20 20"),o(A,"fill","currentColor"),o(R,"class",se="inline-flex items-center px-2.5 py-1 rounded-full cursor-pointer transition-all text-xs "+(n[11]==="STORY"?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 shadow-sm":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-neutral-900")),o(i,"class","flex items-center bg-neutral-100 dark:bg-neutral-950 rounded-full p-1 border border-neutral-200 dark:border-neutral-700"),o(Z,"type","file"),o(Z,"id","media-upload"),o(Z,"accept","image/*,video/*,audio/*"),o(Z,"class","hidden"),Z.multiple=!0,o(X,"class","flex items-center"),o(a,"class","flex flex-wrap items-center gap-3"),o(s,"class","w-full flex flex-wrap items-start gap-3"),o(V,"class","font-medium"),o(W,"class","flex items-center gap-1"),o(Q,"class","mt-3 text-xs text-neutral-500 dark:text-neutral-400 border-t border-neutral-100 dark:border-neutral-800 pt-2"),o(e,"class","w-full p-4"),Ee.p(f,C,B)},m(de,be){E(de,e,be),Se(t,e,null),c(e,l),c(e,s),c(s,a),c(a,i),c(i,d),c(d,f),f.checked=f.__value===n[11],c(d,h),c(d,m),c(m,b),c(d,x),c(i,_),c(i,k),c(k,C),C.checked=C.__value===n[11],c(k,O),c(k,$),c($,j),c(k,Y),c(i,F),c(i,R),c(R,B),B.checked=B.__value===n[11],c(R,H),c(R,A),c(A,M),c(R,ie),c(a,ae),c(a,X),c(X,Z),n[50](Z),c(X,U),Se(w,X,null),c(a,y),Se(T,a,null),c(e,D),S&&S.m(e,null),c(e,N),ne&&ne.m(e,null),c(e,re),c(e,Q),c(Q,W),c(W,V),c(W,ue),Pe.m(W,null),ve=!0,$e||(we=[Ae(f,"change",n[46]),Ae(C,"change",n[48]),Ae(B,"change",n[49]),Ae(Z,"change",n[27])],$e=!0)},p(de,be){const He={};!r&&be[0]&256&&(r=!0,He.value=de[8],Vt(()=>r=!1)),t.$set(He),be[0]&2048&&(f.checked=f.__value===de[11]),(!ve||be[0]&2048&&L!==(L="inline-flex items-center px-2.5 py-1 rounded-full cursor-pointer transition-all text-xs "+(de[11]==="QUESTION"?"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 shadow-sm":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-neutral-900")))&&o(d,"class",L),be[0]&2048&&(C.checked=C.__value===de[11]),(!ve||be[0]&2048&&z!==(z="inline-flex items-center px-2.5 py-1 rounded-full cursor-pointer transition-all text-xs "+(de[11]==="SUGGESTION"?"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-300 shadow-sm":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-neutral-900")))&&o(k,"class",z),be[0]&2048&&(B.checked=B.__value===de[11]),(!ve||be[0]&2048&&se!==(se="inline-flex items-center px-2.5 py-1 rounded-full cursor-pointer transition-all text-xs "+(de[11]==="STORY"?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 shadow-sm":"text-neutral-700 dark:text-neutral-300 hover:bg-neutral-200 dark:hover:bg-neutral-900")))&&o(R,"class",se);const Re={};be[0]&8192|be[2]&1024&&(Re.$$scope={dirty:be,ctx:de}),w.$set(Re);const je={};be[0]&512&&(je.disabled=de[9]),be[0]&10752|be[2]&1024&&(je.$$scope={dirty:be,ctx:de}),T.$set(je),de[13].length>0?S?S.p(de,be):(S=Tl(de),S.c(),S.m(e,N)):S&&(S.d(1),S=null),de[10]?ne?ne.p(de,be):(ne=Il(de),ne.c(),ne.m(e,re)):ne&&(ne.d(1),ne=null),ke!==(ke=ge(de))&&(Pe.d(1),Pe=ke(de),Pe&&(Pe.c(),Pe.m(W,null)))},i(de){ve||(le(t.$$.fragment,de),le(w.$$.fragment,de),le(T.$$.fragment,de),ve=!0)},o(de){ce(t.$$.fragment,de),ce(w.$$.fragment,de),ce(T.$$.fragment,de),ve=!1},d(de){de&&u(e),Ie(t),n[50](null),Ie(w),Ie(T),S&&S.d(),ne&&ne.d(),Pe.d(),Ee.r(),$e=!1,Ot(we)}}}function Ls(n){let e,t;return e=new Bt({props:{class:"bg-white dark:bg-neutral-950 shadow-md rounded-md border border-neutral-200 dark:border-neutral-800 overflow-hidden",$$slots:{default:[Ns]},$$scope:{ctx:n}}}),{c(){Ce(e.$$.fragment)},l(r){Te(e.$$.fragment,r)},m(r,l){Se(e,r,l),t=!0},p(r,l){const s={};l[2]&1024&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){t||(le(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ie(e,r)}}}function As(n){let e,t=[],r=new Map,l,s=Qe(n[21]);const a=i=>i[61].id;for(let i=0;i<s.length;i+=1){let d=ml(n,s,i),f=a(d);r.set(f,t[i]=Pl(f,d))}return{c(){e=g("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=v(i,"DIV",{class:!0});var d=p(e);for(let f=0;f<t.length;f+=1)t[f].l(d);d.forEach(u),this.h()},h(){o(e,"class","space-y-2")},m(i,d){E(i,e,d);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);l=!0},p(i,d){d[0]&2097155&&(s=Qe(i[21]),We(),t=Wt(t,d,a,1,i,s,r,e,Al,Pl,null,ml),Ye())},i(i){if(!l){for(let d=0;d<s.length;d+=1)le(t[d]);l=!0}},o(i){for(let d=0;d<t.length;d+=1)ce(t[d]);l=!1},d(i){i&&u(e);for(let d=0;d<t.length;d+=1)t[d].d()}}}function Ms(n){let e;return{c(){e=q("There are no comments yet")},l(t){e=G(t,"There are no comments yet")},m(t,r){E(t,e,r)},d(t){t&&u(e)}}}function Ds(n){let e;return{c(){e=q("Be the first to contribute to this discussion and share your thoughts!")},l(t){e=G(t,"Be the first to contribute to this discussion and share your thoughts!")},m(t,r){E(t,e,r)},d(t){t&&u(e)}}}function Ns(n){let e,t,r,l,s,a,i,d;return s=new wr({props:{class:"text-xl mb-2",$$slots:{default:[Ms]},$$scope:{ctx:n}}}),i=new Dl({props:{class:"max-w-md mx-auto text-base",$$slots:{default:[Ds]},$$scope:{ctx:n}}}),{c(){e=g("div"),t=ee("svg"),r=ee("path"),l=I(),Ce(s.$$.fragment),a=I(),Ce(i.$$.fragment),this.h()},l(f){e=v(f,"DIV",{class:!0});var h=p(e);t=te(h,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var m=p(t);r=te(m,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),p(r).forEach(u),m.forEach(u),l=P(h),Te(s.$$.fragment,h),a=P(h),Te(i.$$.fragment,h),h.forEach(u),this.h()},h(){o(r,"stroke-linecap","round"),o(r,"stroke-linejoin","round"),o(r,"stroke-width","1.5"),o(r,"d","M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"),o(t,"xmlns","http://www.w3.org/2000/svg"),o(t,"class","h-12 w-12 text-neutral-300 mx-auto mb-3"),o(t,"fill","none"),o(t,"viewBox","0 0 24 24"),o(t,"stroke","currentColor"),o(e,"class","py-10 text-center px-4")},m(f,h){E(f,e,h),c(e,t),c(t,r),c(e,l),Se(s,e,null),c(e,a),Se(i,e,null),d=!0},p(f,h){const m={};h[2]&1024&&(m.$$scope={dirty:h,ctx:f}),s.$set(m);const b={};h[2]&1024&&(b.$$scope={dirty:h,ctx:f}),i.$set(b)},i(f){d||(le(s.$$.fragment,f),le(i.$$.fragment,f),d=!0)},o(f){ce(s.$$.fragment,f),ce(i.$$.fragment,f),d=!1},d(f){f&&u(e),Ie(s),Ie(i)}}}function Pl(n,e){var a,i,d,f;let t,r,l,s;return r=new Rl({props:{threadId:e[0].id,commentId:e[61].id,comment:e[61].content,commentator:e[61].author,postedDateComment:e[61].createdAt,contributingToResolution:((d=(i=(a=e[1])==null?void 0:a.resolution)==null?void 0:i.contributingComments)==null?void 0:d.includes(e[61].id))||!1,threadOwner:(f=e[1])==null?void 0:f.author,replies:e[61].replies||[],upvotes:e[61].upvotes,downvotes:e[61].downvotes,userUpvoted:e[61].userUpvoted,userDownvoted:e[61].userDownvoted,mediaFiles:e[61].mediaFiles||[],commentType:e[61].commentType}}),{key:n,first:null,c(){t=g("div"),Ce(r.$$.fragment),l=I(),this.h()},l(h){t=v(h,"DIV",{});var m=p(t);Te(r.$$.fragment,m),l=P(m),m.forEach(u),this.h()},h(){this.first=t},m(h,m){E(h,t,m),Se(r,t,null),c(t,l),s=!0},p(h,m){var x,L,_,k;e=h;const b={};m[0]&1&&(b.threadId=e[0].id),m[0]&2097152&&(b.commentId=e[61].id),m[0]&2097152&&(b.comment=e[61].content),m[0]&2097152&&(b.commentator=e[61].author),m[0]&2097152&&(b.postedDateComment=e[61].createdAt),m[0]&2097154&&(b.contributingToResolution=((_=(L=(x=e[1])==null?void 0:x.resolution)==null?void 0:L.contributingComments)==null?void 0:_.includes(e[61].id))||!1),m[0]&2&&(b.threadOwner=(k=e[1])==null?void 0:k.author),m[0]&2097152&&(b.replies=e[61].replies||[]),m[0]&2097152&&(b.upvotes=e[61].upvotes),m[0]&2097152&&(b.downvotes=e[61].downvotes),m[0]&2097152&&(b.userUpvoted=e[61].userUpvoted),m[0]&2097152&&(b.userDownvoted=e[61].userDownvoted),m[0]&2097152&&(b.mediaFiles=e[61].mediaFiles||[]),m[0]&2097152&&(b.commentType=e[61].commentType),r.$set(b)},i(h){s||(le(r.$$.fragment,h),s=!0)},o(h){ce(r.$$.fragment,h),s=!1},d(h){h&&u(t),Ie(r)}}}function $l(n){let e,t;return e=new Bt({props:{class:"bg-white dark:bg-neutral-950 shadow-md rounded-md border border-neutral-200 dark:border-neutral-800 overflow-hidden",$$slots:{default:[Bs]},$$scope:{ctx:n}}}),{c(){Ce(e.$$.fragment)},l(r){Te(e.$$.fragment,r)},m(r,l){Se(e,r,l),t=!0},p(r,l){const s={};l[0]&32|l[2]&1024&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){t||(le(e.$$.fragment,r),t=!0)},o(r){ce(e.$$.fragment,r),t=!1},d(r){Ie(e,r)}}}function Vs(n){let e;return{c(){e=q("No matching comments found")},l(t){e=G(t,"No matching comments found")},m(t,r){E(t,e,r)},d(t){t&&u(e)}}}function Rs(n){let e,t=n[5].toLowerCase()+"",r,l;return{c(){e=q("No "),r=q(t),l=q(" comments were found. Try changing your filter or checking back later.")},l(s){e=G(s,"No "),r=G(s,t),l=G(s," comments were found. Try changing your filter or checking back later.")},m(s,a){E(s,e,a),E(s,r,a),E(s,l,a)},p(s,a){a[0]&32&&t!==(t=s[5].toLowerCase()+"")&&_e(r,t)},d(s){s&&(u(e),u(r),u(l))}}}function Os(n){let e;return{c(){e=q("Show all comments")},l(t){e=G(t,"Show all comments")},m(t,r){E(t,e,r)},d(t){t&&u(e)}}}function Bs(n){let e,t,r,l,s,a,i,d,f,h;return s=new wr({props:{class:"text-xl mb-2 text-left",$$slots:{default:[Vs]},$$scope:{ctx:n}}}),i=new Dl({props:{class:"max-w-md mx-auto text-base text-left",$$slots:{default:[Rs]},$$scope:{ctx:n}}}),f=new lt({props:{variant:"outline",class:"mt-4",$$slots:{default:[Os]},$$scope:{ctx:n}}}),f.$on("click",n[53]),{c(){e=g("div"),t=ee("svg"),r=ee("path"),l=I(),Ce(s.$$.fragment),a=I(),Ce(i.$$.fragment),d=I(),Ce(f.$$.fragment),this.h()},l(m){e=v(m,"DIV",{class:!0});var b=p(e);t=te(b,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0});var x=p(t);r=te(x,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),p(r).forEach(u),x.forEach(u),l=P(b),Te(s.$$.fragment,b),a=P(b),Te(i.$$.fragment,b),d=P(b),Te(f.$$.fragment,b),b.forEach(u),this.h()},h(){o(r,"stroke-linecap","round"),o(r,"stroke-linejoin","round"),o(r,"stroke-width","1.5"),o(r,"d","M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"),o(t,"xmlns","http://www.w3.org/2000/svg"),o(t,"class","h-12 w-12 text-neutral-300 mx-auto mb-3"),o(t,"fill","none"),o(t,"viewBox","0 0 24 24"),o(t,"stroke","currentColor"),o(e,"class","py-8 text-center px-4")},m(m,b){E(m,e,b),c(e,t),c(t,r),c(e,l),Se(s,e,null),c(e,a),Se(i,e,null),c(e,d),Se(f,e,null),h=!0},p(m,b){const x={};b[2]&1024&&(x.$$scope={dirty:b,ctx:m}),s.$set(x);const L={};b[0]&32|b[2]&1024&&(L.$$scope={dirty:b,ctx:m}),i.$set(L);const _={};b[2]&1024&&(_.$$scope={dirty:b,ctx:m}),f.$set(_)},i(m){h||(le(s.$$.fragment,m),le(i.$$.fragment,m),le(f.$$.fragment,m),h=!0)},o(m){ce(s.$$.fragment,m),ce(i.$$.fragment,m),ce(f.$$.fragment,m),h=!1},d(m){m&&u(e),Ie(s),Ie(i),Ie(f)}}}function zs(n){let e,t,r,l,s,a,i,d,f,h,m,b,x=`<svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-2 text-neutral-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
              Discussions`,L,_,k,C="Filter by:",O,$,j,Y="All",z,F,R,B,H,A,M,ie,se,ae,X="Questions",Z,U,w=(n[6].QUESTION||0)+"",y,T,D,N,re,Q,W,V,J="Suggestions",ue,ve,Ee=(n[6].SUGGESTION||0)+"",$e,we,Ne,me,S,ne,ge,ke,Pe="Stories",de,be,He=(n[6].STORY||0)+"",Re,je,nt,K,he,pe="Sort by:",Oe,Le,ye,De,Ve,ut,kt,Xe,ct,xt,Jt,zt,Kt,dt,ft,Dt,Xt,Ut,Zt,ht,mt,Nt,er,jt,tr,It,yt,pt,rr,lr,Et,nr,Ct,Ze,et,sr,tt,rt,Ht,Fe,ar,xr,Be=n[15]&&bl(n),ze=n[1]&&Cl(n);const yr=[fs,ds],gt=[];function Er(oe,xe){return oe[1]&&!oe[12]?0:oe[12]?1:-1}~(s=Er(n))&&(a=gt[s]=yr[s](n));function Cr(oe,xe){if(oe[5]==="ALL")return ms;if(oe[5]!=="ALL"&&oe[21].length!==oe[2].length)return hs}let Pt=Cr(n),qe=Pt&&Pt(n);const Tr=[gs,ps],vt=[];function Sr(oe,xe){return oe[7]?0:1}Ze=Sr(n),et=vt[Ze]=Tr[Ze](n);const Ir=[As,Ls],bt=[];function Pr(oe,xe){return oe[2].length>0?0:1}tt=Pr(n),rt=bt[tt]=Ir[tt](n);let Ue=n[2].length>0&&n[21].length===0&&$l(n);return{c(){Be&&Be.c(),e=I(),t=g("div"),r=g("div"),ze&&ze.c(),l=I(),a&&a.c(),i=I(),d=g("div"),f=g("div"),h=g("div"),m=g("div"),b=g("h3"),b.innerHTML=x,L=I(),_=g("div"),k=g("span"),k.textContent=C,O=I(),$=g("button"),j=g("span"),j.textContent=Y,z=I(),F=g("span"),R=q(n[20]),H=I(),A=g("button"),M=ee("svg"),ie=ee("path"),se=I(),ae=g("span"),ae.textContent=X,Z=I(),U=g("span"),y=q(w),D=I(),N=g("button"),re=ee("svg"),Q=ee("path"),W=I(),V=g("span"),V.textContent=J,ue=I(),ve=g("span"),$e=q(Ee),Ne=I(),me=g("button"),S=ee("svg"),ne=ee("path"),ge=I(),ke=g("span"),ke.textContent=Pe,de=I(),be=g("span"),Re=q(He),nt=I(),K=g("div"),he=g("span"),he.textContent=pe,Oe=I(),Le=g("button"),ye=ee("svg"),De=ee("path"),Ve=q(`\r
                Newest`),kt=I(),Xe=g("button"),ct=ee("svg"),xt=ee("path"),Jt=q(`\r
                Oldest`),Kt=I(),dt=g("button"),ft=ee("svg"),Dt=ee("path"),Xt=q(`\r
                Most votes`),Zt=I(),ht=g("button"),mt=ee("svg"),Nt=ee("path"),er=q(`\r
                By type`),tr=I(),It=g("div"),yt=g("label"),pt=g("input"),rr=q(`\r
                Also sort replies`),lr=I(),Et=g("div"),qe&&qe.c(),nr=I(),Ct=g("div"),et.c(),sr=I(),rt.c(),Ht=I(),Ue&&Ue.c(),this.h()},l(oe){Be&&Be.l(oe),e=P(oe),t=v(oe,"DIV",{class:!0});var xe=p(t);r=v(xe,"DIV",{class:!0});var Je=p(r);ze&&ze.l(Je),l=P(Je),a&&a.l(Je),i=P(Je),d=v(Je,"DIV",{class:!0});var _t=p(d);f=v(_t,"DIV",{class:!0});var $t=p(f);h=v($t,"DIV",{class:!0});var $r=p(h);m=v($r,"DIV",{class:!0});var st=p(m);b=v(st,"H3",{class:!0,"data-svelte-h":!0}),fe(b)!=="svelte-s1txvn"&&(b.innerHTML=x),L=P(st),_=v(st,"DIV",{class:!0});var at=p(_);k=v(at,"SPAN",{class:!0,"data-svelte-h":!0}),fe(k)!=="svelte-vialpd"&&(k.textContent=C),O=P(at),$=v(at,"BUTTON",{class:!0});var Ft=p($);j=v(Ft,"SPAN",{class:!0,"data-svelte-h":!0}),fe(j)!=="svelte-qvlo3f"&&(j.textContent=Y),z=P(Ft),F=v(Ft,"SPAN",{class:!0});var Lr=p(F);R=G(Lr,n[20]),Lr.forEach(u),Ft.forEach(u),H=P(at),A=v(at,"BUTTON",{class:!0});var Lt=p(A);M=te(Lt,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var Ar=p(M);ie=te(Ar,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(ie).forEach(u),Ar.forEach(u),se=P(Lt),ae=v(Lt,"SPAN",{"data-svelte-h":!0}),fe(ae)!=="svelte-eps7kp"&&(ae.textContent=X),Z=P(Lt),U=v(Lt,"SPAN",{class:!0});var Mr=p(U);y=G(Mr,w),Mr.forEach(u),Lt.forEach(u),D=P(at),N=v(at,"BUTTON",{class:!0});var At=p(N);re=te(At,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var Dr=p(re);Q=te(Dr,"path",{d:!0}),p(Q).forEach(u),Dr.forEach(u),W=P(At),V=v(At,"SPAN",{"data-svelte-h":!0}),fe(V)!=="svelte-1pdx0pd"&&(V.textContent=J),ue=P(At),ve=v(At,"SPAN",{class:!0});var Nr=p(ve);$e=G(Nr,Ee),Nr.forEach(u),At.forEach(u),Ne=P(at),me=v(at,"BUTTON",{class:!0});var Mt=p(me);S=te(Mt,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var Vr=p(S);ne=te(Vr,"path",{d:!0}),p(ne).forEach(u),Vr.forEach(u),ge=P(Mt),ke=v(Mt,"SPAN",{"data-svelte-h":!0}),fe(ke)!=="svelte-ljsnm1"&&(ke.textContent=Pe),de=P(Mt),be=v(Mt,"SPAN",{class:!0});var Rr=p(be);Re=G(Rr,He),Rr.forEach(u),Mt.forEach(u),at.forEach(u),nt=P(st),K=v(st,"DIV",{class:!0});var ot=p(K);he=v(ot,"SPAN",{class:!0,"data-svelte-h":!0}),fe(he)!=="svelte-9xln4b"&&(he.textContent=pe),Oe=P(ot),Le=v(ot,"BUTTON",{class:!0});var or=p(Le);ye=te(or,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var Or=p(ye);De=te(Or,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(De).forEach(u),Or.forEach(u),Ve=G(or,`\r
                Newest`),or.forEach(u),kt=P(ot),Xe=v(ot,"BUTTON",{class:!0});var ir=p(Xe);ct=te(ir,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var Br=p(ct);xt=te(Br,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),p(xt).forEach(u),Br.forEach(u),Jt=G(ir,`\r
                Oldest`),ir.forEach(u),Kt=P(ot),dt=v(ot,"BUTTON",{class:!0});var ur=p(dt);ft=te(ur,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var zr=p(ft);Dt=te(zr,"path",{d:!0}),p(Dt).forEach(u),zr.forEach(u),Xt=G(ur,`\r
                Most votes`),ur.forEach(u),Zt=P(ot),ht=v(ot,"BUTTON",{class:!0});var cr=p(ht);mt=te(cr,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var Ur=p(mt);Nt=te(Ur,"path",{d:!0}),p(Nt).forEach(u),Ur.forEach(u),er=G(cr,`\r
                By type`),cr.forEach(u),ot.forEach(u),tr=P(st),It=v(st,"DIV",{class:!0});var jr=p(It);yt=v(jr,"LABEL",{class:!0});var dr=p(yt);pt=v(dr,"INPUT",{type:!0,class:!0}),rr=G(dr,`\r
                Also sort replies`),dr.forEach(u),jr.forEach(u),lr=P(st),Et=v(st,"DIV",{class:!0});var Hr=p(Et);qe&&qe.l(Hr),Hr.forEach(u),st.forEach(u),$r.forEach(u),$t.forEach(u),nr=P(_t),Ct=v(_t,"DIV",{class:!0});var Fr=p(Ct);et.l(Fr),Fr.forEach(u),_t.forEach(u),sr=P(Je),rt.l(Je),Ht=P(Je),Ue&&Ue.l(Je),Je.forEach(u),xe.forEach(u),this.h()},h(){o(b,"class","text-md font-medium text-neutral-900 dark:text-white mb-2 -mt-1 flex items-center"),o(k,"class","text-sm font-medium text-neutral-600 dark:text-neutral-400"),o(j,"class","flex items-center"),o(F,"class","ml-1.5 px-1.5 py-0.5 text-xs rounded-full bg-white/20 dark:bg-black/20 flex items-center"),o($,"class",B="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border transition-colors "+(n[5]==="ALL"?"bg-neutral-900 dark:bg-neutral-200 text-white dark:text-neutral-900 border-neutral-700 dark:border-neutral-300":"bg-neutral-100 dark:bg-neutral-900 text-neutral-700 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700 hover:bg-neutral-200 dark:hover:bg-neutral-900")),o(ie,"fill-rule","evenodd"),o(ie,"d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z"),o(ie,"clip-rule","evenodd"),o(M,"xmlns","http://www.w3.org/2000/svg"),o(M,"class","h-3.5 w-3.5 mr-1"),o(M,"viewBox","0 0 20 20"),o(M,"fill","currentColor"),o(U,"class","ml-1 px-1.5 py-0.5 text-xs rounded-full bg-white/20"),o(A,"class",T="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors "+(n[5]==="QUESTION"?"bg-amber-600 text-white border-amber-700":"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 border border-amber-200 dark:border-amber-800/50 hover:bg-amber-200 dark:hover:bg-amber-900/50")),o(Q,"d","M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"),o(re,"xmlns","http://www.w3.org/2000/svg"),o(re,"class","h-3.5 w-3.5 mr-1"),o(re,"viewBox","0 0 20 20"),o(re,"fill","currentColor"),o(ve,"class","ml-1 px-1.5 py-0.5 text-xs rounded-full bg-white/20"),o(N,"class",we="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors "+(n[5]==="SUGGESTION"?"bg-emerald-600 text-white border-emerald-700":"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-300 border border-emerald-200 dark:border-emerald-800/50 hover:bg-emerald-200 dark:hover:bg-emerald-900/50")),o(ne,"d","M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"),o(S,"xmlns","http://www.w3.org/2000/svg"),o(S,"class","h-3.5 w-3.5 mr-1"),o(S,"viewBox","0 0 20 20"),o(S,"fill","currentColor"),o(be,"class","ml-1 px-1.5 py-0.5 text-xs rounded-full bg-white/20"),o(me,"class",je="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors "+(n[5]==="STORY"?"bg-blue-600 text-white border-blue-700":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 border border-blue-200 dark:border-blue-800/50 hover:bg-blue-200 dark:hover:bg-blue-900/50")),o(_,"class","flex flex-wrap items-center gap-2 mb-4"),o(he,"class","text-sm font-medium text-neutral-600 dark:text-neutral-400"),o(De,"fill-rule","evenodd"),o(De,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"),o(De,"clip-rule","evenodd"),o(ye,"xmlns","http://www.w3.org/2000/svg"),o(ye,"class","h-3.5 w-3.5 mr-1"),o(ye,"viewBox","0 0 20 20"),o(ye,"fill","currentColor"),o(Le,"class",ut="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border transition-colors "+(n[3]==="newest"?"bg-neutral-900 dark:bg-neutral-200 text-white dark:text-neutral-900 border-neutral-700 dark:border-neutral-300":"bg-neutral-100 dark:bg-neutral-900 text-neutral-700 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700 hover:bg-neutral-200 dark:hover:bg-neutral-900")),o(xt,"fill-rule","evenodd"),o(xt,"d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-14a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 7.586V4z"),o(xt,"clip-rule","evenodd"),o(ct,"xmlns","http://www.w3.org/2000/svg"),o(ct,"class","h-3.5 w-3.5 mr-1"),o(ct,"viewBox","0 0 20 20"),o(ct,"fill","currentColor"),o(Xe,"class",zt="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border transition-colors "+(n[3]==="oldest"?"bg-neutral-900 dark:bg-neutral-200 text-white dark:text-neutral-900 border-neutral-700 dark:border-neutral-300":"bg-neutral-100 dark:bg-neutral-900 text-neutral-700 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700 hover:bg-neutral-200 dark:hover:bg-neutral-900")),o(Dt,"d","M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"),o(ft,"xmlns","http://www.w3.org/2000/svg"),o(ft,"class","h-3.5 w-3.5 mr-1"),o(ft,"viewBox","0 0 20 20"),o(ft,"fill","currentColor"),o(dt,"class",Ut="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border transition-colors "+(n[3]==="votes"?"bg-neutral-900 dark:bg-neutral-200 text-white dark:text-neutral-900 border-neutral-700 dark:border-neutral-300":"bg-neutral-100 dark:bg-neutral-900 text-neutral-700 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700 hover:bg-neutral-200 dark:hover:bg-neutral-900")),o(Nt,"d","M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"),o(mt,"xmlns","http://www.w3.org/2000/svg"),o(mt,"class","h-3.5 w-3.5 mr-1"),o(mt,"viewBox","0 0 20 20"),o(mt,"fill","currentColor"),o(ht,"class",jt="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border transition-colors "+(n[3]==="type"?"bg-neutral-900 dark:bg-neutral-200 text-white dark:text-neutral-900 border-neutral-700 dark:border-neutral-300":"bg-neutral-100 dark:bg-neutral-900 text-neutral-700 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700 hover:bg-neutral-200 dark:hover:bg-neutral-900")),o(K,"class","flex flex-wrap items-center gap-2 mb-2.5"),o(pt,"type","checkbox"),o(pt,"class","h-3 w-3 text-teal-600 focus:ring-teal-500 mr-1.5 rounded-full"),o(yt,"class","inline-flex items-center text-sm text-neutral-500 dark:text-neutral-400"),o(It,"class","flex items-center mb-2"),o(Et,"class","pt-2 text-neutral-500 dark:text-neutral-400 border-t border-neutral-100 dark:border-neutral-800 text-xs"),o(m,"class","w-full bg-white dark:bg-neutral-950 shadow-md rounded-md border border-neutral-200 dark:border-neutral-800 h-full p-4 pb-3"),o(h,"class","flex flex-col h-full"),o(f,"class","lg:col-span-5"),o(Ct,"class","lg:col-span-7"),o(d,"class","grid grid-cols-1 lg:grid-cols-12 gap-3 mt-3 mb-3"),o(r,"class","w-full max-w-7xl mx-auto"),o(t,"class","flex flex-col items-center bg-change dark:bg-dark shifting p-3 py-5")},m(oe,xe){Be&&Be.m(oe,xe),E(oe,e,xe),E(oe,t,xe),c(t,r),ze&&ze.m(r,null),c(r,l),~s&&gt[s].m(r,null),c(r,i),c(r,d),c(d,f),c(f,h),c(h,m),c(m,b),c(m,L),c(m,_),c(_,k),c(_,O),c(_,$),c($,j),c($,z),c($,F),c(F,R),c(_,H),c(_,A),c(A,M),c(M,ie),c(A,se),c(A,ae),c(A,Z),c(A,U),c(U,y),c(_,D),c(_,N),c(N,re),c(re,Q),c(N,W),c(N,V),c(N,ue),c(N,ve),c(ve,$e),c(_,Ne),c(_,me),c(me,S),c(S,ne),c(me,ge),c(me,ke),c(me,de),c(me,be),c(be,Re),c(m,nt),c(m,K),c(K,he),c(K,Oe),c(K,Le),c(Le,ye),c(ye,De),c(Le,Ve),c(K,kt),c(K,Xe),c(Xe,ct),c(ct,xt),c(Xe,Jt),c(K,Kt),c(K,dt),c(dt,ft),c(ft,Dt),c(dt,Xt),c(K,Zt),c(K,ht),c(ht,mt),c(mt,Nt),c(ht,er),c(m,tr),c(m,It),c(It,yt),c(yt,pt),pt.checked=n[4],c(yt,rr),c(m,lr),c(m,Et),qe&&qe.m(Et,null),c(d,nr),c(d,Ct),vt[Ze].m(Ct,null),c(r,sr),bt[tt].m(r,null),c(r,Ht),Ue&&Ue.m(r,null),Fe=!0,ar||(xr=[Ae($,"click",n[35]),Ae(A,"click",n[36]),Ae(N,"click",n[37]),Ae(me,"click",n[38]),Ae(Le,"click",n[39]),Ae(Xe,"click",n[40]),Ae(dt,"click",n[41]),Ae(ht,"click",n[42]),Ae(pt,"change",n[43])],ar=!0)},p(oe,xe){oe[15]?Be?(Be.p(oe,xe),xe[0]&32768&&le(Be,1)):(Be=bl(oe),Be.c(),le(Be,1),Be.m(e.parentNode,e)):Be&&(We(),ce(Be,1,1,()=>{Be=null}),Ye()),oe[1]?ze?(ze.p(oe,xe),xe[0]&2&&le(ze,1)):(ze=Cl(oe),ze.c(),le(ze,1),ze.m(r,l)):ze&&(We(),ce(ze,1,1,()=>{ze=null}),Ye());let Je=s;s=Er(oe),s===Je?~s&&gt[s].p(oe,xe):(a&&(We(),ce(gt[Je],1,1,()=>{gt[Je]=null}),Ye()),~s?(a=gt[s],a?a.p(oe,xe):(a=gt[s]=yr[s](oe),a.c()),le(a,1),a.m(r,i)):a=null),(!Fe||xe[0]&1048576)&&_e(R,oe[20]),(!Fe||xe[0]&32&&B!==(B="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border transition-colors "+(oe[5]==="ALL"?"bg-neutral-900 dark:bg-neutral-200 text-white dark:text-neutral-900 border-neutral-700 dark:border-neutral-300":"bg-neutral-100 dark:bg-neutral-900 text-neutral-700 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700 hover:bg-neutral-200 dark:hover:bg-neutral-900")))&&o($,"class",B),(!Fe||xe[0]&64)&&w!==(w=(oe[6].QUESTION||0)+"")&&_e(y,w),(!Fe||xe[0]&32&&T!==(T="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors "+(oe[5]==="QUESTION"?"bg-amber-600 text-white border-amber-700":"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 border border-amber-200 dark:border-amber-800/50 hover:bg-amber-200 dark:hover:bg-amber-900/50")))&&o(A,"class",T),(!Fe||xe[0]&64)&&Ee!==(Ee=(oe[6].SUGGESTION||0)+"")&&_e($e,Ee),(!Fe||xe[0]&32&&we!==(we="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors "+(oe[5]==="SUGGESTION"?"bg-emerald-600 text-white border-emerald-700":"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-800 dark:text-emerald-300 border border-emerald-200 dark:border-emerald-800/50 hover:bg-emerald-200 dark:hover:bg-emerald-900/50")))&&o(N,"class",we),(!Fe||xe[0]&64)&&He!==(He=(oe[6].STORY||0)+"")&&_e(Re,He),(!Fe||xe[0]&32&&je!==(je="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium transition-colors "+(oe[5]==="STORY"?"bg-blue-600 text-white border-blue-700":"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 border border-blue-200 dark:border-blue-800/50 hover:bg-blue-200 dark:hover:bg-blue-900/50")))&&o(me,"class",je),(!Fe||xe[0]&8&&ut!==(ut="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border transition-colors "+(oe[3]==="newest"?"bg-neutral-900 dark:bg-neutral-200 text-white dark:text-neutral-900 border-neutral-700 dark:border-neutral-300":"bg-neutral-100 dark:bg-neutral-900 text-neutral-700 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700 hover:bg-neutral-200 dark:hover:bg-neutral-900")))&&o(Le,"class",ut),(!Fe||xe[0]&8&&zt!==(zt="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border transition-colors "+(oe[3]==="oldest"?"bg-neutral-900 dark:bg-neutral-200 text-white dark:text-neutral-900 border-neutral-700 dark:border-neutral-300":"bg-neutral-100 dark:bg-neutral-900 text-neutral-700 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700 hover:bg-neutral-200 dark:hover:bg-neutral-900")))&&o(Xe,"class",zt),(!Fe||xe[0]&8&&Ut!==(Ut="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border transition-colors "+(oe[3]==="votes"?"bg-neutral-900 dark:bg-neutral-200 text-white dark:text-neutral-900 border-neutral-700 dark:border-neutral-300":"bg-neutral-100 dark:bg-neutral-900 text-neutral-700 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700 hover:bg-neutral-200 dark:hover:bg-neutral-900")))&&o(dt,"class",Ut),(!Fe||xe[0]&8&&jt!==(jt="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border transition-colors "+(oe[3]==="type"?"bg-neutral-900 dark:bg-neutral-200 text-white dark:text-neutral-900 border-neutral-700 dark:border-neutral-300":"bg-neutral-100 dark:bg-neutral-900 text-neutral-700 dark:text-neutral-300 border-neutral-200 dark:border-neutral-700 hover:bg-neutral-200 dark:hover:bg-neutral-900")))&&o(ht,"class",jt),xe[0]&16&&(pt.checked=oe[4]),Pt===(Pt=Cr(oe))&&qe?qe.p(oe,xe):(qe&&qe.d(1),qe=Pt&&Pt(oe),qe&&(qe.c(),qe.m(Et,null)));let _t=Ze;Ze=Sr(oe),Ze===_t?vt[Ze].p(oe,xe):(We(),ce(vt[_t],1,1,()=>{vt[_t]=null}),Ye(),et=vt[Ze],et?et.p(oe,xe):(et=vt[Ze]=Tr[Ze](oe),et.c()),le(et,1),et.m(Ct,null));let $t=tt;tt=Pr(oe),tt===$t?bt[tt].p(oe,xe):(We(),ce(bt[$t],1,1,()=>{bt[$t]=null}),Ye(),rt=bt[tt],rt?rt.p(oe,xe):(rt=bt[tt]=Ir[tt](oe),rt.c()),le(rt,1),rt.m(r,Ht)),oe[2].length>0&&oe[21].length===0?Ue?(Ue.p(oe,xe),xe[0]&2097156&&le(Ue,1)):(Ue=$l(oe),Ue.c(),le(Ue,1),Ue.m(r,null)):Ue&&(We(),ce(Ue,1,1,()=>{Ue=null}),Ye())},i(oe){Fe||(le(Be),le(ze),le(a),le(et),le(rt),le(Ue),Fe=!0)},o(oe){ce(Be),ce(ze),ce(a),ce(et),ce(rt),ce(Ue),Fe=!1},d(oe){oe&&(u(e),u(t)),Be&&Be.d(oe),ze&&ze.d(),~s&&gt[s].d(),qe&&qe.d(),vt[Ze].d(),bt[tt].d(),Ue&&Ue.d(),ar=!1,Ot(xr)}}}function Us(n){return!n||!Array.isArray(n)?[]:n.map(t=>{var r;return{...t,replies:((r=t.replies)==null?void 0:r.map(l=>({...l,parentCommentId:t.id})))||[]}})}function js(n){return!n||typeof n!="string"?!1:/^#([0-9A-Fa-f]{3}){1,2}$/.test(n)}async function Hs(n){try{const e=n.replace("#",""),t=await fetch(`https://www.thecolorapi.com/id?hex=${e}`);return t.ok?(await t.json()).name.value:null}catch(e){return console.error("Error fetching color name:",e),null}}function Bl(n,e,t=!0){if(!n||!Array.isArray(n))return[];const r=[...n];switch(e){case"newest":r.sort((s,a)=>new Date(a.createdAt)-new Date(s.createdAt));break;case"oldest":r.sort((s,a)=>new Date(s.createdAt)-new Date(a.createdAt));break;case"votes":r.sort((s,a)=>a.upvotes-a.downvotes-(s.upvotes-s.downvotes));break;case"type":const l={QUESTION:1,SUGGESTION:2,STORY:3};r.sort((s,a)=>{const i=(l[s.commentType]||99)-(l[a.commentType]||99);return i===0?a.upvotes-a.downvotes-(s.upvotes-s.downvotes):i});break}return t?r.map(l=>({...l,replies:l.replies&&l.replies.length>0?Bl(l.replies,e,t):[]})):r}function pr(n,e){return!n||!Array.isArray(n)?[]:e==="ALL"?n:n.filter(t=>{if(t.commentType===e){const r={...t};return r.replies&&r.replies.length>0&&(r.replies=pr(r.replies,e)),!0}if(t.replies&&t.replies.length>0){const r=pr(t.replies,e);if(r.length>0)return{...t},!0}return!1})}function Fs(n,e){if(!e||!n||!Array.isArray(n))return[];const t=new Set(e);function r(l){let s=[];for(const a of l)t.has(a.id)&&s.push(a),a.replies&&a.replies.length>0&&(s=[...s,...r(a.replies)]);return s}return r(n)}function qs(n,e,t){let r,l,s,a,i,d,f;Gt(n,mr,K=>t(29,i=K)),Gt(n,Nl,K=>t(7,f=K));const h=Vl({});Gt(n,h,K=>t(57,d=K));let{data:m}=e,b="",x,L=!1,_=null,k=[],C="QUESTION",O=!0,$=[],j,Y,z,F=!1,R="",B=[],H=null;function A(){var K,he;f===(x==null?void 0:x.author)&&(t(15,F=!0),t(16,R=((K=x==null?void 0:x.resolution)==null?void 0:K.description)||""),t(17,B=((he=x==null?void 0:x.resolution)==null?void 0:he.contributingComments)||[]))}async function M(){if(!R.trim()){t(18,H="Please provide a resolution description");return}try{t(18,H=null);const K={description:R,contributingCommentIds:B};await Wl(m.id,K),t(15,F=!1),await X(m.id)}catch(K){console.error("Error resolving post:",K),t(18,H=K.message||"Failed to resolve post")}}async function ie(){try{await Yl(m.id),await X(m.id)}catch(K){console.error("Error unresolving post:",K)}}function se(K){B.includes(K)?t(17,B=B.filter(he=>he!==K)):t(17,B=[...B,K])}function ae(K){const he=Array.from(K.target.files);he.length>0&&t(13,$=he)}async function X(K){t(12,O=!0);try{const he=await fetch(`https://backend-310608491068.europe-west1.run.app/api/posts/getForPostDetails/${K}`);if(!he.ok)throw new Error("Failed to fetch post details");const pe=await he.json(),Oe=Xl(pe);if(pe.mysteryObject&&pe.mysteryObject.color){const ye=pe.mysteryObject.color;if(js(ye)&&!pe.mysteryObject._colorName)try{const De=await Hs(ye);De&&(pe.mysteryObject._colorName=De)}catch(De){console.error("Error fetching color name:",De)}}let Le=null;return pe.solved&&pe.resolutionDescription&&(Le={description:pe.resolutionDescription,resolvedAt:pe.resolvedAt,contributingComments:pe.contributingCommentIds||[]}),Jl({id:pe.id,...pe,mediaFiles:Oe,mysteryObject:pe.mysteryObject?{...pe.mysteryObject,_colorName:pe.mysteryObject._colorName}:null,title:pe.title,description:pe.description,tags:pe.tags||[],author:pe.author,createdAt:pe.createdAt,updatedAt:pe.updatedAt,upvotes:pe.upvotes,downvotes:pe.downvotes,userUpvoted:pe.userUpvoted,userDownvoted:pe.userDownvoted,solved:pe.solved,resolution:Le,comments:[]}),t(12,O=!1),pe}catch(he){throw console.error("Error fetching post with media:",he),t(12,O=!1),he}}async function Z(K){var he,pe,Oe,Le;if(!(!K||!Array.isArray(K)||K.length===0))try{let ye={};const De=d;for(const Ve of K)if(!(!Ve||De[Ve]))try{const kt=await(await fetch(`https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${Ve}&format=json&languages=en&props=labels|descriptions&origin=*`)).json();if(kt.entities&&kt.entities[Ve]){const Xe=kt.entities[Ve];ye[Ve]={id:Ve,label:((pe=(he=Xe.labels)==null?void 0:he.en)==null?void 0:pe.value)||"Unknown label",description:((Le=(Oe=Xe.descriptions)==null?void 0:Oe.en)==null?void 0:Le.value)||"No description"}}}catch(ut){console.error(`Failed to fetch details for tag ${Ve}:`,ut)}h.update(Ve=>({...Ve,...ye}))}catch(ye){console.error("Failed to fetch tag details:",ye)}}vr(async()=>{try{await X(m.id),await U(),Y=async K=>{var he;((he=K.detail)==null?void 0:he.threadId)===m.id&&await U()},z=async K=>{var he;((he=K.detail)==null?void 0:he.postId)===m.id&&await X(m.id)},document.addEventListener("refreshComments",Y),document.addEventListener("refreshPost",z),x!=null&&x.tags&&x.tags.length>0&&await Z(x.tags)}catch(K){console.error("Error fetching thread data:",K)}}),Ll(()=>{Y&&document.removeEventListener("refreshComments",Y),z&&document.removeEventListener("refreshPost",z)});async function U(){try{const K=await fetch(`https://backend-310608491068.europe-west1.run.app/api/comments/get/${m.id}`,{headers:{...Tt()}});if(!K.ok)throw new Error("Failed to fetch comments");const he=await K.json(),pe=ye=>{const De=Kl(ye),Ve=ye.replies?ye.replies.map(ut=>pe(ut)):[];return{...ye,mediaFiles:De,replies:Ve}},Oe=he.map(ye=>pe(ye)),Le=Us(Oe);mr.update(ye=>ye.map(De=>De.id==m.id?{...De,comments:Le}:De))}catch(K){console.error("Error refreshing comments:",K)}}let w=async()=>{if(!b.trim()&&$.length===0){t(10,_="Please enter a comment or attach media");return}t(9,L=!0),t(10,_=null);try{const K={content:b,postId:m.id,parentCommentId:null,commentType:C},he=await fetch("https://backend-310608491068.europe-west1.run.app/api/comments/create",{method:"POST",headers:{"Content-Type":"application/json",...Tt()},body:JSON.stringify(K)});if(!he.ok){const Le=await he.text();throw new Error(`Failed to add comment: ${Le}`)}const Oe=(await he.json()).commentId;if($.length>0)for(let Le=0;Le<$.length;Le++){const ye=$[Le],De=new FormData;De.append("file",ye);try{(await fetch(`https://backend-310608491068.europe-west1.run.app/api/comments/${Oe}/upload-media`,{method:"POST",body:De})).ok||console.error(`Failed to upload file ${Le+1} for comment`)}catch(Ve){console.error(`Error uploading file ${Le+1} for comment:`,Ve)}}t(8,b=""),t(13,$=[]),j&&t(14,j.value="",j),await U()}catch(K){console.error("Error submitting comment:",K),t(10,_=K.message||"Failed to submit comment")}finally{t(9,L=!1)}},y="newest",T=!0,D="ALL";const N=[[]];function re(K){R=K,t(16,R)}const Q=K=>se(K.id),W=K=>se(K.id),V=()=>t(15,F=!1),J=()=>Zl(`/edit/${x.id}`),ue=()=>t(5,D="ALL"),ve=()=>t(5,D="QUESTION"),Ee=()=>t(5,D="SUGGESTION"),$e=()=>t(5,D="STORY"),we=()=>t(3,y="newest"),Ne=()=>t(3,y="oldest"),me=()=>t(3,y="votes"),S=()=>t(3,y="type");function ne(){T=this.checked,t(4,T)}const ge=()=>t(5,D="ALL");function ke(K){b=K,t(8,b)}function Pe(){C=this.__value,t(11,C)}function de(){C=this.__value,t(11,C)}function be(){C=this.__value,t(11,C)}function He(K){St[K?"unshift":"push"](()=>{j=K,t(14,j)})}const Re=()=>j==null?void 0:j.click(),je=K=>{t(13,$=$.filter((he,pe)=>pe!==K))},nt=()=>t(5,D="ALL");return n.$$set=K=>{"data"in K&&t(0,m=K.data)},n.$$.update=()=>{var K;if(n.$$.dirty[0]&128,n.$$.dirty[0]&536870913){const he=i.find(pe=>pe.id==m.id);t(12,O=!he),t(1,x=he)}n.$$.dirty[0]&2&&(x!=null&&x.comments?t(2,k=x.comments):t(2,k=[])),n.$$.dirty[0]&2&&x!=null&&x.tags&&x.tags.length>0&&Z(x.tags),n.$$.dirty[0]&60&&t(21,r=pr(Bl(k,y,T),D)),n.$$.dirty[0]&4&&t(6,l=k.reduce((he,pe)=>(he[pe.commentType]=(he[pe.commentType]||0)+1,pe.replies&&pe.replies.length>0&&pe.replies.forEach(Oe=>{he[Oe.commentType]=(he[Oe.commentType]||0)+1}),he),{QUESTION:0,SUGGESTION:0,STORY:0})),n.$$.dirty[0]&64&&t(20,s=(l.QUESTION||0)+(l.SUGGESTION||0)+(l.STORY||0)),n.$$.dirty[0]&6&&t(19,a=(K=x==null?void 0:x.resolution)!=null&&K.contributingComments?Fs(k,x.resolution.contributingComments):[])},[m,x,k,y,T,D,l,f,b,L,_,C,O,$,j,F,R,B,H,a,s,r,h,A,M,ie,se,ae,w,i,re,Q,W,V,J,ue,ve,Ee,$e,we,Ne,me,S,ne,ge,ke,Pe,N,de,be,He,Re,je,nt]}class ca extends br{constructor(e){super(),_r(this,e,qs,zs,gr,{data:0},null,[-1,-1,-1])}}export{ca as component,ua as universal};
