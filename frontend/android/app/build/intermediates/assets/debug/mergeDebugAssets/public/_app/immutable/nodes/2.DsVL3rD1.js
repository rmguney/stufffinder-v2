import{s as O,y as k,i as v,f as c,E as P,k as S,x as C,e as m,c as p,B as E,C as d,n as $,a as U,b,g as q,h as y}from"../chunks/CEgPK7Kn.js";import{S as L,i as T,t as h,g as V,e as M,b as g,c as B,a as F,m as H,d as N}from"../chunks/D5iEvBOg.js";/* empty css                */import{e as w}from"../chunks/pqZsTTMp.js";import{P as z}from"../chunks/DujqpIWG.js";import{t as G,i as J,a as K}from"../chunks/CmYgl3nr.js";function j(o,t,n){const s=o.slice();return s[1]=t[n],s}function D(o){let t,n="<p>No posts found. Check back later!</p> ";return{c(){t=m("div"),t.innerHTML=n,this.h()},l(s){t=p(s,"DIV",{class:!0,"data-svelte-h":!0}),E(t)!=="svelte-1e90l36"&&(t.innerHTML=n),this.h()},h(){d(t,"class","w-full text-center py-8")},m(s,l){v(s,t,l)},p:$,d(s){s&&c(t)}}}function I(o){let t,n,s,l,f,i;return s=new z({props:{id:o[1].id,title:o[1].title,description:" ",tags:o[1].tags||[],imageSrc:o[1].mysteryObjectImage?`data:image/png;base64,${o[1].mysteryObjectImage}`:"",mediaFiles:o[1].mediaFiles||[],postedBy:o[1].author,createdAt:o[1].createdAt,updatedAt:o[1].updatedAt,upvotes:o[1].upvotes||0,downvotes:o[1].downvotes||0,userUpvoted:o[1].userUpvoted||!1,userDownvoted:o[1].userDownvoted||!1,solved:o[1].solved,mysteryObject:o[1].mysteryObject||null,variant:"thumb"}}),{c(){t=m("div"),n=m("a"),B(s.$$.fragment),f=U(),this.h()},l(e){t=p(e,"DIV",{class:!0});var r=b(t);n=p(r,"A",{href:!0});var a=b(n);F(s.$$.fragment,a),a.forEach(c),f=q(r),r.forEach(c),this.h()},h(){d(n,"href",l=`/thread/${o[1].id}`),d(t,"class","w-full lg:w-[calc(33.333%-1rem)]")},m(e,r){v(e,t,r),y(t,n),H(s,n,null),y(t,f),i=!0},p(e,r){const a={};r&1&&(a.id=e[1].id),r&1&&(a.title=e[1].title),r&1&&(a.tags=e[1].tags||[]),r&1&&(a.imageSrc=e[1].mysteryObjectImage?`data:image/png;base64,${e[1].mysteryObjectImage}`:""),r&1&&(a.mediaFiles=e[1].mediaFiles||[]),r&1&&(a.postedBy=e[1].author),r&1&&(a.createdAt=e[1].createdAt),r&1&&(a.updatedAt=e[1].updatedAt),r&1&&(a.upvotes=e[1].upvotes||0),r&1&&(a.downvotes=e[1].downvotes||0),r&1&&(a.userUpvoted=e[1].userUpvoted||!1),r&1&&(a.userDownvoted=e[1].userDownvoted||!1),r&1&&(a.solved=e[1].solved),r&1&&(a.mysteryObject=e[1].mysteryObject||null),s.$set(a),(!i||r&1&&l!==(l=`/thread/${e[1].id}`))&&d(n,"href",l)},i(e){i||(h(s.$$.fragment,e),i=!0)},o(e){g(s.$$.fragment,e),i=!1},d(e){e&&c(t),N(s)}}}function Q(o){let t,n,s=w(o[0].slice().sort(A)),l=[];for(let e=0;e<s.length;e+=1)l[e]=I(j(o,s,e));const f=e=>g(l[e],1,1,()=>{l[e]=null});let i=null;return s.length||(i=D()),{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=k(),i&&i.c()},l(e){for(let r=0;r<l.length;r+=1)l[r].l(e);t=k(),i&&i.l(e)},m(e,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,r);v(e,t,r),i&&i.m(e,r),n=!0},p(e,[r]){if(r&1){s=w(e[0].slice().sort(A));let a;for(a=0;a<s.length;a+=1){const u=j(e,s,a);l[a]?(l[a].p(u,r),h(l[a],1)):(l[a]=I(u),l[a].c(),h(l[a],1),l[a].m(t.parentNode,t))}for(V(),a=s.length;a<l.length;a+=1)f(a);M(),!s.length&&i?i.p(e,r):s.length?i&&(i.d(1),i=null):(i=D(),i.c(),i.m(t.parentNode,t))}},i(e){if(!n){for(let r=0;r<s.length;r+=1)h(l[r]);n=!0}},o(e){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)g(l[r]);n=!1},d(e){e&&c(t),P(l,e),i&&i.d(e)}}}const A=(o,t)=>t.id-o.id;function R(o,t,n){let s;return S(o,G,l=>n(0,s=l)),C(async function(){console.log("Thread data sample:",s.length>0?s[0]:"No threads")}),[s]}class W extends L{constructor(t){super(),T(this,t,R,Q,O,{})}}function X(o){let t,n,s;return n=new W({}),{c(){t=m("div"),B(n.$$.fragment),this.h()},l(l){t=p(l,"DIV",{class:!0});var f=b(t);F(n.$$.fragment,f),f.forEach(c),this.h()},h(){d(t,"class","flex flex-col lg:flex-wrap lg:flex-row justify-center gap-4 lg:gap-6")},m(l,f){v(l,t,f),H(n,t,null),s=!0},i(l){s||(h(n.$$.fragment,l),s=!0)},o(l){g(n.$$.fragment,l),s=!1},d(l){l&&c(t),N(n)}}}function Y(o){let t,n='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-rose-900"></div>';return{c(){t=m("div"),t.innerHTML=n,this.h()},l(s){t=p(s,"DIV",{class:!0,"data-svelte-h":!0}),E(t)!=="svelte-yqlfbh"&&(t.innerHTML=n),this.h()},h(){d(t,"class","flex justify-center items-center py-16")},m(s,l){v(s,t,l)},i:$,o:$,d(s){s&&c(t)}}}function Z(o){let t,n,s,l,f;const i=[Y,X],e=[];function r(a,u){return a[0]?0:1}return s=r(o),l=e[s]=i[s](o),{c(){t=m("div"),n=m("div"),l.c(),this.h()},l(a){t=p(a,"DIV",{class:!0});var u=b(t);n=p(u,"DIV",{class:!0});var _=b(n);l.l(_),_.forEach(c),u.forEach(c),this.h()},h(){d(n,"class","w-full lg:w-2/3"),d(t,"class","flex flex-col items-center h-full min-h-screen text-text bg-change dark:bg-dark shifting p-4 lg:py-8")},m(a,u){v(a,t,u),y(t,n),e[s].m(n,null),f=!0},p(a,[u]){let _=s;s=r(a),s!==_&&(V(),g(e[_],1,1,()=>{e[_]=null}),M(),l=e[s],l||(l=e[s]=i[s](a),l.c()),h(l,1),l.m(n,null))},i(a){f||(h(l),f=!0)},o(a){g(l),f=!1},d(a){a&&c(t),e[s].d()}}}function x(o,t,n){let s;return S(o,K,l=>n(0,s=l)),C(()=>{J()}),[s]}class ne extends L{constructor(t){super(),T(this,t,x,Z,O,{})}}export{ne as component};
