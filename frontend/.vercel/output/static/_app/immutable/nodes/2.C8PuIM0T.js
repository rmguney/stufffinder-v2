import{s as O,q as k,i as v,f,r as q,k as S,D as L,e as p,c as m,p as T,l as d,n as $,a as B,b,g as z,h as y}from"../chunks/BgXtprSQ.js";import{S as V,i as C,t as h,g as E,f as M,b as g,c as H,a as N,m as P,d as U}from"../chunks/1qaseQuG.js";import{e as w}from"../chunks/Cw2352T2.js";import{P as F}from"../chunks/CDF5JEGi.js";import{t as G,i as J,a as K}from"../chunks/DqEw4LiL.js";function D(o,t,n){const s=o.slice();return s[1]=t[n],s}function j(o){let t,n="<p>No posts found. Check back later!</p> ";return{c(){t=p("div"),t.innerHTML=n,this.h()},l(s){t=m(s,"DIV",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-1e90l36"&&(t.innerHTML=n),this.h()},h(){d(t,"class","w-full text-center py-8")},m(s,l){v(s,t,l)},p:$,d(s){s&&f(t)}}}function I(o){let t,n,s,l,c,i;return s=new F({props:{id:o[1].id,title:o[1].title,description:" ",tags:o[1].tags||[],imageSrc:o[1].mysteryObjectImage?`data:image/png;base64,${o[1].mysteryObjectImage}`:"",postedBy:o[1].author,createdAt:o[1].createdAt,updatedAt:o[1].updatedAt,upvotes:o[1].upvotes||0,downvotes:o[1].downvotes||0,userUpvoted:o[1].userUpvoted||!1,userDownvoted:o[1].userDownvoted||!1,solved:o[1].solved,mysteryObject:o[1].mysteryObject||null,variant:"thumb"}}),{c(){t=p("div"),n=p("a"),H(s.$$.fragment),c=B(),this.h()},l(e){t=m(e,"DIV",{class:!0});var a=b(t);n=m(a,"A",{href:!0});var r=b(n);N(s.$$.fragment,r),r.forEach(f),c=z(a),a.forEach(f),this.h()},h(){d(n,"href",l=`/thread/${o[1].id}`),d(t,"class","w-full lg:w-[calc(33.333%-1rem)]")},m(e,a){v(e,t,a),y(t,n),P(s,n,null),y(t,c),i=!0},p(e,a){const r={};a&1&&(r.id=e[1].id),a&1&&(r.title=e[1].title),a&1&&(r.tags=e[1].tags||[]),a&1&&(r.imageSrc=e[1].mysteryObjectImage?`data:image/png;base64,${e[1].mysteryObjectImage}`:""),a&1&&(r.postedBy=e[1].author),a&1&&(r.createdAt=e[1].createdAt),a&1&&(r.updatedAt=e[1].updatedAt),a&1&&(r.upvotes=e[1].upvotes||0),a&1&&(r.downvotes=e[1].downvotes||0),a&1&&(r.userUpvoted=e[1].userUpvoted||!1),a&1&&(r.userDownvoted=e[1].userDownvoted||!1),a&1&&(r.solved=e[1].solved),a&1&&(r.mysteryObject=e[1].mysteryObject||null),s.$set(r),(!i||a&1&&l!==(l=`/thread/${e[1].id}`))&&d(n,"href",l)},i(e){i||(h(s.$$.fragment,e),i=!0)},o(e){g(s.$$.fragment,e),i=!1},d(e){e&&f(t),U(s)}}}function Q(o){let t,n,s=w(o[0].slice().sort(A)),l=[];for(let e=0;e<s.length;e+=1)l[e]=I(D(o,s,e));const c=e=>g(l[e],1,1,()=>{l[e]=null});let i=null;return s.length||(i=j()),{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=k(),i&&i.c()},l(e){for(let a=0;a<l.length;a+=1)l[a].l(e);t=k(),i&&i.l(e)},m(e,a){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,a);v(e,t,a),i&&i.m(e,a),n=!0},p(e,[a]){if(a&1){s=w(e[0].slice().sort(A));let r;for(r=0;r<s.length;r+=1){const u=D(e,s,r);l[r]?(l[r].p(u,a),h(l[r],1)):(l[r]=I(u),l[r].c(),h(l[r],1),l[r].m(t.parentNode,t))}for(E(),r=s.length;r<l.length;r+=1)c(r);M(),!s.length&&i?i.p(e,a):s.length?i&&(i.d(1),i=null):(i=j(),i.c(),i.m(t.parentNode,t))}},i(e){if(!n){for(let a=0;a<s.length;a+=1)h(l[a]);n=!0}},o(e){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)g(l[a]);n=!1},d(e){e&&f(t),q(l,e),i&&i.d(e)}}}const A=(o,t)=>t.id-o.id;function R(o,t,n){let s;return S(o,G,l=>n(0,s=l)),L(async function(){console.log("Thread data sample:",s.length>0?s[0]:"No threads")}),[s]}class W extends V{constructor(t){super(),C(this,t,R,Q,O,{})}}function X(o){let t,n,s;return n=new W({}),{c(){t=p("div"),H(n.$$.fragment),this.h()},l(l){t=m(l,"DIV",{class:!0});var c=b(t);N(n.$$.fragment,c),c.forEach(f),this.h()},h(){d(t,"class","flex flex-col lg:flex-wrap lg:flex-row justify-center gap-4 lg:gap-6")},m(l,c){v(l,t,c),P(n,t,null),s=!0},i(l){s||(h(n.$$.fragment,l),s=!0)},o(l){g(n.$$.fragment,l),s=!1},d(l){l&&f(t),U(n)}}}function Y(o){let t,n='<div class="animate-spin rounded-full h-12 w-12 border-b-2 border-rose-900"></div>';return{c(){t=p("div"),t.innerHTML=n,this.h()},l(s){t=m(s,"DIV",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-yqlfbh"&&(t.innerHTML=n),this.h()},h(){d(t,"class","flex justify-center items-center py-16")},m(s,l){v(s,t,l)},i:$,o:$,d(s){s&&f(t)}}}function Z(o){let t,n,s,l,c;const i=[Y,X],e=[];function a(r,u){return r[0]?0:1}return s=a(o),l=e[s]=i[s](o),{c(){t=p("div"),n=p("div"),l.c(),this.h()},l(r){t=m(r,"DIV",{class:!0});var u=b(t);n=m(u,"DIV",{class:!0});var _=b(n);l.l(_),_.forEach(f),u.forEach(f),this.h()},h(){d(n,"class","w-full lg:w-2/3"),d(t,"class","flex flex-col items-center h-full min-h-screen text-text bg-change dark:bg-dark shifting p-4 lg:py-8")},m(r,u){v(r,t,u),y(t,n),e[s].m(n,null),c=!0},p(r,[u]){let _=s;s=a(r),s!==_&&(E(),g(e[_],1,1,()=>{e[_]=null}),M(),l=e[s],l||(l=e[s]=i[s](r),l.c()),h(l,1),l.m(n,null))},i(r){c||(h(l),c=!0)},o(r){g(l),c=!1},d(r){r&&f(t),e[s].d()}}}function x(o,t,n){let s;return S(o,K,l=>n(0,s=l)),L(()=>{J()}),[s]}class ae extends V{constructor(t){super(),C(this,t,x,Z,O,{})}}export{ae as component};
