// Badge definitions with names, descriptions, and color schemes
export const badgeDefinitions = [
  {
    id: "registered_user",
    name: "One of Us",
    description: "Successfully joined the community",
    color: "slate",
    icon: "M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
  },
  {
    id: "moderator",
    name: "Moderator",
    description: "Has administrative privileges",
    color: "rose",
    icon: "M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"
  },
  {
    id: "first_post",
    name: "Baby Steps",
    description: "Created their first post",
    color: "blue",
    icon: "M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
  },
  {
    id: "first_comment",
    name: "I Have Things to Say",
    description: "Left their first comment",
    color: "emerald",
    icon: "M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
  },
  {
    id: "first_resolution",
    name: "Problem Solver",
    description: "Resolved their first post",
    color: "amber",
    icon: "M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
  },
  {
    id: "posts_5",
    name: "Content Creator",
    description: "Published 5 posts",
    color: "blue",
    icon: "M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
  },
  {
    id: "comments_5",
    name: "Engaged Commenter",
    description: "Left 5 comments",
    color: "emerald",
    icon: "M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"
  },
  {
    id: "resolutions_5",
    name: "Veteran Solver",
    description: "Resolved 5 posts",
    color: "amber",
    icon: "M13 10V3L4 14h7v7l9-11h-7z"
  },
  {
    id: "posts_10",
    name: "Dedicated Creator",
    description: "Published 10 posts",
    color: "indigo",
    icon: "M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"
  },
  {
    id: "comments_10",
    name: "Community Voice",
    description: "Left 10 comments",
    color: "teal",
    icon: "M8 12h.01M12 12h.01M16 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
  },
  {
    id: "resolutions_10",
    name: "Expert Problem Solver",
    description: "Resolved 10 posts",
    color: "yellow",
    icon: "M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"
  },
  {
    id: "first_following",
    name: "Connecting People",
    description: "Followed your first user",
    color: "purple",
    icon: "M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"
  },
  {
    id: "following_5",
    name: "Network Builder",
    description: "Following 5 users",
    color: "purple",
    icon: "M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"
  },
  {
    id: "following_10",
    name: "Community Networker",
    description: "Following 10 users",
    color: "fuchsia",
    icon: "M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"
  },
  {
    id: "followers_5",
    name: "Rising Star",
    description: "Gained 5 followers",
    color: "cyan",
    icon: "M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"
  },
  {
    id: "followers_10",
    name: "Community Influencer",
    description: "Gained 10 followers",
    color: "cyan",
    icon: "M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"
  },
  {
    id: "profile_location",
    name: "Kng in the Castle",
    description: "Added location to your profile",
    color: "green",
    icon: "M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z M15 11a3 3 0 11-6 0 3 3 0 016 0z"
  },
  {
    id: "profile_bio",
    name: "Storyteller",
    description: "Added a bio to your profile",
    color: "orange",
    icon: "M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"
  },
  {
    id: "profile_picture",
    name: "Looking Good",
    description: "Uploaded a profile picture",
    color: "pink",
    icon: "M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"
  }
];

/**
 * Get badge color classes for styling based on the badge color
 * @param {string} color - The base color name
 * @returns {object} CSS classes for badge styling
 */
export function getBadgeClasses(color) {
  const colorClasses = {
    slate: {
      bg: "bg-slate-100 dark:bg-slate-900/30",
      text: "text-slate-800 dark:text-slate-300",
      border: "border-slate-200 dark:border-slate-800/50",
      icon: "text-slate-600 dark:text-slate-400"
    },
    blue: {
      bg: "bg-blue-100 dark:bg-blue-900/30",
      text: "text-blue-800 dark:text-blue-300",
      border: "border-blue-200 dark:border-blue-800/50",
      icon: "text-blue-600 dark:text-blue-400"
    },
    emerald: {
      bg: "bg-emerald-100 dark:bg-emerald-900/30",
      text: "text-emerald-800 dark:text-emerald-300",
      border: "border-emerald-200 dark:border-emerald-800/50",
      icon: "text-emerald-600 dark:text-emerald-400"
    },
    amber: {
      bg: "bg-amber-100 dark:bg-amber-900/30",
      text: "text-amber-800 dark:text-amber-300",
      border: "border-amber-200 dark:border-amber-800/50",
      icon: "text-amber-600 dark:text-amber-400"
    },
    rose: {
      bg: "bg-rose-100 dark:bg-rose-900/30",
      text: "text-rose-800 dark:text-rose-300",
      border: "border-rose-200 dark:border-rose-800/50",
      icon: "text-rose-600 dark:text-rose-400"
    },
    indigo: {
      bg: "bg-indigo-100 dark:bg-indigo-900/30",
      text: "text-indigo-800 dark:text-indigo-300",
      border: "border-indigo-200 dark:border-indigo-800/50",
      icon: "text-indigo-600 dark:text-indigo-400"
    },
    teal: {
      bg: "bg-teal-100 dark:bg-teal-900/30",
      text: "text-teal-800 dark:text-teal-300",
      border: "border-teal-200 dark:border-teal-800/50",
      icon: "text-teal-600 dark:text-teal-400"
    },
    yellow: {
      bg: "bg-yellow-100 dark:bg-yellow-900/30", 
      text: "text-yellow-800 dark:text-yellow-300",
      border: "border-yellow-200 dark:border-yellow-800/50",
      icon: "text-yellow-600 dark:text-yellow-400"
    },
    
    // New colors for new badges
    purple: {
      bg: "bg-purple-100 dark:bg-purple-900/30",
      text: "text-purple-800 dark:text-purple-300",
      border: "border-purple-200 dark:border-purple-800/50",
      icon: "text-purple-600 dark:text-purple-400"
    },
    fuchsia: {
      bg: "bg-fuchsia-100 dark:bg-fuchsia-900/30",
      text: "text-fuchsia-800 dark:text-fuchsia-300",
      border: "border-fuchsia-200 dark:border-fuchsia-800/50",
      icon: "text-fuchsia-600 dark:text-fuchsia-400"
    },
    cyan: {
      bg: "bg-cyan-100 dark:bg-cyan-900/30",
      text: "text-cyan-800 dark:text-cyan-300",
      border: "border-cyan-200 dark:border-cyan-800/50",
      icon: "text-cyan-600 dark:text-cyan-400"
    },
    green: {
      bg: "bg-green-100 dark:bg-green-900/30",
      text: "text-green-800 dark:text-green-300",
      border: "border-green-200 dark:border-green-800/50",
      icon: "text-green-600 dark:text-green-400"
    },
    orange: {
      bg: "bg-orange-100 dark:bg-orange-900/30",
      text: "text-orange-800 dark:text-orange-300",
      border: "border-orange-200 dark:border-orange-800/50",
      icon: "text-orange-600 dark:text-orange-400"
    },
    pink: {
      bg: "bg-pink-100 dark:bg-pink-900/30",
      text: "text-pink-800 dark:text-pink-300",
      border: "border-pink-200 dark:border-pink-800/50",
      icon: "text-pink-600 dark:text-pink-400"
    }
  };

  return colorClasses[color] || colorClasses.slate;
}

/**
 * Calculate badges for a user based on their profile data
 * @param {object} userData - User data including posts, comments, and role
 * @returns {array} Array of earned badge objects
 */
export function calculateUserBadges(userData) {
  const { 
    threads = [], 
    comments = [], 
    userRole = "USER",
    followingCount = 0,
    followerCount = 0,
    userBio = "",
    userImage = null,
    userCountries = []
  } = userData;
  
  // Filter to only solved threads (resolutions)
  const solvedThreads = threads.filter(thread => thread.solved);
  
  // Count posts, comments, and resolutions
  const postCount = threads.length;
  const commentCount = comments.length;
  const resolutionCount = solvedThreads.length;

  // Start with empty badges array
  const earnedBadges = [];

  // Add registered user badge (everyone gets this)
  earnedBadges.push(badgeDefinitions.find(badge => badge.id === "registered_user"));

  // Check for moderator badge
  if (userRole === "ADMIN" || userRole === "MODERATOR") {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "moderator"));
  }

  // First post badge
  if (postCount >= 1) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "first_post"));
  }

  // First comment badge
  if (commentCount >= 1) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "first_comment"));
  }

  // First resolution badge
  if (resolutionCount >= 1) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "first_resolution"));
  }

  // 5+ post badges
  if (postCount >= 5) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "posts_5"));
  }
  
  // 5+ comment badges
  if (commentCount >= 5) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "comments_5"));
  }
  
  // 5+ resolution badges
  if (resolutionCount >= 5) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "resolutions_5"));
  }

  // 10+ posts badge
  if (postCount >= 10) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "posts_10"));
  }
  
  // 10+ comments badge
  if (commentCount >= 10) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "comments_10"));
  }
  
  // 10+ resolutions badge
  if (resolutionCount >= 10) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "resolutions_10"));
  }
  
  // Following badges
  if (followingCount >= 1) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "first_following"));
  }
  
  if (followingCount >= 5) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "following_5"));
  }
  
  if (followingCount >= 10) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "following_10"));
  }
  
  // Follower badges
  if (followerCount >= 5) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "followers_5"));
  }
  
  if (followerCount >= 10) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "followers_10"));
  }
  
  // Profile completion badges
  if (userCountries && userCountries.length > 0) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "profile_location"));
  }
  
  if (userBio && userBio.trim().length > 0) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "profile_bio"));
  }
  
  if (userImage) {
    earnedBadges.push(badgeDefinitions.find(badge => badge.id === "profile_picture"));
  }

  return earnedBadges.filter(Boolean); // Remove any undefined badges
}
